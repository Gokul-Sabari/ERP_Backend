"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[3288,3692],{3288:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var l=a(30800),s=a(69060),n=a(39308),d=a(56480),r=a(43692),o=a(89e3),i=a(84436),c=a(82656),u=a(26773),v=a(4488),h=a(90048),m=a(77536),f=a(1908),x=a(82496);const p=()=>{var e,t,a,p;const j=JSON.parse(localStorage.getItem("user")),N={Id:"",EntryDate:(0,n.Q7)(),LocationDetails:"MILL",WorkDetails:"",StaffType:"",StaffCount:"",EntryBy:null===j||void 0===j?void 0:j.UserId},[b,y]=(0,s.useState)([]),[g,S]=(0,s.useState)([]),[C,D]=(0,s.useState)([]),[T,A]=(0,s.useState)(!1),[L,k]=(0,s.useState)(N),{contextObj:I}=(0,s.useContext)(m.a),[w,M]=(0,s.useState)({Fromdate:(0,n.Ir)(),Todate:(0,n.Q7)(),reqLocation:"MILL",dialog:!1});(0,s.useEffect)((()=>{y([]),D([]),S([]),(0,f.q)({address:"dataEntry/dataEntryAttendance?Fromdate=".concat(w.Fromdate,"&Todate=").concat(w.Todate,"&reqLocation=").concat(w.reqLocation)}).then((e=>{var t,a,l,s;null!==e&&void 0!==e&&e.success&&(y(null===e||void 0===e?void 0:e.data),D(null!==(t=null===e||void 0===e||null===(a=e.others)||void 0===a?void 0:a.StaffType)&&void 0!==t?t:[]),S(null!==(l=null===e||void 0===e||null===(s=e.others)||void 0===s?void 0:s.WorkDetails)&&void 0!==l?l:[]))})).catch((e=>console.error(e)))}),[w.Fromdate,w.Todate,w.reqLocation,T]);const E=()=>{M((e=>(0,l.c)((0,l.c)({},e),{},{dialog:!1}))),k(N)};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(r.c,{children:[(0,x.jsxs)("div",{className:"fa-16 fw-bold border-bottom d-flex justify-content-between align-items-center",children:[(0,x.jsx)("span",{className:"p-3",children:"Staff Attendance"}),(0,n.Qr)(null===I||void 0===I?void 0:I.Add_Rights,1)&&(0,x.jsx)(o.c,{variant:"outlined",onClick:()=>M((e=>(0,l.c)((0,l.c)({},e),{},{dialog:!0}))),className:"me-2",children:"Add Attendance"})]}),(0,x.jsxs)("div",{className:"d-flex flex-wrap p-2 px-3",children:[(0,x.jsxs)("div",{className:"d-flex flex-column p-1",children:[(0,x.jsx)("label",{className:"mb-1",children:"From"}),(0,x.jsx)("input",{type:"date",className:"cus-inpt w-auto",value:w.Fromdate,onChange:e=>M((t=>(0,l.c)((0,l.c)({},t),{},{Fromdate:e.target.value})))})]}),(0,x.jsxs)("div",{className:"d-flex flex-column p-1",children:[(0,x.jsx)("label",{className:"mb-1",children:"To"}),(0,x.jsx)("input",{type:"date",className:"cus-inpt w-auto",value:w.Todate,onChange:e=>M((t=>(0,l.c)((0,l.c)({},t),{},{Todate:e.target.value})))})]}),(0,x.jsxs)("div",{className:"d-flex flex-column p-1",children:[(0,x.jsx)("label",{className:"mb-1",children:"LOCATION"}),(0,x.jsxs)("select",{className:"cus-inpt w-auto",value:w.reqLocation,onChange:e=>M((t=>(0,l.c)((0,l.c)({},t),{},{reqLocation:e.target.value}))),children:[(0,x.jsx)("option",{value:"MILL",children:"MILL"}),(0,x.jsx)("option",{value:"GODOWN",children:"GODOWN"})]})]})]}),(0,x.jsx)(i.c,{children:(null===b||void 0===b?void 0:b.length)>0&&(0,x.jsx)("div",{className:"table-responsive",style:{maxHeight:"65dvh",overflow:"auto"},children:(0,x.jsxs)("table",{className:"table",children:[(0,x.jsxs)("thead",{children:[(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{className:"fa-14 border text-center"}),null===(e=b[0])||void 0===e||null===(t=e.Categories)||void 0===t?void 0:t.map(((e,t)=>{var a;return(0,x.jsx)("th",{className:"fa-14 border text-center",colSpan:null===e||void 0===e||null===(a=e.StaffTypes)||void 0===a?void 0:a.length,children:null===e||void 0===e?void 0:e.WorkDetails},t)})),(0,x.jsx)("th",{className:"fa-14 border text-center"})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{className:"fa-14 border text-center tble-hed-stick",children:"DATE"}),null===(a=b[0])||void 0===a||null===(p=a.Categories)||void 0===p?void 0:p.map((e=>{var t;return null===e||void 0===e||null===(t=e.StaffTypes)||void 0===t?void 0:t.map(((e,t)=>(0,x.jsx)("th",{className:"fa-14 border text-center",children:null===e||void 0===e?void 0:e.StaffType},t)))})),(0,x.jsx)("th",{className:"fa-14 border text-center",children:"TOTAL"})]})]}),(0,x.jsx)("tbody",{children:null===b||void 0===b?void 0:b.map(((e,t)=>{var a,s;return(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{className:"fa-13 border text-center",children:(0,n.uy)(null===e||void 0===e?void 0:e.EntryDate)}),null===e||void 0===e||null===(a=e.Categories)||void 0===a?void 0:a.map((e=>{var t;return null===e||void 0===e||null===(t=e.StaffTypes)||void 0===t?void 0:t.map(((e,t)=>{var a,s,d;return(0,x.jsx)("td",{className:"fa-13 border text-center p-0",onClick:null!==e&&void 0!==e&&null!==(a=e.StaffAttendance)&&void 0!==a&&a.Id?()=>{var t,a;k((0,l.c)((0,l.c)({},null===e||void 0===e?void 0:e.StaffAttendance),{},{EntryDate:null!==e&&void 0!==e&&null!==(t=e.StaffAttendance)&&void 0!==t&&t.EntryDate?(0,n.Q7)(null===e||void 0===e||null===(a=e.StaffAttendance)||void 0===a?void 0:a.EntryDate):""})),M((e=>(0,l.c)((0,l.c)({},e),{},{dialog:!0})))}:void 0,children:(0,x.jsx)("div",{className:"".concat(null!==e&&void 0!==e&&null!==(s=e.StaffAttendance)&&void 0!==s&&s.Id?"cellHover p-2":""),children:null===e||void 0===e||null===(d=e.StaffAttendance)||void 0===d?void 0:d.StaffCount})},t)}))})),(0,x.jsx)("td",{className:"fa-13 border text-center blue-text",children:null===e||void 0===e||null===(s=e.Categories)||void 0===s?void 0:s.reduce(((e,t)=>{var a;return e+(Number(null===t||void 0===t||null===(a=t.StaffTypes)||void 0===a?void 0:a.reduce(((e,t)=>{var a;return e+(Number(null===t||void 0===t||null===(a=t.StaffAttendance)||void 0===a?void 0:a.StaffCount)||0)}),0))||0)}),0)})]},t)}))})]})})})]}),(0,x.jsxs)(c.c,{open:w.dialog,onClose:E,fullWidth:!0,maxWidth:"sm",children:[(0,x.jsx)(u.c,{className:" bg-light",children:null!==L&&void 0!==L&&L.Id?"Modify Attendance":"Add Attendance"}),(0,x.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(0,f.q)({address:"dataEntry/dataEntryAttendance",method:L.Id?"PUT":"POST",bodyData:L}).then((e=>{e.success?(d.m4.success(e.message),E(),A(!T)):d.m4.error(e.message)})).catch((e=>console.error(e)))},children:[(0,x.jsx)(v.c,{children:(0,x.jsx)("div",{className:"table-responsive",children:(0,x.jsx)("table",{className:"table",children:(0,x.jsxs)("tbody",{children:[(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{className:"border-0",style:{verticalAlign:"middle"},children:"Location"}),(0,x.jsx)("td",{className:"border-0",children:(0,x.jsxs)("select",{value:null===L||void 0===L?void 0:L.LocationDetails,onChange:e=>k((t=>(0,l.c)((0,l.c)({},t),{},{LocationDetails:e.target.value}))),className:"cus-inpt",children:[(0,x.jsx)("option",{value:"MILL",children:"MILL"}),(0,x.jsx)("option",{value:"GODOWN",children:"GODOWN"})]})})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{className:"border-0",style:{verticalAlign:"middle"},children:"Date"}),(0,x.jsx)("td",{className:"border-0",children:(0,x.jsx)("input",{type:"date",value:null===L||void 0===L?void 0:L.EntryDate,required:!0,className:"cus-inpt",onChange:e=>k((t=>(0,l.c)((0,l.c)({},t),{},{EntryDate:e.target.value})))})})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{className:"border-0",style:{verticalAlign:"middle"},children:"Work Type"}),(0,x.jsx)("td",{className:"border-0",children:(0,x.jsx)("input",{value:null===L||void 0===L?void 0:L.WorkDetails,type:"search",list:"workDetails",required:!0,className:"cus-inpt",placeholder:"Type or Search Work Details",onChange:e=>k((t=>(0,l.c)((0,l.c)({},t),{},{WorkDetails:e.target.value})))})})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{className:"border-0",style:{verticalAlign:"middle"},children:"Staff Type"}),(0,x.jsx)("td",{className:"border-0",children:(0,x.jsx)("input",{value:null===L||void 0===L?void 0:L.StaffType,type:"search",list:"staffDetails",required:!0,className:"cus-inpt",placeholder:"Type or Search Staff Type",onChange:e=>k((t=>(0,l.c)((0,l.c)({},t),{},{StaffType:e.target.value})))})})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{className:"border-0",style:{verticalAlign:"middle"},children:"Staff's Count"}),(0,x.jsx)("td",{className:"border-0",children:(0,x.jsx)("input",{value:(0,n.aU)(null===L||void 0===L?void 0:L.StaffCount),className:"cus-inpt",onInput:n.Gk,required:!0,onChange:e=>k((t=>(0,l.c)((0,l.c)({},t),{},{StaffCount:e.target.value})))})})]})]})})})}),(0,x.jsxs)(h.c,{children:[(0,x.jsx)(o.c,{onClick:E,type:"button",children:"Cancel"}),(0,x.jsx)(o.c,{type:"submit",variant:"contained",children:"SUBMIT"})]})]})]}),(0,x.jsx)("datalist",{id:"staffDetails",children:null===C||void 0===C?void 0:C.map(((e,t)=>(0,x.jsx)("option",{value:e.StaffType},t)))}),(0,x.jsx)("datalist",{id:"workDetails",children:null===g||void 0===g?void 0:g.map(((e,t)=>(0,x.jsx)("option",{value:e.WorkDetails},t)))})]})}},84436:(e,t,a)=>{a.d(t,{c:()=>x});var l=a(45072),s=a(95656),n=a(69060),d=a(79736),r=a(21412),o=a(12556),i=a(49836),c=a(10099),u=a(33448);function v(e){return(0,u.cp)("MuiCardContent",e)}(0,c.c)("MuiCardContent",["root"]);var h=a(82496);const m=["className","component"],f=(0,o.cp)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),x=n.forwardRef((function(e,t){const a=(0,i.C)({props:e,name:"MuiCardContent"}),{className:n,component:o="div"}=a,c=(0,s.c)(a,m),u=(0,l.c)({},a,{component:o}),x=(e=>{const{classes:t}=e;return(0,r.c)({root:["root"]},v,t)})(u);return(0,h.jsx)(f,(0,l.c)({as:o,className:(0,d.c)(x.root,n),ownerState:u,ref:t},c))}))},43692:(e,t,a)=>{a.d(t,{c:()=>p});var l=a(45072),s=a(95656),n=a(69060),d=a(79736),r=a(21412),o=a(12556),i=a(49836),c=a(85624),u=a(10099),v=a(33448);function h(e){return(0,v.cp)("MuiCard",e)}(0,u.c)("MuiCard",["root"]);var m=a(82496);const f=["className","raised"],x=(0,o.cp)(c.c,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),p=n.forwardRef((function(e,t){const a=(0,i.C)({props:e,name:"MuiCard"}),{className:n,raised:o=!1}=a,c=(0,s.c)(a,f),u=(0,l.c)({},a,{raised:o}),v=(e=>{const{classes:t}=e;return(0,r.c)({root:["root"]},h,t)})(u);return(0,m.jsx)(x,(0,l.c)({className:(0,d.c)(v.root,n),elevation:o?8:void 0,ref:t,ownerState:u},c))}))}}]);
//# sourceMappingURL=3288.739fce21.chunk.js.map