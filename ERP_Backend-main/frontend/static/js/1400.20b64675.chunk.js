"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[1400],{31400:(e,l,d)=>{d.r(l),d.d(l,{default:()=>C});var a=d(30800),s=d(69060),t=d(89e3),o=d(11096),i=d(12572),r=d(15786),n=d(82656),c=d(26773),u=d(4488),v=d(90048),m=d(18256),_=d(29720),x=d(61584),h=d(44764),k=d(56480),j=(d(21680),d(11782)),N=d(60336),p=d(11040),T=d(43692),b=d(84436),D=d(39308),g=d(1908),I=d(82496);const f=e=>["bg-dark","bg-info","bg-warning","bg-success","bg-danger"][Number(e)],S=e=>{const[l,d]=e.split(":").map(Number);let a=l%12;a=a||12;const s=l<12?"AM":"PM",t=d<10?"0"+d:d;return"".concat(a<10?"0"+a:a,":").concat(t," ").concat(s)},W=e=>{const l=Math.floor(e/1e3),d=Math.floor(l/60),a=Math.floor(d/60),s=e=>e<10?"0".concat(e):e;return"".concat(s(a),":").concat(s(d%60),":").concat(s(l%60))};function P(e){const[l,d]=e.split(":").map(Number);return 6e4*(60*l+d)}function y(e){const l=new Date(e),d=l.getHours(),a=l.getMinutes();return(d<10?"0"+d:d)+":"+(a<10?"0"+a:a)}function E(e,l){const[d,a]=e.split(":").map(Number),[s,t]=l.split(":").map(Number);let o=d+s,i=a+t;i>=60&&(o+=Math.floor(i/60),i%=60);return(o<10?"0"+o:o)+":"+(i<10?"0"+i:i)}const C=()=>{var e,l,d,C,w,A,M;const V=localStorage.getItem("user"),L=JSON.parse(V),q={Work_Id:"",Project_Id:"",Sch_Id:"",Task_Levl_Id:"",Task_Id:"",AN_No:"",Emp_Id:null===L||void 0===L?void 0:L.UserId,Work_Done:"",Start_Time:"",End_Time:"",Work_Status:2,Work_Dt:(0,D.Q7)(),Det_string:[]},Q={Work_Id:"",Project_Id:1,Sch_Id:1,Task_Levl_Id:1,Task_Id:1,AN_No:0,Emp_Id:null===L||void 0===L?void 0:L.UserId,Work_Done:"",Start_Time:"12:00",End_Time:"14:00",Work_Status:3,Work_Dt:(0,D.Q7)()},[U,O]=(0,s.useState)([]),[H,B]=(0,s.useState)([]),[G,F]=(0,s.useState)({myTaskDate:(0,D.Q7)(),executedTaskDate:(0,D.Q7)()}),[Y,R]=(0,s.useState)(!1),[z,J]=(0,s.useState)("1"),[K,X]=(0,s.useState)(!1),[Z,$]=(0,s.useState)(!1),[ee,le]=(0,s.useState)(!1),[de,ae]=(0,s.useState)(!1),[se,te]=(0,s.useState)({}),[oe,ie]=(0,s.useState)(0),[re,ne]=(0,s.useState)(!1),[ce,ue]=(0,s.useState)(null),[ve,me]=(0,s.useState)(0),[_e,xe]=(0,s.useState)(!1),[he,ke]=(0,s.useState)(q),[je,Ne]=(0,s.useState)(Q),[pe,Te]=(0,s.useState)((0,a.c)((0,a.c)({},q),{},{Start_Time:"10:00",End_Time:"11:00"}));(0,s.useEffect)((()=>{(0,g.q)({address:"taskManagement/tasks/myTasks?Emp_Id=".concat(null===L||void 0===L?void 0:L.UserId,"&reqDate=").concat(G.myTaskDate)}).then((e=>{O(e.success?e.data:[])})).catch((e=>console.error(e)))}),[Y,G.myTaskDate,null===L||void 0===L?void 0:L.UserId]),(0,s.useEffect)((()=>{(0,g.q)({address:"taskManagement/task/work?Emp_Id=".concat(null===L||void 0===L?void 0:L.UserId,"&from=").concat(G.executedTaskDate,"&to=").concat(G.executedTaskDate)}).then((e=>{B(e.success?e.data:[])})).catch((e=>console.error(e)))}),[Y,G.executedTaskDate,null===L||void 0===L?void 0:L.UserId]),(0,s.useEffect)((()=>{(0,g.q)({address:"taskManagement/task/startTask?Emp_Id=".concat(null===L||void 0===L?void 0:L.UserId)}).then((e=>{if(e.success){var l,d;const a=e.data[0].Time?Number(e.data[0].Time):null,s=null!==e&&void 0!==e&&null!==(l=e.data[0])&&void 0!==l&&l.Task_Id?Number(null===e||void 0===e||null===(d=e.data[0])||void 0===d?void 0:d.Task_Id):0;ue(a),ie(s)}else ue(null)})).catch((e=>console.error(e)))}),[Y,null===L||void 0===L?void 0:L.UserId]),(0,s.useEffect)((()=>{const e=setInterval((()=>{if(ce){const e=(new Date).getTime()-parseInt(ce);me(e)}}),1e3);return()=>clearInterval(e)}),[ce]),(0,s.useEffect)((()=>{if(ce&&U.length>0){const e=U.find((e=>Number(e.Task_Levl_Id)===Number(oe)));te(e)}}),[ce,U,Y,oe]);const be=()=>{(0,g.q)({address:"taskManagement/task/startTask",method:"DELETE",bodyData:{Emp_Id:L.UserId,Mode:1}}).then((e=>{e.success?(k.m4.success(e.message),ue(null),xe(!1),me(0),te({})):k.m4.error(e.message)})).catch((e=>console.error(e)))},De=e=>{const l=(new Date).getTime()-parseInt(ce);return l&&e&&l<e?l/e*100:l&&e&&l>=e?100:0};function ge(e){let l="<DocumentElement>";for(let d of e)l+="<Data>",l+="<Task_Id>".concat(null!==d&&void 0!==d&&d.Task_Id?String(null===d||void 0===d?void 0:d.Task_Id):0,"</Task_Id>"),l+="<Param_Id>".concat(null!==d&&void 0!==d&&d.Param_Id?String(null===d||void 0===d?void 0:d.Param_Id):0,"</Param_Id>"),l+="<Default_Value>".concat(null!==d&&void 0!==d&&d.Default_Value?String(null===d||void 0===d?void 0:d.Default_Value):"","</Default_Value>"),l+="<Current_Value>".concat(null!==d&&void 0!==d&&d.Current_Value?String(null===d||void 0===d?void 0:d.Current_Value):"","</Current_Value>"),l+="</Data>";return l+="</DocumentElement>",l}return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(k.jd,{}),ce&&(0,I.jsxs)("div",{className:"cus-card rounded-2 shadow-none px-3 py-1 mb-3",children:[(0,I.jsx)("h5",{className:"mb-0 pt-2",children:"Running Task"}),(0,I.jsxs)("div",{className:"cus-card bg-light p-3 shadow-none rounded-1",children:[(0,I.jsx)("p",{className:"mb-0 fa-16 fw-bold pb-1 border-bottom",children:(0,I.jsx)("span",{className:"flex-grow-1",children:(null===se||void 0===se?void 0:se.Task_Name)||" No Active Task "})}),(0,I.jsxs)("div",{className:"row mt-2 flex-row-reverse",children:[(0,I.jsx)("div",{className:"col-md-6",children:(0,I.jsxs)("div",{className:"p-2 pb-0",children:[(0,I.jsxs)("p",{className:"fa-20 d-flex mb-1",children:[(0,I.jsx)("span",{className:"flex-grow-1",children:"Duration : "}),(0,I.jsx)("span",{className:"text-primary",children:W(ve)})]}),(0,I.jsxs)("p",{className:"mb-0 d-flex",children:[(0,I.jsx)("span",{className:"flex-grow-1",children:"Progress : "}),(null===(e=De(null!==se&&void 0!==se&&se.Sch_Period?P(null===se||void 0===se?void 0:se.Sch_Period):0))||void 0===e?void 0:e.toFixed(2))+" %"]}),(0,I.jsxs)("span",{className:"p-2 w-100",children:[(0,I.jsx)("div",{style:{backgroundColor:"#ddd"},className:"rounded-4 overflow-hidden",children:(0,I.jsx)("div",{style:{width:"".concat(De(null!==se&&void 0!==se&&se.Sch_Period?P(null===se||void 0===se?void 0:se.Sch_Period):0),"%"),backgroundColor:"#007bff",height:"14px"}})}),(0,I.jsxs)("p",{className:"mb-0 d-flex justify-content-between fa-12",children:[(0,I.jsx)("span",{children:"0%"}),(0,I.jsx)("span",{children:"100%"})]})]})]})}),(0,I.jsxs)("div",{className:"col-md-6 d-flex",children:[(0,I.jsxs)("div",{className:"p-2 flex-grow-1",children:[(0,I.jsxs)("p",{className:"fa-14 mt-1 mb-0 d-flex",children:[(0,I.jsx)("span",{className:" flex-grow-1",children:"Scheduled Time"}),(0,I.jsxs)("span",{children:[(null===se||void 0===se?void 0:se.Sch_Time)&&S(null===se||void 0===se?void 0:se.Sch_Time),"\xa0 - \xa0",(null===se||void 0===se?void 0:se.EN_Time)&&S(null===se||void 0===se?void 0:se.EN_Time)]})]}),(0,I.jsxs)("p",{className:"fa-14 mt-1 mb-0 d-flex",children:[(0,I.jsx)("span",{className:" flex-grow-1",children:"Total Hour"}),(0,I.jsxs)("span",{className:"text-primary",children:[null===se||void 0===se?void 0:se.Sch_Period," Hrs"]})]}),(0,I.jsxs)("p",{className:"fa-14 mt-1 mb-0 d-flex",children:[(0,I.jsx)("span",{className:" flex-grow-1",children:"Project"}),(0,I.jsxs)("span",{className:"text-primary",children:[null===se||void 0===se||null===(l=se.Project_Name)||void 0===l?void 0:l.slice(0,25),(null===se||void 0===se||null===(d=se.Project_Name)||void 0===d?void 0:d.length)>25&&"..."]})]}),(0,I.jsxs)("p",{className:"fa-14 mt-1 mb-0 d-flex",children:[(0,I.jsx)("span",{className:" flex-grow-1",children:"Project Head"}),(0,I.jsx)("span",{className:"text-primary",children:null===se||void 0===se?void 0:se.Project_Head_Name})]})]}),(0,I.jsx)("div",{className:" d-md-block vr",style:{display:"none"}})]})]})]}),(0,I.jsxs)("div",{className:"text-end mt-2 mb-1",children:[(0,I.jsx)(t.c,{onClick:be,color:"error",variant:"outlined",sx:{marginRight:"10px"},children:"cancel"}),(0,I.jsx)(t.c,{onClick:e=>{ke(q),$(!0)},color:"success",variant:"contained",children:"Save"})]})]}),(0,I.jsx)(T.c,{variant:"elevation",children:(0,I.jsxs)(b.c,{className:"p-1",children:[(0,I.jsxs)("div",{className:" d-lg-flex",children:[(0,I.jsxs)("div",{className:"flex-grow-1 p-2",children:[(0,I.jsx)(o.c,{title:"Assigned Task",className:"text-center text-decoration-underline"}),(0,I.jsx)(j.c,{plugins:[N.c,p.c],initialView:"timeGridDay",initialDate:new Date,events:U.map((e=>({title:null===e||void 0===e?void 0:e.Task_Name,start:G.myTaskDate+"T"+(null===e||void 0===e?void 0:e.Sch_Time),end:G.myTaskDate+"T"+(null===e||void 0===e?void 0:e.EN_Time),objectData:e}))),headerToolbar:{left:"prev next",center:"title",right:"timeGridDay, listDay"},slotDuration:"00:20:00",slotMinTime:"08:00:00",slotMaxTime:"22:00:00",showNonCurrentDates:!1,editable:!1,selectable:!0,selectMirror:!0,eventClick:e=>{if(ce||0!==ve)k.m4.warn("Complete running task");else{var l;const d=null===(l=e.event.extendedProps)||void 0===l?void 0:l.objectData;3!==Number(null===d||void 0===d?void 0:d.Work_Status)&&1===Number(null===d||void 0===d?void 0:d.Timer_Based)?(te(d),X(!0),ke({Work_Id:null===d||void 0===d?void 0:d.Work_Id,Project_Id:null===d||void 0===d?void 0:d.Project_Id,Sch_Id:null===d||void 0===d?void 0:d.Sch_Id,Task_Levl_Id:null===d||void 0===d?void 0:d.Task_Levl_Id,Task_Id:null===d||void 0===d?void 0:d.Task_Id,AN_No:null===d||void 0===d?void 0:d.AN_No,Emp_Id:null===L||void 0===L?void 0:L.UserId,Work_Done:null===d||void 0===d?void 0:d.Work_Done,Start_Time:null===d||void 0===d?void 0:d.Start_Time,End_Time:null===d||void 0===d?void 0:d.End_Time,Work_Status:null===d||void 0===d?void 0:d.Work_Status,Work_Dt:(0,D.Q7)(null===d||void 0===d?void 0:d.Work_Dt),Det_string:null===d||void 0===d?void 0:d.Param_Dts})):3!==Number(null===d||void 0===d?void 0:d.Work_Status)?(te(d),le(!0),Te({Work_Id:null!==d&&void 0!==d&&d.Work_Id?null===d||void 0===d?void 0:d.Work_Id:"",Project_Id:null!==d&&void 0!==d&&d.Project_Id?null===d||void 0===d?void 0:d.Project_Id:"",Sch_Id:null!==d&&void 0!==d&&d.Sch_Id?null===d||void 0===d?void 0:d.Sch_Id:"",Task_Levl_Id:null!==d&&void 0!==d&&d.Task_Levl_Id?null===d||void 0===d?void 0:d.Task_Levl_Id:"",Task_Id:null!==d&&void 0!==d&&d.Task_Id?null===d||void 0===d?void 0:d.Task_Id:"",AN_No:null!==d&&void 0!==d&&d.AN_No?null===d||void 0===d?void 0:d.AN_No:"",Emp_Id:null===L||void 0===L?void 0:L.UserId,Work_Done:null!==d&&void 0!==d&&d.Work_Done?null===d||void 0===d?void 0:d.Work_Done:"",Start_Time:null!==d&&void 0!==d&&d.Start_Time?null===d||void 0===d?void 0:d.Start_Time:"10:00",End_Time:null!==d&&void 0!==d&&d.End_Time?null===d||void 0===d?void 0:d.End_Time:"11:00",Work_Status:null!==d&&void 0!==d&&d.Work_Status?null===d||void 0===d?void 0:d.Work_Status:2,Work_Dt:null!==d&&void 0!==d&&d.Work_Dt?(0,D.Q7)(null===d||void 0===d?void 0:d.Work_Dt):(0,D.Q7)(),Det_string:null!==d&&void 0!==d&&d.Param_Dts?null===d||void 0===d?void 0:d.Param_Dts:[]})):k.m4.warn("This task is already completed")}},eventContent:e=>{const l=e.event.extendedProps.objectData,d=l.Work_Status?Number(l.Work_Status):0,a=[{color:"bg-warning",message:"New",text:"text-dark"},{color:"bg-warning",message:"New",text:"text-dark"},{color:"bg-primary",message:"on Progress",text:"text-white"},{color:"bg-success",message:"Completed",text:"text-white"}];return(0,I.jsx)("div",{style:{cursor:"pointer"},children:(0,I.jsxs)("p",{className:"mb-0",children:[(0,I.jsxs)("span",{children:[e.event.title," "]}),(0,I.jsxs)("span",{children:[S(null===l||void 0===l?void 0:l.Sch_Time)+" - "+S(null===l||void 0===l?void 0:l.EN_Time)," "]}),(0,I.jsx)("span",{className:"badge text-dark ".concat(a[d].color," ").concat(a[d].text," mx-1"),children:a[d].message})]})})},datesSet:e=>F((0,a.c)((0,a.c)({},G),{},{myTaskDate:(0,D.Q7)(e.endStr)})),height:1200})]}),(0,I.jsxs)("div",{className:"flex-grow-1 p-2",children:[(0,I.jsx)(o.c,{title:"Executed",className:"text-center text-decoration-underline"}),(0,I.jsx)(j.c,{plugins:[N.c,p.c],initialView:"timeGridDay",initialDate:G.executedTaskDate,events:H.map((e=>({title:null===e||void 0===e?void 0:e.Task_Name,start:G.executedTaskDate+"T"+(null===e||void 0===e?void 0:e.Start_Time),end:G.executedTaskDate+"T"+(null===e||void 0===e?void 0:e.End_Time),objectData:e}))),headerToolbar:{left:"prev next",center:"title",right:"timeGridDay, listWeek"},slotDuration:"00:20:00",slotMinTime:"08:00:00",slotMaxTime:"22:00:00",showNonCurrentDates:!1,editable:!1,selectable:!0,selectMirror:!0,datesSet:e=>F((0,a.c)((0,a.c)({},G),{},{executedTaskDate:(0,D.Q7)(e.endStr)})),eventClick:e=>{if(ce||0!==ve)k.m4.warn("Complete running task");else{var l;const d=null===(l=e.event.extendedProps)||void 0===l?void 0:l.objectData;(0,D.Q7)(null===d||void 0===d?void 0:d.Entry_Date)===(0,D.Q7)()?(ne(!0),0===Number(null===d||void 0===d?void 0:d.Timer_Based)?(te(d),le(!0),Te({Work_Id:null===d||void 0===d?void 0:d.Work_Id,Project_Id:null===d||void 0===d?void 0:d.Project_Id,Sch_Id:null===d||void 0===d?void 0:d.Sch_Id,Task_Levl_Id:null===d||void 0===d?void 0:d.Task_Levl_Id,Task_Id:null===d||void 0===d?void 0:d.Task_Id,AN_No:null===d||void 0===d?void 0:d.AN_No,Emp_Id:null===L||void 0===L?void 0:L.UserId,Work_Done:null===d||void 0===d?void 0:d.Work_Done,Start_Time:null!==d&&void 0!==d&&d.Start_Time?null===d||void 0===d?void 0:d.Start_Time:"10:00",End_Time:null!==d&&void 0!==d&&d.End_Time?null===d||void 0===d?void 0:d.End_Time:"11:00",Work_Status:null!==d&&void 0!==d&&d.Work_Status?null===d||void 0===d?void 0:d.Work_Status:2,Work_Dt:null!==d&&void 0!==d&&d.Work_Dt?(0,D.Q7)(null===d||void 0===d?void 0:d.Work_Dt):(0,D.Q7)(),Det_string:null!==d&&void 0!==d&&d.Param_Dts?null===d||void 0===d?void 0:d.Param_Dts:[]})):(te(d),$(!0),ke({Work_Id:null===d||void 0===d?void 0:d.Work_Id,Project_Id:null===d||void 0===d?void 0:d.Project_Id,Sch_Id:null===d||void 0===d?void 0:d.Sch_Id,Task_Levl_Id:null===d||void 0===d?void 0:d.Task_Levl_Id,Task_Id:null===d||void 0===d?void 0:d.Task_Id,AN_No:null===d||void 0===d?void 0:d.AN_No,Emp_Id:null===L||void 0===L?void 0:L.UserId,Work_Done:null===d||void 0===d?void 0:d.Work_Done,Start_Time:null!==d&&void 0!==d&&d.Start_Time?null===d||void 0===d?void 0:d.Start_Time:"10:00",End_Time:null!==d&&void 0!==d&&d.End_Time?null===d||void 0===d?void 0:d.End_Time:"11:00",Work_Status:null!==d&&void 0!==d&&d.Work_Status?null===d||void 0===d?void 0:d.Work_Status:2,Work_Dt:null!==d&&void 0!==d&&d.Work_Dt?(0,D.Q7)(null===d||void 0===d?void 0:d.Work_Dt):(0,D.Q7)(),Det_string:null!==d&&void 0!==d&&d.Param_Dts?null===d||void 0===d?void 0:d.Param_Dts:[]}))):k.m4.warn("You can only modify today works")}},height:1200})]})]}),(0,I.jsxs)("div",{className:"table-responsive mt-3",children:[(0,I.jsxs)("div",{className:"d-flex justify-content-between border align-items-center p-2 rounded-3 mb-3",onClick:()=>{Ne(Q),ae(!0)},children:[(0,I.jsxs)("span",{className:"ps-2",children:["Work Done At: ",new Date(null===G||void 0===G?void 0:G.executedTaskDate).toLocaleDateString("en-IN")]}),(0,I.jsx)("button",{className:"btn btn-primary fa-14",children:" Add Additional Work Details"})]}),(0,I.jsxs)("table",{className:"table mb-1",children:[(0,I.jsx)("thead",{children:(0,I.jsxs)("tr",{children:[(0,I.jsx)("th",{className:"fa-13 border",children:"SNo"}),(0,I.jsx)("th",{className:"fa-13 border",children:"Task"}),(0,I.jsx)("th",{className:"fa-13 border",children:"Timer Based"}),(0,I.jsx)("th",{className:"fa-13 border",children:"Start - End"}),(0,I.jsx)("th",{className:"fa-13 border",children:"Total Minutes"}),(0,I.jsx)("th",{className:"fa-13 border",children:"Status"}),(0,I.jsx)("th",{className:"fa-13 border",children:"Discription"})]})}),(0,I.jsx)("tbody",{children:H.map(((e,l)=>(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"fa-13 border",children:l+1}),(0,I.jsx)("td",{className:"fa-13 border",children:null===e||void 0===e?void 0:e.Task_Name}),(0,I.jsx)("td",{className:"fa-13 border text-center",children:(0,I.jsx)("span",{className:"badge rounded-4 px-3 fw-bold text-white ".concat(f(1===Number(null===e||void 0===e?void 0:e.Timer_Based)?3:1)),children:1===Number(null===e||void 0===e?void 0:e.Timer_Based)?"Yes":"No"})}),(0,I.jsxs)("td",{className:"fa-13 border text-center",children:[null===e||void 0===e?void 0:e.Start_Time," - ",null===e||void 0===e?void 0:e.End_Time]}),(0,I.jsx)("td",{className:"fa-13 border text-center",children:null===e||void 0===e?void 0:e.Tot_Minutes}),(0,I.jsx)("td",{className:"fa-13 border text-center",children:(0,I.jsx)("span",{className:"badge rounded-4 px-3 fw-bold text-white ".concat(f(null===e||void 0===e?void 0:e.Work_Status)),children:null===e||void 0===e?void 0:e.WorkStatus})}),(0,I.jsx)("td",{className:"fa-13 border",children:null===e||void 0===e?void 0:e.Work_Done})]},l)))})]})]}),(0,I.jsxs)(m.cp,{value:z,children:[(0,I.jsx)(i.c,{sx:{borderBottom:1,borderColor:"divider",display:"none"},children:(0,I.jsxs)(_.c,{indicatorColor:"secondary",textColor:"secondary",onChange:(e,l)=>J(l),"aria-label":"",children:[(0,I.jsx)(r.c,{sx:"1"===z?{backgroundColor:"#c6d7eb"}:{},label:"TODAY TASKS (".concat(U.length,")"),value:"1"}),(0,I.jsx)(r.c,{sx:"2"===z?{backgroundColor:"#c6d7eb"}:{},label:"EXECUTED (".concat(H.length,")"),value:"2"})]})}),(0,I.jsx)(x.c,{value:"1",sx:{p:0,pt:2}}),(0,I.jsx)(x.c,{value:"2",sx:{p:0,pt:2}})]})]})}),(0,I.jsxs)(n.c,{open:K,onClose:()=>{X(!1),te({})},children:[(0,I.jsxs)(c.c,{className:"fa-18",children:["Start Task",(0,I.jsxs)("span",{className:"text-primary fw-bold",children:[" ",null===se||void 0===se?void 0:se.Task_Name]})]}),(0,I.jsxs)(u.c,{sx:{minWidth:"330px"},children:[(0,I.jsxs)("div",{className:" pb-3",children:[(0,I.jsx)("p",{className:"mb-0 text-center",children:(0,I.jsx)(h.c,{sx:{fontSize:"50px"}})}),(0,I.jsx)("p",{className:"mb-0 text-center",children:"Allocated Time"}),(0,I.jsxs)("p",{className:"my-2 text-center text-primary",children:[null===se||void 0===se?void 0:se.Sch_Period," Hrs"]})]}),(0,I.jsxs)("p",{className:"fa-16  mt-1 mb-0 d-flex",children:[(0,I.jsx)("span",{className:" flex-grow-1",children:"Schedule"}),(0,I.jsxs)("span",{children:[(null===se||void 0===se?void 0:se.Sch_Time)&&S(null===se||void 0===se?void 0:se.Sch_Time),"\xa0-\xa0",(null===se||void 0===se?void 0:se.EN_Time)&&S(null===se||void 0===se?void 0:se.EN_Time)]})]}),(0,I.jsxs)("p",{className:"fa-16  mt-1 mb-0 d-flex",children:[(0,I.jsx)("span",{className:" flex-grow-1",children:"Project"}),(0,I.jsxs)("span",{children:[null===se||void 0===se||null===(C=se.Project_Name)||void 0===C?void 0:C.slice(0,25),(null===se||void 0===se||null===(w=se.Project_Name)||void 0===w?void 0:w.length)>25&&"..."]})]}),(0,I.jsxs)("p",{className:"fa-16  mt-1 mb-0 d-flex",children:[(0,I.jsx)("span",{className:" flex-grow-1",children:"Project Head"}),(0,I.jsx)("span",{children:null===se||void 0===se?void 0:se.Project_Head_Name})]}),(0,I.jsx)("div",{className:" text-center",children:(0,I.jsx)("button",{onClick:_e?be:()=>{(0,g.q)({address:"taskManagement/task/startTask",method:"POST",bodyData:{Emp_Id:L.UserId,Time:(new Date).getTime(),Task_Id:null===se||void 0===se?void 0:se.Task_Levl_Id,ForcePost:0}}).then((e=>{e.success?(k.m4.success(e.message),R(!Y),xe(!0),X(!1)):k.m4.error(e.message)})).catch((e=>console.error(e)))},className:"clock-btn cus-shadow",style:_e?{backgroundColor:"#D8BFD8"}:{backgroundColor:"#b5e6dd"},children:_e?"Stop":"Start"})})]}),(0,I.jsx)(v.c,{children:(0,I.jsx)(t.c,{onClick:()=>{X(!1),te({})},children:"close"})})]}),(0,I.jsxs)(n.c,{open:Z,onClose:()=>{$(!1),ke(q),ne(!1)},fullWidth:!0,maxWidth:"sm",children:[(0,I.jsx)(c.c,{children:"Save Work"}),(0,I.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(0,g.q)({address:"taskManagement/task/work",method:"POST",bodyData:{Mode:re?2:1,Work_Id:re?null===he||void 0===he?void 0:he.Work_Id:0,Project_Id:null===se||void 0===se?void 0:se.Project_Id,Sch_Id:null===se||void 0===se?void 0:se.Sch_Id,Task_Levl_Id:null===se||void 0===se?void 0:se.Task_Levl_Id,Task_Id:null===se||void 0===se?void 0:se.Task_Id,AN_No:null===se||void 0===se?void 0:se.AN_No,Emp_Id:null===L||void 0===L?void 0:L.UserId,Work_Done:null===he||void 0===he?void 0:he.Work_Done,Start_Time:re?he.Start_Time:y(ce),End_Time:re?he.End_Time:E(y(ce),W(ve)),Work_Status:null===he||void 0===he?void 0:he.Work_Status,Det_string:ge(null===he||void 0===he?void 0:he.Det_string)}}).then((e=>{e.success?(te({}),k.m4.success(e.message),$(!1),ne(!1),R(!Y),me(0),xe(!1),ue(null)):k.m4.error(e.message)})).catch((e=>console.error(e)))},children:[(0,I.jsxs)(u.c,{children:[(0,I.jsx)("label",{className:"my-2",children:"Work Status"}),(0,I.jsxs)("select",{className:"cus-inpt",value:he.Work_Status,required:!0,onChange:e=>ke((0,a.c)((0,a.c)({},he),{},{Work_Status:e.target.value})),children:[(0,I.jsx)("option",{value:2,children:"PENDING"}),(0,I.jsx)("option",{value:3,children:"COMPLETED"})]}),(0,I.jsx)("label",{className:"my-2",children:"Work Summary"}),(0,I.jsx)("textarea",{rows:"4",className:"cus-inpt",required:!0,value:he.Work_Done,onChange:e=>ke((0,a.c)((0,a.c)({},he),{},{Work_Done:e.target.value}))}),null===se||void 0===se||null===(A=se.Param_Dts)||void 0===A?void 0:A.map(((e,l)=>{var d,s;return(0,I.jsxs)("div",{children:[(0,I.jsx)("label",{className:"mt-2 mb-1",children:null===e||void 0===e?void 0:e.Paramet_Name}),(0,I.jsx)("input",{type:(null===e||void 0===e?void 0:e.Paramet_Data_Type)||"text",className:"cus-inpt",onChange:l=>((e,l)=>{const d=e.target.value;ke((e=>{var s;const t=null===e||void 0===e||null===(s=e.Det_string)||void 0===s?void 0:s.findIndex((e=>Number(e.Param_Id)===Number(l.Param_Id)));if(-1!==t){const s=[...e.Det_string];return s[t]=(0,a.c)((0,a.c)({},s[t]),{},{Current_Value:d,Param_Id:l.Param_Id,Default_Value:l.Default_Value,Task_Id:null===l||void 0===l?void 0:l.Task_Id}),(0,a.c)((0,a.c)({},e),{},{Det_string:s})}return(0,a.c)((0,a.c)({},e),{},{Det_string:[...e.Det_string,{Current_Value:d,Param_Id:l.Param_Id,Default_Value:l.Default_Value,Task_Id:null===se||void 0===se?void 0:se.Task_Id}]})}))})(l,e),value:(null===he||void 0===he||null===(d=he.Det_string)||void 0===d||null===(s=d.find((l=>Number(null===l||void 0===l?void 0:l.Param_Id)===Number(null===e||void 0===e?void 0:e.Param_Id))))||void 0===s?void 0:s.Current_Value)||"",placeholder:null===e||void 0===e?void 0:e.Paramet_Data_Type})]},l)}))]}),(0,I.jsxs)(v.c,{children:[(0,I.jsx)(t.c,{variant:"outlined",type:"button",onClick:()=>{$(!1),ke(q),ne(!1)},children:"close"}),(0,I.jsx)(t.c,{color:"success",type:"submit",variant:"contained",children:"Save"})]})]})]}),(0,I.jsxs)(n.c,{open:ee,maxWidth:"sm",fullWidth:!0,onClose:()=>{le(!1),Te(q),ne(!1)},children:[(0,I.jsx)(c.c,{children:"Save Task Progress"}),(0,I.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(0,g.q)({address:"taskManagement/task/work",method:"POST",bodyData:{Mode:re?2:1,Work_Id:re?null===pe||void 0===pe?void 0:pe.Work_Id:0,Project_Id:null===se||void 0===se?void 0:se.Project_Id,Sch_Id:null===se||void 0===se?void 0:se.Sch_Id,Task_Levl_Id:null===se||void 0===se?void 0:se.Task_Levl_Id,Task_Id:null===se||void 0===se?void 0:se.Task_Id,AN_No:null===se||void 0===se?void 0:se.AN_No,Emp_Id:null===L||void 0===L?void 0:L.UserId,Work_Dt:null===pe||void 0===pe?void 0:pe.Work_Dt,Work_Done:null===pe||void 0===pe?void 0:pe.Work_Done,Start_Time:null===pe||void 0===pe?void 0:pe.Start_Time,End_Time:null===pe||void 0===pe?void 0:pe.End_Time,Work_Status:null===pe||void 0===pe?void 0:pe.Work_Status,Det_string:ge(null===pe||void 0===pe?void 0:pe.Det_string)}}).then((e=>{e.success?(te({}),k.m4.success(e.message),le(!1),R(!Y),ne(!1),ue(null)):k.m4.error(e.message)})).catch((e=>console.error(e)))},children:[(0,I.jsx)(u.c,{className:"table-responsive",children:(0,I.jsx)("table",{className:"table",children:(0,I.jsxs)("tbody",{children:[(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"border-0 fa-14",style:{verticalAlign:"middle"},children:"Completed Date"}),(0,I.jsx)("td",{className:"border-0 fa-14",children:(0,I.jsx)("input",{type:"date",onChange:e=>Te((0,a.c)((0,a.c)({},pe),{},{Work_Dt:e.target.value})),value:(0,D.Q7)(null===pe||void 0===pe?void 0:pe.Work_Dt),className:"cus-inpt",required:!0})})]}),(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"border-0 fa-14",style:{verticalAlign:"middle"},children:"Start Time"}),(0,I.jsx)("td",{className:"border-0 fa-14",children:(0,I.jsx)("input",{type:"time",onChange:e=>Te((0,a.c)((0,a.c)({},pe),{},{Start_Time:e.target.value})),value:null===pe||void 0===pe?void 0:pe.Start_Time,className:"cus-inpt",required:!0})})]}),(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"border-0 fa-14",style:{verticalAlign:"middle"},children:"End Time"}),(0,I.jsx)("td",{className:"border-0 fa-14",children:(0,I.jsx)("input",{type:"time",min:null===pe||void 0===pe?void 0:pe.Start_Time,onChange:e=>Te((0,a.c)((0,a.c)({},pe),{},{End_Time:e.target.value})),value:null===pe||void 0===pe?void 0:pe.End_Time,required:!0,className:"cus-inpt"})})]}),(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"border-0 fa-14",style:{verticalAlign:"middle"},children:"Work Status"}),(0,I.jsx)("td",{className:"border-0 fa-14",children:(0,I.jsxs)("select",{className:"cus-inpt",value:null===pe||void 0===pe?void 0:pe.Work_Status,onChange:e=>Te((0,a.c)((0,a.c)({},pe),{},{Work_Status:e.target.value})),children:[(0,I.jsx)("option",{value:2,children:"PENDING"}),(0,I.jsx)("option",{value:3,children:"COMPLETED"})]})})]}),(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"border-0 fa-14 pt-3",children:"Work Summary"}),(0,I.jsx)("td",{className:"border-0 fa-14",children:(0,I.jsx)("textarea",{rows:"4",className:"cus-inpt",required:!0,value:null===pe||void 0===pe?void 0:pe.Work_Done,onChange:e=>Te((0,a.c)((0,a.c)({},pe),{},{Work_Done:e.target.value}))})})]}),null===se||void 0===se||null===(M=se.Param_Dts)||void 0===M?void 0:M.map(((e,l)=>{var d,s;return(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"border-0 fa-14 pt-3",children:null===e||void 0===e?void 0:e.Paramet_Name}),(0,I.jsx)("td",{className:"border-0 fa-14",children:(0,I.jsx)("input",{type:(null===e||void 0===e?void 0:e.Paramet_Data_Type)||"text",className:"cus-inpt",onChange:l=>((e,l)=>{const d=e.target.value;Te((e=>{var s;const t=null===e||void 0===e||null===(s=e.Det_string)||void 0===s?void 0:s.findIndex((e=>Number(e.Param_Id)===Number(l.Param_Id)));if(-1!==t){const s=[...e.Det_string];return s[t]=(0,a.c)((0,a.c)({},s[t]),{},{Current_Value:d,Param_Id:null===l||void 0===l?void 0:l.Param_Id,Default_Value:null===l||void 0===l?void 0:l.Default_Value,Task_Id:null===l||void 0===l?void 0:l.Task_Id}),(0,a.c)((0,a.c)({},e),{},{Det_string:s})}return(0,a.c)((0,a.c)({},e),{},{Det_string:[...e.Det_string,{Current_Value:d,Param_Id:null===l||void 0===l?void 0:l.Param_Id,Default_Value:null===l||void 0===l?void 0:l.Default_Value,Task_Id:null===l||void 0===l?void 0:l.Task_Id}]})}))})(l,e),value:(null===pe||void 0===pe||null===(d=pe.Det_string)||void 0===d||null===(s=d.find((l=>Number(null===l||void 0===l?void 0:l.Param_Id)===Number(null===e||void 0===e?void 0:e.Param_Id))))||void 0===s?void 0:s.Current_Value)||"",placeholder:null===e||void 0===e?void 0:e.Paramet_Data_Type})})]},l)}))]})})}),(0,I.jsxs)(v.c,{children:[(0,I.jsx)(t.c,{variant:"outlined",color:"error",type:"button",onClick:()=>{le(!1),Te(q),ne(!1)},children:"cancel"}),(0,I.jsx)(t.c,{variant:"contained",color:"success",type:"submit",children:"Save"})]})]})]}),(0,I.jsxs)(n.c,{open:de,maxWidth:"sm",fullWidth:!0,onClose:()=>ae(!1),children:[(0,I.jsx)(c.c,{children:"Additional Tasks"}),(0,I.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(0,g.q)({address:"taskManagement/task/work",method:"POST",bodyData:je}).then((e=>{e.success?(k.m4.success(e.message),ae(!1),R(!Y),ne(!1)):k.m4.error(e.message)})).catch((e=>console.error(e)))},children:[(0,I.jsx)(u.c,{className:"table-responsive",children:(0,I.jsx)("table",{className:"table",children:(0,I.jsxs)("tbody",{children:[(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"border-0 fa-14",style:{verticalAlign:"middle"},children:"Completed Date"}),(0,I.jsx)("td",{className:"border-0 fa-14",children:(0,I.jsx)("input",{type:"date",onChange:e=>Ne((0,a.c)((0,a.c)({},je),{},{Work_Dt:e.target.value})),value:(0,D.Q7)(null===je||void 0===je?void 0:je.Work_Dt),className:"cus-inpt",required:!0})})]}),(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"border-0 fa-14",style:{verticalAlign:"middle"},children:"Start Time"}),(0,I.jsx)("td",{className:"border-0 fa-14",children:(0,I.jsx)("input",{type:"time",onChange:e=>Ne((0,a.c)((0,a.c)({},je),{},{Start_Time:e.target.value})),value:null===je||void 0===je?void 0:je.Start_Time,className:"cus-inpt",required:!0})})]}),(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"border-0 fa-14",style:{verticalAlign:"middle"},children:"End Time"}),(0,I.jsx)("td",{className:"border-0 fa-14",children:(0,I.jsx)("input",{type:"time",min:null===je||void 0===je?void 0:je.Start_Time,onChange:e=>Ne((0,a.c)((0,a.c)({},je),{},{End_Time:e.target.value})),value:null===je||void 0===je?void 0:je.End_Time,required:!0,className:"cus-inpt"})})]}),(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"border-0 fa-14",style:{verticalAlign:"middle"},children:"Work Status"}),(0,I.jsx)("td",{className:"border-0 fa-14",children:(0,I.jsxs)("select",{className:"cus-inpt",value:null===je||void 0===je?void 0:je.Work_Status,onChange:e=>Ne((0,a.c)((0,a.c)({},je),{},{Work_Status:e.target.value})),children:[(0,I.jsx)("option",{value:2,children:"PENDING"}),(0,I.jsx)("option",{value:3,children:"COMPLETED"})]})})]}),(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"border-0 fa-14 pt-3",children:"Work Summary"}),(0,I.jsx)("td",{className:"border-0 fa-14",children:(0,I.jsx)("textarea",{rows:"4",className:"cus-inpt",required:!0,value:null===je||void 0===je?void 0:je.Work_Done,onChange:e=>Ne((0,a.c)((0,a.c)({},je),{},{Work_Done:e.target.value}))})})]})]})})}),(0,I.jsxs)(v.c,{children:[(0,I.jsx)(t.c,{variant:"outlined",color:"error",type:"button",onClick:()=>ae(!1),children:"cancel"}),(0,I.jsx)(t.c,{variant:"contained",color:"success",type:"submit",children:"Save"})]})]})]})]})}}}]);
//# sourceMappingURL=1400.20b64675.chunk.js.map