"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[7740],{20120:(e,a,o)=>{o.r(a),o.d(a,{default:()=>f});var t=o(30800),n=o(69060),l=o(51560),r=o(1908),i=o(13724),d=o(39308),c=o(82656),s=o(26773),u=o(4488),v=o(90048),g=o(89e3),h=o(10728),m=o(76491),T=o(61988),p=o(57704),D=o(82496);const S={Fromdate:(0,d.Q7)(),Todate:(0,d.Q7)()},f=e=>{let{loadingOn:a,loadingOff:o}=e;const f=(0,l.i6)(),x=(0,l.IT)(),j=new URLSearchParams((0,l.IT)().search),[y,C]=(0,n.useState)([]),[F,b]=(0,n.useState)({Fromdate:S.Fromdate,Todate:S.Todate,fetchFrom:S.Fromdate,fetchTo:S.Todate,filterDialog:!1,refresh:!1,disablePagination:!1,searchString:"",searchCategory:""});(0,n.useEffect)((()=>{a&&a(),(0,r.q)({address:"dataEntry/costCenter/report?Fromdate=".concat(F.fetchFrom,"&Todate=").concat(F.fetchTo)}).then((e=>{e.success?C(e.data):C([])})).catch((e=>console.error(e))).finally((()=>{o&&o()}))}),[F.fetchFrom,F.fetchTo]),(0,n.useEffect)((()=>{const e={Fromdate:j.get("Fromdate")&&(0,d.e8)(j.get("Fromdate"))?j.get("Fromdate"):S.Fromdate,Todate:j.get("Todate")&&(0,d.e8)(j.get("Todate"))?j.get("Todate"):S.Todate};b((a=>(0,t.c)((0,t.c)({},a),{},{fetchFrom:e.Fromdate,fetchTo:e.Todate})))}),[x.search]);const P=(0,n.useMemo)((()=>{const e=[...y].filter((e=>F.searchString?(0,d.MP)(Object.values(e).join(" ")).includes((0,d.MP)(F.searchString)):!F.searchCategory||(0,d.MP)(e.CostType||"").includes((0,d.MP)(F.searchCategory||""))));return(0,d.ui)(e,"UserId").map((e=>{var a,o,n,l,r,i,c,s,u,v;return(0,t.c)((0,t.c)({},e),{},{Name:null!==e&&void 0!==e&&e.groupedData[0]?null===e||void 0===e||null===(a=e.groupedData[0])||void 0===a?void 0:a.Name:" - ",Tonnage:null===e||void 0===e||null===(o=e.groupedData)||void 0===o?void 0:o.reduce(((e,a)=>(0,d.Q5)(e,null===a||void 0===a?void 0:a.TotalTonnage)),0),StockJournalTonnage:null===e||void 0===e||null===(n=e.groupedData)||void 0===n||null===(l=n.filter((e=>(0,d.MP)(e.DataFrom)===(0,d.MP)("Stock Journal"))))||void 0===l?void 0:l.reduce(((e,a)=>(0,d.Q5)(e,null===a||void 0===a?void 0:a.TotalTonnage)),0),TripSheetTonnage:null===e||void 0===e||null===(r=e.groupedData)||void 0===r||null===(i=r.filter((e=>(0,d.MP)(e.DataFrom)===(0,d.MP)("Trip Sheet"))))||void 0===i?void 0:i.reduce(((e,a)=>(0,d.Q5)(e,null===a||void 0===a?void 0:a.TotalTonnage)),0),Invoices:null!==(c=null===e||void 0===e||null===(s=e.groupedData)||void 0===s?void 0:s.length)&&void 0!==c?c:0,DayTransactions:Array.isArray(null===e||void 0===e?void 0:e.groupedData)?(0,d.ui)(null===e||void 0===e?void 0:e.groupedData,"EventDate").sort(((e,a)=>new Date(e.EventDate)-new Date(a.EventDate))):[],StaffInvoices:(0,d.Q$)(null===e||void 0===e||null===(u=e.groupedData)||void 0===u?void 0:u.length)?null===e||void 0===e||null===(v=e.groupedData)||void 0===v?void 0:v.length:0})})).map((e=>{var a;return(0,t.c)((0,t.c)({},e),{},{DayTransactions:null===e||void 0===e||null===(a=e.DayTransactions)||void 0===a?void 0:a.map((e=>{var a,o,n,l,r,i,c;return(0,t.c)((0,t.c)({},e),{},{TotalTonnage:null===e||void 0===e||null===(a=e.groupedData)||void 0===a?void 0:a.reduce(((e,a)=>(0,d.Q5)(e,null===a||void 0===a?void 0:a.TotalTonnage)),0),StockJournalTonnage:null===e||void 0===e||null===(o=e.groupedData)||void 0===o||null===(n=o.filter((e=>(0,d.MP)(e.DataFrom)===(0,d.MP)("Stock Journal"))))||void 0===n?void 0:n.reduce(((e,a)=>(0,d.Q5)(e,null===a||void 0===a?void 0:a.TotalTonnage)),0),TripSheetTonnage:null===e||void 0===e||null===(l=e.groupedData)||void 0===l||null===(r=l.filter((e=>(0,d.MP)(e.DataFrom)===(0,d.MP)("Trip Sheet"))))||void 0===r?void 0:r.reduce(((e,a)=>(0,d.Q5)(e,null===a||void 0===a?void 0:a.TotalTonnage)),0),DayInvoices:(0,d.Q$)(null===e||void 0===e||null===(i=e.groupedData)||void 0===i?void 0:i.length)?null===e||void 0===e||null===(c=e.groupedData)||void 0===c?void 0:c.length:0})}))})}))}),[null===y||void 0===y?void 0:y.length,F.searchString,F.searchCategory]),A=(0,n.useMemo)((()=>[...new Set(y.map((e=>e.CostType)))]),[y]);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(i.cp,{title:"Cost Center Report",dataArray:P,columns:[(0,i.A5)("Name","string","Name"),(0,i.A5)("StockJournalTonnage","number","Stock Journal"),(0,i.A5)("TripSheetTonnage","number","Trip Sheet"),(0,i.A5)("Tonnage","number","Total"),(0,i.A5)("Invoices","number","Invoices")],MenuButtons:[{name:"Pagination",icon:F.disablePagination?(0,D.jsx)(h.c,{fontSize:"small"}):(0,D.jsx)(m.c,{fontSize:"small",color:"primary"}),onclick:()=>b((e=>(0,t.c)((0,t.c)({},e),{},{disablePagination:!e.disablePagination})))},{name:"Filters",icon:(0,D.jsx)(T.c,{fontSize:"small",color:"primary"}),onclick:()=>b((e=>(0,t.c)((0,t.c)({},e),{},{filterDialog:!0})))}],isExpendable:!0,expandableComp:e=>{let{row:a}=e;return(0,D.jsx)(i.cp,{title:(null===a||void 0===a?void 0:a.Name)+"'s Activity",dataArray:Array.isArray(null===a||void 0===a?void 0:a.DayTransactions)?null===a||void 0===a?void 0:a.DayTransactions:[],columns:[(0,i.A5)("EventDate","date","Date"),(0,i.A5)("StockJournalTonnage","number","Stock Journal"),(0,i.A5)("TripSheetTonnage","number","Trip Sheet"),(0,i.A5)("TotalTonnage","number","Total"),{isVisible:1,ColumnHeader:"Invoices",isCustomCell:!0,Cell:e=>{let{row:a}=e;return null===a||void 0===a?void 0:a.DayInvoices}}],EnableSerialNumber:!0})},ButtonArea:(0,D.jsx)("input",{className:"cus-inpt p-2 fa-13 w-auto",type:"search",value:F.searchString,onChange:e=>b((a=>(0,t.c)((0,t.c)({},a),{},{searchString:e.target.value}))),placeholder:"Search..."}),EnableSerialNumber:!0,headerFontSizePx:13,bodyFontSizePx:13}),(0,D.jsxs)(c.c,{open:F.filterDialog,onClose:()=>b((e=>(0,t.c)((0,t.c)({},e),{},{filterDialog:!e.filterDialog}))),maxWidth:"sm",fullWidth:!0,children:[(0,D.jsx)(s.c,{children:"Filters"}),(0,D.jsx)(u.c,{children:(0,D.jsx)("div",{className:"table-responsive",children:(0,D.jsx)("table",{className:"table fa-16 table-borderless",children:(0,D.jsxs)("tbody",{children:[(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{children:"From Date"}),(0,D.jsx)("td",{children:(0,D.jsx)("input",{type:"date",value:F.Fromdate,onChange:e=>b((0,t.c)((0,t.c)({},F),{},{Fromdate:e.target.value})),className:"cus-inpt"})})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{children:"To Date"}),(0,D.jsx)("td",{children:(0,D.jsx)("input",{type:"date",value:F.Todate,onChange:e=>b((0,t.c)((0,t.c)({},F),{},{Todate:e.target.value})),className:"cus-inpt"})})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{children:"Cost Category"}),(0,D.jsx)("td",{children:(0,D.jsxs)("select",{className:"cus-inpt",value:F.searchCategory,onChange:e=>{b((a=>(0,t.c)((0,t.c)({},a),{},{searchCategory:e.target.value})))},children:[(0,D.jsx)("option",{value:"",children:"All Category"}),A.map(((e,a)=>(0,D.jsx)("option",{value:e,children:e},a)))]})})]})]})})})}),(0,D.jsxs)(v.c,{children:[(0,D.jsx)(g.c,{size:"small",onClick:()=>b((e=>(0,t.c)((0,t.c)({},e),{},{filterDialog:!1}))),children:"Close"}),(0,D.jsx)(g.c,{onClick:()=>{const e={Fromdate:null===F||void 0===F?void 0:F.Fromdate,Todate:null===F||void 0===F?void 0:F.Todate,filterDialog:!1};b((a=>(0,t.c)((0,t.c)({},a),e))),(e=>{const a=new URLSearchParams(e);f("?".concat(a.toString()),{replace:!0})})(e)},variant:"outlined",size:"small",startIcon:(0,D.jsx)(p.c,{}),children:"Search"})]})]})]})}},61988:(e,a,o)=>{o.d(a,{c:()=>l});var t=o(27664),n=o(82496);const l=(0,t.c)((0,n.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61"}),"FilterAlt")},57704:(e,a,o)=>{o.d(a,{c:()=>l});var t=o(27664),n=o(82496);const l=(0,t.c)((0,n.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")}}]);
//# sourceMappingURL=7740.6513a567.chunk.js.map