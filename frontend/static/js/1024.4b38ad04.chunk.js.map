{"version":3,"file":"static/js/1024.4b38ad04.chunk.js","mappings":"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","sources":["Pages/Masters/TallyMasters/tallyLosSyncDashboard.jsx","../node_modules/@mui/icons-material/esm/Sync.js","../node_modules/@mui/icons-material/esm/Visibility.js"],"sourcesContent":["import { useEffect, useMemo, useState } from \"react\";\r\nimport { fetchLink } from \"../../../Components/fetchComponent\";\r\nimport { filterableText, getSessionUser, isEqualNumber } from \"../../../Components/functions\";\r\nimport FilterableTable, { createCol } from \"../../../Components/filterableTable2\";\r\nimport { Button, Card } from \"@mui/material\";\r\nimport { toast } from 'react-toastify';\r\nimport { Sync, Visibility } from \"@mui/icons-material\";\r\n\r\nconst TallyLosSyncDashboard = ({ loadingOn, loadingOff }) => {\r\n    const [ERPLOS, setERPLOS] = useState([]);\r\n    const [tallyLOS, setTallyLOS] = useState([]);\r\n    const user = getSessionUser().user;\r\n    const [filters, setFilters] = useState({\r\n        refresh: false,\r\n        viewNotSynced: false,\r\n        searchERPLos: '',\r\n        searchTallyLos: '',\r\n        searchNotSynced: '',\r\n    })\r\n\r\n    useEffect(() => {\r\n        if (loadingOn) loadingOn();\r\n        fetchLink({\r\n            address: `masters/tallyMaster/items`,\r\n            headers: {\r\n                \"Db\": user?.Company_id\r\n            }\r\n        }).then(data => {\r\n            if (data.success) {\r\n                const tallyLOS = Array.isArray(data?.others?.tallyResult) ? data?.others?.tallyResult : [];\r\n                setERPLOS(data.data);\r\n                setTallyLOS(tallyLOS);\r\n            }\r\n        }).catch(e => console.error(e)).finally(() => {\r\n            if (loadingOff) loadingOff()\r\n        })\r\n    }, [filters.refresh])\r\n\r\n    const syncLOS = () => {\r\n        if (loadingOn) loadingOn();\r\n        fetchLink({\r\n            address: `masters/products/losSync`,\r\n            method: 'POST'\r\n        }).then(data => {\r\n            if (data.success) {\r\n                toast.success(data.message);\r\n                setFilters(pre => ({ ...pre, refresh: !pre.refresh }))\r\n            } else {\r\n                toast.error(data.message);\r\n            }\r\n        }).catch(e => console.error(e)).finally(() => {\r\n            if (loadingOff) loadingOff();\r\n        })\r\n    }\r\n\r\n    const notSyncedList = useMemo(() => {\r\n        return tallyLOS.filter(talFil =>\r\n            !ERPLOS.some(erpFil =>\r\n                isEqualNumber(talFil.Stock_Tally_Id, erpFil.Stock_Tally_Id)\r\n            )\r\n        );\r\n    }, [ERPLOS.length, tallyLOS.length])\r\n\r\n    const ERPLOSList = useMemo(() => {\r\n        return filters.searchERPLos ? ERPLOS.filter(obj =>\r\n            filterableText(Object.values(obj).join(\" \")).includes(filterableText(filters.searchERPLos))\r\n        ) : ERPLOS\r\n    }, [filters.searchERPLos, ERPLOS.length]);\r\n\r\n    const TallyLOLList = useMemo(() => {\r\n        return filters.searchTallyLos ? tallyLOS.filter(obj =>\r\n            filterableText(Object.values(obj).join(\" \")).includes(filterableText(filters.searchTallyLos))\r\n        ) : tallyLOS;\r\n    }, [filters.searchTallyLos, tallyLOS.length])\r\n\r\n    const filteredNotSyncedList = useMemo(() => {\r\n        return filters.searchNotSynced ? notSyncedList.filter(obj =>\r\n            filterableText(Object.values(obj).join(\" \")).includes(filterableText(filters.searchNotSynced))\r\n        ) : notSyncedList;\r\n    }, [notSyncedList.length, filters.searchNotSynced])\r\n\r\n    return (\r\n        <>\r\n            <Card>\r\n                <div\r\n                    className=\"px-3 py-2 fa-14\"\r\n                >\r\n                    <div className=\"d-flex flex-wrap align-items-center\">\r\n                        <h5 className=\"flex-grow-1\">LOS SYNC (Differents: {notSyncedList.length})</h5>\r\n                        <Button size='small' onClick={syncLOS} startIcon={<Sync />}>Sync now</Button>\r\n                        <Button size='small'\r\n                            onClick={() => setFilters(pre => ({ ...pre, viewNotSynced: !pre.viewNotSynced }))}\r\n                            startIcon={<Visibility />}\r\n                        >View Not Synced</Button>\r\n                    </div>\r\n                    <div className=\"d-flex flex-wrap align-items-center\">\r\n\r\n                    </div>\r\n                </div>\r\n\r\n                {filters.viewNotSynced ? (\r\n                    <FilterableTable\r\n                        title={\"Not synced list \"}\r\n                        bodyFontSizePx={11}\r\n                        headerFontSizePx={11}\r\n                        dataArray={filteredNotSyncedList}\r\n                        columns={[\r\n                            createCol('Stock_Tally_Id', 'string', 'Tally ID'),\r\n                            createCol('Stock_Item', 'string'),\r\n                            createCol('Brand', 'string', 'MobileNo'),\r\n                            createCol('Group_ST', 'string'),\r\n                            createCol('Bag', 'string'),\r\n                            createCol('Stock_Group', 'string'),\r\n                        ]}\r\n                        ButtonArea={\r\n                            <>\r\n                                <input\r\n                                    type='search'\r\n                                    className=\"cus-inpt p-1 w-auto\"\r\n                                    value={filters.searchNotSynced}\r\n                                    onChange={e => setFilters(pre => ({ ...pre, searchNotSynced: e.target.value }))}\r\n                                    placeholder=\"Search..\"\r\n                                />\r\n                            </>\r\n                        }\r\n                    />\r\n                ) : (\r\n                    <>\r\n                        <div className=\"row\">\r\n                            <div className=\"col-lg-6 p-1\">\r\n                                <FilterableTable\r\n                                    title={\"ERP - \" + ERPLOS.length}\r\n                                    bodyFontSizePx={11}\r\n                                    headerFontSizePx={11}\r\n                                    dataArray={ERPLOSList}\r\n                                    columns={[\r\n                                        createCol('Stock_Tally_Id', 'string', 'Tally ID'),\r\n                                        createCol('Stock_Item', 'string'),\r\n                                        createCol('Brand', 'string', 'MobileNo'),\r\n                                        createCol('Group_ST', 'string'),\r\n                                        createCol('Bag', 'string'),\r\n                                        createCol('Stock_Group', 'string'),\r\n                                    ]}\r\n                                    ButtonArea={\r\n                                        <>\r\n                                            <input\r\n                                                type='search'\r\n                                                className=\"cus-inpt p-1 w-auto\"\r\n                                                value={filters.searchERPLos}\r\n                                                onChange={e => setFilters(pre => ({ ...pre, searchERPLos: e.target.value }))}\r\n                                                placeholder=\"Search..\"\r\n                                            />\r\n                                        </>\r\n                                    }\r\n                                />\r\n                            </div>\r\n                            <div className=\"col-lg-6 p-1\">\r\n                                <FilterableTable\r\n                                    title={\"Tally - \" + tallyLOS.length}\r\n                                    bodyFontSizePx={11}\r\n                                    headerFontSizePx={11}\r\n                                    dataArray={TallyLOLList}\r\n                                    columns={[\r\n                                        createCol('Stock_Tally_Id', 'string', 'Tally ID'),\r\n                                        createCol('Stock_Item', 'string'),\r\n                                        createCol('Brand', 'string', 'MobileNo'),\r\n                                        createCol('Group_ST', 'string'),\r\n                                        createCol('Bag', 'string'),\r\n                                        createCol('Stock_Group', 'string'),\r\n                                    ]}\r\n                                    ButtonArea={\r\n                                        <>\r\n                                            <input\r\n                                                type='search'\r\n                                                className=\"cus-inpt p-1 w-auto\"\r\n                                                value={filters.searchTallyLos}\r\n                                                onChange={e => setFilters(pre => ({ ...pre, searchTallyLol: e.target.value }))}\r\n                                                placeholder=\"Search..\"\r\n                                            />\r\n                                        </>\r\n                                    }\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </Card>\r\n\r\n        </>\r\n    )\r\n}\r\n\r\nexport default TallyLosSyncDashboard;","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8m0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4z\"\n}), 'Sync');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3\"\n}), 'Visibility');"],"names":["_ref","loadingOn","loadingOff","ERPLOS","setERPLOS","useState","tallyLOS","setTallyLOS","user","getSessionUser","filters","setFilters","refresh","viewNotSynced","searchERPLos","searchTallyLos","searchNotSynced","useEffect","fetchLink","address","headers","Company_id","then","data","success","_data$others","_data$others2","Array","isArray","others","tallyResult","catch","e","console","error","finally","notSyncedList","useMemo","filter","talFil","some","erpFil","isEqualNumber","Stock_Tally_Id","length","ERPLOSList","obj","filterableText","Object","values","join","includes","TallyLOLList","filteredNotSyncedList","_jsx","_Fragment","children","_jsxs","Card","className","Button","size","onClick","syncLOS","method","toast","message","pre","_objectSpread","startIcon","Sync","Visibility","FilterableTable","title","bodyFontSizePx","headerFontSizePx","dataArray","columns","createCol","ButtonArea","type","value","onChange","target","placeholder","searchTallyLol","createSvgIcon","d"],"sourceRoot":""}