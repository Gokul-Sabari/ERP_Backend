"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[7048],{64568:(e,s,a)=>{a.d(s,{c:()=>t});var r=a(82496);const t=()=>(0,r.jsx)("span",{style:{color:"red",fontWeight:"bold",fontSize:"1em"},children:" *"})},7048:(e,s,a)=>{a.r(s),a.d(s,{default:()=>g});var r=a(69060),t=a(42136),n=a(43692),l=a(84436),c=a(5548),o=a(82656),d=a(26773),i=a(4488),u=a(90048),m=a(86e3),p=a(45180),h=a(56480),v=(a(21680),a(32635)),x=a(1908),j=a(39308),f=a(2728),C=a(64568),y=a(11192),N=a(82496);const b=e=>(0,N.jsx)("td",{className:"border-0 fa-14 p-2 vctr",children:e.children}),g=e=>{let{loadingOn:s,loadingOff:a}=e;const g=JSON.parse(localStorage.getItem("user")),_={UserId:"",Name:"",UserName:"",UserTypeId:"",Password:"",BranchId:"",Company_id:null===g||void 0===g?void 0:g.Company_id},I={Cost_Center_Id:"",Cost_Center_Name:"",User_Type:"",Is_Converted_To_User:1,User_Id:""},[U,T]=(0,r.useState)(I),[w,S]=(0,r.useState)([]),[k,P]=(0,r.useState)(!1),[M,E]=(0,r.useState)(!1),[D,B]=(0,r.useState)(_),[q,O]=(0,r.useState)(!1),[R,z]=(0,r.useState)(!1),[L,H]=(0,r.useState)(""),[A,F]=(0,r.useState)([]),[V,W]=(0,r.useState)([]),[$,K]=(0,r.useState)([]),[G,J]=(0,r.useState)([]),[Y,Q]=(0,r.useState)({dialog:!1,deleteDialog:!1,refresh:!1,filterText:"ALL"});(0,r.useEffect)((()=>{(0,x.q)({address:`masters/users?Company_id=${null===g||void 0===g?void 0:g.Company_id}`}).then((e=>{var s;e.success&&(null===e||void 0===e||null===(s=e.data)||void 0===s||s.sort(((e,s)=>e.Name.localeCompare(s.Name))),S(e.data))})).catch((e=>console.error(e)))}),[M,null===g||void 0===g?void 0:g.Company_id]),(0,r.useEffect)((()=>{(0,x.q)({address:`masters/userType?Company_id=${null===g||void 0===g?void 0:g.Company_id}`}).then((e=>{e.success&&K(e.data)})).catch((e=>console.error(e)))}),[null===g||void 0===g?void 0:g.Company_id]),(0,r.useEffect)((()=>{(0,x.q)({address:`masters/branch/dropDown?Company_id=${null===g||void 0===g?void 0:g.Company_id}`}).then((e=>{e.success&&J(e.data)})).catch((e=>console.error(e)))}),[null===g||void 0===g?void 0:g.Company_id]),(0,r.useEffect)((()=>{if(L){const e=w.filter((e=>Object.values(e).some((e=>String(e).toLowerCase().includes(L.toLowerCase())))));F(e)}}),[L,w]);const X=()=>{B(_),P((e=>!e))},Z=()=>{Q((e=>({...e,dialog:!1,deleteDialog:!1}))),B(I)};return(0,r.useEffect)((()=>{(0,x.q)({address:"masters/userTypecostcenter"}).then((e=>{e.success&&W(e.data)})).catch((e=>console.error(e)))}),[null===g||void 0===g?void 0:g.Company_id,M]),(0,N.jsxs)(r.Fragment,{children:[(0,N.jsxs)(n.c,{children:[(0,N.jsxs)("div",{className:"px-3 py-2 fw-bold d-flex align-items-center justify-content-between border-bottom",children:["USERS",(0,N.jsx)("div",{className:"text-end",children:(0,N.jsx)(t.c,{onClick:X,className:"rounded-5 px-3 py-1 fa-13 shadow",children:k?"Back":"Add User"})})]}),(0,N.jsx)(l.c,{children:k?(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(0,x.q)({address:"masters/users",method:D.UserId?"PUT":"POST",bodyData:{...D,Password:(0,j.ER)(D.Password)}}).then((e=>{e.success?(E(!M),h.m4.success(e.message),X()):h.m4.error(e.message)}))},children:[(0,N.jsxs)("div",{className:"row p-3",children:[(0,N.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,N.jsx)("label",{children:"Name"}),(0,N.jsx)("input",{className:"cus-inpt",value:D.Name,required:!0,minLength:3,onChange:e=>B({...D,Name:e.target.value})})]}),(0,N.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,N.jsx)("label",{children:"Password"}),(0,N.jsx)("input",{className:"cus-inpt",type:"password",required:!0,minLength:6,value:D.Password,onChange:e=>B({...D,Password:e.target.value})})]}),(0,N.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,N.jsx)("label",{children:"Mobile"}),(0,N.jsx)("input",{className:"cus-inpt",type:"number",required:!0,value:D.UserName,maxLength:10,onChange:e=>B({...D,UserName:e.target.value})})]}),(0,N.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,N.jsx)("label",{children:"Branch"}),(0,N.jsxs)("select",{className:"cus-inpt",value:D.BranchId,required:!0,onChange:e=>B({...D,BranchId:e.target.value}),children:[(0,N.jsx)("option",{value:"",children:"select"}),null===G||void 0===G?void 0:G.map(((e,s)=>(0,N.jsx)("option",{value:e.BranchId,children:e.BranchName},s)))]})]}),(0,N.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,N.jsx)("label",{children:"User Type"}),(0,N.jsxs)("select",{className:"cus-inpt",value:D.UserTypeId,required:!0,onChange:e=>B({...D,UserTypeId:e.target.value}),children:[(0,N.jsx)("option",{value:"",children:"Select"}),null===$||void 0===$?void 0:$.map(((e,s)=>(0,N.jsx)("option",{value:e.Id,children:e.UserType},s)))]})]})]}),(0,N.jsxs)("div",{className:"pe-3 d-flex justify-content-end",children:[(0,N.jsx)(t.c,{className:"rounded-5 px-4 mx-1 btn-light bg-white",onClick:X,type:"button",children:"cancel"}),(0,N.jsx)(t.c,{className:"rounded-5 px-4 shadow mx-1",type:"submit",children:D.UserId?"Update":"Create"})]})]})}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{className:"d-flex justify-content-end",children:(0,N.jsx)("div",{className:" pb-2",children:(0,N.jsx)("input",{value:L,className:"cus-inpt w-auto",placeholder:"Search",onChange:e=>H(e.target.value)})})}),(0,N.jsx)(v.cp,{data:L?A.length>0?A:[]:w,columns:[{name:"Name",selector:e=>e.Name,sortable:!0},{name:"Type",selector:e=>e.UserType,sortable:!0},{name:"Mobile",selector:e=>e.UserName,sortable:!1},{name:"Company",selector:e=>e.Company_Name,sortable:!0},{name:"Company",selector:e=>e.BranchName,sortable:!0},{name:"Cost_Center_User",sortable:!0,selector:e=>""!==(null===e||void 0===e?void 0:e.Cost_Center_Id)&&null!==(null===e||void 0===e?void 0:e.Cost_Center_Id)?(0,N.jsx)("span",{children:(0,N.jsx)(y.c,{style:{cursor:"pointer"}})}):(0,N.jsx)(f.c,{onClick:()=>{T({Cost_Center_Id:null,Name:null===e||void 0===e?void 0:e.Name,UserTypeId:null===e||void 0===e?void 0:e.UserTypeId,UserType:null===e||void 0===e?void 0:e.UserType,UserId:null===e||void 0===e?void 0:e.UserId,Is_Converted_To_User:1}),Q((e=>({...e,dialog:!0})))},style:{cursor:"pointer"}})},{name:"CostCenterType",selector:e=>""!==(null===e||void 0===e?void 0:e.costcentertype)&&null!==(null===e||void 0===e?void 0:e.costcentertype)?(0,N.jsx)("span",{children:null===e||void 0===e?void 0:e.costcentertype}):(0,N.jsx)("span",{className:"cus-badge text-black ",children:"-"}),sortable:!0},{name:"Action",cell:e=>(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(c.c,{onClick:()=>{(e=>{const{UserId:s,Name:a,UserName:r,UserTypeId:t,Password:n,BranchId:l}=e,c=(0,j.YP)(n);B((e=>({...e,UserId:s,Name:a,UserName:r,UserTypeId:t,Password:c,BranchId:l}))),P(!0)})(e)},size:"small",children:(0,N.jsx)(m.c,{className:"fa-in"})}),(0,N.jsx)(c.c,{onClick:()=>{const{UserId:s,Name:a,UserName:r,UserTypeId:t,Password:n,BranchId:l}=e;B((e=>({...e,UserId:s,Name:a,UserName:r,UserTypeId:t,Password:n,BranchId:l}))),O(!0)},size:"small",children:(0,N.jsx)(p.c,{className:"fa-in del-red"})})]})}],direction:"auto",fixedHeader:!0,fixedHeaderScrollHeight:"63dvh",highlightOnHover:!0,pagination:!0,responsive:!0,striped:!0,subHeaderAlign:"right",subHeaderWrap:!0})]})})]}),(0,N.jsxs)(o.c,{open:q,onClose:()=>O(!1),fullWidth:!0,maxWidth:"sm",children:[(0,N.jsx)(d.c,{id:"alert-dialog-title",children:"Confirmation"}),(0,N.jsx)(i.c,{children:(0,N.jsxs)("b",{className:"text-muted",children:["Do you want to Delete the user ",(0,N.jsx)("span",{className:"blue-text",children:D.Name}),"?"]})}),(0,N.jsxs)(u.c,{children:[(0,N.jsx)(t.c,{className:" btn-light",onClick:()=>{O(!1)},children:"Cancel"}),(0,N.jsx)(t.c,{onClick:()=>{(0,x.q)({address:"masters/users",method:"DELETE",bodyData:{UserId:D.UserId}}).then((e=>{e.success?(E(!M),O((e=>!e)),B(_),h.m4.success(e.message)):h.m4.error(e.message)})).catch((e=>{console.error("Error deleting user:",e),h.m4.error("An error occurred. Please try again later.")}))},children:"Delete"})]})]}),(0,N.jsxs)(o.c,{open:Y.dialog,onClose:Z,fullWidth:!0,maxWidth:"sm",children:[(0,N.jsx)(d.c,{children:U.Cost_Center_Id?"Modify Records":"Add Records"}),(0,N.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s&&s(),(0,x.q)({address:"dataEntry/costCenter",method:"POST",bodyData:{Cost_Center_Id:null===U||void 0===U?void 0:U.Cost_Center_Id,Cost_Center_Name:null===U||void 0===U?void 0:U.Name,User_Type:null===U||void 0===U?void 0:U.UserTypeId,User_Id:Number(null===U||void 0===U?void 0:U.UserId),Is_Converted_To_User:null===U||void 0===U?void 0:U.Is_Converted_To_User}}).then((e=>{e.success?(h.m4.success(e.message),Z(),E(!M)):h.m4.error(e.message)})).catch((e=>console.error(e))).finally((()=>{a&&a()}))},children:[(0,N.jsx)(i.c,{children:(0,N.jsx)("div",{className:"table-responsive",children:(0,N.jsx)("table",{className:"table m-0",children:(0,N.jsxs)("tbody",{children:[(0,N.jsxs)("tr",{children:[(0,N.jsxs)(b,{children:["Cost Center Name ",(0,N.jsx)(C.c,{})]}),(0,N.jsx)(b,{children:(0,N.jsx)("input",{value:U.Name,onChange:e=>T((s=>({...s,Name:e.target.value}))),className:"cus-inpt p-2",required:!0,maxLength:150})})]}),(0,N.jsxs)("tr",{children:[(0,N.jsxs)(b,{children:["User Type ",(0,N.jsx)(C.c,{})]}),(0,N.jsx)(b,{children:(0,N.jsxs)("select",{value:U.UserTypeId||"",onChange:e=>T((s=>({...s,UserTypeId:e.target.value}))),className:"cus-inpt p-2",required:!0,"aria-label":"Select User Type",children:[(0,N.jsx)("option",{value:"",children:"Select User Type"}),V.map(((e,s)=>(0,N.jsx)("option",{value:e.UserTypeId,children:e.UserType},s)))]})})]})]})})})}),(0,N.jsxs)(u.c,{className:"d-flex justify-content-between flex-wrap",children:[(0,N.jsx)(t.c,{type:"button",variant:"outlined",onClick:()=>T({Cost_Center_Id:null,Name:"",UserTypeId:""}),children:"Clear"}),(0,N.jsxs)("span",{children:[(0,N.jsx)(t.c,{type:"button",onClick:Z,children:"Cancel"}),(0,N.jsx)(t.c,{type:"submit",variant:"contained",children:"Submit"})]})]})]})]})]})}},2728:(e,s,a)=>{var r=a(22411);s.c=void 0;var t=r(a(90864)),n=a(82496);s.c=(0,t.default)((0,n.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4z"}),"AddBox")},11192:(e,s,a)=>{var r=a(22411);s.c=void 0;var t=r(a(90864)),n=a(82496);s.c=(0,t.default)((0,n.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check")},45180:(e,s,a)=>{a.d(s,{c:()=>n});var r=a(27664),t=a(82496);const n=(0,r.c)((0,t.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},86e3:(e,s,a)=>{a.d(s,{c:()=>n});var r=a(27664),t=a(82496);const n=(0,r.c)((0,t.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},90864:(e,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=a(27492)},84436:(e,s,a)=>{a.d(s,{c:()=>x});var r=a(45072),t=a(95656),n=a(69060),l=a(79736),c=a(21412),o=a(12556),d=a(49836),i=a(10099),u=a(33448);function m(e){return(0,u.cp)("MuiCardContent",e)}(0,i.c)("MuiCardContent",["root"]);var p=a(82496);const h=["className","component"],v=(0,o.cp)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,s)=>s.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),x=n.forwardRef((function(e,s){const a=(0,d.C)({props:e,name:"MuiCardContent"}),{className:n,component:o="div"}=a,i=(0,t.c)(a,h),u=(0,r.c)({},a,{component:o}),x=(e=>{const{classes:s}=e;return(0,c.c)({root:["root"]},m,s)})(u);return(0,p.jsx)(v,(0,r.c)({as:o,className:(0,l.c)(x.root,n),ownerState:u,ref:s},i))}))},43692:(e,s,a)=>{a.d(s,{c:()=>j});var r=a(45072),t=a(95656),n=a(69060),l=a(79736),c=a(21412),o=a(12556),d=a(49836),i=a(85624),u=a(10099),m=a(33448);function p(e){return(0,m.cp)("MuiCard",e)}(0,u.c)("MuiCard",["root"]);var h=a(82496);const v=["className","raised"],x=(0,o.cp)(i.c,{name:"MuiCard",slot:"Root",overridesResolver:(e,s)=>s.root})((()=>({overflow:"hidden"}))),j=n.forwardRef((function(e,s){const a=(0,d.C)({props:e,name:"MuiCard"}),{className:n,raised:o=!1}=a,i=(0,t.c)(a,v),u=(0,r.c)({},a,{raised:o}),m=(e=>{const{classes:s}=e;return(0,c.c)({root:["root"]},p,s)})(u);return(0,h.jsx)(x,(0,r.c)({className:(0,l.c)(m.root,n),elevation:o?8:void 0,ref:s,ownerState:u},i))}))},90280:(e,s,a)=>{a.d(s,{c:()=>r});const r=a(91200).c},72144:(e,s,a)=>{a.d(s,{c:()=>r});const r=a(46576).c},27492:(e,s,a)=>{a.r(s),a.d(s,{capitalize:()=>t.c,createChainedFunction:()=>n.c,createSvgIcon:()=>l.c,debounce:()=>c.c,deprecatedPropType:()=>o,isMuiElement:()=>d.c,ownerDocument:()=>i.c,ownerWindow:()=>u.c,requirePropFactory:()=>m,setRef:()=>p,unstable_ClassNameGenerator:()=>N,unstable_useEnhancedEffect:()=>h.c,unstable_useId:()=>v.c,unsupportedProp:()=>x,useControlled:()=>j.c,useEventCallback:()=>f.c,useForkRef:()=>C.c,useIsFocusVisible:()=>y.c});var r=a(31152),t=a(55832),n=a(90280),l=a(27664),c=a(72144);const o=function(e,s){return()=>null};var d=a(28276),i=a(93976),u=a(31328);a(45072);const m=function(e,s){return()=>null};const p=a(30472).c;var h=a(87188),v=a(18144);const x=function(e,s,a,r,t){return null};var j=a(61124),f=a(17908),C=a(56268),y=a(24724);const N={configure:e=>{r.c.configure(e)}}},28276:(e,s,a)=>{a.d(s,{c:()=>t});var r=a(69060);const t=function(e,s){var a,t;return r.isValidElement(e)&&-1!==s.indexOf(null!=(a=e.type.muiName)?a:null==(t=e.type)||null==(t=t._payload)||null==(t=t.value)?void 0:t.muiName)}},93976:(e,s,a)=>{a.d(s,{c:()=>r});const r=a(6848).c},31328:(e,s,a)=>{a.d(s,{c:()=>r});const r=a(7608).c},87188:(e,s,a)=>{a.d(s,{c:()=>r});const r=a(92576).c},46576:(e,s,a)=>{function r(e){let s,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];clearTimeout(s),s=setTimeout((()=>{e.apply(this,t)}),a)}return r.clear=()=>{clearTimeout(s)},r}a.d(s,{c:()=>r})},16344:(e,s,a)=>{a.d(s,{cV:()=>l,cp:()=>o});var r=a(69060),t=a(82496);const n=["as","disabled"];function l(e){let{tagName:s,disabled:a,href:r,target:t,rel:n,role:l,onClick:c,tabIndex:o=0,type:d}=e;s||(s=null!=r||null!=t||null!=n?"a":"button");const i={tagName:s};if("button"===s)return[{type:d||"button",disabled:a},i];const u=e=>{(a||"a"===s&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),a?e.stopPropagation():null==c||c(e)};return"a"===s&&(r||(r="#"),a&&(r=void 0)),[{role:null!=l?l:"button",disabled:void 0,tabIndex:a?void 0:o,href:r,target:"a"===s?t:void 0,"aria-disabled":a||void 0,rel:"a"===s?n:void 0,onClick:u,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),u(e))}},i]}const c=r.forwardRef(((e,s)=>{let{as:a,disabled:r}=e,c=function(e,s){if(null==e)return{};var a,r,t={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],s.indexOf(a)>=0||(t[a]=e[a]);return t}(e,n);const[o,{tagName:d}]=l(Object.assign({tagName:a,disabled:r},c));return(0,t.jsx)(d,Object.assign({},c,o,{ref:s}))}));c.displayName="Button";const o=c},42136:(e,s,a)=>{a.d(s,{c:()=>i});var r=a(264),t=a.n(r),n=a(69060),l=a(16344),c=a(83576),o=a(82496);const d=n.forwardRef(((e,s)=>{let{as:a,bsPrefix:r,variant:n="primary",size:d,active:i=!1,disabled:u=!1,className:m,...p}=e;const h=(0,c.Ky)(r,"btn"),[v,{tagName:x}]=(0,l.cV)({tagName:a,disabled:u,...p}),j=x;return(0,o.jsx)(j,{...v,...p,ref:s,disabled:u,className:t()(m,h,i&&"active",n&&`${h}-${n}`,d&&`${h}-${d}`,p.href&&u&&"disabled")})}));d.displayName="Button";const i=d}}]);
//# sourceMappingURL=7048.09f12b8d.chunk.js.map