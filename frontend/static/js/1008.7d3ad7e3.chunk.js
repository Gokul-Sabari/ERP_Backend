"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[1008],{13724:(e,l,s)=>{s.d(l,{A5:()=>E,Om:()=>F,cp:()=>z});var t=s(30800),a=s(69060),n=s(3358),o=s(5548),d=s(66931),i=s(89500),r=s(93996),c=s(14696),u=s(13224),h=s(27454),m=s(700),x=s(43692),v=s(85624),j=s(99904),p=s(33856),b=s(58612),f=s(53248),g=s(29504),N=s(5930),S=s(39308),y=s(4284),C=s(41459),_=s(46864),D=s(76491),T=s(10728),w=s(49608),I=s(28064),A=(s(37692),s(35832)),k=s(82496);const P=(e,l)=>e.map((e=>{const s={};return l.forEach(((l,t)=>{if(l.isVisible||l.Defult_Display)if(l.isCustomCell&&l.Cell){const a=l.Cell({row:e}),n=l.ColumnHeader?String(l.ColumnHeader).replace(/\s+/g,"_").toLowerCase():"field_".concat(t+1);"string"!==typeof a&&"number"!==typeof a&&"bigint"!==typeof a||(s[n]=a)}else{let t=l.Field_Name;s[t]=e[t]||""}})),s})),E=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"left",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"center";return(0,t.c)({isVisible:1,Field_Name:e,Fied_Data:l,align:a,verticalAlign:n},s&&{ColumnHeader:s})},F=e=>{let{buttonsData:l=[],ToolTipText:s="Options"}=e;const[t,h]=(0,a.useState)(null),m=Boolean(t);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(n.c,{title:s,children:(0,k.jsx)(o.c,{"aria-describedby":m,onClick:e=>{h(e.currentTarget)},className:"ms-2",size:"small",children:(0,k.jsx)(y.c,{})})}),(0,k.jsx)(d.cp,{open:m,anchorEl:t,onClose:()=>{h(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,k.jsx)(i.c,{children:l.map(((e,l)=>(0,k.jsxs)(r.c,{onClick:()=>(null===e||void 0===e?void 0:e.onclick)&&(null===e||void 0===e?void 0:e.onclick()),disabled:null===e||void 0===e?void 0:e.disabled,children:[(0,k.jsx)(c.c,{children:null===e||void 0===e?void 0:e.icon}),(0,k.jsx)(u.c,{children:null===e||void 0===e?void 0:e.name})]},l)))})})]})},L=e=>{let{dataArray:l=[],columns:s=[],onClickFun:n=null,isExpendable:d=!1,expandableComp:i=null,tableMaxHeight:r=550,initialPageCount:c=20,EnableSerialNumber:u=!1,CellSize:y="small",disablePagination:E=!1,title:L="",PDFPrintOption:z=!1,ExcelPrintOption:O=!1,maxHeightOption:V=!1,ButtonArea:U=null,MenuButtons:R=[],bodyFontSizePx:M=13,headerFontSizePx:B=13}=e;const[q,H]=(0,a.useState)(0),[W,Q]=(0,a.useState)(c),[$,J]=(0,a.useState)([]),[G,K]=(0,a.useState)(!0),X=G&&V?" max-content ":r,Y=[{type:"left",class:"text-start"},{type:"right",class:"text-end"},{type:"center",class:"text-center"}],Z=[{type:"top",class:" vtop "},{type:"bottom",class:" vbottom "},{type:"center",class:" vctr "}],ee=(e=>{if(!$.length)return e;return[...e].sort(((e,l)=>{for(const s of $){const{columnId:t,direction:a}=s,n=e[t],o=l[t];if(n!==o)return"asc"===a?n>o?1:-1:n<o?1:-1}return 0}))})(l),le=q*W,se=le+W,te=ee.slice(le,se),ae=(e,l)=>{switch(l){case"number":return e?(0,S.SA)(e):e;case"date":return e?(0,S.uy)(e):e;case"time":return e?(0,S.AX)(e):e;case"string":return e;default:return""}},ne=e=>{let{row:l,index:t}=e;const[r,c]=(0,a.useState)(!1),x="20px";return(0,k.jsxs)(a.Fragment,{children:[(0,k.jsxs)(h.c,{children:[!0===d&&i&&(0,k.jsx)(m.c,{className:"border-end text-center vtop",sx:{fontSize:"".concat(M,"px")},children:(0,k.jsx)(o.c,{size:"small",onClick:()=>c((e=>!e)),children:r?(0,k.jsx)(C.c,{sx:{fontSize:x}}):(0,k.jsx)(_.c,{sx:{fontSize:x}})})}),!0===u&&(0,k.jsx)(m.c,{className:"border-end text-center vtop",sx:{fontSize:"".concat(M,"px")},children:W*q+t+1}),null===s||void 0===s?void 0:s.map(((e,s)=>{var a,o;const d=(0,S.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,S.Qr)(null===e||void 0===e?void 0:e.isVisible,1),i=Boolean(null===e||void 0===e?void 0:e.isCustomCell)&&e.Cell,r=!i,c=e.align?null===(a=Y.find((l=>l.type===String(e.align).toLowerCase())))||void 0===a?void 0:a.class:"",u=e.verticalAlign?null===(o=Z.find((l=>l.type===String(e.verticalAlign).toLowerCase())))||void 0===o?void 0:o.class:" vctr ";return d&&r?Object.entries(l).map((t=>{let[a,o]=t;return e.Field_Name===a&&(0,k.jsx)(m.c,{className:"border-end "+c+u,sx:{fontSize:"".concat(M,"px")},onClick:()=>n?n(l):console.log("Function not supplied"),children:ae(o,null===e||void 0===e?void 0:e.Fied_Data)},s)})):d&&i?(0,k.jsx)(m.c,{className:"border-end "+c+u,sx:{fontSize:"".concat(M,"px")},children:e.Cell({row:l,Field_Name:e.Field_Name,index:t})},s):(0,k.jsx)(m.c,{sx:{fontSize:"".concat(M,"px")},className:"border-end "+c+u},s)}))]}),!0===d&&i&&r&&(0,k.jsx)(h.c,{children:(0,k.jsx)(m.c,{colSpan:Number(null===s||void 0===s?void 0:s.length)+(!0===u?2:1),children:i({row:l,index:t})})})]})};return(0,k.jsxs)(x.c,{className:"rounded-3 bg-white overflow-hidden",component:v.c,children:[(0,k.jsxs)("div",{className:"d-flex align-items-center flex-wrap px-3 py-2 flex-row-reverse ",children:[(z||O||R.length>0||V)&&(0,k.jsx)(F,{ToolTipText:"Table Options",buttonsData:[...V?[{name:"Max Height",icon:G?(0,k.jsx)(D.c,{fontSize:"small",color:"primary"}):(0,k.jsx)(T.c,{fontSize:"small"}),onclick:()=>K((e=>!e)),disabled:(0,S.Qr)(null===l||void 0===l?void 0:l.length,0)}]:[],...z?[{name:"PDF Print",icon:(0,k.jsx)(w.c,{fontSize:"small",color:"primary"}),onclick:()=>((e,l)=>{try{const s=new I.default,a=P(e,l),n=l.filter((e=>e.isVisible||e.Defult_Display)).map((e=>e.Field_Name||String(e.ColumnHeader).replace(/\s+/g,"_").toLowerCase())),o=a.map((e=>n.map((l=>e[l])))).map(((e,l)=>(0,t.c)((0,t.c)({},e),{},{Sno:l+1})));s.autoTable({head:[n],body:o}),s.save("table.pdf")}catch(s){console.error(s)}})(l,s),disabled:(0,S.Qr)(null===l||void 0===l?void 0:l.length,0)}]:[],...O?[{name:"Excel Print",icon:(0,k.jsx)(w.c,{fontSize:"small",color:"primary"}),onclick:()=>((e,l)=>{try{const s=P(e,l),t=A.c$.json_to_sheet(s),a=A.c$.book_new();A.c$.book_append_sheet(a,t,"Data"),A.a8(a,"table.xlsx")}catch(s){console.error(s)}})(l,s),disabled:(0,S.Qr)(null===l||void 0===l?void 0:l.length,0)}]:[],...R]}),U&&U,L&&(0,k.jsx)("h6",{className:"fw-bold text-muted flex-grow-1 m-0",children:L})]}),(0,k.jsx)(j.c,{sx:{maxHeight:X},children:(0,k.jsxs)(p.c,{stickyHeader:!0,size:y,children:[(0,k.jsx)(b.c,{children:(0,k.jsxs)(h.c,{children:[d&&i&&(0,k.jsx)(m.c,{className:"fw-bold border-end border-top text-center",sx:{fontSize:"".concat(B,"px"),backgroundColor:"#EDF0F7"},children:"#"}),u&&(0,k.jsx)(m.c,{className:"fw-bold border-end border-top text-center",sx:{fontSize:"".concat(B,"px"),backgroundColor:"#EDF0F7"},children:"SNo"}),s.map(((e,l)=>{const s=(0,S.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,S.Qr)(null===e||void 0===e?void 0:e.isVisible,1),a=!1===Boolean(null===e||void 0===e?void 0:e.isCustomCell)||!e.Cell,n=$.find((l=>l.columnId===e.Field_Name)),o=n?n.direction:"asc";var d,i,r,c;return s?a?(0,k.jsx)(m.c,{className:"fw-bold border-end border-top "+(e.align?null===(d=Y.find((l=>l.type===String(e.align).toLowerCase())))||void 0===d?void 0:d.class:""),sx:{fontSize:"".concat(B,"px"),backgroundColor:"#EDF0F7"},sortDirection:!!n&&o,children:(0,k.jsx)(f.c,{active:!!n,direction:o,onClick:()=>(e=>{const l=$.find((l=>l.columnId===e));if(l){const s="asc"===l.direction;J($.map((l=>l.columnId===e?(0,t.c)((0,t.c)({},l),{},{direction:s?"desc":"asc"}):l)))}else J([...$,{columnId:e,direction:"asc"}])})(e.Field_Name),children:e.ColumnHeader||(null===e||void 0===e||null===(i=e.Field_Name)||void 0===i?void 0:i.replace(/_/g," "))})},l):(0,k.jsx)(m.c,{className:"".concat(e.ColumnHeader||null!==e&&void 0!==e&&e.Field_Name?" fw-bold border-end border-top p-2 appFont ":" p-0 "," ")+(e.align?null===(r=Y.find((l=>l.type===String(e.align).toLowerCase())))||void 0===r?void 0:r.class:""),sx:{fontSize:"".concat(B,"px"),backgroundColor:"#EDF0F7"},children:e.ColumnHeader||(null===e||void 0===e||null===(c=e.Field_Name)||void 0===c?void 0:c.replace(/_/g," "))},l):null}))]})}),(0,k.jsxs)(g.c,{children:[(E?ee:te).map(((e,l)=>(0,k.jsx)(ne,{row:e,index:l},l))),0===l.length&&(0,k.jsx)(h.c,{children:(0,k.jsx)(m.c,{colSpan:s.length+(!0===d&&i?1:0)+(!0===u?1:0),sx:{textAlign:"center"},children:"No Data"})})]})]})}),!E&&0!==te.length&&(0,k.jsx)("div",{className:"p-2 pb-0",children:(0,k.jsx)(N.c,{component:"div",count:l.length,page:q,onPageChange:(e,l)=>{H(l)},rowsPerPage:W,onRowsPerPageChange:e=>{Q(parseInt(e.target.value,10)),H(0)},rowsPerPageOptions:Array.from(new Set([c,5,20,50,100,200,500])).sort(((e,l)=>e-l)),labelRowsPerPage:"Rows per page",showFirstButton:!0,showLastButton:!0})})]})};L.defaultProps={dataArray:[],columns:[],onClickFun:null,isExpendable:!1,expandableComp:null,tableMaxHeight:550,initialPageCount:20,EnableSerialNumber:!1,CellSize:"small",disablePagination:!1,title:void 0,PDFPrintOption:!1,ExcelPrintOption:!1,maxHeightOption:!1,ButtonArea:null,MenuButtons:[],headerFontSizePx:13,bodyFontSizePx:13};const z=L},2940:(e,l,s)=>{s.d(l,{c:()=>o});var t=s(69060),a=s(47620),n=(s(34688),s(82496));const o=e=>{let{TasksArray:l}=e;const[s,o]=(0,t.useState)(null),[d,i]=(0,t.useState)(null),[r,c]=(0,t.useState)(null);(0,t.useEffect)((()=>{if(l.length>0){const e=l.reduce(((e,l)=>{const s=new Date((new Date).toISOString().split("T")[0]+"T"+l.Start_Time);return e+(new Date((new Date).toISOString().split("T")[0]+"T"+l.End_Time)-s)}),0),s=new Date((new Date).toISOString().split("T")[0]+"T"+l[0].Start_Time),t=new Date((new Date).toISOString().split("T")[0]+"T"+l[l.length-1].End_Time)-s,a=t-e,n=Math.floor(t/1e3),d=Math.floor(n/3600),i=Math.floor(n%3600/60),r=n%60;c("".concat(String(d).padStart(2,"0"),":").concat(String(i).padStart(2,"0"),":").concat(String(r).padStart(2,"0")));const h=l.map((e=>{const l=new Date((new Date).toISOString().split("T")[0]+"T"+e.Start_Time),s=new Date((new Date).toISOString().split("T")[0]+"T"+e.End_Time)-l;return{label:"".concat(e.Task_Name," (").concat(e.Start_Time," - ").concat(e.End_Time,")"),duration:s,backgroundColor:u()}})),m={labels:h.map((e=>e.label)),datasets:[{data:h.map((e=>e.duration)),backgroundColor:h.map((e=>e.backgroundColor)),borderColor:"rgba(255, 255, 255, 1)",borderWidth:1}]};m.labels.push("Free Time"),m.datasets[0].data.push(a),m.datasets[0].backgroundColor.push("#ADD8E6"),o(m)}}),[l]),(0,t.useEffect)((()=>{if(s){d&&d.destroy();const e=document.getElementById("empWokHours"),l=new a.cp(e,{type:"pie",data:s,options:{responsive:!0,plugins:{tooltip:{callbacks:{label:function(e){const l=e.parsed||0,s=e.dataset.data.reduce(((e,l)=>e+l),0),t=Math.round(l/s*100),a=Math.round(l/6e4);return"".concat(a," minutes (").concat(t,"%)")}}},datalabels:{color:"#fff",formatter:(e,l)=>{const s=l.chart.data.labels[l.dataIndex],t=l.parsed||0,a=l.dataset.data.reduce(((e,l)=>e+l),0),n=Math.round(t/a*100);return"".concat(s,": ").concat(e," (").concat(n,"%)")}}}}});i(l)}}),[s]);const u=()=>{let e="#";for(let l=0;l<6;l++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e};return l.length>0?(0,n.jsxs)("div",{className:"d-flex flex-column align-items-center my-3",style:{maxHeight:"500px"},children:[r&&(0,n.jsxs)("p",{className:"my-2",children:["Total Time: ",r]}),(0,n.jsx)("canvas",{id:"empWokHours",width:"400",height:"100"})]}):(0,n.jsx)("h5",{className:"text-center my-5",children:"No Data For PieChart!"})}},70408:(e,l,s)=>{s.r(l),s.d(l,{default:()=>Q});var t=s(69060),a=s(94968),n=s(32440),o=s(85400),d=s(57876),i=s(60832),r=s(49124),c=s(2940),u=s(36852),h=s(78092),m=s(43692),x=s(84436),v=s(11096),j=s(85624),p=s(30800),b=s(56640),f=s(82656),g=s(26773),N=s(89e3),S=s(4488),y=s(90048),C=s(33452),_=s(35832);const D=s.p+"static/media/ic_launcher.aa4d4f940bbebff07a57.png";var T=s(1908),w=s(82496);const I=()=>{var e,l,s,a,n,o,d,i,r,c;const u=JSON.parse(localStorage.getItem("user")),[h,m]=(0,t.useState)(!1),[x,v]=(0,t.useState)([]),j=null===u||void 0===u?void 0:u.UserId,[I,A]=(0,t.useState)(0),[k,P]=(0,t.useState)(!1),[E,F]=(0,t.useState)([]),[L,z]=(0,t.useState)({}),O=new Date,V=new Date(O.getFullYear(),O.getMonth(),2),[U,R]=(0,t.useState)({from:V.toISOString().split("T")[0],to:(new Date).toISOString().split("T")[0]}),M=D,[B,q]=(0,t.useState)({debit:0,credit:0}),H=(0,t.useRef)();(0,t.useEffect)((()=>{(0,T.q)({address:"userModule/customer/getBalance?UserId=".concat(j)}).then((e=>{if("Success"===e.status){var l;v(e.data);let s=0;null===(l=e.data)||void 0===l||l.forEach((e=>{s+=Number(e.Bal_Amount)})),A(s)}null!==e&&void 0!==e&&e.isCustomer?m(!0):m(!1)})).catch((e=>console.error(e)))}),[]);const W=(e,l)=>{var s,t,a;let n;n=l&&1===l?L:e,z(n),P(!0),(0,T.q)({address:"userModule/customer/StatementOfAccound?Cust_Id=".concat(null===(s=n)||void 0===s?void 0:s.Cust_Id,"&Acc_Id=").concat(null===(t=n)||void 0===t?void 0:t.tally_id,"&Company_Id=").concat(null===(a=n)||void 0===a?void 0:a.Company_Id,"&Fromdate=").concat(null===U||void 0===U?void 0:U.from,"&Todate=").concat(null===U||void 0===U?void 0:U.to)}).then((e=>{var l;F(e.data);let s={debit:0,credit:0};null===e||void 0===e||null===(l=e.data)||void 0===l||l.forEach((e=>{s.debit+=Number(e.Debit_Amt),s.credit+=Number(e.Credit_Amt)})),q(s)})).catch((e=>console.error(e)))},Q=()=>{P(!1),F([]),z({}),R({from:V.toISOString().split("T")[0],to:(new Date).toISOString().split("T")[0]})},$=(0,C.useReactToPrint)({content:()=>H.current});return h?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"card",children:[(0,w.jsx)("div",{className:"card-header py-3 bg-white",children:(0,w.jsxs)("p",{className:"mb-0 fw-bold",children:[(0,w.jsxs)("span",{children:["Balance of ",null===u||void 0===u?void 0:u.Name]}),(0,w.jsxs)("span",{className:I>0?"text-primary":"text-danger",children:[" \xa0( ",I.toLocaleString("en-IN")+(I<0?" CR":" DR")," )"]})]})}),(0,w.jsx)("div",{className:"card-body p-0 table-responsive",children:(0,w.jsxs)("table",{className:"table",children:[(0,w.jsx)("thead",{children:(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{style:{fontSize:"13px"},children:"S.No"}),(0,w.jsx)("th",{style:{fontSize:"13px"},children:" - "}),(0,w.jsx)("th",{style:{fontSize:"13px"},children:"Company"}),(0,w.jsx)("th",{style:{fontSize:"13px"},children:"Ledger"}),(0,w.jsx)("th",{style:{fontSize:"13px"},children:"Balance"}),(0,w.jsx)("th",{style:{fontSize:"13px"},children:"Dr/Cr"})]})}),(0,w.jsx)("tbody",{children:x.map(((e,l)=>{var s;return(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{style:{fontSize:"13px"},children:l+1}),(0,w.jsx)("td",{style:{fontSize:"13px"},children:(0,w.jsx)("button",{className:"icon-btn",onClick:()=>{W(e)},children:(0,w.jsx)(b.c,{sx:{fontSize:"inherit"}})})}),(0,w.jsx)("td",{style:{fontSize:"13px"},children:null===e||void 0===e?void 0:e.Company_Name}),(0,w.jsx)("td",{style:{fontSize:"13px"},children:null===e||void 0===e?void 0:e.ledger_name}),(0,w.jsx)("td",{style:{fontSize:"13px"},children:null===e||void 0===e||null===(s=e.Bal_Amount)||void 0===s?void 0:s.toLocaleString("en-IN")}),(0,w.jsx)("td",{style:{fontSize:"13px"},children:null===e||void 0===e?void 0:e.CR_DR})]},l)}))})]})})]}),(0,w.jsxs)(f.c,{open:k,onClose:Q,fullScreen:!0,fullWidth:!0,children:[(0,w.jsxs)(g.c,{className:"border-bottom text-primary d-flex align-items-center fa-18",children:[(0,w.jsxs)("span",{className:"flex-grow-1",children:["Transaction Report of ",null===L||void 0===L?void 0:L.Customer_name]}),(0,w.jsx)(N.c,{className:"fw-bold",onClick:$,children:"PDF"}),(0,w.jsx)(N.c,{className:"ms-1 fw-bold",onClick:()=>{(e=>{const l=_.c$.json_to_sheet(e),s=_.c$.book_new();_.c$.book_append_sheet(s,l,"Sheet1"),(0,_.a8)(s,"erpsmt_SOA_".concat((new Date).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),".xlsx"))})(E.map(((e,l)=>({Sno:l+1,Date:new Date(null===e||void 0===e?void 0:e.Ledger_Date).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}),Purticular:null===e||void 0===e?void 0:e.Ledger_Desc,InvoiceNo:null===e||void 0===e?void 0:e.invoice_no,Debit:Boolean(Number(e.Debit_Amt))?e.Debit_Amt.toLocaleString("en-IN"):"",Credit:Boolean(Number(e.Credit_Amt))?e.Credit_Amt.toLocaleString("en-IN"):"",Company:null===e||void 0===e?void 0:e.Company_Name,Ledger:null===e||void 0===e?void 0:e.Ledger_Name,Mobile_Number:null===e||void 0===e?void 0:e.Mobile_no}))))},children:"excel"})]}),(0,w.jsxs)(S.c,{className:"rounded-2 shadow m-4 mb-2 p-0",children:[(0,w.jsxs)("div",{className:"row align-content-center",children:[(0,w.jsx)("div",{className:"col-lg-1",children:(0,w.jsx)("img",{src:M,alt:"Company Logo",className:"smtlogo"})}),(0,w.jsx)("div",{className:"col-lg-4 p-2 ps-3",children:(0,w.jsx)("table",{className:"table border-0",children:(0,w.jsxs)("tbody",{children:[(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"border-0",children:"Company"}),(0,w.jsx)("td",{className:"border-0",children:null===L||void 0===L?void 0:L.Company_Name})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"border-0",children:"Ledger Name"}),(0,w.jsx)("td",{className:"border-0",children:null===L||void 0===L?void 0:L.ledger_name})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"border-0",children:"Contact Person"}),(0,w.jsx)("td",{className:"border-0",children:null===(e=E[0])||void 0===e?void 0:e.Contact_Person})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"border-0",children:"Mobile"}),(0,w.jsx)("td",{className:"border-0",children:null===(l=E[0])||void 0===l?void 0:l.Mobile_no})]})]})})}),(0,w.jsx)("div",{className:"col-lg-4 p-2",children:(0,w.jsx)("table",{className:"table",children:(0,w.jsxs)("tbody",{children:[(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"border-0",children:"Opening Balnce"}),(0,w.jsx)("td",{className:"border-0 text-primary",children:(null===(s=E[0])||void 0===s?void 0:s.Debit_Amt)>0?(null===(a=E[0])||void 0===a?void 0:a.Debit_Amt.toLocaleString("en-IN"))+" DR":(null===(n=E[0])||void 0===n?void 0:n.Credit_Amt.toLocaleString("en-IN"))+" CR"})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"border-0",children:"Closing Balance"}),(0,w.jsx)("td",{className:"border-0 text-primary",children:(null===B||void 0===B?void 0:B.debit)-(null===B||void 0===B?void 0:B.credit)<0?((null===B||void 0===B?void 0:B.debit)-(null===B||void 0===B?void 0:B.credit)).toLocaleString("en-IN")+" CR":((null===B||void 0===B?void 0:B.debit)-(null===B||void 0===B?void 0:B.credit)).toLocaleString("en-IN")+" DR"})]})]})})}),(0,w.jsx)("div",{className:"col-lg-3 p-2",children:(0,w.jsx)("table",{className:"table border-0",children:(0,w.jsxs)("tbody",{children:[(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"border-0",children:"From :"}),(0,w.jsx)("td",{className:"p-0 border-0",children:(0,w.jsx)("input",{type:"date",className:"form-control w-auto ms-2",onChange:e=>R((0,p.c)((0,p.c)({},U),{},{from:e.target.value})),value:U.from})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"border-0",children:"To :"}),(0,w.jsx)("td",{className:"p-0 border-0",children:(0,w.jsx)("input",{type:"date",className:"form-control w-auto ms-2",onChange:e=>{U.from&&U.from<=e.target.value?R((0,p.c)((0,p.c)({},U),{},{to:e.target.value})):window.alert("Invald Date Range")},value:U.to,disabled:!U.from})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"border-0"}),(0,w.jsx)("td",{className:"border-0",children:(0,w.jsx)("button",{className:"btn text-white",style:{backgroundColor:"rgb(66, 34, 225)"},onClick:()=>{W("",1)},children:"Search"})})]})]})})})]}),(0,w.jsx)("div",{className:"p-2 table-responsive",children:(0,w.jsxs)("table",{className:"table",children:[(0,w.jsx)("thead",{children:(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{className:"fa-13 tble-hed-stick",children:"-"}),(0,w.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Date"}),(0,w.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Particulars"}),(0,w.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Invoice No"}),(0,w.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Dr"}),(0,w.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Cr"})]})}),(0,w.jsx)("tbody",{children:E.map(((e,l)=>(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"fa-13 bg-light",children:l+1}),(0,w.jsx)("td",{className:"fa-13 bg-light",children:new Date(null===e||void 0===e?void 0:e.Ledger_Date).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"})}),(0,w.jsx)("td",{className:"fa-13 bg-light",children:e.Ledger_Desc}),(0,w.jsx)("td",{className:"fa-13",children:e.invoice_no}),(0,w.jsx)("td",{className:"fa-13",children:e.Debit_Amt.toLocaleString("en-IN")}),(0,w.jsx)("td",{className:"fa-13 bg-light",children:e.Credit_Amt.toLocaleString("en-IN")})]},l)))})]})}),(0,w.jsx)("div",{className:"d-none",children:(0,w.jsxs)("div",{className:"d-block px-5 py-2",ref:H,children:[(0,w.jsx)("img",{src:M,alt:"smtlogo",className:"smtlogo"}),(0,w.jsx)("table",{className:"table",children:(0,w.jsxs)("tbody",{children:[(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"border-0 fa-14",children:"Company"}),(0,w.jsx)("td",{className:"border-0 fa-14 fw-bold",children:null===L||void 0===L?void 0:L.Company_Name})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"border-0 fa-14",children:"Ledger Name"}),(0,w.jsx)("td",{className:"border-0 fa-14 fw-bold",children:null===L||void 0===L?void 0:L.ledger_name})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"border-0 fa-14",children:"Contact Person"}),(0,w.jsx)("td",{className:"border-0 fa-14 fw-bold",children:null===(o=E[0])||void 0===o?void 0:o.Contact_Person})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"border-0 fa-14",children:"Mobile"}),(0,w.jsx)("td",{className:"border-0 fa-14 fw-bold",children:null===(d=E[0])||void 0===d?void 0:d.Mobile_no})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"border-0 fa-14",children:"From"}),(0,w.jsx)("td",{className:"border-0 fa-14 fw-bold",children:U.from})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"border-0 fa-14",children:"To"}),(0,w.jsx)("td",{className:"border-0 fa-14 fw-bold",children:U.to})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"border-0 fa-14",children:"Opening Balance"}),(0,w.jsx)("td",{className:"border-0 fa-14 fw-bold",children:(null===(i=E[0])||void 0===i?void 0:i.Debit_Amt)>0?(null===(r=E[0])||void 0===r?void 0:r.Debit_Amt.toLocaleString("en-IN"))+" DR":(null===(c=E[0])||void 0===c?void 0:c.Credit_Amt.toLocaleString("en-IN"))+" CR"})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"border-0 fa-14",children:"Closing Balance"}),(0,w.jsx)("td",{className:"border-0 fa-14 fw-bold",children:(null===B||void 0===B?void 0:B.debit)-(null===B||void 0===B?void 0:B.credit)<0?((null===B||void 0===B?void 0:B.debit)-(null===B||void 0===B?void 0:B.credit)).toLocaleString("en-IN")+" CR":((null===B||void 0===B?void 0:B.debit)-(null===B||void 0===B?void 0:B.credit)).toLocaleString("en-IN")+" DR"})]})]})}),(0,w.jsx)("div",{className:"p-2 table-responsive",children:(0,w.jsxs)("table",{className:"table",children:[(0,w.jsx)("thead",{children:(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{className:"fa-13 tble-hed-stick",children:"-"}),(0,w.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Date"}),(0,w.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Particulars"}),(0,w.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Invoice No"}),(0,w.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Dr"}),(0,w.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Cr"})]})}),(0,w.jsx)("tbody",{children:E.map(((e,l)=>(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"fa-13 bg-light",children:l+1}),(0,w.jsx)("td",{className:"fa-13 bg-light",children:new Date(null===e||void 0===e?void 0:e.Ledger_Date).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"})}),(0,w.jsx)("td",{className:"fa-13 bg-light",children:e.Ledger_Desc}),(0,w.jsx)("td",{className:"fa-13",children:e.invoice_no}),(0,w.jsx)("td",{className:"fa-13",children:Boolean(Number(e.Debit_Amt))&&e.Debit_Amt.toLocaleString("en-IN")}),(0,w.jsx)("td",{className:"fa-13 bg-light",children:Boolean(Number(e.Credit_Amt))&&e.Credit_Amt.toLocaleString("en-IN")})]},l)))})]})})]})})]}),(0,w.jsx)(y.c,{children:(0,w.jsx)(N.c,{onClick:Q,variant:"contained",color:"error",children:"Close"})})]})]}):(0,w.jsx)(w.Fragment,{})};var A=s(39308),k=s(56480);const P=()=>{const e=JSON.parse(localStorage.getItem("user")),l={Latitude:null,Longitude:null,error:null,UserId:e.UserId,Description:"",dialog:!1},[s,a]=(0,t.useState)({}),[n,o]=(0,t.useState)(!1),[d,i]=(0,t.useState)(l);(0,t.useEffect)((()=>{a({}),(0,T.q)({address:"empAttendance/attendance?UserId=".concat(null===e||void 0===e?void 0:e.UserId)}).then((e=>{var l;null!==e&&void 0!==e&&e.success&&(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.length)>0&&a(null===e||void 0===e?void 0:e.data[0])})).catch((e=>console.error(e)))}),[null===e||void 0===e?void 0:e.UserId,n]);const r=()=>{i(l)};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(m.c,{className:"col-xl-4    col-lg-6 col-md-6",children:[(0,w.jsxs)("div",{className:"d-flex justify-content-between align-items-center p-3 border-bottom",children:[(0,w.jsx)("h5",{className:"mb-0",children:"Attendance"}),(0,w.jsx)(N.c,{variant:"outlined",onClick:()=>{(async()=>{try{const e=await new Promise(((e,l)=>{navigator.geolocation.getCurrentPosition(e,l)})),{latitude:l,longitude:s}=e.coords;return i((e=>(0,p.c)((0,p.c)({},e),{},{Latitude:l,Longitude:s,error:null}))),!0}catch(e){return e.code===e.PERMISSION_DENIED?(i((e=>(0,p.c)((0,p.c)({},e),{},{Latitude:null,Longitude:null,error:"Location access denied"}))),k.m4.warn("Allow Location Access")):i((l=>(0,p.c)((0,p.c)({},l),{},{Latitude:null,Longitude:null,error:e.message}))),!1}})().then((e=>{e?null!==d&&void 0!==d&&d.Latitude&&null!==d&&void 0!==d&&d.Longitude?(0,T.q)({address:"empAttendance/attendance",method:"POST",bodyData:{UserId:null===d||void 0===d?void 0:d.UserId,Latitude:null===d||void 0===d?void 0:d.Latitude,Longitude:null===d||void 0===d?void 0:d.Longitude}}).then((e=>{o(!n),e.success?k.m4.success(e.message):k.m4.error(e.message)})):k.m4.warn("Please Retry"):k.m4.error("There is a problem in get location")}))},disabled:Boolean(null===s||void 0===s?void 0:s.Active_Status),children:"START Day"})]}),Boolean(null===s||void 0===s?void 0:s.Active_Status)&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(x.c,{children:(0,w.jsxs)("div",{className:"fw-bold text-muted",children:[(0,w.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,w.jsx)("span",{children:"Start Date"}),(0,w.jsx)("br",{}),(0,w.jsx)("span",{children:null!==s&&void 0!==s&&s.Start_Date?(0,A.uy)(null===s||void 0===s?void 0:s.Start_Date):" --:--:-- "})]}),(0,w.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,w.jsx)("span",{children:"In Time"}),(0,w.jsx)("span",{children:null!==s&&void 0!==s&&s.Start_Date?(0,A.AX)(null===s||void 0===s?void 0:s.Start_Date):" --:--:-- "})]})]})}),(0,w.jsx)("div",{className:"border-top p-3 d-flex justify-content-end",children:(0,w.jsx)(N.c,{variant:"outlined",onClick:()=>i((e=>(0,p.c)((0,p.c)({},e),{},{dialog:!0}))),children:"End Day"})})]})]}),(0,w.jsxs)(f.c,{open:null===d||void 0===d?void 0:d.dialog,onClose:r,fullWidth:!0,maxWidth:"md",children:[(0,w.jsx)(g.c,{children:"Cloase Attendance"}),(0,w.jsxs)(S.c,{children:[(0,w.jsx)("label",{className:"mb-3",children:"Work Summary"}),(0,w.jsx)("textarea",{value:null===d||void 0===d?void 0:d.Description,className:"cus-inpt",rows:5,onChange:e=>i((l=>(0,p.c)((0,p.c)({},l),{},{Description:e.target.value}))),placeholder:"Narrate the today's work summary"})]}),(0,w.jsxs)(y.c,{children:[(0,w.jsx)(N.c,{onClick:r,children:"Cancel"}),(0,w.jsx)(N.c,{variant:"outlined",onClick:()=>{(0,T.q)({address:"empAttendance/attendance",method:"PUT",bodyData:{Id:null===s||void 0===s?void 0:s.Id,Description:null===d||void 0===d?void 0:d.Description}}).then((e=>{e.success?(o(!n),k.m4.success(e.message),r()):k.m4.error(e.message)}))},children:"Confirm"})]})]})]})};var E=s(42312),F=s(41736),L=s(72920),z=s(96792),O=s(47752),V=s(52384),U=s(35840),R=s(13724),M=s(63676);const B=e=>{var l;return(null===(l=[{str:"SALES",icon:(0,w.jsx)(F.Ssj,{style:{fontSize:"80px"}})},{str:"PURCHASE",icon:(0,w.jsx)(E.c,{style:{fontSize:"80px"}})},{str:"RECEIPT",icon:(0,w.jsx)(z.IR,{style:{fontSize:"80px"}})},{str:"PAYMENT",icon:(0,w.jsx)(L.MBE,{style:{fontSize:"80px"}})},{str:"EXPENCES",icon:(0,w.jsx)(V.Gcr,{style:{fontSize:"80px"}})},{str:"PURCHASE ORDER",icon:(0,w.jsx)(O.s1Z,{style:{fontSize:"80px"}})},{str:"STOCK VALUE",icon:(0,w.jsx)(U.SAV,{style:{fontSize:"70px"}})}].find((l=>e===l.str)))||void 0===l?void 0:l.icon)||(0,w.jsx)(w.Fragment,{})},q=e=>{let{title:l,icon:s,firstVal:t,secondVal:a,classCount:n,onClick:o}=e;return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("div",{className:"col-xxl-3 col-lg-4 col-md-6 col-sm-12 p-2",children:(0,w.jsxs)("div",{onClick:o,className:"coloredDiv d-flex align-items-center text-light cus-shadow coloredDiv"+n,children:[(0,w.jsxs)("div",{className:"flex-grow-1 p-3",children:[(0,w.jsx)("h5",{children:l}),(0,w.jsxs)("h3",{className:"fa-16 text-end pe-3",children:[(0,w.jsxs)("span",{style:{fontSize:"30px"},children:[t||0," "]}),a&&"("+a+")"]})]}),s]})})})},H=e=>{var l;let{loadingOn:s,loadingOff:a}=e;const n=JSON.parse(localStorage.getItem("user")),o=2===Number(null===n||void 0===n?void 0:n.UserTypeId)||0===Number(null===n||void 0===n?void 0:n.UserTypeId)||1===Number(null===n||void 0===n?void 0:n.UserTypeId),[d,i]=(0,t.useState)([]),[r,c]=(0,t.useState)([]),[u,h]=(0,t.useState)([]),[m,x]=(0,t.useState)({salesDetails:[],erpPurchaseCount:0,erpPurchaseAmount:0,tallyPurchaseCount:0,tallyPurchaseAmount:0,morePurchaseInfo:[]}),[v,j]=(0,t.useState)({salesDetails:!1,purchaseDetails:!1,purchaseMoreDetails:!1}),[b,C]=(0,t.useState)({date:(0,A.Q7)()});(0,t.useEffect)((()=>{o&&n.Company_id&&(0,T.q)({address:"dashboard/erp/dashboardData?Fromdate=".concat(null===b||void 0===b?void 0:b.date,"&Company_Id=").concat(n.Company_id)}).then((e=>{e.success&&(i(null===e||void 0===e?void 0:e.data[0]),c(null===e||void 0===e?void 0:e.data[1]),h(null===e||void 0===e?void 0:e.data[2]))})).catch((e=>console.error(e)))}),[o,b.date]),(0,t.useEffect)((()=>{o&&((0,T.q)({address:"dashboard/salesInfo?Fromdate=".concat(null===b||void 0===b?void 0:b.date,"&Todate=").concat(null===b||void 0===b?void 0:b.date),headers:{Db:null===n||void 0===n?void 0:n.Company_id}}).then((e=>{e.success?x((l=>{var s;return(0,p.c)((0,p.c)({},l),{},{salesDetails:null!==(s=e.data)&&void 0!==s?s:[]})})):x((e=>(0,p.c)((0,p.c)({},e),{},{salesDetails:[]})))})).catch((e=>console.error(e))),(0,T.q)({address:"dashboard/purchaseInfo?Fromdate=".concat(null===b||void 0===b?void 0:b.date,"&Todate=").concat(null===b||void 0===b?void 0:b.date),method:"GET"}).then((e=>{if(e.success){const l=e.data[0][0]||{},s=e.data[1][0]||{};x((e=>(0,p.c)((0,p.c)({},e),{},{erpPurchaseCount:(0,A.Q$)(null===s||void 0===s?void 0:s.Purchase_Count)?null===s||void 0===s?void 0:s.Purchase_Count:0,erpPurchaseAmount:(0,A.Q$)(null===s||void 0===s?void 0:s.Purchase_Amount)?null===s||void 0===s?void 0:s.Purchase_Amount:0,tallyPurchaseCount:(0,A.Q$)(null===l||void 0===l?void 0:l.Tally_Purchase_Count)?null===l||void 0===l?void 0:l.Tally_Purchase_Count:0,tallyPurchaseAmount:(0,A.Q$)(null===l||void 0===l?void 0:l.Tally_Purchase_Amount)?null===l||void 0===l?void 0:l.Tally_Purchase_Amount:0})))}})).catch((e=>console.error(e))))}),[b.date]);const _=()=>{j((e=>Object.fromEntries(Object.entries(e).map((e=>{let[l,s]=e;return[l,!1]}))))),x((e=>(0,p.c)((0,p.c)({},e),{},{morePurchaseInfo:[]})))},D=(0,A.ui)(null===m||void 0===m?void 0:m.salesDetails,"Party_Group");return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("input",{type:"date",className:"cus-inpt w-auto m-1",value:b.date,onChange:e=>C((l=>(0,p.c)((0,p.c)({},l),{},{date:e.target.value})))}),(0,w.jsx)(M.c,{}),(0,w.jsxs)("div",{className:"p-1 row",children:[null===u||void 0===u?void 0:u.map(((e,l)=>(0,w.jsx)(q,{icon:B("STOCK VALUE"),title:"STOCK VALUE",classCount:16,firstVal:null!==e&&void 0!==e&&e.Stock_Value?(0,A.SA)(parseInt(null===e||void 0===e?void 0:e.Stock_Value)):0},l))),null===d||void 0===d?void 0:d.map(((e,l)=>(0,w.jsx)(q,{title:null===e||void 0===e?void 0:e.Trans_Type,onClick:()=>{switch(null===e||void 0===e?void 0:e.Trans_Type){case"SALES":j((e=>(0,p.c)((0,p.c)({},e),{},{salesDetails:!0})));break;case"PURCHASE":j((e=>(0,p.c)((0,p.c)({},e),{},{purchaseDetails:!0})))}},icon:null!==e&&void 0!==e&&e.Trans_Type?B(null===e||void 0===e?void 0:e.Trans_Type):void 0,classCount:l+7,firstVal:null!==e&&void 0!==e&&e.Trans_Amount?(0,A.SA)(parseInt(null===e||void 0===e?void 0:e.Trans_Amount)):0,secondVal:null!==e&&void 0!==e&&e.Trans_Count?(0,A.SA)(null===e||void 0===e?void 0:e.Trans_Count):0},l))),null===r||void 0===r?void 0:r.map(((e,l)=>(0,w.jsx)(q,{title:"EXPENCES",icon:B("EXPENCES"),classCount:19,firstVal:null!==e&&void 0!==e&&e.Total_Cost_Vlaue?(0,A.SA)(null===e||void 0===e?void 0:e.Total_Cost_Vlaue):0},l)))]}),(0,w.jsxs)(f.c,{open:v.salesDetails,onClose:_,fullWidth:!0,maxWidth:"sm",children:[(0,w.jsx)(g.c,{children:(0,w.jsx)("span",{children:(0,w.jsxs)("h4",{className:"d-flex justify-content-between flex-wrap",children:[(0,w.jsx)("span",{children:"Sales Details"}),(0,w.jsx)("span",{children:(0,A.SA)(null===m||void 0===m||null===(l=m.salesDetails)||void 0===l?void 0:l.reduce(((e,l)=>e+Number(null===l||void 0===l?void 0:l.Amount)),0))})]})})}),(0,w.jsx)(S.c,{children:(0,w.jsx)(R.cp,{dataArray:D,columns:[{Field_Name:"Party_Group",Fied_Data:"string",isVisible:1},{isCustomCell:!0,ColumnHeader:"Total Amount",Cell:e=>{var l;let{row:s}=e;return(0,A.SA)(null===s||void 0===s||null===(l=s.groupedData)||void 0===l?void 0:l.reduce(((e,l)=>e+Number(null===l||void 0===l?void 0:l.Amount)),0))},isVisible:1}],disablePagination:!0,EnableSerialNumber:!0,isExpendable:!0,expandableComp:e=>{var l;let{row:s}=e;return(0,w.jsx)(R.cp,{dataArray:null!==(l=null===s||void 0===s?void 0:s.groupedData)&&void 0!==l?l:[],columns:[{Field_Name:"Payment_Mode",Fied_Data:"string",isVisible:1},{Field_Name:"Amount",Fied_Data:"number",isVisible:1}],disablePagination:!0})}})}),(0,w.jsx)(y.c,{children:(0,w.jsx)(N.c,{onClick:()=>j((e=>(0,p.c)((0,p.c)({},e),{},{salesDetails:!1})))})})]}),(0,w.jsxs)(f.c,{open:v.purchaseDetails,onClose:_,fullWidth:!0,maxWidth:"sm",children:[(0,w.jsx)(g.c,{children:(0,w.jsx)("span",{children:(0,w.jsx)("h4",{className:"d-flex flex-wrap",children:(0,w.jsx)("span",{className:"flex-grow-1",children:"Purchase Details"})})})}),(0,w.jsx)(S.c,{children:(0,w.jsx)("table",{className:"table",children:(0,w.jsxs)("tbody",{children:[(0,w.jsx)("tr",{children:(0,w.jsx)("td",{className:"fa-14 border p-2 text-center fw-bold",colSpan:2,children:"ERP"})}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"fa-14 border p-2 ",children:"Count"}),(0,w.jsx)("td",{className:"fa-14 border p-2 ",children:(0,A.SA)(m.erpPurchaseCount)})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"fa-14 border p-2 ",children:"Amount"}),(0,w.jsx)("td",{className:"fa-14 border p-2 ",children:(0,A.SA)(m.erpPurchaseAmount)})]}),(0,w.jsx)("tr",{children:(0,w.jsx)("td",{className:"fa-14 border p-2 text-center fw-bold",colSpan:2,children:"Tally"})}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"fa-14 border p-2 ",children:"Count"}),(0,w.jsx)("td",{className:"fa-14 border p-2 ",children:(0,A.SA)(m.tallyPurchaseCount)})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"fa-14 border p-2 ",children:"Amount"}),(0,w.jsx)("td",{className:"fa-14 border p-2 ",children:(0,A.SA)(m.tallyPurchaseAmount)})]})]})})}),(0,w.jsxs)(y.c,{children:[(0,w.jsx)(N.c,{onClick:_,children:"close"}),(0,w.jsx)(N.c,{variant:"outlined",onClick:()=>{s&&s(),(0,T.q)({address:"dashboard/purchaseInfo/moreInfo?Fromdate=".concat(null===b||void 0===b?void 0:b.date,"&Todate=").concat(null===b||void 0===b?void 0:b.date)}).then((e=>{e.success&&(x((l=>{var s;return(0,p.c)((0,p.c)({},l),{},{morePurchaseInfo:null!==(s=e.data)&&void 0!==s?s:[]})})),j((e=>(0,p.c)((0,p.c)({},e),{},{purchaseMoreDetails:!0}))))})).catch((e=>console.error(e))).finally((()=>{a&&a()}))},children:"View More"})]})]}),(0,w.jsxs)(f.c,{open:v.purchaseMoreDetails,onClose:_,fullWidth:!0,maxWidth:"lg",children:[(0,w.jsx)(S.c,{children:(0,w.jsx)(R.cp,{dataArray:(null===m||void 0===m?void 0:m.morePurchaseInfo)||[],title:"Purchase Details",columns:[(0,R.A5)("invoice_no","string","Invoice No"),(0,R.A5)("reference_no","string","Ref No"),(0,R.A5)("invoice_date","date","Date"),(0,R.A5)("ledger_name","string","Ledger Name"),(0,R.A5)("voucher_name","string","Voucher Name"),(0,R.A5)("total_invoice_value","number","Invoice Value")]})}),(0,w.jsx)(y.c,{children:(0,w.jsx)(N.c,{onClick:_,children:"close"})})]})]})},W=e=>{let{loadingOn:l,loadingOff:s,reqDate:a=(0,A.Q7)()}=e;const{user:n}=(0,A.gV)(),[o,d]=(0,t.useState)([]),[i,r]=(0,t.useState)({fetchReqDate:a});return(0,t.useEffect)((()=>{(0,A.e8)(i.fetchReqDate)&&(0,A.Q$)(n.UserId)&&(d([]),l&&l(),(0,T.q)({address:"dataEntry/costCenter/report/employee?userid=".concat(n.UserId,"&reqDate=").concat(i.fetchReqDate)}).then((e=>{e.success&&d(e.data)})).catch((e=>console.error(e))).finally((()=>{s&&s()})))}),[i.fetchReqDate,n.UserId]),(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(m.c,{children:[(0,w.jsxs)("div",{className:"d-flex flex-wrap align-items-center border-bottom px-3 py-2",children:[(0,w.jsx)("span",{className:"flex-grow-1 fa-16",children:"ERP Activity"}),(0,w.jsx)("input",{type:"date",value:i.fetchReqDate,onChange:e=>r((l=>(0,p.c)((0,p.c)({},l),{},{fetchReqDate:e.target.value}))),className:"cus-inpt w-auto p-2"})]}),(0,w.jsxs)("div",{className:"d-flex flex-wrap align-items-center px-3 py-2 fa-15",children:[(0,w.jsx)(m.c,{className:"mx-2",style:{minWidth:200},children:(0,w.jsxs)(x.c,{className:"d-flex flex-column align-items-center",children:[(0,w.jsx)("h4",{children:o.reduce(((e,l)=>(0,A.Q5)(e,l.StockJournalTotal)),0)}),(0,w.jsx)("h6",{children:"Stock Handled KGs"})]})}),(0,w.jsx)(m.c,{className:"mx-2",style:{minWidth:200},children:(0,w.jsxs)(x.c,{className:"d-flex flex-column align-items-center",children:[(0,w.jsx)("h4",{children:o.reduce(((e,l)=>{var s;return(0,A.Q5)(e,null===l||void 0===l||null===(s=l.Stock_Journals)||void 0===s?void 0:s.length)}),0)}),(0,w.jsx)("h6",{children:"Movement Activity"})]})}),(0,w.jsx)(m.c,{className:"mx-2",style:{minWidth:200},children:(0,w.jsxs)(x.c,{className:"d-flex flex-column align-items-center",children:[(0,w.jsx)("h4",{children:o.reduce(((e,l)=>(0,A.Q5)(e,l.TripSheetTotal)),0)}),(0,w.jsx)("h6",{children:"Trip Sheet KGs"})]})}),(0,w.jsx)(m.c,{className:"mx-2",style:{minWidth:200},children:(0,w.jsxs)(x.c,{className:"d-flex flex-column align-items-center",children:[(0,w.jsx)("h4",{children:o.reduce(((e,l)=>{var s;return(0,A.Q5)(e,null===l||void 0===l||null===(s=l.Trip_Sheet)||void 0===s?void 0:s.length)}),0)}),(0,w.jsx)("h6",{children:"Total Trips"})]})})]})]})})},Q=e=>{let{loadingOn:l,loadingOff:s}=e;const p=JSON.parse(localStorage.getItem("user")),[b,f]=(0,t.useState)({}),[g,N]=(0,t.useState)([]),[S,y]=(0,t.useState)([]),[C,_]=(0,t.useState)([]),D=0===Number(null===p||void 0===p?void 0:p.UserTypeId)||1===Number(null===p||void 0===p?void 0:p.UserTypeId),k=2===Number(null===p||void 0===p?void 0:p.UserTypeId),E=6===Number(null===p||void 0===p?void 0:p.UserTypeId)||3===Number(null===p||void 0===p?void 0:p.UserTypeId),F=4===Number(null===p||void 0===p?void 0:p.UserTypeId)||5===Number(null===p||void 0===p?void 0:p.UserTypeId),[L,z]=(0,t.useState)(!1);(0,t.useEffect)((()=>{(D||E||k)&&(0,T.q)({address:"dashboard/dashboardData?UserType=".concat(null===p||void 0===p?void 0:p.UserTypeId,"&Emp_Id=").concat(null===p||void 0===p?void 0:p.UserId)}).then((e=>{e.success?f(e.data[0]):f({})})).catch((e=>{console.error(e)}))}),[null===p||void 0===p?void 0:p.UserId,null===p||void 0===p?void 0:p.UserTypeId,D,k,E]),(0,t.useEffect)((()=>{E&&(0,T.q)({address:"dashboard/getTallyData?UserId=".concat(null===p||void 0===p?void 0:p.UserId)}).then((e=>{e.success?_(e.data):_([])})).catch((e=>console.error(e)))}),[E]),(0,t.useEffect)((()=>{E&&((0,T.q)({address:"taskManagement/task/work?Emp_Id=".concat(null===p||void 0===p?void 0:p.UserId,"&from=").concat((0,A.Q7)(),"&to=").concat((0,A.Q7)())}).then((e=>{e.success?N(e.data):_([])})).catch((e=>console.error(e))),(0,T.q)({address:"taskManagement/tasks/myTasks?Emp_Id=".concat(null===p||void 0===p?void 0:p.UserId,"&reqDate=").concat((0,A.Q7)())}).then((e=>{e.success?(e.data.sort(((e,l)=>{const[s,t]=null===e||void 0===e?void 0:e.Sch_Time.split(":").map(Number),[a,n]=null===l||void 0===l?void 0:l.Sch_Time.split(":").map(Number);return s!==a?s-a:t-n})),y(e.data)):y([])})).catch((e=>console.error(e))))}),[E,null===p||void 0===p?void 0:p.UserId]);const O=e=>{let{title:l,icon:s,firstVal:t,secondVal:a,classCount:n}=e;return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("div",{className:"".concat((D||k)&&"col-xxl-3"," col-lg-4 col-md-6 col-sm-12 p-2"),children:(0,w.jsxs)("div",{className:"coloredDiv d-flex align-items-center text-light cus-shadow coloredDiv"+n,children:[(0,w.jsxs)("div",{className:"flex-grow-1 p-3",children:[(0,w.jsx)("h5",{className:"text-uppercase",children:l}),(0,w.jsxs)("h3",{className:"fa-16 text-end pe-3",children:[(0,w.jsxs)("span",{style:{fontSize:"30px"},children:[t||0," "]}),a&&"/"+a]})]}),s]})})})},V=e=>{const l=Math.floor(Number(e)/60),s=Number(e)%60,t=l<10?"0"+l:l,a=s<10?"0"+s:s;return t&&a?t+":"+a:"00:00"},U=e=>["bg-dark","bg-info","bg-warning","bg-success","bg-danger"][Number(e)];return(0,w.jsxs)(w.Fragment,{children:[F&&(0,w.jsx)(I,{}),(k||D)&&(0,w.jsx)(H,{}),(D||k)&&(0,w.jsx)(u.c,{control:(0,w.jsx)(h.c,{checked:L,onChange:e=>z(e.target.checked)}),label:"Show Task Management",className:" fw-bold text-primary"}),(0,w.jsxs)("div",{className:"px-1",children:[(D||k)&&L&&(0,w.jsxs)("div",{className:"row",children:[(0,w.jsx)(O,{title:"Projects",icon:(0,w.jsx)(i.AFi,{style:{fontSize:"80px"}}),firstVal:null===b||void 0===b?void 0:b.ActiveProjects,secondVal:null===b||void 0===b?void 0:b.AllProjects,classCount:"1"}),(0,w.jsx)(O,{title:"Schedule",icon:(0,w.jsx)(a.fs,{style:{fontSize:"80px"}}),firstVal:null===b||void 0===b?void 0:b.ActiveSchedule,secondVal:null===b||void 0===b?void 0:b.AllSchedule,classCount:"2"}),(0,w.jsx)(O,{title:"Completed Tasks",icon:(0,w.jsx)(r.eE9,{style:{fontSize:"80px"}}),firstVal:null===b||void 0===b?void 0:b.TaskCompleted,classCount:"3"}),(0,w.jsx)(O,{title:"Employee",icon:(0,w.jsx)(o.xBK,{style:{fontSize:"80px"}}),firstVal:null===b||void 0===b?void 0:b.EmployeeCounts,secondVal:Number(null===b||void 0===b?void 0:b.EmployeeCounts)+(null===b||void 0===b?void 0:b.OtherUsers),classCount:"4"}),(0,w.jsx)(O,{title:"Worked Hours",icon:(0,w.jsx)(d.cDd,{style:{fontSize:"80px"}}),firstVal:V(null===b||void 0===b?void 0:b.TotalMinutes),classCount:"5"}),(0,w.jsx)(O,{title:"Today Tasks",icon:(0,w.jsx)(n.yic,{style:{fontSize:"80px"}}),firstVal:null===b||void 0===b?void 0:b.TodayTaskCompleted,secondVal:null===b||void 0===b?void 0:b.TodayTasks,classCount:"6"})]}),E&&(0,w.jsxs)("div",{className:"row",children:[(0,w.jsx)(O,{title:"Completed Tasks",firstVal:null===b||void 0===b?void 0:b.TaskCompleted,secondVal:null===b||void 0===b?void 0:b.TotalTasks,icon:(0,w.jsx)(r.eE9,{style:{fontSize:"80px"}}),classCount:"1"}),(0,w.jsx)(O,{title:"Today Tasks",firstVal:null===b||void 0===b?void 0:b.TodayTaskCompleted,secondVal:null===b||void 0===b?void 0:b.TodayTasks,icon:(0,w.jsx)(n.yic,{style:{fontSize:"80px"}}),classCount:"2"}),(0,w.jsx)(O,{title:"Total Work Hours",firstVal:V(null===b||void 0===b?void 0:b.WorkedMinutes),icon:(0,w.jsx)(n.yic,{style:{fontSize:"80px"}}),classCount:"3"})]})]}),(0,w.jsx)("br",{}),E&&(0,w.jsx)(P,{}),(0,w.jsx)("br",{}),E&&g.length>0&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(m.c,{children:(0,w.jsxs)(x.c,{sx:{pb:2},children:[(0,w.jsx)("h5",{children:"Today Activity"}),(0,w.jsx)(c.c,{TasksArray:g}),(0,w.jsx)("br",{})]})}),(0,w.jsx)("br",{})]}),(0,w.jsx)(W,{loadingOn:l,loadingOff:s}),E&&S.length>0&&(0,w.jsxs)(m.c,{children:[(0,w.jsx)(v.c,{title:"Today Tasks:"+S.length,sx:{pb:0}}),(0,w.jsx)(x.c,{children:(0,w.jsx)("div",{className:"table-responsive",children:(0,w.jsxs)("table",{className:"table mb-1 ",children:[(0,w.jsx)("thead",{children:(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{className:"fa-13 border",children:"SNo"}),(0,w.jsx)("th",{className:"fa-13 border",children:"Task"}),(0,w.jsx)("th",{className:"fa-13 border",children:"Timer Based"}),(0,w.jsx)("th",{className:"fa-13 border",children:"Schedule"}),(0,w.jsx)("th",{className:"fa-13 border",children:"Duration"}),(0,w.jsx)("th",{className:"fa-13 border",children:"Status"})]})}),(0,w.jsx)("tbody",{children:S.map(((e,l)=>(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"fa-13 border",children:l+1}),(0,w.jsx)("td",{className:"fa-13 border",children:null===e||void 0===e?void 0:e.Task_Name}),(0,w.jsx)("td",{className:"fa-13 border text-center",children:(0,w.jsx)("span",{className:"badge rounded-4 px-3 fw-bold text-white ".concat(U(1===Number(null===e||void 0===e?void 0:e.Timer_Based)?3:1)),children:1===Number(null===e||void 0===e?void 0:e.Timer_Based)?"Yes":"No"})}),(0,w.jsxs)("td",{className:"fa-13 border text-center",children:[null===e||void 0===e?void 0:e.Sch_Time," - ",null===e||void 0===e?void 0:e.EN_Time]}),(0,w.jsx)("td",{className:"fa-13 border text-center",children:null===e||void 0===e?void 0:e.Sch_Period}),(0,w.jsx)("td",{className:"fa-13 border text-center",children:(0,w.jsx)("span",{className:"badge rounded-4 px-3 fw-bold text-white ".concat(U(null!==e&&void 0!==e&&e.Work_Id?3:1)),children:null!==e&&void 0!==e&&e.Work_Id?"Completed":"Pending"})})]},l)))})]})})})]}),(0,w.jsx)("br",{}),E&&(null===C||void 0===C?void 0:C.length)>0&&(0,w.jsxs)(m.c,{component:j.c,children:[(0,w.jsx)(v.c,{title:"Tally Entries",sx:{pb:0}}),(0,w.jsx)(x.c,{children:(0,w.jsx)("div",{className:"table-responsive",children:(0,w.jsxs)("table",{className:"table",children:[(0,w.jsx)("thead",{children:(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{className:"fa-13 border",children:"Sno"}),(0,w.jsx)("th",{className:"fa-13 border",children:"Particulars"}),(0,w.jsx)("th",{className:"fa-13 border",children:"Value"})]})}),(0,w.jsx)("tbody",{children:null===C||void 0===C?void 0:C.map(((e,l)=>(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"fa-13 border",children:l+1}),(0,w.jsx)("td",{className:"fa-13 border",children:null===e||void 0===e?void 0:e.Particulars}),(0,w.jsx)("td",{className:"fa-13 border",children:null===e||void 0===e?void 0:e.Tally_Count})]},l)))})]})})})]})]})}},63676:(e,l,s)=>{s.d(l,{c:()=>d});var t=s(69060),a=s(39308),n=s(1908),o=s(82496);const d=()=>{const e=JSON.parse(localStorage.getItem("user")),l=0===Number(null===e||void 0===e?void 0:e.UserTypeId)||1===Number(null===e||void 0===e?void 0:e.UserTypeId),[s,d]=(0,t.useState)(null);return(0,t.useEffect)((()=>{l&&(0,n.q)({address:"dashboard/lastSyncedTime",headers:{Db:null===e||void 0===e?void 0:e.Company_id}}).then((e=>{if(e.success){var l,s;const t=null!==e&&void 0!==e&&null!==(l=e.data[0])&&void 0!==l&&l.Last_Sync_Date_Time?new Date(null===e||void 0===e||null===(s=e.data[0])||void 0===s?void 0:s.Last_Sync_Date_Time):null;d(t)}}))}),[l,null===e||void 0===e?void 0:e.Company_id]),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("span",{className:"fa-14 px-2 py-1 bg-white rounded border",children:[" Sync: ",s?(0,a.gt)(s):"-"]})})}}}]);
//# sourceMappingURL=1008.7d3ad7e3.chunk.js.map