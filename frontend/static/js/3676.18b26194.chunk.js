"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[3676],{50764:(e,l,a)=>{a.d(l,{c:()=>w});var i=a(30800),t=a(69060),d=a(39308),s=a(71448),r=a(52924),n=a(44380),o=a(12572),c=a(89e3),u=a(3358),m=a(5548),v=a(82656),p=a(26773),x=a(4488),_=a(90048),g=a(43692),h=a(85624),y=a(78092),b=a(68424),j=a(39504),F=a(61988),N=a(12120),f=a(74912),A=a(97332),D=a(13724),C=a(82496);(0,A.g0)({fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0});const M=(0,C.jsx)(b.c,{fontSize:"small"}),S=(0,C.jsx)(j.c,{fontSize:"small"}),w=e=>{let{dataArray:l=[],columns:a=[],ExpandableComp:b,enableFilters:j=!1,ExportAllData:A=!1}=e;const[w,V]=(0,t.useState)([]),[k,O]=(0,t.useState)({}),[T,B]=(0,t.useState)(l),L=Object.keys(k).length>0?T:l,[I,W]=(0,t.useState)({filters:!1,columnSettings:!1});(0,t.useEffect)((()=>{const e=a.map(((e,l)=>({Field_Name:null===e||void 0===e?void 0:e.Column_Name,Fied_Data:null===e||void 0===e?void 0:e.Data_Type,isVisible:l<=7?1:0,align:"center",OrderBy:l+1})));V(e)}),[a]);const E=(0,t.useMemo)((()=>[...w].sort(((e,l)=>e.OrderBy-l.OrderBy))),[w]);(0,t.useEffect)((()=>{G()}),[k]);const Q=(e,l)=>{O((a=>(0,i.c)((0,i.c)({},a),{},{[e]:l})))},G=()=>{let e=[...l];for(const l of w)if(k[l.Field_Name])if("range"===k[l.Field_Name].type){const{min:a,max:i}=k[l.Field_Name];e=e.filter((e=>{const t=e[l.Field_Name];return(void 0===a||t>=a)&&(void 0===i||t<=i)}))}else if("date"===k[l.Field_Name].type){const{start:a,end:i}=k[l.Field_Name].value;e=e.filter((e=>{const t=new Date(e[l.Field_Name]);return(void 0===a||t>=new Date(a))&&(void 0===i||t<=new Date(i))}))}else if(Array.isArray(k[l.Field_Name])){var a;e=(null===(a=k[l.Field_Name])||void 0===a?void 0:a.length)>0?e.filter((e=>k[l.Field_Name].includes(e[l.Field_Name].toLowerCase().trim()))):e}B(e)},P=e=>{const{Field_Name:l,Fied_Data:a}=e;var t,d,o,c,u,m,v,p,x,_;if("number"===a)return(0,C.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,C.jsx)("input",{placeholder:"Min",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(t=null===(d=k[l])||void 0===d?void 0:d.min)&&void 0!==t?t:"",onChange:e=>Q(l,(0,i.c)((0,i.c)({type:"range"},k[l]),{},{min:e.target.value?parseFloat(e.target.value):void 0}))}),(0,C.jsx)("input",{placeholder:"Max",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(o=null===(c=k[l])||void 0===c?void 0:c.max)&&void 0!==o?o:"",onChange:e=>Q(l,(0,i.c)((0,i.c)({type:"range"},k[l]),{},{max:e.target.value?parseFloat(e.target.value):void 0}))})]});if("date"===a)return(0,C.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,C.jsx)("input",{placeholder:"Start Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(u=null===(m=k[l])||void 0===m||null===(v=m.value)||void 0===v?void 0:v.start)&&void 0!==u?u:"",onChange:e=>{var a;return Q(l,{type:"date",value:(0,i.c)((0,i.c)({},null===(a=k[l])||void 0===a?void 0:a.value),{},{start:e.target.value||void 0})})}}),(0,C.jsx)("input",{placeholder:"End Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(p=null===(x=k[l])||void 0===x||null===(_=x.value)||void 0===_?void 0:_.end)&&void 0!==p?p:"",onChange:e=>{var a;return Q(l,{type:"date",value:(0,i.c)((0,i.c)({},null===(a=k[l])||void 0===a?void 0:a.value),{},{end:e.target.value||void 0})})}})]});if("string"===a){const e=[...new Set(L.map((e=>{var a,i;return null===(a=e[l])||void 0===a||null===(i=a.toLowerCase())||void 0===i?void 0:i.trim()})))];return(0,C.jsx)(s.c,{multiple:!0,id:"".concat(l,"-filter"),options:e,disableCloseOnSelect:!0,getOptionLabel:e=>e,value:k[l]||[],onChange:(e,a)=>Q(l,a),renderOption:(e,l,a)=>{let{selected:t}=a;return(0,C.jsxs)("li",(0,i.c)((0,i.c)({},e),{},{children:[(0,C.jsx)(r.c,{icon:M,checkedIcon:S,style:{marginRight:8},checked:t}),l]}))},isOptionEqualToValue:(e,l)=>e===l,renderInput:e=>(0,C.jsx)(n.c,(0,i.c)((0,i.c)({},e),{},{label:l,placeholder:"Select ".concat(null===l||void 0===l?void 0:l.replace(/_/g," "))}))})}};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(o.c,{sx:{display:"flex",gap:"16px",padding:"8px",flexWrap:"wrap"},children:(0,C.jsx)(c.c,{onClick:()=>W((e=>(0,i.c)((0,i.c)({},e),{},{filters:!0}))),className:j?"d-md-none d-inline":"d-none",startIcon:(0,C.jsx)(F.c,{}),children:"Filters"})}),(0,C.jsxs)("div",{className:"row ",children:[(0,C.jsx)("div",{className:j?"col-xxl-10 col-lg-9 col-md-8":"",children:(0,C.jsx)("div",{className:"p-2",children:(0,C.jsx)(D.cp,{dataArray:L,columns:E,isExpendable:!!b,expandableComp:b||void 0,tableMaxHeight:650,ExcelPrintOption:!0})})}),j&&(0,C.jsxs)("div",{className:"col-xxl-2 col-lg-3 col-md-4 d-none d-md-block",children:[(0,C.jsxs)("h5",{className:"d-flex justify-content-between px-2",children:[(0,C.jsx)("span",{children:"Filters"}),(0,C.jsxs)("span",{children:[(0,C.jsx)(u.c,{title:"Column Visiblity",children:(0,C.jsx)(m.c,{size:"small",onClick:()=>W((e=>(0,i.c)((0,i.c)({},e),{},{columnSettings:!0}))),children:(0,C.jsx)(N.c,{})})}),(0,C.jsx)(u.c,{title:"Clear Filters",children:(0,C.jsx)(m.c,{size:"small",onClick:()=>O({}),children:(0,C.jsx)(f.c,{})})})]})]}),(0,C.jsxs)("div",{className:"border rounded-3 ",style:{maxHeight:"70vh",overflow:"auto"},children:[w.map(((e,l)=>{var a;return(0,C.jsxs)("div",{className:"py-3 px-3 hov-bg border-bottom",children:[(0,C.jsx)("label",{className:"mt-2 mb-1",children:null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.replace(/_/g," ")}),P(e)]},l)})),(0,C.jsx)("br",{})]})]})]}),(0,C.jsxs)(v.c,{open:I.filters,onClose:()=>W((e=>(0,i.c)((0,i.c)({},e),{},{filters:!1}))),fullWidth:!0,maxWidth:"sm",children:[(0,C.jsx)(p.c,{children:(0,C.jsx)("span",{children:(0,C.jsxs)("h5",{className:"d-flex justify-content-between px-2",children:[(0,C.jsx)("span",{children:"Filters"}),(0,C.jsxs)("span",{children:[(0,C.jsx)(u.c,{title:"Column Visiblity",children:(0,C.jsx)(m.c,{size:"small",onClick:()=>W((e=>(0,i.c)((0,i.c)({},e),{},{filters:!1}))),children:(0,C.jsx)(N.c,{})})}),(0,C.jsx)(u.c,{title:"Clear Filters",children:(0,C.jsx)(m.c,{size:"small",onClick:()=>O({}),children:(0,C.jsx)(f.c,{})})})]})]})})}),(0,C.jsx)(x.c,{children:(0,C.jsxs)("div",{className:"border rounded-3 ",style:{maxHeight:"70vh",overflow:"auto"},children:[w.map(((e,l)=>{var a;return(0,C.jsxs)("div",{className:"py-3 px-3 hov-bg border-bottom",children:[(0,C.jsx)("label",{className:"mt-2 mb-1",children:null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.replace(/_/g," ")}),P(e)]},l)})),(0,C.jsx)("br",{})]})}),(0,C.jsx)(_.c,{children:(0,C.jsx)(c.c,{onClick:()=>W((e=>(0,i.c)((0,i.c)({},e),{},{filters:!1}))),children:"Close"})})]}),(0,C.jsxs)(v.c,{open:I.columnSettings,onClose:()=>W((e=>(0,i.c)((0,i.c)({},e),{},{columnSettings:!1}))),maxWidth:"lg",fullWidth:!0,children:[(0,C.jsx)(p.c,{children:"Column Settings"}),(0,C.jsx)(x.c,{children:(0,C.jsx)("div",{className:"row",children:a.map(((e,l)=>{const a=w.find((l=>l.Field_Name===(null===e||void 0===e?void 0:e.Column_Name)));return(0,C.jsx)("div",{className:"col-lg-4 col-md-6 p-2",children:(0,C.jsxs)(g.c,{component:h.c,className:"p-2 d-flex justify-content-between align-items-center flex-wrap ".concat(l%2!==0?"bg-light":""),children:[(0,C.jsxs)("div",{className:"d-flex justify-content-between align-items-center flex-wrap",children:[(0,C.jsx)(y.c,{checked:Boolean(null===a||void 0===a?void 0:a.isVisible),onChange:l=>V((a=>a.map((a=>a.Field_Name===(null===e||void 0===e?void 0:e.Column_Name)?(0,i.c)((0,i.c)({},a),{},{isVisible:l.target.checked?1:0}):a))))}),(0,C.jsx)("h6",{className:"fa-13 mb-0 fw-bold ",children:null===e||void 0===e?void 0:e.Column_Name})]}),(0,C.jsx)("input",{type:"number",value:(0,d.Q$)(null===a||void 0===a?void 0:a.OrderBy)?null===a||void 0===a?void 0:a.OrderBy:"",onChange:e=>V((l=>l.map((l=>l.Field_Name===(null===a||void 0===a?void 0:a.Field_Name)?(0,i.c)((0,i.c)({},l),{},{OrderBy:e.target.value}):l)))),label:"Order Value",className:"mt-2 p-1 border-0 cus-inpt",style:{width:"80px"},placeholder:"Order"})]})},l)}))})}),(0,C.jsx)(_.c,{children:(0,C.jsx)(c.c,{onClick:()=>W((e=>(0,i.c)((0,i.c)({},e),{},{columnSettings:!1}))),color:"error",children:"close"})})]})]})}},93676:(e,l,a)=>{a.r(l),a.d(l,{default:()=>L});var i=a(30800),t=a(69060),d=a(43692),s=a(84436),r=a(3358),n=a(5548),o=a(39308),c=a(50764),u=a(13724),m=a(82496);const v=e=>{let{dataArray:l}=e;const[a,d]=(0,t.useState)([]);return(0,t.useEffect)((()=>{const e=(Array.isArray(l)?[...l]:[]).map((e=>{var l,a,t,d,s;return(0,i.c)((0,i.c)({},e),{},{M2_Avg:null!==(l=e.ALL_Avg_M2)&&void 0!==l?l:0,M3_Avg:null!==(a=e.ALL_Avg_M3)&&void 0!==a?a:0,M6_Avg:null!==(t=e.ALL_Avg_M6)&&void 0!==t?t:0,M9_Avg:null!==(d=e.ALL_Avg_M9)&&void 0!==d?d:0,M12_Avg:null!==(s=e.ALL_Avg_One_Year)&&void 0!==s?s:0,Billed_Qty:(0,o.SW)(e.StockTransaction,"bill_qty"),StockTransaction:e.StockTransaction.map((e=>{var l,a,t,d,s;return(0,i.c)((0,i.c)({},e),{},{M2_Avg:null!==(l=e.M2_AVG_Qty)&&void 0!==l?l:0,M3_Avg:null!==(a=e.M3_AVG_Qty)&&void 0!==a?a:0,M6_Avg:null!==(t=e.M6_AVG_Qty)&&void 0!==t?t:0,M9_Avg:null!==(d=e.M9_AVG_Qty)&&void 0!==d?d:0,M12_Avg:null!==(s=e.One_Year_AVG_Qty)&&void 0!==s?s:0})}))})})).map((e=>(0,i.c)((0,i.c)({},e),{},{Billed_Qty:(0,o.SW)(e.StockTransaction,"bill_qty")})));d(e)}),[l]),(0,m.jsx)(t.Fragment,{children:(0,m.jsx)(u.cp,{dataArray:a,isExpendable:!0,columns:[{Field_Name:"Stock_Group",isVisible:1,Fied_Data:"string"},{Field_Name:"Billed_Qty",isVisible:1,Fied_Data:"number"},{Field_Name:"M2_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M3_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M6_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M9_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M12_Avg",isVisible:1,Fied_Data:"number"}],expandableComp:e=>{let{row:l}=e;return(0,m.jsx)(u.cp,{initialPageCount:10,dataArray:Array.isArray(l.StockTransaction)?l.StockTransaction:[],columns:[{Field_Name:"Item_Name_Modified",isVisible:1,Fied_Data:"string"},{Field_Name:"bill_qty",isVisible:1,Fied_Data:"number"},{Field_Name:"M2_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M3_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M6_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M9_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M12_Avg",isVisible:1,Fied_Data:"number"}]})},tableMaxHeight:540})})},p=e=>{let{dataArray:l,days:a}=e;const[d,s]=(0,t.useState)([]);return(0,t.useEffect)((()=>{const e=(Array.isArray(l)?[...l]:[]).map((e=>{var l,t,d,s,r;return(0,i.c)((0,i.c)({},e),{},{M2_Avg:null!==(l=(0,o.yy)(e.ALL_Avg_M2,(0,o.W8)(2)/2))&&void 0!==l?l:0,M3_Avg:null!==(t=(0,o.yy)(e.ALL_Avg_M3,(0,o.W8)(3)/3))&&void 0!==t?t:0,M6_Avg:null!==(d=(0,o.yy)(e.ALL_Avg_M6,(0,o.W8)(6)/6))&&void 0!==d?d:0,M9_Avg:null!==(s=(0,o.yy)(e.ALL_Avg_M9,(0,o.W8)(9)/9))&&void 0!==s?s:0,M12_Avg:null!==(r=(0,o.yy)(e.ALL_Avg_One_Year,(0,o.W8)(12)/12))&&void 0!==r?r:0,Billed_Qty:(0,o.SW)(e.StockTransaction,"bill_qty"),Billed_Avg:(0,o.SW)(e.StockTransaction,"bill_qty")/a,StockTransaction:e.StockTransaction.map((e=>{var l,a,t,d,s;return(0,i.c)((0,i.c)({},e),{},{Grade_Item_Group:e.Item_Name_Modified,M2_Avg:null!==(l=(0,o.yy)(e.M2_AVG_Qty,(0,o.W8)(2)/2))&&void 0!==l?l:0,M3_Avg:null!==(a=(0,o.yy)(e.M3_AVG_Qty,(0,o.W8)(3)/3))&&void 0!==a?a:0,M6_Avg:null!==(t=(0,o.yy)(e.M6_AVG_Qty,(0,o.W8)(6)/6))&&void 0!==t?t:0,M9_Avg:null!==(d=(0,o.yy)(e.M9_AVG_Qty,(0,o.W8)(9)/9))&&void 0!==d?d:0,M12_Avg:null!==(s=(0,o.yy)(e.One_Year_AVG_Qty,(0,o.W8)(12)/12))&&void 0!==s?s:0})}))})})).map((e=>(0,i.c)((0,i.c)({},e),{},{Billed_Qty:(0,o.SW)(e.StockTransaction,"bill_qty")})));s(e)}),[l]),(0,m.jsx)(t.Fragment,{children:(0,m.jsx)(u.cp,{dataArray:d,isExpendable:!0,columns:[{Field_Name:"Stock_Group",isVisible:1,Fied_Data:"string"},{Field_Name:"Billed_Qty",isVisible:1,Fied_Data:"number"},{Field_Name:"Billed_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M2_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M3_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M6_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M9_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M12_Avg",isVisible:1,Fied_Data:"number"}],expandableComp:e=>{let{row:l}=e;return(0,m.jsx)(u.cp,{initialPageCount:10,dataArray:Array.isArray(l.StockTransaction)?l.StockTransaction:[],columns:[{Field_Name:"Grade_Item_Group",isVisible:1,Fied_Data:"string"},{Field_Name:"bill_qty",isVisible:1,Fied_Data:"number"},{Field_Name:"M2_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M3_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M6_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M9_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M12_Avg",isVisible:1,Fied_Data:"number"}]})},tableMaxHeight:540})})};var x=a(31664),_=a(61988),g=a(1908),h=a(71448),y=a(52924),b=a(44380),j=a(82656),F=a(4488),N=a(90048),f=a(89e3),A=a(26773),D=a(85624),C=a(78092),M=a(68424),S=a(39504),w=a(12120),V=a(74912);const k=(0,m.jsx)(M.c,{fontSize:"small"}),O=(0,m.jsx)(S.c,{fontSize:"small"}),T=e=>{let{row:l,Fromdate:a,Todate:d,DB:s}=e;const[r,n]=(0,t.useState)([]),[o,u]=(0,t.useState)([]),[v,p]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{p(!0),(0,g.q)({address:"reports/salesReport/ledger/itemDetails?Fromdate=".concat(a,"&Todate=").concat(d,"&Ledger_Id=").concat(null===l||void 0===l?void 0:l.Ledger_Tally_Id),headers:{Db:s}}).then((e=>{let{success:l,data:a,others:t}=e;if(l){const{dataTypeInfo:e}=t;n(a),u((l=>(0,i.c)((0,i.c)({},l),{},{salesInfo:Array.isArray(e)?e:[]})))}else n([])})).catch((e=>console.error(e))).finally((()=>{p(!1)}))}),[null===l||void 0===l?void 0:l.Ledger_Tally_Id,a,d]),v?(0,m.jsx)("h5",{className:"text-center text-primary ",children:"Loading..."}):(0,m.jsx)(c.c,{dataArray:r,columns:o.salesInfo})},B=e=>{let{dataArray:l,filterDialog:a,closeDialog:s,colTypes:c,DB:v,Fromdate:p,Todate:x}=e;const[_,g]=(0,t.useState)({}),[M,S]=(0,t.useState)(""),[B,L]=(0,t.useState)([]),[I,W]=(0,t.useState)(!1),E=c.map(((e,l)=>({isVisible:l<5?1:0,Field_Name:null===e||void 0===e?void 0:e.Column_Name,Fied_Data:null===e||void 0===e?void 0:e.Data_Type,OrderBy:l+1}))),[Q,G]=(0,t.useState)(E),P=(0,t.useMemo)((()=>[...Q].sort(((e,l)=>null!==e&&void 0!==e&&e.OrderBy&&null!==l&&void 0!==l&&l.OrderBy?(null===e||void 0===e?void 0:e.OrderBy)-(null===l||void 0===l?void 0:l.OrderBy):(null===l||void 0===l?void 0:l.OrderBy)-(null===e||void 0===e?void 0:e.OrderBy)))),[Q]),R=(0,t.useMemo)((()=>P.filter((e=>(0,o.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,o.Qr)(null===e||void 0===e?void 0:e.isVisible,1)))),[P]),z=(0,t.useMemo)((()=>{const e=Object.keys(_).length>0,a=!!M,t=e?B:l,d=a?(0,o.ui)(t,M):[],s=R.filter((e=>"number"===(0,o.MP)(e.Fied_Data))).map((e=>e.Field_Name)),r=d.map((e=>(0,i.c)((0,i.c)({},e),Object.fromEntries(s.map((l=>{var a;return[l,(0,o.yy)(null===e||void 0===e||null===(a=e.groupedData)||void 0===a?void 0:a.reduce(((e,a)=>(0,o.Q5)(e,(0,o.gH)(a[l])||0)),0),e.groupedData.length)]}))))));return a?r:t}),[_,l,B,M,R]);(0,t.useEffect)((()=>{H()}),[_]);const q=(e,l)=>{g((a=>(0,i.c)((0,i.c)({},a),{},{[e]:l})))},H=()=>{let e=[...l];for(const l of P)if(_[l.Field_Name])if("range"===_[l.Field_Name].type){const{min:a,max:i}=_[l.Field_Name];e=e.filter((e=>{const t=e[l.Field_Name];return(void 0===a||t>=a)&&(void 0===i||t<=i)}))}else if("date"===_[l.Field_Name].type){const{start:a,end:i}=_[l.Field_Name].value;e=e.filter((e=>{const t=new Date(e[l.Field_Name]);return(void 0===a||t>=new Date(a))&&(void 0===i||t<=new Date(i))}))}else if(Array.isArray(_[l.Field_Name])){var a;e=(null===(a=_[l.Field_Name])||void 0===a?void 0:a.length)>0?e.filter((e=>{var a;return _[l.Field_Name].includes(null===(a=e[l.Field_Name])||void 0===a?void 0:a.toLowerCase().trim())})):e}L(e)},Y=e=>{const{Field_Name:a,Fied_Data:t}=e;var d,s,r,n,o,c,u,v,p,x;if("number"===t)return(0,m.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,m.jsx)("input",{placeholder:"Min",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(d=null===(s=_[a])||void 0===s?void 0:s.min)&&void 0!==d?d:"",onChange:e=>q(a,(0,i.c)((0,i.c)({type:"range"},_[a]),{},{min:e.target.value?parseFloat(e.target.value):void 0}))}),(0,m.jsx)("input",{placeholder:"Max",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(r=null===(n=_[a])||void 0===n?void 0:n.max)&&void 0!==r?r:"",onChange:e=>q(a,(0,i.c)((0,i.c)({type:"range"},_[a]),{},{max:e.target.value?parseFloat(e.target.value):void 0}))})]});if("date"===t)return(0,m.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,m.jsx)("input",{placeholder:"Start Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(o=null===(c=_[a])||void 0===c||null===(u=c.value)||void 0===u?void 0:u.start)&&void 0!==o?o:"",onChange:e=>{var l;return q(a,{type:"date",value:(0,i.c)((0,i.c)({},null===(l=_[a])||void 0===l?void 0:l.value),{},{start:e.target.value||void 0})})}}),(0,m.jsx)("input",{placeholder:"End Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(v=null===(p=_[a])||void 0===p||null===(x=p.value)||void 0===x?void 0:x.end)&&void 0!==v?v:"",onChange:e=>{var l;return q(a,{type:"date",value:(0,i.c)((0,i.c)({},null===(l=_[a])||void 0===l?void 0:l.value),{},{end:e.target.value||void 0})})}})]});if("string"===t){const e=[...new Set(l.map((e=>{var l,i;return null===(l=e[a])||void 0===l||null===(i=l.toLowerCase())||void 0===i?void 0:i.trim()})))];return(0,m.jsx)(h.c,{multiple:!0,id:"".concat(a,"-filter"),options:e,disableCloseOnSelect:!0,getOptionLabel:e=>e,value:_[a]||[],onChange:(e,l)=>q(a,l),renderOption:(e,l,a)=>{let{selected:t}=a;return(0,m.jsxs)("li",(0,i.c)((0,i.c)({},e),{},{children:[(0,m.jsx)(y.c,{icon:k,checkedIcon:O,style:{marginRight:8},checked:t}),l]}))},isOptionEqualToValue:(e,l)=>e===l,renderInput:e=>(0,m.jsx)(b.c,(0,i.c)((0,i.c)({},e),{},{label:a,placeholder:"Select ".concat(null===a||void 0===a?void 0:a.replace(/_/g," "))}))})}};return(0,m.jsxs)(t.Fragment,{children:[(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"col-xxl-10 col-lg-9 col-md-8",children:(0,m.jsx)(u.cp,{title:"LOL - Sales Reports",headerFontSizePx:12,bodyFontSizePx:12,ButtonArea:(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("select",{className:"cus-inpt p-2 w-auto m-1",value:M,onChange:e=>S(e.target.value),children:[(0,m.jsx)("option",{value:"",children:"Group By"}),R.filter((e=>"string"===(0,o.MP)(e.Fied_Data)&&"Ledger_Name"!==(null===e||void 0===e?void 0:e.Field_Name))).map(((e,l)=>{var a;return(0,m.jsx)("option",{value:null===e||void 0===e?void 0:e.Field_Name,children:null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.replace(/_/g," ")},l)}))]})}),ExcelPrintOption:!0,columns:M?R.filter((e=>z.length>0&&Object.keys(z[0]).includes(e.Field_Name))).map((e=>(0,i.c)((0,i.c)({},e),{},{ColumnHeader:e.Field_Name===M?M:e.ColumnHeader}))):R,dataArray:z,isExpendable:!0,expandableComp:e=>{let{row:l}=e;return M?(0,m.jsx)(u.cp,{title:l[M]+" - Ledgers",dataArray:Array.isArray(null===l||void 0===l?void 0:l.groupedData)?null===l||void 0===l?void 0:l.groupedData:[],columns:R,ExcelPrintOption:!0,isExpendable:!0,expandableComp:e=>{let{row:l}=e;return(0,m.jsx)(T,{row:l,DB:v,Fromdate:p,Todate:x})}}):(0,m.jsx)(T,{row:l,DB:v,Fromdate:p,Todate:x})},maxHeightOption:!0})}),(0,m.jsxs)("div",{className:"col-xxl-2 col-lg-3 col-md-4 d-none d-md-block",children:[(0,m.jsxs)("h5",{className:"d-flex justify-content-between px-2",children:[(0,m.jsx)("span",{children:"Filters"}),(0,m.jsxs)("span",{children:[(0,m.jsx)(r.c,{title:"Column Visiblity",children:(0,m.jsx)(n.c,{size:"small",onClick:()=>W(!0),children:(0,m.jsx)(w.c,{})})}),(0,m.jsx)(r.c,{title:"Clear Filters",children:(0,m.jsx)(n.c,{size:"small",onClick:()=>g({}),children:(0,m.jsx)(V.c,{})})})]})]}),(0,m.jsxs)("div",{className:"border rounded-3 ",style:{maxHeight:"58vh",overflow:"auto"},children:[R.map(((e,l)=>{var a;return(0,m.jsxs)("div",{className:"py-3 px-3 hov-bg border-bottom",children:[(0,m.jsx)("label",{className:"mt-2 mb-1",children:null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.replace(/_/g," ")}),Y(e)]},l)})),(0,m.jsx)("br",{})]})]})]}),(0,m.jsxs)(j.c,{open:a,onClose:s,maxWidth:"sm",fullWidth:!0,children:[(0,m.jsxs)(F.c,{children:[(0,m.jsxs)("h5",{className:"d-flex justify-content-between px-2",children:[(0,m.jsx)("span",{children:"Filters"}),(0,m.jsxs)("span",{children:[(0,m.jsx)(r.c,{title:"Column Visiblity",children:(0,m.jsx)(n.c,{size:"small",onClick:()=>W(!0),children:(0,m.jsx)(w.c,{})})}),(0,m.jsx)(r.c,{title:"Clear Filters",children:(0,m.jsx)(n.c,{size:"small",onClick:()=>g({}),children:(0,m.jsx)(V.c,{})})})]})]}),(0,m.jsxs)("div",{className:"border rounded-3 ",children:[R.map(((e,l)=>{var a;return(0,m.jsxs)("div",{className:"py-3 px-3 hov-bg border-bottom",children:[(0,m.jsx)("label",{className:"mt-2 mb-1",children:null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.replace(/_/g," ")}),Y(e)]},l)})),(0,m.jsx)("br",{})]})]}),(0,m.jsx)(N.c,{children:(0,m.jsx)(f.c,{onClick:s,color:"error",children:"close"})})]}),(0,m.jsxs)(j.c,{open:I,onClose:()=>W(!1),maxWidth:"lg",fullWidth:!0,children:[(0,m.jsx)(A.c,{children:"Column Settings"}),(0,m.jsx)(F.c,{children:(0,m.jsx)("div",{className:"row",children:Q.map(((e,l)=>(0,m.jsx)("div",{className:"col-lg-4 col-md-6 p-2",children:(0,m.jsxs)(d.c,{component:D.c,className:"p-2 d-flex justify-content-between align-items-center flex-wrap ".concat(l%2!==0?"bg-light":""),children:[(0,m.jsxs)("div",{className:"d-flex justify-content-between align-items-center flex-wrap",children:[(0,m.jsx)(C.c,{checked:Boolean(null===e||void 0===e?void 0:e.isDefault)||Boolean(null===e||void 0===e?void 0:e.isVisible),disabled:Boolean(null===e||void 0===e?void 0:e.isDefault),onChange:l=>G((a=>a.map((a=>a.Field_Name===(null===e||void 0===e?void 0:e.Field_Name)?(0,i.c)((0,i.c)({},a),{},{isVisible:l.target.checked?1:0}):a))))}),(0,m.jsx)("h6",{className:"fa-13 mb-0 fw-bold ",children:null===e||void 0===e?void 0:e.Field_Name})]}),(0,m.jsx)("input",{type:"number",value:(0,o.Q$)(null===e||void 0===e?void 0:e.OrderBy)?null===e||void 0===e?void 0:e.OrderBy:"",onChange:l=>G((a=>a.map((a=>a.Field_Name===(null===e||void 0===e?void 0:e.Field_Name)?(0,i.c)((0,i.c)({},a),{},{OrderBy:l.target.value}):a)))),label:"Order Value",className:"mt-2 p-1 border-0 cus-inpt",style:{width:"80px"},placeholder:"Order"})]})},l)))})}),(0,m.jsxs)(N.c,{children:[(0,m.jsx)(f.c,{onClick:()=>G(E),variant:"outlined",children:"Reset"}),(0,m.jsx)(f.c,{onClick:()=>W(!1),color:"error",children:"close"})]})]})]})},L=e=>{let{loadingOn:l,loadingOff:a}=e;const c=JSON.parse(localStorage.getItem("user")),[u,h]=(0,t.useState)(null),[y,b]=(0,t.useState)({salesInfo:[],salesItemInfo:[]}),[j,F]=(0,t.useState)(null),[N,f]=(0,t.useState)({Fromdate:(0,o.SO)(1),Todate:(0,o.Q7)(),ReportType:"LedgerBased",filterDialog:!1,reload:!0});(0,t.useEffect)((()=>{h(null),F(null),b({salesInfo:[],salesItemInfo:[]}),(0,g.q)({address:"reports/salesReport/ledger?Fromdate=".concat(null===N||void 0===N?void 0:N.Fromdate,"&Todate=").concat(null===N||void 0===N?void 0:N.Todate),headers:{Db:null===c||void 0===c?void 0:c.Company_id}}).then((e=>{let{success:l,data:a,others:t}=e;if(l){const{dataTypeInfo:e}=t;h(a),b((l=>(0,i.c)((0,i.c)({},l),{},{salesInfo:Array.isArray(e)?e:[]})))}else h([])})).catch(console.error),(0,g.q)({address:"reports/salesReport/products?Fromdate=".concat(null===N||void 0===N?void 0:N.Fromdate,"&Todate=").concat(null===N||void 0===N?void 0:N.Todate),headers:{Db:null===c||void 0===c?void 0:c.Company_id}}).then((e=>{if(e.success){var l;const{dataTypeInfo:a}=null===e||void 0===e?void 0:e.others,t=Array.isArray(null===e||void 0===e||null===(l=e.others)||void 0===l?void 0:l.LOSAbstract)?e.others.LOSAbstract.map((l=>(0,i.c)((0,i.c)({},l),{},{StockTransaction:Array.isArray(e.data)?[...e.data].filter((e=>e.Stock_Group===l.Stock_Group)):[]}))):[];b((e=>(0,i.c)((0,i.c)({},e),{},{salesItemInfo:Array.isArray(a)?a:[]}))),F(t)}else F([])})).catch((e=>console.error(e)))}),[N.reload]);const A=()=>{f((e=>(0,i.c)((0,i.c)({},e),{},{filterDialog:!1})))},D=(0,o.Oe)(new Date(N.Fromdate),new Date(N.Todate));return(0,m.jsx)(t.Fragment,{children:(0,m.jsxs)(d.c,{className:"mt-3",children:[(0,m.jsxs)("div",{className:"px-3 py-2 d-flex justify-content-between align-items-center fw-bold text-dark",style:{backgroundColor:"#eae0cc"},children:[(0,m.jsx)("span",{children:null===c||void 0===c?void 0:c.Company_Name}),(0,m.jsx)("span",{children:(0,m.jsxs)("select",{value:N.ReportType,className:"cus-inpt ps-3 w-100 rounded-5 border-0",onChange:e=>f((l=>(0,i.c)((0,i.c)({},l),{},{ReportType:e.target.value}))),children:[(0,m.jsx)("option",{value:"LedgerBased",children:"Ledger Based"}),(0,m.jsx)("option",{value:"ProductBased",children:"Product Based"}),(0,m.jsx)("option",{value:"ProductDayAverage",children:"Product/Day Based"})]})})]}),(0,m.jsxs)(s.c,{children:[(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsx)("input",{type:"date",className:"cus-inpt w-auto ps-3 border rounded-5 me-1",value:N.Fromdate,onChange:e=>f((l=>(0,i.c)((0,i.c)({},l),{},{Fromdate:e.target.value})))}),(0,m.jsx)("input",{type:"date",className:"cus-inpt w-auto ps-3 border rounded-5",value:N.Todate,onChange:e=>f((l=>(0,i.c)((0,i.c)({},l),{},{Todate:e.target.value})))}),(0,m.jsx)(r.c,{title:"Reload Data",children:(0,m.jsx)(n.c,{onClick:()=>f((e=>(0,i.c)((0,i.c)({},e),{},{reload:!e.reload}))),size:"small",className:"ms-2",children:(0,m.jsx)(x.c,{})})}),(0,m.jsx)(r.c,{title:"Filters",children:(0,m.jsx)(n.c,{onClick:()=>f((e=>(0,i.c)((0,i.c)({},e),{},{filterDialog:!0}))),size:"small",className:"d-md-none d-inline",children:(0,m.jsx)(_.c,{})})})]}),null===u&&"LedgerBased"===N.ReportType&&(0,m.jsx)("h6",{className:"blue-text text-center",children:"Fetching Ledger Based data..."}),null===j&&("ProductBased"===N.ReportType||"ProductDayAverage"===N.ReportType)&&(0,m.jsx)("h6",{className:"blue-text text-center",children:"Fetching Product Based data..."}),"LedgerBased"===N.ReportType&&Array.isArray(u)&&(0,m.jsx)(B,{filterDialog:N.filterDialog,closeDialog:A,dataArray:u,colTypes:y.salesInfo,DB:null===c||void 0===c?void 0:c.Company_id,Fromdate:null===N||void 0===N?void 0:N.Fromdate,Todate:null===N||void 0===N?void 0:N.Todate,loadingOn:l,loadingOff:a}),"ProductBased"===N.ReportType&&Array.isArray(j)&&(0,m.jsx)(v,{filterDialog:N.filterDialog,closeDialog:A,dataArray:j}),"ProductDayAverage"===N.ReportType&&Array.isArray(j)&&(0,m.jsx)(p,{filterDialog:N.filterDialog,closeDialog:A,dataArray:j,days:D})]})]})})}}}]);
//# sourceMappingURL=3676.18b26194.chunk.js.map