"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[788],{788:(e,a,t)=>{t.r(a),t.d(a,{default:()=>A});var l=t(69060),i=t(43692),s=t(5548),r=t(60476),n=t(84436),o=t(41459),d=t(46864),c=t(39308),u=t(82496);const v=e=>{let{Value:a,Label:t}=e;return(0,u.jsxs)("div",{className:"grid-card d-flex align-items-center justify-content-center flex-column cus-shadow",children:[(0,u.jsx)("h1",{style:{fontSize:"45px",color:"blue",margin:"0 0.5em"},children:isNaN(a)?a||"-":a?(0,c.SA)(a):"0"}),(0,u.jsx)("h2",{className:"fa-20",children:t})]})};var x=t(98944),h=t(1908);const m=e=>{let{Value:a,Label:t}=e;return(0,u.jsx)(v,{Value:a,Label:t})},j=e=>{let{reqDate:a,reqLocation:t}=e;const[i,s]=(0,l.useState)([]),[r,n]=(0,l.useState)([]),[o,d]=(0,l.useState)({currentMonth:(0,c.WQ)()});(0,l.useEffect)((()=>{(0,h.q)({address:`dataEntry/driverActivities?reqDate=${a}&reqLocation=${t}`}).then((e=>{e.success&&s(e.data)})).catch((e=>console.error(e))),(0,h.q)({address:`dataEntry/driverActivities/tripBased?reqDate=${a}&reqLocation=${t}`}).then((e=>n(e.data))).catch((e=>console.error(e)))}),[a,t]);const v=(e=>{const a={};return e.forEach((e=>{e.LocationGroup.forEach((e=>{a[e.TripCategory]||(a[e.TripCategory]=0),e.TripDetails.forEach((t=>{var l;a[e.TripCategory]+=null===t||void 0===t||null===(l=t.Trips)||void 0===l?void 0:l.reduce(((e,a)=>e+((null===a||void 0===a?void 0:a.TonnageValue)||0)),0)}))}))})),a})(i),j=Object.values(v).reduce(((e,a)=>e+a),0);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"my-2",children:(0,u.jsxs)("div",{className:"cus-grid text-dark",children:[(0,u.jsx)(m,{Value:null===i||void 0===i?void 0:i.length,Label:"DRIVERS"}),(0,u.jsx)(m,{Value:null===r||void 0===r?void 0:r.reduce(((e,a)=>{var t;let l=0;return l+=(null===a||void 0===a||null===(t=a.Trips)||void 0===t?void 0:t.length)||0,l+e}),0),Label:"TRIPS"}),(0,u.jsx)(m,{Value:j,Label:"TOTAL"}),Object.entries(v).map((e=>{let[a,t]=e;return(0,u.jsx)(m,{Value:t,Label:a},a)}))]})}),(0,u.jsx)("input",{type:"month",className:"cus-inpt w-auto mt-3",value:o.currentMonth,onChange:e=>d((a=>({...a,currentMonth:e.target.value})))}),(0,u.jsx)("div",{className:"my-3 d-flex justify-content-center flex-wrap",children:(0,u.jsx)(x.e,{xAxis:[{scaleType:"band",data:null===r||void 0===r?void 0:r.map((e=>null===e||void 0===e?void 0:e.DriverName))}],series:[{data:null===r||void 0===r?void 0:r.map((e=>{var a;return null===e||void 0===e||null===(a=e.Trips)||void 0===a?void 0:a.length})),label:"TRIPS"},{data:null===r||void 0===r?void 0:r.map((e=>{var a;return Number(null===e||void 0===e||null===(a=e.Trips)||void 0===a?void 0:a.reduce(((e,a)=>{var t;let l=0;return l+=null===a||void 0===a||null===(t=a.Categories)||void 0===t?void 0:t.reduce(((e,a)=>{let t=0;return t+=(null===a||void 0===a?void 0:a.TonnageValue)||0,t+e}),0),e+l}),0)).toFixed(2)})),label:"TONNAGE"}],width:900,height:400,barLabel:"value",borderRadius:6})})]})},p=e=>{let{Value:a,Label:t}=e;return(0,u.jsx)(v,{Value:a,Label:t})},L=e=>{var a,t,i,s,r;let{reqDate:n,reqLocation:o}=e;const[d,v]=(0,l.useState)([]);return(0,l.useEffect)((()=>{(0,h.q)({address:`dataEntry/godownActivities/abstract?reqDate=${n}&reqLocation=${o}`}).then((e=>{e.success&&v(e.data)})).catch((e=>console.error(e)))}),[n,o]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{className:"my-2",children:(0,u.jsxs)("div",{className:"cus-grid text-dark",children:[(0,u.jsx)(p,{Value:(null===(a=d[0])||void 0===a?void 0:a.PurchaseTotal)||0,Label:"Purchase"}),(0,u.jsx)(p,{Value:(null===(t=d[0])||void 0===t?void 0:t.SalesTotal)||0,Label:"Sales"}),(0,u.jsx)(p,{Value:(null===(i=d[0])||void 0===i?void 0:i.ManagementTotal)||0,Label:"Handling"}),(0,u.jsx)(p,{Value:null!==(s=d[0])&&void 0!==s&&s.EntryAt?(0,c.Gu)(null===(r=d[0])||void 0===r?void 0:r.EntryAt):"-",Label:"Updated"})]})})})},f=e=>{let{Value:a,Label:t}=e;return(0,u.jsx)(v,{Value:a,Label:t})},g=e=>{var a,t,i,s,r,n;let{reqDate:o,reqLocation:d}=e;const[v,x]=(0,l.useState)([]);return(0,l.useEffect)((()=>{(0,h.q)({address:`dataEntry/deliveryActivities/abstract?reqDate=${o}&reqLocation=${d}`}).then((e=>{e.success&&x(e.data)})).catch((e=>console.error(e)))}),[o,d]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{className:"my-2",children:(0,u.jsxs)("div",{className:"cus-grid text-dark",children:[(0,u.jsx)(f,{Value:null!==(a=v[0])&&void 0!==a&&a.EntryTime?(0,c.Gu)(null===(t=v[0])||void 0===t?void 0:t.EntryTime):"-",Label:"Time"}),(0,u.jsx)(f,{Value:(null===(i=v[0])||void 0===i?void 0:i.OverAllSales)||0,Label:"Sales"}),(0,u.jsx)(f,{Value:(null===(s=v[0])||void 0===s?void 0:s.NotTaken)||0,Label:"NotTaken"}),(0,u.jsx)(f,{Value:(null===(r=v[0])||void 0===r?void 0:r.NotVerified)||0,Label:"NotVerified"}),(0,u.jsx)(f,{Value:(null===(n=v[0])||void 0===n?void 0:n.NotDelivery)||0,Label:"Not Delivery"})]})})})},q=e=>{let{Value:a,Label:t}=e;return(0,u.jsx)(v,{Value:a,Label:t})},b=e=>{var a,t;let{reqDate:i,reqLocation:s}=e;const[r,n]=(0,l.useState)([]);(0,l.useEffect)((()=>{(0,h.q)({address:`dataEntry/staffActivities/staffBased?reqDate=${i}&reqLocation=${s}`}).then((e=>{e.success&&n(e.data)})).catch((e=>console.error(e)))}),[i,s]);const o=()=>{let e=[];return null===r||void 0===r||r.forEach((a=>{var t;null===a||void 0===a||null===(t=a.Categories)||void 0===t||t.forEach((a=>{const t=e.findIndex((e=>(null===e||void 0===e?void 0:e.Category)===(null===a||void 0===a?void 0:a.Category)));var l,i,s;-1!==t?e[t]={...e[t],Total:(null===(l=e[t])||void 0===l?void 0:l.Total)+((null===a||void 0===a||null===(i=a.StaffDetails)||void 0===i?void 0:i.Tonnage)||0)}:e.push({Category:null===a||void 0===a?void 0:a.Category,Total:(null===a||void 0===a||null===(s=a.StaffDetails)||void 0===s?void 0:s.Tonnage)||0})}))})),e},d=null===(a=o())||void 0===a?void 0:a.reduce(((e,a)=>{let t=0;return t+="OTHERS 1 - PRINT"!==(null===a||void 0===a?void 0:a.Category)?null===a||void 0===a?void 0:a.Total:0,e+t}),0);return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{className:"my-2",children:(0,u.jsxs)("div",{className:"cus-grid text-dark",children:[(0,u.jsx)(q,{Value:(null===r||void 0===r?void 0:r.length)||0,Label:"Staffs"}),null===(t=o())||void 0===t?void 0:t.map(((e,a)=>(0,u.jsx)(q,{Value:null===e||void 0===e?void 0:e.Total,Label:null===e||void 0===e?void 0:e.Category},a))),(0,u.jsx)(q,{Value:d,Label:"Total"})]})})})},y=e=>{let{Value:a,Label:t}=e;return(0,u.jsx)(v,{Value:a,Label:t})},N=e=>{let{reqDate:a,reqLocation:t}=e;const[i,s]=(0,l.useState)([]);return(0,l.useEffect)((()=>{(0,h.q)({address:`dataEntry/weightCheckActivity?reqDate=${a}&reqLocation=${t}`}).then((e=>{e.success&&s(e.data)})).catch((e=>console.error(e)))}),[a,t]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{className:"my-2",children:(0,u.jsxs)("div",{className:"cus-grid text-dark",children:[(0,u.jsx)(y,{Value:(null===i||void 0===i?void 0:i.length)||0,Label:"Items"}),Object.entries(null===i||void 0===i?void 0:i.reduce(((e,a)=>({Average_Input:e.Average_Input+=a.InputKG||0,Average_Output:e.Average_Output+=a.OutputKG||0})),{Average_Input:0,Average_Output:0})).map((e=>{let[a,t]=e;return(0,u.jsx)(y,{Value:parseInt(t/i.length),Label:null===a||void 0===a?void 0:a.replace("_"," ")},a)}))]})})})};var D=t(94968),T=t(47752),V=t(85400),S=t(72920),O=t(8472);const A=()=>{const[e,a]=(0,l.useState)({reqDate:(0,c.Q7)(),reqLocation:"MILL"}),[t,v]=(0,l.useState)([{name:"Driver Activities",isOpen:!1,icon:(0,u.jsx)(D.Dxr,{style:{fontSize:"40px"}})},{name:"Godown Activities",isOpen:!1,icon:(0,u.jsx)(V.mR0,{style:{fontSize:"40px"}})},{name:"Delivery Activities",isOpen:!1,icon:(0,u.jsx)(T.wTw,{style:{fontSize:"40px"}})},{name:"Staff Activities",isOpen:!1,icon:(0,u.jsx)(S.xBK,{style:{fontSize:"40px"}})},{name:"Weight Checking Activities",isOpen:!1,icon:(0,u.jsx)(O.iG5,{style:{fontSize:"40px"}})}]),x=(0,l.useMemo)((()=>[(0,u.jsx)(j,{reqDate:e.reqDate,reqLocation:e.reqLocation}),(0,u.jsx)(L,{reqDate:e.reqDate,reqLocation:e.reqLocation}),(0,u.jsx)(g,{reqDate:e.reqDate,reqLocation:e.reqLocation}),(0,u.jsx)(b,{reqDate:e.reqDate,reqLocation:e.reqLocation}),(0,u.jsx)(N,{reqDate:e.reqDate,reqLocation:e.reqLocation})]),[e.reqDate,e.reqLocation]);(0,l.useEffect)((()=>{v((e=>e.map(((e,a)=>({...e,comp:x[a]})))))}),[x]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"d-flex flex-wrap",children:[(0,u.jsxs)("div",{className:"d-flex flex-column p-1",children:[(0,u.jsx)("label",{className:"mb-1",children:"DATE"}),(0,u.jsx)("input",{type:"date",className:"cus-inpt w-auto",value:e.reqDate,onChange:e=>a((a=>({...a,reqDate:e.target.value})))})]}),(0,u.jsxs)("div",{className:"d-flex flex-column p-1",children:[(0,u.jsx)("label",{className:"mb-1",children:"LOCATION"}),(0,u.jsxs)("select",{className:"cus-inpt w-auto",value:e.reqLocation,onChange:e=>a((a=>({...a,reqLocation:e.target.value}))),children:[(0,u.jsx)("option",{value:"MILL",children:"MILL"}),(0,u.jsx)("option",{value:"GODOWN",children:"GODOWN"})]})]})]}),t.map(((e,a)=>(0,u.jsxs)(i.c,{className:"mt-2",children:[(0,u.jsxs)("div",{className:"fa-17 fw-bold border-bottom p-0 d-flex justify-content-between align-items-center",onClick:()=>(e=>{v((a=>a.map(((a,t)=>t===e?{...a,isOpen:!a.isOpen}:a))))})(a),style:{cursor:"pointer"},children:[(0,u.jsxs)("div",{className:"d-flex justify-content-between align-items-center p-0",children:[(0,u.jsx)("span",{className:"p-4 bg-primary text-white",children:e.icon}),(0,u.jsx)("span",{className:"ps-3 fa-20",children:e.name})]}),(0,u.jsx)(s.c,{size:"small",className:"p-2",children:e.isOpen?(0,u.jsx)(o.c,{}):(0,u.jsx)(d.c,{})})]}),(0,u.jsx)(r.c,{in:e.isOpen,unmountOnExit:!0,children:(0,u.jsx)(n.c,{children:e.comp})})]},a)))]})}}}]);
//# sourceMappingURL=788.abfc472a.chunk.js.map