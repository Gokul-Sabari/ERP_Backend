"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[4924],{14924:(e,l,s)=>{s.r(l),s.d(l,{default:()=>g});var r=s(69060),a=s(1908),t=s(39308),n=s(13724),i=s(43692),c=s(5548),o=s(56480),d=s(87016),h=s(71412),u=s(82496);const y=e=>{try{const[l]=e.split(" "),[s,r,a]=l?null===l||void 0===l?void 0:l.split("-"):[],n=new Date(a,r-1,s);return n?(0,t.uy)(n):""}catch(l){return console.error("Failed when parse date: ",l),""}},g=e=>{let{loadingOn:l,loadingOff:s}=e;const[g,m]=(0,r.useState)([]),[v,p]=(0,r.useState)([]),x=(0,t.gV)().user,[_,j]=(0,r.useState)({refresh:!1,viewNotSynced:!1,searchERPLol:"",searchTallyLol:"",searchNotSynced:""});(0,r.useEffect)((()=>{l&&l(),(0,a.q)({address:"masters/tallyMaster/ledger",headers:{Db:null===x||void 0===x?void 0:x.Company_id}}).then((e=>{if(e.success){var l,s;const r=Array.isArray(null===e||void 0===e||null===(l=e.others)||void 0===l?void 0:l.tallyResult)?null===e||void 0===e||null===(s=e.others)||void 0===s?void 0:s.tallyResult:[];m(e.data),p(r)}})).catch((e=>console.error(e))).finally((()=>{s&&s()}))}),[_.refresh]);const A=(0,r.useMemo)((()=>v.filter((e=>!g.some((l=>(0,t.Qr)(e.Ledger_Tally_Id,l.Ledger_Tally_Id)))))),[g.length,v.length]),P=(0,r.useMemo)((()=>_.searchERPLol?g.filter((e=>(0,t.MP)(Object.values(e).join(" ")).includes((0,t.MP)(_.searchERPLol)))):g),[_.searchERPLol,g.length]),N=(0,r.useMemo)((()=>_.searchTallyLol?v.filter((e=>(0,t.MP)(Object.values(e).join(" ")).includes((0,t.MP)(_.searchTallyLol)))):v),[_.searchTallyLol,v.length]),C=(0,r.useMemo)((()=>_.searchNotSynced?A.filter((e=>(0,t.MP)(Object.values(e).join(" ")).includes((0,t.MP)(_.searchNotSynced)))):A),[A.length,_.searchNotSynced]);return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(i.c,{children:[(0,u.jsxs)("div",{className:"px-3 py-2 fa-14",children:[(0,u.jsxs)("div",{className:"d-flex flex-wrap align-items-center",children:[(0,u.jsxs)("h5",{className:"flex-grow-1",children:["LOL SYNC (Differents: ",A.length,")"]}),(0,u.jsx)(c.c,{size:"small",onClick:()=>{l&&l(),(0,a.q)({address:"masters/retailers/lolSync",method:"POST"}).then((e=>{e.success?(o.m4.success(e.message),j((e=>({...e,refresh:!e.refresh})))):o.m4.error(e.message)})).catch((e=>console.error(e))).finally((()=>{s&&s()}))},children:(0,u.jsx)(d.c,{})}),(0,u.jsx)(c.c,{size:"small",onClick:()=>j((e=>({...e,viewNotSynced:!e.viewNotSynced}))),children:(0,u.jsx)(h.c,{})})]}),(0,u.jsx)("div",{className:"d-flex flex-wrap align-items-center"})]}),_.viewNotSynced?(0,u.jsx)(n.cp,{title:"Not synced list ",bodyFontSizePx:11,headerFontSizePx:11,dataArray:C,columns:[(0,n.A5)("Ledger_Tally_Id","string","Tally ID"),(0,n.A5)("Ledger_Name","string"),(0,n.A5)("Party_Mobile_1","string","MobileNo"),{isVisible:1,ColumnHeader:"Created Date",isCustomCell:!0,Cell:e=>{let{row:l}=e;return null!==l&&void 0!==l&&l.Date_Added?y(null===l||void 0===l?void 0:l.Date_Added):""}},(0,n.A5)("Party_District","string"),(0,n.A5)("Party_Group","string")],ButtonArea:(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{type:"search",className:"cus-inpt p-1 w-auto",value:_.searchNotSynced,onChange:e=>j((l=>({...l,searchNotSynced:e.target.value}))),placeholder:"Search.."})})}):(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-lg-6 p-1",children:(0,u.jsx)(n.cp,{title:"ERP - "+g.length,bodyFontSizePx:11,headerFontSizePx:11,dataArray:P,columns:[(0,n.A5)("Ledger_Tally_Id","string","Tally ID"),(0,n.A5)("Ledger_Name","string"),(0,n.A5)("Party_Mobile_1","string","MobileNo"),{isVisible:1,ColumnHeader:"Created Date",isCustomCell:!0,Cell:e=>{let{row:l}=e;return null!==l&&void 0!==l&&l.Date_Added?y(null===l||void 0===l?void 0:l.Date_Added):""}},(0,n.A5)("Party_District","string"),(0,n.A5)("Party_Group","string")],ButtonArea:(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{type:"search",className:"cus-inpt p-1 w-auto",value:_.searchERPLol,onChange:e=>j((l=>({...l,searchERPLol:e.target.value}))),placeholder:"Search.."})})})}),(0,u.jsx)("div",{className:"col-lg-6 p-1",children:(0,u.jsx)(n.cp,{title:"Tally - "+v.length,bodyFontSizePx:11,headerFontSizePx:11,dataArray:N,columns:[(0,n.A5)("Ledger_Tally_Id","string","Tally ID"),(0,n.A5)("Ledger_Name","string"),(0,n.A5)("Party_Mobile_1","string","MobileNo"),{isVisible:1,ColumnHeader:"Created Date",isCustomCell:!0,Cell:e=>{let{row:l}=e;return null!==l&&void 0!==l&&l.Date_Added?y(null===l||void 0===l?void 0:l.Date_Added):""}},(0,n.A5)("Party_District","string"),(0,n.A5)("Party_Group","string")],ButtonArea:(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{type:"search",className:"cus-inpt p-1 w-auto",value:_.searchTallyLol,onChange:e=>j((l=>({...l,searchTallyLol:e.target.value}))),placeholder:"Search.."})})})})]})})]})})}},87016:(e,l,s)=>{s.d(l,{c:()=>t});var r=s(27664),a=s(82496);const t=(0,r.c)((0,a.jsx)("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8m0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4z"}),"Sync")},71412:(e,l,s)=>{s.d(l,{c:()=>t});var r=s(27664),a=s(82496);const t=(0,r.c)((0,a.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")}}]);
//# sourceMappingURL=4924.e08971ff.chunk.js.map