"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[9052],{19052:(e,t,s)=>{s.r(t),s.d(t,{default:()=>f});var a=s(30800),i=s(69060),r=s(44380),c=s(5548),l=s(82656),d=s(26773),n=s(4488),o=s(90048),m=s(75848),u=s(89e3),h=s(56480),N=s(42136),_=s(57704),x=s(86e3),S=s(45180),D=s(1908),b=s(13724),j=s(82496);const p={District_Id:0,District_Name:"",State_Id:0,State_Name:""};const f=function(){const[e,t]=(0,i.useState)(!1),[s,f]=(0,i.useState)(!1),[I,C]=(0,i.useState)(!1),[g,y]=(0,i.useState)(p),[v,w]=(0,i.useState)(!1),[k,F]=(0,i.useState)([]),[E,q]=(0,i.useState)([]),[A,T]=(0,i.useState)([]),[z,L]=(0,i.useState)(""),[U,P]=(0,i.useState)(!1);(0,i.useEffect)((()=>{(async()=>{try{const e=await(0,D.q)({address:"masters/district"});e.success&&(F(e.data),q(e.data))}catch(e){console.error(e),h.m4.error("Failed to load districts")}})(),(async()=>{try{const e=await(0,D.q)({address:"masters/state/dropDown"});e.success&&T(e.data)}catch(e){console.log(e),h.m4.error("Failed to load State dropdown")}})()}),[e]),(0,i.useEffect)((()=>{if(""===z.trim())q(k);else{const e=k.filter((e=>{const t=z.toLowerCase();return String(e.District_Id).toLowerCase().includes(t)||e.District_Name&&e.District_Name.toLowerCase().includes(t)||e.State_Name&&e.State_Name.toLowerCase().includes(t)}));q(e)}}),[z,k]);const W=()=>{U||(C(!1),y(p))},H=()=>{U||(w(!1),y(p))},O=()=>{U||f(!1)};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"card",children:[(0,j.jsxs)("div",{className:"card-header bg-white fw-bold d-flex align-items-center justify-content-between",children:["DISTRICT MASTER",(0,j.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,j.jsx)("div",{style:{width:"300px"},children:(0,j.jsx)(r.c,{fullWidth:!0,size:"small",variant:"outlined",placeholder:"Search District...",value:z,onChange:e=>L(e.target.value),InputProps:{startAdornment:(0,j.jsx)(_.c,{fontSize:"small",sx:{mr:1}}),style:{height:"40px"}}})}),(0,j.jsx)(N.c,{variant:"contained",size:"small",className:"rounded-1 btn-primary",onClick:()=>{C(!0),y(p)},sx:{textTransform:"none",fontWeight:500,px:2,height:"40px"},children:"Create District"})]})]}),(0,j.jsx)(b.cp,{dataArray:E,EnableSerialNumber:!0,maxHeightOption:!0,columns:[(0,b.A5)("District_Name","string","District Name"),(0,b.A5)("State_Name","string","State"),{ColumnHeader:"Actions",isVisible:1,isCustomCell:!0,Cell:e=>{let{row:t}=e;return(0,j.jsxs)("td",{style:{minWidth:"80px"},children:[(0,j.jsx)(c.c,{onClick:()=>(e=>{y({District_Id:Number(e.District_Id),District_Name:e.District_Name,State_Id:Number(e.State_Id),State_Name:e.State_Name||""}),w(!0)})(t),size:"small",children:(0,j.jsx)(x.c,{})}),(0,j.jsx)(c.c,{onClick:()=>{f(!0),y({District_Id:t.District_Id,District_Name:t.District_Name})},size:"small",color:"error",children:(0,j.jsx)(S.c,{})})]})}}]})]}),(0,j.jsxs)(l.c,{open:I,onClose:W,children:[(0,j.jsx)(d.c,{children:"Create District"}),(0,j.jsx)(n.c,{children:(0,j.jsxs)("div",{className:"p-2",children:[(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsx)("label",{htmlFor:"stateSelect",children:"State *"}),(0,j.jsxs)("select",{className:"form-select form-select-sm",id:"editStateSelect",value:g.State_Id||"",onChange:e=>{const t=Number(e.target.value),s=A.find((e=>e.State_Id===t));y((0,a.c)((0,a.c)({},g),{},{State_Id:t,State_Name:s?s.State_Name:""}))},children:[(0,j.jsx)("option",{value:"",children:"Select State"}),A.map((e=>(0,j.jsx)("option",{value:e.State_Id,children:e.State_Name},e.State_Id)))]})]}),(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsx)("label",{htmlFor:"districtName",className:"form-label",children:"District Name *"}),(0,j.jsx)("input",{type:"text",className:"form-control form-control-mdf",id:"districtName",value:g.District_Name,onChange:e=>y((0,a.c)((0,a.c)({},g),{},{District_Name:e.target.value}))})]})]})}),(0,j.jsxs)(o.c,{children:[(0,j.jsx)("button",{className:"btn btn-secondary btn-sm",onClick:W,disabled:U,children:"Cancel"}),(0,j.jsx)("button",{className:"btn btn-primary btn-sm",onClick:async()=>{const{District_Name:e,State_Id:s}=g;if(e&&s){P(!0);try{const e=await(0,D.q)({address:"masters/district",method:"POST",bodyData:(0,a.c)({},g)});e.success?(h.m4.success("District Created successfully!"),C(!1),y(p),t((e=>!e))):h.m4.error(e.message)}catch(i){console.error(i),h.m4.error("Failed to Create District")}finally{P(!1)}}else h.m4.error("Please fill all required fields.")},disabled:U||!g.District_Name||!g.State_Id,children:U?"Creating...":"Create"})]})]}),(0,j.jsxs)(l.c,{open:v,onClose:H,children:[(0,j.jsx)(d.c,{children:"Edit District"}),(0,j.jsx)(n.c,{children:(0,j.jsxs)("div",{className:"p-3",children:[(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsx)("label",{htmlFor:"editStateSelect",className:"form-label",children:"State *"}),(0,j.jsxs)("select",{className:"form-select form-select-sm",id:"editStateSelect",value:g.State_Id||"",onChange:e=>{const t=Number(e.target.value);if(isNaN(t))return void h.m4.error("Invalid state selected");const s=A.find((e=>e.State_Id===t));y((0,a.c)((0,a.c)({},g),{},{State_Id:t,State_Name:s?s.State_Name:""}))},children:[(0,j.jsx)("option",{value:"",children:"Select State"}),A.map((e=>(0,j.jsx)("option",{value:e.State_Id,children:e.State_Name},e.State_Id)))]})]}),(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsx)("label",{htmlFor:"editDistrictName",className:"form-label",children:"District Name *"}),(0,j.jsx)("input",{type:"text",className:"form-control form-control-sm",id:"editDistrictName",value:g.District_Name,onChange:e=>y((0,a.c)((0,a.c)({},g),{},{District_Name:e.target.value}))})]})]})}),(0,j.jsxs)(o.c,{children:[(0,j.jsx)("button",{className:"btn btn-secondary btn-sm me-2",onClick:H,disabled:U,children:"Cancel"}),(0,j.jsx)("button",{className:"btn btn-primary btn-sm",onClick:async()=>{var e;const{District_Id:s,District_Name:i,State_Id:r}=g,c={District_Id:Number(s),District_Name:i.trim(),State_Id:Number(r),State_Name:(null===(e=g.State_Name)||void 0===e?void 0:e.trim())||null};if(c.District_Id&&c.District_Name&&c.State_Id){P(!0);try{const e=await(0,D.q)({address:"masters/district",method:"PUT",bodyData:c});e.success?(h.m4.success("District updated successfully!"),F((e=>e.map((e=>e.District_Id===c.District_Id?(0,a.c)((0,a.c)({},e),c):e)))),q((e=>e.map((e=>e.District_Id===c.District_Id?(0,a.c)((0,a.c)({},e),c):e)))),w(!1),y(p)):(h.m4.error(e.message||"Update failed"),t((e=>!e)))}catch(l){console.error("Update error:",l),h.m4.error("Failed to update district: ".concat(l.message)),t((e=>!e))}finally{P(!1)}}else h.m4.error("All required fields must be properly filled.")},disabled:U||!g.District_Name||!g.State_Id,children:U?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{className:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"}),"Updating..."]}):"Update"})]})]}),(0,j.jsxs)(l.c,{open:s,onClose:O,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,j.jsx)(d.c,{id:"alert-dialog-title",children:"Confirmation"}),(0,j.jsx)(n.c,{children:(0,j.jsx)(m.c,{id:"alert-dialog-description",children:(0,j.jsx)("b",{children:"Do you want to delete the ".concat(g.District_Name,"?")})})}),(0,j.jsxs)(o.c,{children:[(0,j.jsx)(u.c,{onClick:O,children:"Cancel"}),(0,j.jsx)(u.c,{onClick:async()=>{P(!0);const e=g.District_Id;try{F((t=>t.filter((t=>t.District_Id!==e)))),q((t=>t.filter((t=>t.District_Id!==e))));const s=await(0,D.q)({address:"masters/district",method:"DELETE",bodyData:{District_Id:e}});s.success?h.m4.success("District deleted successfully!"):(t((e=>!e)),h.m4.error(s.message||"Failed to delete district"))}catch(s){console.error(s),t((e=>!e)),h.m4.error("Failed to delete district")}finally{P(!1),f(!1)}},autoFocus:!0,sx:{color:"red"},children:U?"Deleting...":"Delete"})]})]})]})}}}]);
//# sourceMappingURL=9052.976ce02b.chunk.js.map