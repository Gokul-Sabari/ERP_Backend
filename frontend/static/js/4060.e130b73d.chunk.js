"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[4060],{46440:(e,l,a)=>{a.r(l),a.d(l,{default:()=>P});var r=a(69060),s=a(3358),d=a(5548),i=a(43692),t=a(89e3),o=a(84436),n=a(82656),c=a(26773),u=a(4488),v=a(44380),h=a(90048),_=(a(67472),a(99852)),m=a(62344),p=a(39308),x=a(71412),b=a(61988),j=a(80236),S=a(1908),y=a(13724),C=a(55312),I=a(91924),g=a(40691),N=a(91164),T=a(56480),D=a(51560),f=a(82496);const P=e=>{let{loadingOn:l,loadingOff:a}=e;const P=(0,D.i6)(),[A,F]=(0,r.useState)([]),R=JSON.parse(localStorage.getItem("user")),[L,w]=(0,r.useState)([]),[V,G]=(0,r.useState)([]),[O,k]=(0,r.useState)([]),[B,M]=(0,r.useState)([]),[H,$]=(0,r.useState)(!0),[E,U]=(0,r.useState)({}),[W,q]=(0,r.useState)({}),[K,Q]=(0,r.useState)(!1),[z,J]=(0,r.useState)([]),[Y,X]=(0,r.useState)([]),[Z,ee]=(0,r.useState)(!1),[le,ae]=(0,r.useState)(!0),[re,se]=(0,r.useState)([]),[de,ie]=(0,r.useState)({Trip_ST_KM:"",Branch_Id:"",Vehicle_No:"",Trip_No:"",Trip_Date:"",StartTime:"",Created_By:"",GST_Inclusive:1,IS_IGST:0,Delivery_Person_Id:"",Delivery_Location:"",Alter_Id:"",Delivery_Status:""}),te=null===R||void 0===R?void 0:R.UserId,oe=null===R||void 0===R?void 0:R.BranchId,ne=null===R||void 0===R?void 0:R.UserTypeId,[ce,ue]=(0,r.useState)(!1),ve=()=>ue(!1),[he,_e]=(0,r.useState)(null),[me,pe]=(0,r.useState)([]),[xe,be]=(0,r.useState)([]),[je,Se]=(0,r.useState)({Fromdate:(0,p.SO)(7),Todate:(0,p.Q7)(),Retailer_Id:"",RetailerGet:"ALL",Created_by:"",CreatedByGet:"ALL",Sales_Person_Id:"",SalsePersonGet:"ALL",Cancel_status:0,Route_Id:"",RoutesGet:"ALL",Area_Id:"",AreaGet:"ALL"}),[ye,Ce]=(0,r.useState)({Do_Date:(0,p.Q7)(),Vehicle_No:"",Trip_No:"",Trip_Date:(0,p.Q7)(),StartTime:"",Created_By:"",Delivery_Person_Id:"",Delivery_Location:"",Delivery_Time:"",Payment_Ref_No:"",Payment_Mode:"",Payment_Status:"",Narration:"",Alter_Id:"",Delivery_Status:""}),Ie=e=>{const{name:l,value:a}=e.target;Ce((e=>({...e,[l]:a})))},[ge,Ne]=(0,r.useState)({filters:!1,orderDetails:!1});(0,r.useEffect)((()=>{(0,S.q)({address:`sales/saleDelivery?Fromdate=${null===je||void 0===je?void 0:je.Fromdate}&Todate=${null===je||void 0===je?void 0:je.Todate}&Retailer_Id=${null===je||void 0===je?void 0:je.Retailer_Id}&Sales_Person_Id=${null===je||void 0===je?void 0:je.Sales_Person_Id}&Created_by=${null===je||void 0===je?void 0:je.Created_by}&Cancel_status=${null===je||void 0===je?void 0:je.Cancel_status}&Route_Id=${null===je||void 0===je?void 0:je.Route_Id}&Area_Id=${null===je||void 0===je?void 0:je.Area_Id}`}).then((e=>{e.success&&w(null===e||void 0===e?void 0:e.data)})).catch((e=>console.error(e)))}),[je.Fromdate,null===je||void 0===je?void 0:je.Todate,null===je||void 0===je?void 0:je.Retailer_Id,null===je||void 0===je?void 0:je.Sales_Person_Id,null===je||void 0===je?void 0:je.Created_by,null===je||void 0===je?void 0:je.Cancel_status,null===je||void 0===je?void 0:je.Route_Id,null===je||void 0===je?void 0:je.Area_Id,K]);(0,r.useEffect)((()=>{(0,S.q)({address:`masters/retailers/dropDown?Company_Id=${null===R||void 0===R?void 0:R.Company_id}`}).then((e=>{e.success&&G(e.data)})).catch((e=>console.error(e))),(0,S.q)({address:`masters/users/salesPerson/dropDown?Company_id=${null===R||void 0===R?void 0:R.Company_id}`}).then((e=>{e.success&&k(e.data)})).catch((e=>console.error(e))),(0,S.q)({address:`masters/user/dropDown?Company_id=${null===R||void 0===R?void 0:R.Company_id}`}).then((e=>{e.success&&M(e.data)})).catch((e=>console.error(e))),(0,S.q)({address:`masters/users/salesPerson/dropDown?Company_id=${null===R||void 0===R?void 0:R.Company_id}`}).then((e=>{e.success&&pe(e.data)})).catch((e=>console.error(e))),(0,S.q)({address:`masters/routes/dropdown?Company_id=${null===R||void 0===R?void 0:R.Company_id}`}).then((e=>{e.success&&J(e.data)})).catch((e=>console.error(e))),(0,S.q)({address:`masters/areas/dropdown?Company_id=${null===R||void 0===R?void 0:R.Company_id}`}).then((e=>{e.success&&X(e.data)})).catch((e=>console.error(e)))}),[]);const Te=[{Field_Name:"checkbox",ColumnHeader:"",isVisible:1,pointer:!0,isCustomCell:!0,Cell:e=>{let{row:l}=e;const a=A.some((e=>e.So_Id===l.So_Id));return(0,f.jsx)("input",{type:"checkbox",checked:a,onChange:()=>(e=>{const l=A.some((l=>l.So_Id===e.So_Id));F(l?A.filter((l=>l.So_Id!==e.So_Id)):[...A,e])})(l),style:{cursor:"pointer",transform:"scale(1.5)",width:"14px",height:"20px"}})}},{Field_Name:"So_Id",ColumnHeader:"Order ID",Fied_Data:"string",isVisible:1},{Field_Name:"Retailer_Name",ColumnHeader:"Customer",Fied_Data:"string",isVisible:1},{Field_Name:"So_Date",ColumnHeader:"Sale Order Date",Fied_Data:"date",isVisible:1,align:"center"},{Field_Name:"Total_Before_Tax",ColumnHeader:"Before Tax",Fied_Data:"number",isVisible:1,align:"center"},{Field_Name:"Total_Tax",ColumnHeader:"Tax",Fied_Data:"number",isVisible:1,align:"center"},{Field_Name:"Total_Invoice_value",ColumnHeader:"Invoice Value",Fied_Data:"number",isVisible:1,align:"center"},{ColumnHeader:"Status",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{var l,a;let{row:r}=e;const s=j.o.find((e=>e.id===Number(null===r||void 0===r?void 0:r.isConverted)));return(0,f.jsx)("span",{className:null!==(l="py-0 fw-bold px-2 rounded-4 fa-12 "+(null===s||void 0===s?void 0:s.color))&&void 0!==l?l:"bg-secondary text-white",children:null!==(a=null===s||void 0===s?void 0:s.label)&&void 0!==a?a:"Undefined"})}},{Field_Name:"Action",isVisible:1,isCustomCell:!0,Cell:e=>{let{row:l}=e;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s.c,{title:"View Order",children:(0,f.jsx)(d.c,{onClick:()=>{q({orderDetails:l,orderProducts:null!==l&&void 0!==l&&l.Products_List?null===l||void 0===l?void 0:l.Products_List:[]})},color:"primary",size:"small",children:(0,f.jsx)(x.c,{className:"fa-16"})})}),(0,f.jsx)(s.c,{title:"Sales Delivery",children:(0,f.jsx)(d.c,{onClick:()=>{De(),U({...l})},size:"small",children:(0,f.jsx)(g.c,{className:"fa-16"})})})]})}}],De=()=>{$(!H),U({})},fe=()=>{Ne({...ge,filters:!1,orderDetails:!1}),U({})};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(i.c,{children:[(0,f.jsxs)("div",{className:"p-3 py-2 d-flex align-items-center justify-content-between",children:[(0,f.jsx)("h6",{className:"fa-18 m-0 p-0",children:H?"Sale Orders":(0,p.CY)(E)}),(0,f.jsxs)("div",{children:[(0,f.jsx)(s.c,{title:"Filters",children:(0,f.jsx)(d.c,{size:"small",onClick:()=>Ne({...ge,filters:!0}),children:(0,f.jsx)(b.c,{})})}),A.length>0&&H&&(0,f.jsx)(t.c,{variant:"outlined",onClick:()=>{P("/erp/sales/Tripsheet/Tripsheetcreation",{state:[...A]})},children:"Convert to Trip"})]})]}),(0,f.jsx)(o.c,{className:"p-0",children:H?(0,f.jsx)(y.cp,{dataArray:L,columns:Te,isExpendable:!0,tableMaxHeight:550,expandableComp:e=>{let{row:l}=e;return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("table",{className:"table",children:(0,f.jsxs)("tbody",{children:[(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"border p-2 bg-light",children:"Branch"}),(0,f.jsx)("td",{className:"border p-2",children:l.Branch_Name}),(0,f.jsx)("td",{className:"border p-2 bg-light",children:"Sales Person"}),(0,f.jsx)("td",{className:"border p-2",children:l.Sales_Person_Name}),(0,f.jsx)("td",{className:"border p-2 bg-light",children:"Round off"}),(0,f.jsx)("td",{className:"border p-2",children:l.Round_off})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"border p-2 bg-light",children:"Invoice Type"}),(0,f.jsxs)("td",{className:"border p-2",children:[(0,p.Qr)(l.GST_Inclusive,1)&&"Inclusive",(0,p.Qr)(l.GST_Inclusive,0)&&"Exclusive"]}),(0,f.jsx)("td",{className:"border p-2 bg-light",children:"Tax Type"}),(0,f.jsxs)("td",{className:"border p-2",children:[(0,p.Qr)(l.IS_IGST,1)&&"IGST",(0,p.Qr)(l.IS_IGST,0)&&"GST"]}),(0,f.jsx)("td",{className:"border p-2 bg-light",children:"Sales Person"}),(0,f.jsx)("td",{className:"border p-2",children:l.Sales_Person_Name})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"border p-2 bg-light",children:"Narration"}),(0,f.jsx)("td",{className:"border p-2",colSpan:5,children:l.Narration})]})]})})})}}):Z?(0,f.jsx)(N.c,{editValues:E,loadingOn:l,loadingOff:a,reload:()=>{Q((e=>!e)),$((e=>!e))},switchScreen:()=>$(!0),onToggle:()=>{$((e=>!e)),ee((e=>!e))}}):(0,f.jsx)(C.c,{editValues:E,loadingOn:l,loadingOff:a,reload:()=>{Q((e=>!e)),$((e=>!e))},switchScreen:()=>$(!0),editOn:!0})})]}),Object.keys(W).length>0&&(0,f.jsx)(I.c,{orderDetails:null===W||void 0===W?void 0:W.orderDetails,orderProducts:null===W||void 0===W?void 0:W.orderProducts,download:!0,actionOpen:!0,clearDetails:()=>q({}),TitleText:"Sale Order"}),(0,f.jsxs)(n.c,{open:ce,onClose:ve,fullWidth:!0,maxWidth:"sm",children:[(0,f.jsx)(c.c,{children:"Delivery Details"}),(0,f.jsx)(u.c,{children:(0,f.jsxs)("form",{children:[(0,f.jsx)("td",{style:{verticalAlign:"middle"},children:"Delivery Date"}),(0,f.jsx)(v.c,{fullWidth:!0,type:"date",name:"Do_Date",value:ye.Do_Date,onChange:Ie,InputLabelProps:{shrink:!0}}),(0,f.jsx)("label",{htmlFor:"delivery-person",children:"Delivery Person"}),(0,f.jsx)(_.cp,{id:"delivery-person",name:"deliveryPerson",value:he?{value:he.UserId,label:he.Name}:null,onChange:e=>{_e(e?{UserId:e.value,Name:e.label}:null)},options:[{value:"",label:"Select",isDisabled:!0},...(me||[]).map((e=>({value:e.UserId,label:e.Name})))],styles:m.cF,isSearchable:!0,placeholder:"Sales Person Name"}),(0,f.jsx)(v.c,{fullWidth:!0,margin:"normal",label:"Vehicle Number",name:"Vehicle_No",value:ye.Vehicle_No,onChange:Ie}),(0,f.jsx)(v.c,{fullWidth:!0,margin:"normal",label:"Start KM",name:"Trip_ST_KM",value:ye.Trip_ST_KM,onChange:Ie}),(0,f.jsx)(v.c,{fullWidth:!0,margin:"normal",label:"Trip Date",type:"date",name:"Trip_Date",value:ye.Trip_Date,onChange:Ie}),(0,f.jsx)(v.c,{fullWidth:!0,margin:"normal",label:"Start Time",name:"StartTime",value:ye.StartTime,onChange:Ie})]})}),(0,f.jsxs)(h.c,{children:[(0,f.jsx)(t.c,{onClick:ve,children:"Cancel"}),(0,f.jsx)(t.c,{onClick:async()=>{const e={Trip_ST_KM:ye.Trip_ST_KM||"",Branch_Id:ye.Branch_Id||"",Vehicle_No:ye.Vehicle_No||"",Trip_No:ye.Trip_No||"",StartTime:ye.StartTime||"",Delivery_Person_Id:(null===he||void 0===he?void 0:he.UserId)||"",Delivery_Location:ye.Delivery_Location||"",Alter_Id:ye.Alter_Id||"",Delivery_Status:ye.Delivery_Status||"",Cost_Center_Type_Id:ne},l=(null===ie||void 0===ie||ie.Trip_ST_KM,{...ye,DeliveryList:xe,Product_Array:re,EmployeesInvolved:e,deliveryPerson:null===he||void 0===he?void 0:he.UserId,Do_Date:null===ye||void 0===ye?void 0:ye.Do_Date,Trip_Date:null===ye||void 0===ye?void 0:ye.Trip_Date,Vehicle_No:null===ye||void 0===ye?void 0:ye.Vehicle_No,Created_By:Number(te),Branch_Id:oe,Involved_Emp_Id:null===he||void 0===he?void 0:he.UserId,Trip_ST_KM:null===ye||void 0===ye?void 0:ye.Trip_ST_KM,Vehicle_No:null===ye||void 0===ye?void 0:ye.Vehicle_No});try{const e=await(0,S.q)({address:"delivery/deliveryOrderTrip",method:"POST",bodyData:l});return e.success?(T.m4.success(e.message),ve(),!0):(T.m4.error("Failed to add Trip Data"),ve(),!1)}catch(a){return console.error("Error during API call:",a),ve(),!1}},children:"Submit"})]})]}),(0,f.jsxs)(n.c,{open:ge.filters,onClose:fe,fullWidth:!0,maxWidth:"sm",children:[(0,f.jsx)(c.c,{children:"Filters"}),(0,f.jsx)(u.c,{children:(0,f.jsx)("div",{className:"table-responsive pb-4",children:(0,f.jsx)("table",{className:"table",children:(0,f.jsxs)("tbody",{children:[(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{verticalAlign:"middle"},children:"Retailer"}),(0,f.jsx)("td",{children:(0,f.jsx)(_.cp,{value:{value:null===je||void 0===je?void 0:je.Retailer_Id,label:null===je||void 0===je?void 0:je.RetailerGet},onChange:e=>Se({...je,Retailer_Id:e.value,RetailerGet:e.label}),options:[{value:"",label:"ALL"},...V.map((e=>({value:null===e||void 0===e?void 0:e.Retailer_Id,label:null===e||void 0===e?void 0:e.Retailer_Name})))],styles:m.cF,isSearchable:!0,placeholder:"Retailer Name"})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{verticalAlign:"middle"},children:"Salse Person"}),(0,f.jsx)("td",{children:(0,f.jsx)(_.cp,{value:{value:null===je||void 0===je?void 0:je.Sales_Person_Id,label:null===je||void 0===je?void 0:je.SalsePersonGet},onChange:e=>Se({...je,Sales_Person_Id:e.value,SalsePersonGet:e.label}),options:[{value:"",label:"ALL"},...O.map((e=>({value:null===e||void 0===e?void 0:e.UserId,label:null===e||void 0===e?void 0:e.Name})))],styles:m.cF,isSearchable:!0,placeholder:"Sales Person Name"})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{verticalAlign:"middle"},children:"Created By"}),(0,f.jsx)("td",{children:(0,f.jsx)(_.cp,{value:{value:null===je||void 0===je?void 0:je.Created_by,label:null===je||void 0===je?void 0:je.CreatedByGet},onChange:e=>Se({...je,Created_by:e.value,CreatedByGet:e.label}),options:[{value:"",label:"ALL"},...B.map((e=>({value:null===e||void 0===e?void 0:e.UserId,label:null===e||void 0===e?void 0:e.Name})))],styles:m.cF,isSearchable:!0,placeholder:"Sales Person Name"})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{verticalAlign:"middle"},children:"From"}),(0,f.jsx)("td",{children:(0,f.jsx)("input",{type:"date",value:je.Fromdate,onChange:e=>Se({...je,Fromdate:e.target.value}),className:"cus-inpt"})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{verticalAlign:"middle"},children:"To"}),(0,f.jsx)("td",{children:(0,f.jsx)("input",{type:"date",value:je.Todate,onChange:e=>Se({...je,Todate:e.target.value}),className:"cus-inpt"})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{verticalAlign:"middle"},children:"Canceled Order"}),(0,f.jsx)("td",{children:(0,f.jsxs)("select",{type:"date",value:je.Cancel_status,onChange:e=>Se({...je,Cancel_status:Number(e.target.value)}),className:"cus-inpt",children:[(0,f.jsx)("option",{value:1,children:"Show"}),(0,f.jsx)("option",{value:0,children:"Hide"})]})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{verticalAlign:"middle"},children:"Routes"}),(0,f.jsx)("td",{children:(0,f.jsx)(_.cp,{value:{value:null===je||void 0===je?void 0:je.Route_Id,label:null===je||void 0===je?void 0:je.RoutesGet},onChange:e=>Se({...je,Route_Id:e.value,RoutesGet:e.label}),options:[{value:"",label:"ALL"},...z.map((e=>({value:null===e||void 0===e?void 0:e.Route_Id,label:null===e||void 0===e?void 0:e.Route_Name})))],styles:m.cF,isSearchable:!0,placeholder:"Route Name"})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{verticalAlign:"middle"},children:"Area"}),(0,f.jsx)("td",{children:(0,f.jsx)(_.cp,{value:{value:null===je||void 0===je?void 0:je.Area_Id,label:null===je||void 0===je?void 0:je.AreaGet},onChange:e=>Se({...je,Area_Id:e.value,AreaGet:e.label}),options:[{value:"",label:"ALL"},...Y.map((e=>({value:null===e||void 0===e?void 0:e.Area_Id,label:null===e||void 0===e?void 0:e.Area_Name})))],styles:m.cF,isSearchable:!0,placeholder:"Area Name"})})]})]})})})}),(0,f.jsx)(h.c,{children:(0,f.jsx)(t.c,{onClick:fe,children:"close"})})]})]})}},40691:(e,l,a)=>{var r=a(22411);l.c=void 0;var s=r(a(90864)),d=a(82496);l.c=(0,s.default)((0,d.jsx)("path",{d:"M20 11c-.18 0-.36.03-.53.05L17.41 9H20V6l-3.72 1.86L13.41 5H9v2h3.59l2 2H11l-4 2-2-2H0v2h4c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4l2 2h3l3.49-6.1 1.01 1.01c-.91.73-1.5 1.84-1.5 3.09 0 2.21 1.79 4 4 4s4-1.79 4-4-1.79-4-4-4M4 17c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m16 0c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"}),"TwoWheeler")},90864:(e,l,a)=>{Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=a(27492)},90280:(e,l,a)=>{a.d(l,{c:()=>r});const r=a(91200).c},27492:(e,l,a)=>{a.r(l),a.d(l,{capitalize:()=>s.c,createChainedFunction:()=>d.c,createSvgIcon:()=>i.c,debounce:()=>t.c,deprecatedPropType:()=>o,isMuiElement:()=>n.c,ownerDocument:()=>c.c,ownerWindow:()=>u.c,requirePropFactory:()=>v,setRef:()=>h,unstable_ClassNameGenerator:()=>y,unstable_useEnhancedEffect:()=>_.c,unstable_useId:()=>m.c,unsupportedProp:()=>p,useControlled:()=>x.c,useEventCallback:()=>b.c,useForkRef:()=>j.c,useIsFocusVisible:()=>S.c});var r=a(31152),s=a(55832),d=a(90280),i=a(27664),t=a(72144);const o=function(e,l){return()=>null};var n=a(28276),c=a(93976),u=a(31328);a(45072);const v=function(e,l){return()=>null};const h=a(30472).c;var _=a(87188),m=a(18144);const p=function(e,l,a,r,s){return null};var x=a(61124),b=a(17908),j=a(56268),S=a(24724);const y={configure:e=>{r.c.configure(e)}}}}]);
//# sourceMappingURL=4060.e130b73d.chunk.js.map