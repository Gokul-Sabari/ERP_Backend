"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[8105],{48105:(e,t,a)=>{a.r(t),a.d(t,{default:()=>P});var s=a(69060),r=a(1908),l=a(3358),n=a(5548),d=a(82656),o=a(26773),c=a(4488),i=a(44380),u=a(90048),m=a(87016),h=a(57704),v=a(86e3),x=a(45180),_=a(51560),p=a(56480),j=a(13724),D=a(42136),b=a(39308),g=a(73380),f=a.n(g),N=a(85592),I=a.n(N),w=a(26592),R=a(82496);const S={Fromdate:(0,b.Q7)(),NewDate:""},C=e=>{const t=new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`};const P=function(e){var t,a;let{loadingOn:g,loadingOff:N}=e;const[P,F]=(0,s.useState)({Fromdate:S.Fromdate,fetchFrom:S.Fromdate,NewDate:S.NewDate,fetchNew:S.NewDate}),[y,M]=(0,s.useState)(!1),[A,B]=(0,s.useState)({Rate_Date:(new Date).toISOString().split("T")[0],Pos_Brand_Id:"",Item_Id:"",Rate:"",Is_Active_Decative:"",POS_Brand_Name:"",Product_Name:"",MaxRate:""}),[k,O]=(0,s.useState)(!1),[E,T]=(0,s.useState)([]),[$,z]=(0,s.useState)([]),[L,q]=(0,s.useState)([]),V=(0,_.i6)(),W=(0,_.IT)(),Y=new URLSearchParams((0,_.IT)().search),[H,U]=(0,s.useState)(""),[K,Q]=(0,s.useState)([]),[G,J]=(0,s.useState)(!1),[X,Z]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{const e={Fromdate:Y.get("Fromdate")&&(0,b.e8)(Y.get("Fromdate"))?Y.get("Fromdate"):S.Fromdate,NewDate:Y.get("NewDate")&&(0,b.e8)(Y.get("NewDate"))?Y.get("NewDate"):S.NewDate};F((t=>({...t,fetchFrom:e.Fromdate,fetchNew:e.NewDate})))}),[W.search]),(0,s.useEffect)((()=>{(0,r.q)({address:`masters/posRateMaster?FromDate=${null===P||void 0===P?void 0:P.Fromdate}`}).then((e=>{e.success&&(Q(e),q(e.data))})).catch((e=>console.error(e))),(0,r.q)({address:"masters/posbranch/dropdown"}).then((e=>{e.success&&T(e.data)})).catch((e=>console.error(e)))}),[P.Fromdate,G]),(0,s.useEffect)((()=>{H&&(async e=>{(0,r.q)({address:`masters/posbrand/productList?Pos_Brand_Id=${e}`}).then((e=>{e.success&&z(e.data)})).catch((e=>console.error(e)))})(H)}),[H]),(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:"date-inputs",children:(0,R.jsxs)("div",{className:"p-2 d-flex align-items-center flex-wrap border-bottom",children:[(0,R.jsxs)("h5",{className:"m-0 my-1 flex-grow-1 d-flex align-items-center flex-wrap",children:[(0,R.jsx)("span",{className:"mx-2",children:"Rate Master"}),(0,R.jsx)(D.c,{onClick:()=>Z(!0),children:"Export To"}),(0,R.jsx)(D.c,{className:"mx-2 btn btn-dark",style:{outline:"none",boxShadow:"none"},onClick:async()=>{const e=L.filter((e=>1===e.Is_Active_Decative));if(0===e.length)return void alert("No active data available for download.");const t=e.reduce(((e,t)=>{const{Pos_Brand_Id:a}=t;return e[a]||(e[a]=[]),e[a].push(t),e}),{});const a=new(I().Workbook),s=a.addWorksheet("PriceList_Data"),r=e.length>0?e[0].Rate_Date.split("T")[0].split("-").reverse().join("-"):"";s.addRow([r,"PriceList"]).font={bold:!0,size:14},Object.entries(t).forEach((e=>{let[t,a]=e;const r=s.addRow([a[0].POS_Brand_Name]).getCell(1);r.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFF00"}},r.font={bold:!0,size:12},a.forEach((e=>{s.addRow([e.Short_Name,e.Max_Rate])}))})),s.columns=[{width:40},{width:15}];const l=await a.xlsx.writeBuffer(),n=new Blob([l],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,w.saveAs)(n,"PriceList_Data.xlsx")},children:"Download Excel"})]}),(0,R.jsx)(l.c,{title:"Sync Data",children:(0,R.jsx)(n.c,{onClick:()=>{(0,r.q)({address:"masters/posproductSync"}).then((e=>{e&&p.m4.success(null===e||void 0===e?void 0:e.message)})).catch((e=>console.error(e)))},children:(0,R.jsx)(m.c,{})})}),(0,R.jsx)("div",{children:(0,R.jsx)("input",{type:"date",value:P.Fromdate,onChange:e=>{const t=e.target.value;F({...P,Fromdate:t,fetchFrom:t})},className:"cus-inpt w-auto p-1"})}),(0,R.jsx)(n.c,{onClick:()=>{(e=>{const t=new URLSearchParams(e);V(`?${t.toString()}`,{replace:!0})})({Fromdate:null===P||void 0===P?void 0:P.Fromdate})},variant:"outlined",size:"small",children:(0,R.jsx)(h.c,{})}),(null===P||void 0===P?void 0:P.Fromdate)===f()().format("YYYY-MM-DD")?(0,R.jsx)(D.c,{onClick:()=>M(!0),children:"Add"}):null]})}),(0,R.jsx)(j.cp,{dataArray:L,EnableSerialNumber:!0,isExpendable:!0,maxHeightOption:!0,columns:[(0,j.A5)("Rate_Date","date","Rate Date"),(0,j.A5)("POS_Brand_Name","string","Brand"),(0,j.A5)("Short_Name","string","Product"),(0,j.A5)("Rate","string","Rate"),(0,j.A5)("Max_Rate","string","MaxRate"),{Field_Name:"Is_Active_Decative",ColumnHeader:"Status",isVisible:1,isCustomCell:!0,Cell:e=>{let{row:t}=e;const a=1===t.Is_Active_Decative?"Active":"Inactive";return(0,R.jsx)("span",{className:"py-0 fw-bold px-2 rounded-4 fa-12 text-white",style:{backgroundColor:"Active"===a?"green":"red"},children:a})}},(null===P||void 0===P?void 0:P.Fromdate)===f()().format("YYYY-MM-DD")?{Field_Name:"Actions",ColumnHeader:"Actions",isVisible:1,isCustomCell:!0,Cell:e=>{let{row:t}=e;return(0,R.jsxs)("td",{style:{minWidth:"80px"},children:[(0,R.jsx)(n.c,{onClick:()=>{return e=t,M(!0),B({Id:null===e||void 0===e?void 0:e.Id,Rate_Date:C(e.Rate_Date),Pos_Brand_Id:e.Pos_Brand_Id,Item_Id:e.Item_Id,Rate:e.Rate,MaxRate:e.Max_Rate,Is_Active_Decative:e.Is_Active_Decative,POS_Brand_Name:e.POS_Brand_Name,Product_Name:e.Product_Name}),void U(e.Pos_Brand_Id);var e},size:"small",children:(0,R.jsx)(v.c,{className:"fa-in"})}),(0,R.jsx)(n.c,{onClick:()=>{O(!0),B({Id:t.Id})},size:"small",color:"error",children:(0,R.jsx)(x.c,{className:"fa-in "})})]})}}:{Field_Name:"Actions",ColumnHeader:"Actions",isVisible:1,isCustomCell:!0,Cell:e=>{let{row:t}=e;return(0,R.jsx)("td",{children:"-"})}}]}),(0,R.jsxs)(d.c,{open:y,onClose:()=>M(!1),fullWidth:!0,maxWidth:"sm",children:[(0,R.jsxs)(o.c,{children:[A.Id?"UPDATE":"CREATE"," RATE MASTER"]}),(0,R.jsxs)("form",{onSubmit:e=>{e.preventDefault(),A.Id?(0,r.q)({address:"masters/posRateMaster",method:"PUT",bodyData:{...A,Rate_Date:C(A.Rate_Date)}}).then((e=>{e.success?(p.m4.success("Rate Master updated successfully!"),M(!1),J(!G),B({Rate_Date:(new Date).toISOString().split("T")[0],Pos_Brand_Id:"",Item_Id:"",Rate:"",Is_Active_Decative:"",POS_Brand_Name:"",Product_Name:"",MaxRate:""}),U("")):p.m4.error("Failed to update Rate Master:",e.message)})).catch((e=>{throw e})):(0,r.q)({address:"masters/posRateMaster",method:"POST",bodyData:{...A,Pos_Brand_Id:H,Item_Id:A.Item_Id,Rate_Date:C(A.Rate_Date)}}).then((e=>{e.success?(M(!1),p.m4.success(e.message),B({Rate_Date:(new Date).toISOString().split("T")[0],Pos_Brand_Id:"",Item_Id:"",Rate:"",Is_Active_Decative:"-",POS_Brand_Name:"",Product_Name:"",MaxRate:""}),U(""),J(!G)):p.m4.error(e.message)})).catch((e=>console.error(e)))},children:[(0,R.jsxs)(c.c,{children:[(0,R.jsx)("label",{children:"Rate Date"}),(0,R.jsx)("input",{type:"date",value:A.Rate_Date,onChange:e=>B({...A,Rate_Date:e.target.value}),className:"cus-inpt"}),(0,R.jsx)("label",{children:"POS Brand"}),(0,R.jsxs)("select",{value:H,onChange:e=>{const t=e.target.value;U(t),B({...A,Pos_Brand_Id:t})},className:"cus-inpt",children:[(0,R.jsx)("option",{value:"",disabled:!0,children:"Select POS Brand"}),E.map(((e,t)=>(0,R.jsx)("option",{value:e.value,children:e.label},t)))]}),(0,R.jsx)("label",{children:"Product"}),(0,R.jsxs)("select",{className:"cus-inpt",disabled:!H,value:A.Item_Id,onChange:e=>{B({...A,Item_Id:e.target.value})},children:[(0,R.jsx)("option",{value:"",disabled:!0,children:"Select Product"}),$.length>0?$.map(((e,t)=>(0,R.jsx)("option",{value:e.value,children:e.label},t))):(0,R.jsx)("option",{value:"",disabled:!0,children:"No products available"})]}),(0,R.jsx)("label",{children:"Rate"}),(0,R.jsx)(i.c,{label:"",value:null!==(t=A.Rate)&&void 0!==t?t:"",onChange:e=>B({...A,Rate:e.target.value}),fullWidth:!0,margin:"dense",variant:"outlined"}),(0,R.jsx)("label",{children:"Max Rate"}),(0,R.jsx)(i.c,{label:"",value:null!==(a=A.MaxRate)&&void 0!==a?a:"",onChange:e=>B({...A,MaxRate:e.target.value}),fullWidth:!0,margin:"dense",variant:"outlined"}),(0,R.jsx)("label",{children:"Status"}),(0,R.jsxs)("select",{className:"cus-inpt",value:A.Is_Active_Decative,onChange:e=>B({...A,Is_Active_Decative:e.target.value}),children:[(0,R.jsx)("option",{value:"",disabled:!0,children:"Select "}),(0,R.jsx)("option",{value:"1",children:"Active"}),(0,R.jsx)("option",{value:"0",children:"Inactive"})]})]}),(0,R.jsxs)(u.c,{children:[(0,R.jsx)(D.c,{onClick:()=>{B({Rate_Date:(new Date).toISOString().split("T")[0],Pos_Brand_Id:"",Item_Id:"",Rate:"",Is_Active_Decative:"",POS_Brand_Name:"",Product_Name:"",MaxRate:""}),M(!1)},children:"Cancel"}),(0,R.jsx)(D.c,{type:"submit",variant:"contained",children:"Save"})]})]})]}),(0,R.jsxs)(d.c,{open:k,onClose:()=>O(!1),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,R.jsx)(o.c,{id:"alert-dialog-title",children:"Confirmation"}),(0,R.jsx)(c.c,{children:(0,R.jsx)("b",{children:"Do you want to delete the RateMaster?"})}),(0,R.jsxs)(u.c,{children:[(0,R.jsx)(D.c,{onClick:()=>O(!1),children:"Cancel"}),(0,R.jsx)(D.c,{onClick:()=>(A.Id,void(0,r.q)({address:"masters/posRateMaster",method:"DELETE",bodyData:{Id:A.Id}}).then((e=>{e.success?(J(!G),O(!1),M(!1),B({Rate_Date:(new Date).toISOString().split("T")[0],Pos_Brand_Id:"",Item_Id:"",Rate:"",Is_Active_Decative:"",POS_Brand_Name:"",Product_Name:"",MaxRate:""}),U(""),p.m4.success("Rate Master deleted successfully!")):p.m4.error("Failed to delete area:",e.message)})).catch((e=>console.error(e)))),autoFocus:!0,color:"error",children:"Delete"})]})]}),(0,R.jsxs)(d.c,{open:X,onClose:()=>Z(!1),fullWidth:!0,maxWidth:"sm",children:[(0,R.jsx)(o.c,{id:"alert-dialog-title",children:"Confirmation"}),(0,R.jsx)(c.c,{children:(0,R.jsxs)("b",{children:["Do you want to export data from:",(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{children:"From Date"}),(0,R.jsx)("input",{type:"date",disabled:!0,value:P.Fromdate,onChange:e=>{const t=e.target.value;F({...P,Fromdate:t,fetchFrom:t})},className:"cus-inpt w-auto p-1"})]}),(0,R.jsx)("br",{}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{children:"New Date"}),(0,R.jsx)("input",{type:"date",value:P.NewDate,onChange:e=>{const t=e.target.value;F({...P,NewDate:t})},className:"cus-inpt w-auto p-1"})]})]})}),(0,R.jsxs)(u.c,{children:[(0,R.jsx)(D.c,{onClick:()=>Z(!1),children:"Cancel"}),(0,R.jsx)(D.c,{onClick:()=>(async()=>{if(g&&g(),null===P||void 0===P||!P.Fromdate||null===P||void 0===P||!P.NewDate)throw new Error("Both 'From Date' and 'New Date' are required.");(0,r.q)({address:`masters/exportRateMaster?FromDate=${null===P||void 0===P?void 0:P.Fromdate}&NewDate=${null===P||void 0===P?void 0:P.NewDate}`,method:"POST",bodyData:{bulkData:K}}).then((e=>{e.success?(p.m4.success(e.message),Z(!1),F({...P,NewDate:""})):p.m4.error(e.message)})).catch((e=>console.error(e))).finally((()=>{N&&N()}))})(),autoFocus:!0,color:"primary",children:"Export"})]})]})]})}},45180:(e,t,a)=>{a.d(t,{c:()=>l});var s=a(27664),r=a(82496);const l=(0,s.c)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},86e3:(e,t,a)=>{a.d(t,{c:()=>l});var s=a(27664),r=a(82496);const l=(0,s.c)((0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},87016:(e,t,a)=>{a.d(t,{c:()=>l});var s=a(27664),r=a(82496);const l=(0,s.c)((0,r.jsx)("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8m0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4z"}),"Sync")},16344:(e,t,a)=>{a.d(t,{cV:()=>n,cp:()=>o});var s=a(69060),r=a(82496);const l=["as","disabled"];function n(e){let{tagName:t,disabled:a,href:s,target:r,rel:l,role:n,onClick:d,tabIndex:o=0,type:c}=e;t||(t=null!=s||null!=r||null!=l?"a":"button");const i={tagName:t};if("button"===t)return[{type:c||"button",disabled:a},i];const u=e=>{(a||"a"===t&&function(e){return!e||"#"===e.trim()}(s))&&e.preventDefault(),a?e.stopPropagation():null==d||d(e)};return"a"===t&&(s||(s="#"),a&&(s=void 0)),[{role:null!=n?n:"button",disabled:void 0,tabIndex:a?void 0:o,href:s,target:"a"===t?r:void 0,"aria-disabled":a||void 0,rel:"a"===t?l:void 0,onClick:u,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),u(e))}},i]}const d=s.forwardRef(((e,t)=>{let{as:a,disabled:s}=e,d=function(e,t){if(null==e)return{};var a,s,r={},l=Object.keys(e);for(s=0;s<l.length;s++)a=l[s],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,l);const[o,{tagName:c}]=n(Object.assign({tagName:a,disabled:s},d));return(0,r.jsx)(c,Object.assign({},d,o,{ref:t}))}));d.displayName="Button";const o=d},42136:(e,t,a)=>{a.d(t,{c:()=>i});var s=a(264),r=a.n(s),l=a(69060),n=a(16344),d=a(83576),o=a(82496);const c=l.forwardRef(((e,t)=>{let{as:a,bsPrefix:s,variant:l="primary",size:c,active:i=!1,disabled:u=!1,className:m,...h}=e;const v=(0,d.Ky)(s,"btn"),[x,{tagName:_}]=(0,n.cV)({tagName:a,disabled:u,...h}),p=_;return(0,o.jsx)(p,{...x,...h,ref:t,disabled:u,className:r()(m,v,i&&"active",l&&`${v}-${l}`,c&&`${v}-${c}`,h.href&&u&&"disabled")})}));c.displayName="Button";const i=c}}]);
//# sourceMappingURL=8105.6f0ae37a.chunk.js.map