"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[3520],{3520:(e,s,c)=>{c.r(s),c.d(s,{default:()=>Q});var d=c(69060),l=c(14168),i=c(27664),o=c(82496);const a=(0,i.c)((0,o.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-2 12H6v-2h12zm0-3H6V9h12zm0-3H6V6h12z"}),"Message"),r=(0,i.c)((0,o.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Article");var n=c(28655);const t=(0,i.c)((0,o.jsx)("path",{d:"M22 9V7h-2v2h-2v2h2v2h2v-2h2V9zM8 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 1c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4m4.51-8.95C13.43 5.11 14 6.49 14 8s-.57 2.89-1.49 3.95C14.47 11.7 16 10.04 16 8s-1.53-3.7-3.49-3.95m4.02 9.78C17.42 14.66 18 15.7 18 17v3h2v-3c0-1.45-1.59-2.51-3.47-3.17"}),"GroupAdd");var m,h=c(86e3),u=c(45180),v=c(3358),x=c(5548),j=c(93996),p=c(82656),g=c(26773),b=c(4488),N=c(90048),y=c(89e3),C=c(77536),f=c(91012),T=c(56480),I=(c(21680),c(12720)),S=c(52924),U=c(44380),_=c(71448),k=c(26728),D=c(59736),M=c(51560),R=c(1908),E=c(39308);const z={Description:"",Id:"",Topic:"",Company_id:null===(m=JSON.parse(localStorage.getItem("user")))||void 0===m?void 0:m.Company_id},w=(0,o.jsx)(k.c,{fontSize:"small"}),F=(0,o.jsx)(D.c,{fontSize:"small"}),Q=()=>{const e=localStorage.getItem("user"),s=JSON.parse(e),[c,i]=(0,d.useState)([]),[m,k]=(0,d.useState)(!1),[D,Q]=(0,d.useState)(!1),[V,A]=(0,d.useState)(!1),[O,H]=(0,d.useState)(z),[P,q]=(0,d.useState)({}),[L,W]=(0,d.useState)(!1),{contextObj:$}=(0,d.useContext)(C.a),[J,B]=(0,d.useState)(!1),[G,Y]=(0,d.useState)([]),K=(0,M.i6)();(0,d.useEffect)((()=>{(0,R.q)({address:`discussionForum/discussionTopic?UserId=${null===s||void 0===s?void 0:s.UserId}&UserTypeId=${null===s||void 0===s?void 0:s.UserTypeId}&Company_id=${null===s||void 0===s?void 0:s.Company_id}`}).then((e=>{if(e.success){const c=[];e.data.forEach((e=>{var d;null===e||void 0===e||null===(d=e.InvolvedUsers)||void 0===d||d.forEach((d=>{Number(null===d||void 0===d?void 0:d.UserId)===Number(null===s||void 0===s?void 0:s.UserId)&&c.push(e)}))})),i(0===Number(s.UserTypeId)||1===Number(s.UserTypeId)?null===e||void 0===e?void 0:e.data:c)}})).catch((e=>console.log(e)))}),[J,null===s||void 0===s?void 0:s.UserId,null===s||void 0===s?void 0:s.UserTypeId]),(0,d.useEffect)((()=>{(0,R.q)({address:`masters/users/employeeAndSalesPerson/dropDown?Company_id=${null===s||void 0===s?void 0:s.Company_id}`}).then((e=>{e.success&&Y(e.data)})).catch((e=>console.log(e)))}),[null===s||void 0===s?void 0:s.BranchId]);const X=()=>{k(!1),H(z),W(!1)},Z=()=>{Q(!1),H(z)},ee=()=>{A(!1),q({})};return 1===Number($.Read_Rights)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(T.jd,{}),(0,o.jsx)("div",{className:"cus-card",children:(0,o.jsxs)("div",{className:"p-3",children:[(0,o.jsxs)("div",{className:"d-flex mb-4 ",children:[(0,o.jsx)("p",{className:"fw-bold fa-18 px-2 flex-grow-1",children:"Topics"}),(0,E.Qr)($.Add_Rights,1)&&(0,o.jsx)("button",{className:"btn btn-primary rounded-5 px-3 fa-13 shadow",onClick:()=>k(!0),children:"Create Topic"})]}),c.length>0?(0,o.jsx)("table",{className:"table",children:(0,o.jsx)("tbody",{children:c.map(((e,s)=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"fa-14 border-0",children:(0,o.jsxs)("div",{className:"d-flex align-items-start justify-content-center flex-column",children:[(0,o.jsx)("p",{className:"mb-0 fw-bold fa-14 under-blue "+(0===Number(null===e||void 0===e?void 0:e.Project_Id)?"text-primary":"text-secondary"),onClick:()=>K("chats",{state:e}),children:null===e||void 0===e?void 0:e.Topic}),(0,o.jsx)("p",{className:"mb-0 py-2 text-muted",children:null===e||void 0===e?void 0:e.Description})]})}),(0,o.jsx)("td",{className:"fa-14 text-center border-0",children:(0,o.jsx)(v.c,{title:"Team Size",children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.c,{className:"fa-18 text-primary mx-1"})," ",null===e||void 0===e?void 0:e.InvolvedUsersCount]})})}),(0,o.jsx)("td",{className:"fa-14 text-center border-0",children:(0,o.jsx)(v.c,{title:"Messages Count",children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a,{className:"fa-18 text-primary mx-1"})," ",null===e||void 0===e?void 0:e.TotalMessages]})})}),(0,o.jsx)("td",{className:"fa-14 border-0",children:(0,o.jsx)(v.c,{title:"Documents Shared",children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r,{className:"fa-18 text-primary me-1"})," "," "+(null===e||void 0===e?void 0:e.DocumentsShared)]})})}),(0,o.jsx)("td",{className:"fa-14 border-0",children:(0,o.jsxs)("span",{className:"d-flex",children:[(0,o.jsx)(x.c,{size:"small",onClick:()=>K("chats",{state:e}),children:(0,o.jsx)(n.c,{className:" text-primary"})}),((0,E.Qr)($.Edit_Rights,1)||(0,E.Qr)($.Delete_Rights,1))&&(0,o.jsxs)(I.c,{children:[(0,o.jsx)(I.c.Toggle,{variant:"success",id:"actions",className:"rounded-5 bg-transparent text-dark border-0 btn"}),(0,o.jsxs)(I.c.Menu,{children:[(0,E.Qr)($.Edit_Rights,1)&&(0,o.jsxs)(j.c,{onClick:()=>(q(e),void A(!0)),children:[(0,o.jsx)(t,{className:"fa-in text-primary me-2"})," Manage Team"]}),(0,E.Qr)($.Edit_Rights,1)&&(0,E.Qr)(null===e||void 0===e?void 0:e.Project_Id,0)&&(0,o.jsxs)(j.c,{onClick:()=>{return s=e,W(!0),H(s),void k(!0);var s},children:[(0,o.jsx)(h.c,{className:"fa-in me-2"})," Edit"]}),(0,E.Qr)($.Delete_Rights,1)&&(0,E.Qr)(null===e||void 0===e?void 0:e.Project_Id,0)&&(0,o.jsxs)(j.c,{onClick:()=>{return s=e,Q(!0),void H(s);var s},children:[(0,o.jsx)(u.c,{className:"fa-in me-2 text-danger"})," Delete"]})]})]})]})})]},s)))})}):(0,o.jsx)("h5",{className:"text-center mb-5",children:(0,E.Qr)(s.UserTypeId,0)||(0,E.Qr)(s.UserTypeId,1)?"No Topics Available":"You are not involved in any discussion"})]})}),(0,o.jsxs)(p.c,{open:m,onClose:X,maxWidth:"sm",fullWidth:!0,children:[(0,o.jsx)(g.c,{children:L?"Modify Topic":"Create Discussion Topic"}),(0,o.jsx)(b.c,{children:(0,o.jsx)("table",{className:"table",children:(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"border-0",children:"Topic"}),(0,o.jsx)("td",{className:"border-0",children:(0,o.jsx)("input",{className:"cus-inpt",onChange:e=>H({...O,Topic:e.target.value}),value:O.Topic,maxLength:100,placeholder:"ex: Morning Activiey",autoFocus:!0})})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"border-0",children:"Describtion"}),(0,o.jsx)("td",{className:"border-0",children:(0,o.jsx)("textarea",{className:"cus-inpt",value:O.Description,rows:5,maxLength:300,placeholder:"maximum 300 character",onChange:e=>H({...O,Description:e.target.value})})})]})]})})}),(0,o.jsxs)(N.c,{children:[(0,o.jsx)(y.c,{onClick:X,children:"Close"}),(0,o.jsx)(y.c,{onClick:L?async()=>{null!==O&&void 0!==O&&O.Id&&1===Number(null===$||void 0===$?void 0:$.Edit_Rights)&&1===Number(null===$||void 0===$?void 0:$.Add_Rights)&&(0,R.q)({address:"discussionForum/discussionTopic",method:"PUT",bodyData:O}).then((e=>{e.success?(T.m4.success(e.message),B(!J),X()):T.m4.error(e.message)})).catch((e=>console.log(e)))}:async()=>{1===Number(null===$||void 0===$?void 0:$.Add_Rights)&&(0,R.q)({address:"discussionForum/discussionTopic",method:"POST",bodyData:O}).then((e=>{e.success?(T.m4.success(e.message),B(!J),X()):T.m4.error(e.message)})).catch((e=>console.log(e)))},children:L?"Update":"Create"})]})]}),(0,o.jsxs)(p.c,{open:D,onClose:Z,children:[(0,o.jsx)(g.c,{children:"Confirmation"}),(0,o.jsxs)(b.c,{children:["Do you want to delete the ",(0,o.jsx)("span",{className:"text-primary fw-bold",children:null===O||void 0===O?void 0:O.Topic})," Topic?"]}),(0,o.jsxs)(N.c,{children:[(0,o.jsx)(y.c,{onClick:Z,children:"Close"}),(0,o.jsx)(y.c,{onClick:async()=>{null!==O&&void 0!==O&&O.Id&&1===Number(null===$||void 0===$?void 0:$.Delete_Rights)&&(0,R.q)({address:"discussionForum/discussionTopic",method:"DELETE",bodyData:O}).then((e=>{e.success?(T.m4.success(e.message),Z(),B(!J)):T.m4.error(e.message)})).catch((e=>console.log(e)))},color:"error",children:"Delete"})]})]}),(0,o.jsxs)(p.c,{open:V,onClose:ee,maxWidth:"sm",fullWidth:!0,children:[(0,o.jsx)(g.c,{children:"Manage Team"}),(0,o.jsx)(b.c,{children:(0,o.jsx)(_.c,{multiple:!0,id:"checkboxes-tags-demo",options:G,disableCloseOnSelect:!0,getOptionLabel:e=>null===e||void 0===e?void 0:e.Name,value:(null===P||void 0===P?void 0:P.InvolvedUsers)||[],onChange:(e,s)=>q({...P,InvolvedUsers:s}),renderOption:(e,s,c)=>{let{selected:d}=c;return(0,o.jsxs)("li",{...e,children:[(0,o.jsx)(S.c,{icon:w,checkedIcon:F,style:{marginRight:8},checked:d}),null===s||void 0===s?void 0:s.Name]})},className:"pt-2",isOptionEqualToValue:(e,s)=>(null===e||void 0===e?void 0:e.UserId)===(null===s||void 0===s?void 0:s.UserId),renderInput:e=>(0,o.jsx)(U.c,{...e,label:"Users",placeholder:"Select Team Members"})})}),(0,o.jsxs)(N.c,{children:[(0,o.jsx)(y.c,{onClick:ee,children:"Close"}),(0,o.jsx)(y.c,{color:"success",onClick:async()=>{1===Number(null===$||void 0===$?void 0:$.Add_Rights)&&(0,R.q)({address:"discussionForum/modifyTeam",method:"POST",bodyData:{Teams:null===P||void 0===P?void 0:P.InvolvedUsers,Topic_Id:null===P||void 0===P?void 0:P.Id}}).then((e=>{e.success?(T.m4.success(e.message),B(!J),ee()):T.m4.error(e.message)})).catch((e=>console.log(e)))},children:"Save"})]})]})]}):(0,o.jsx)(f.c,{})}},14168:(e,s,c)=>{c.d(s,{c:()=>i});var d=c(27664),l=c(82496);const i=(0,d.c)((0,l.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"People")}}]);
//# sourceMappingURL=3520.265b0dab.chunk.js.map