"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[5640],{75640:(e,a,l)=>{l.r(a),l.d(a,{default:()=>P});var t=l(30800),n=l(18256),o=l(29720),r=l(61584),i=l(5548),m=l(12572),d=l(15786),s=l(69060),u=l(39308),_=l(57704),c=l(1908),p=l(13724),v=l(71448),N=l(52924),y=l(44380),C=l(3358),b=l(82656),x=l(4488),g=l(90048),h=l(89e3),T=l(26773),D=l(43692),j=l(85624),f=l(78092),F=l(68424),S=l(39504),w=l(12120),O=l(74912),B=l(61988),Q=l(82496);const k=(0,Q.jsx)(F.c,{fontSize:"small"}),E=(0,Q.jsx)(S.c,{fontSize:"small"}),A=e=>{let{loadingOn:a,loadingOff:l,Fromdate:n,Todate:o,api:r="itemWise",defaultGrouping:m="",storageStockColumns:d=[],groupingOption:_=!0}=e;const[F,S]=(0,s.useState)([]),[A,G]=(0,s.useState)({}),[P,L]=(0,s.useState)(m),[I,R]=(0,s.useState)([]),[V,z]=(0,s.useState)(!1),[M,W]=(0,s.useState)(!1),[q,H]=(0,s.useState)([]),$=d.map(((e,a)=>({isVisible:a<11?1:0,Field_Name:null===e||void 0===e?void 0:e.Column_Name,Fied_Data:null===e||void 0===e?void 0:e.Data_Type,OrderBy:a+1,isEnabled:!0}))),[J,U]=(0,s.useState)($),K=JSON.parse(localStorage.getItem("user")),X=null===K||void 0===K?void 0:K.Company_id;(0,s.useEffect)((()=>{a();const e=(0,c.q)({address:"reports/storageStock/".concat(r,"?Fromdate=").concat(n,"&Todate=").concat(o)}).then((e=>{e.success&&S((0,u.dq)(e.data))})),i=(0,c.q)({address:"masters/displayLosColumn?company_id=".concat(X)}).then((e=>{if(e.success){const a=(0,u.dq)(e.data);H(a),U((e=>e.map(((e,l)=>{const n=a.find((a=>{var l,t,n,o;return(null===(l=a.Column_Name)||void 0===l?void 0:l.toLowerCase())===(null===(t=e.Field_Name)||void 0===t?void 0:t.toLowerCase())||(null===(n=a.ColumnName)||void 0===n?void 0:n.toLowerCase())===(null===(o=e.Field_Name)||void 0===o?void 0:o.toLowerCase())})),o=Number(null===n||void 0===n?void 0:n.status),r=l<5;return(0,t.c)((0,t.c)({},e),{},{isEnabled:!!r||(!n||1===o),isVisible:r||n&&1===o?1:0})}))))}}));Promise.all([e,i]).catch((e=>console.error("Fetch error:",e))).finally((()=>l()))}),[n,o,X,r,a,l]);const Y=(0,s.useMemo)((()=>[...J].sort(((e,a)=>null!==e&&void 0!==e&&e.OrderBy&&null!==a&&void 0!==a&&a.OrderBy?(null===e||void 0===e?void 0:e.OrderBy)-(null===a||void 0===a?void 0:a.OrderBy):(null===a||void 0===a?void 0:a.OrderBy)-(null===e||void 0===e?void 0:e.OrderBy)))),[J]),Z=(0,s.useMemo)((()=>Y.filter((e=>((0,u.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,u.Qr)(null===e||void 0===e?void 0:e.isVisible,1))&&!0===e.isEnabled))),[Y]),ee=(0,s.useMemo)((()=>{const e=Object.keys(A).length>0,a=!!P,l=e?I:F,n=a?(0,u.ui)(l,P):[],o=Z.filter((e=>"number"===(0,u.MP)(e.Fied_Data))).map((e=>e.Field_Name)),r=n.map((e=>(0,t.c)((0,t.c)({},e),Object.fromEntries(o.map((a=>{var l;return[a,null===e||void 0===e||null===(l=e.groupedData)||void 0===l?void 0:l.reduce(((e,l)=>(0,u.Q5)(e,(0,u.gH)(l[a])||0)),0)]}))))));return a?r:l}),[A,F,I,P,Z]),ae=e=>{if(!e)return"";const a=q.find((a=>{var l,t;return(null===(l=a.Column_Name)||void 0===l?void 0:l.toLowerCase())===(null===e||void 0===e?void 0:e.toLowerCase())||(null===(t=a.ColumnName)||void 0===t?void 0:t.toLowerCase())===(null===e||void 0===e?void 0:e.toLowerCase())}));if(null!==a&&void 0!==a&&a.Alias_Name)return a.Alias_Name;const l=d.find((a=>{var l;return(null===(l=a.Column_Name)||void 0===l?void 0:l.toLowerCase())===(null===e||void 0===e?void 0:e.toLowerCase())}));return null!==l&&void 0!==l&&l.Alias_Name?l.Alias_Name:null===e||void 0===e?void 0:e.replace(/_/g," ")};(0,s.useEffect)((()=>{te()}),[A]);const le=(e,a)=>{G((l=>(0,t.c)((0,t.c)({},l),{},{[e]:a})))},te=()=>{let e=[...F];for(const l of Y)if(A[l.Field_Name])if("range"===A[l.Field_Name].type){const{min:a,max:t}=A[l.Field_Name];e=e.filter((e=>{const n=e[l.Field_Name];return(void 0===a||n>=a)&&(void 0===t||n<=t)}))}else if("date"===A[l.Field_Name].type){const{start:a,end:t}=A[l.Field_Name].value;e=e.filter((e=>{const n=new Date(e[l.Field_Name]);return(void 0===a||n>=new Date(a))&&(void 0===t||n<=new Date(t))}))}else if(Array.isArray(A[l.Field_Name])){var a;e=(null===(a=A[l.Field_Name])||void 0===a?void 0:a.length)>0?e.filter((e=>{var a;return A[l.Field_Name].includes(null===(a=e[l.Field_Name])||void 0===a?void 0:a.toLowerCase().trim())})):e}R(e)},ne=e=>{const{Field_Name:a,Fied_Data:l}=e;var n,o,r,i,m,d,s,u,_,c;if("number"===l)return(0,Q.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,Q.jsx)("input",{placeholder:"Min",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(n=null===(o=A[a])||void 0===o?void 0:o.min)&&void 0!==n?n:"",onChange:e=>le(a,(0,t.c)((0,t.c)({type:"range"},A[a]),{},{min:e.target.value?parseFloat(e.target.value):void 0}))}),(0,Q.jsx)("input",{placeholder:"Max",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(r=null===(i=A[a])||void 0===i?void 0:i.max)&&void 0!==r?r:"",onChange:e=>le(a,(0,t.c)((0,t.c)({type:"range"},A[a]),{},{max:e.target.value?parseFloat(e.target.value):void 0}))})]});if("date"===l)return(0,Q.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,Q.jsx)("input",{placeholder:"Start Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(m=null===(d=A[a])||void 0===d||null===(s=d.value)||void 0===s?void 0:s.start)&&void 0!==m?m:"",onChange:e=>{var l;return le(a,{type:"date",value:(0,t.c)((0,t.c)({},null===(l=A[a])||void 0===l?void 0:l.value),{},{start:e.target.value||void 0})})}}),(0,Q.jsx)("input",{placeholder:"End Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(u=null===(_=A[a])||void 0===_||null===(c=_.value)||void 0===c?void 0:c.end)&&void 0!==u?u:"",onChange:e=>{var l;return le(a,{type:"date",value:(0,t.c)((0,t.c)({},null===(l=A[a])||void 0===l?void 0:l.value),{},{end:e.target.value||void 0})})}})]});if("string"===l){const e=[...new Set(F.map((e=>{var l,t;return null===(l=e[a])||void 0===l||null===(t=l.toLowerCase())||void 0===t?void 0:t.trim()})))];return(0,Q.jsx)(v.c,{multiple:!0,id:"".concat(a,"-filter"),options:e,disableCloseOnSelect:!0,getOptionLabel:e=>e,value:A[a]||[],onChange:(e,l)=>le(a,l),renderOption:(e,a,l)=>{let{selected:n}=l;return(0,Q.jsxs)("li",(0,t.c)((0,t.c)({},e),{},{children:[(0,Q.jsx)(N.c,{icon:k,checkedIcon:E,style:{marginRight:8},checked:n}),a]}))},isOptionEqualToValue:(e,a)=>e===a,renderInput:e=>(0,Q.jsx)(y.c,(0,t.c)((0,t.c)({},e),{},{label:ae(a),placeholder:"Select ".concat(ae(a))}))})}},oe=()=>{z(!1),W(!1)};return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(p.cp,{title:"Item Wise",EnableSerialNumber:!0,headerFontSizePx:12,bodyFontSizePx:12,maxHeightOption:!0,ButtonArea:(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(C.c,{title:"Column Visibility",children:(0,Q.jsx)(i.c,{size:"small",onClick:()=>z(!0),children:(0,Q.jsx)(w.c,{})})}),(0,Q.jsx)(C.c,{title:"Clear Filters",children:(0,Q.jsx)(i.c,{size:"small",onClick:()=>G({}),children:(0,Q.jsx)(O.c,{})})}),(0,Q.jsx)(C.c,{title:"Filters",children:(0,Q.jsx)(i.c,{onClick:()=>W(!0),size:"small",children:(0,Q.jsx)(B.c,{})})}),_&&(0,Q.jsxs)("div",{className:"d-flex align-items-center flex-wrap",children:[(0,Q.jsx)("span",{children:"Group-By: "}),(0,Q.jsxs)("select",{className:"cus-inpt p-2 w-auto m-1",value:P,onChange:e=>L(e.target.value),children:[(0,Q.jsx)("option",{value:"",children:"select group"}),Z.filter((e=>"string"===(0,u.MP)(e.Fied_Data)&&"Ledger_Name"!==(null===e||void 0===e?void 0:e.Field_Name)&&e.isEnabled)).map(((e,a)=>(0,Q.jsx)("option",{value:null===e||void 0===e?void 0:e.Field_Name,children:ae(null===e||void 0===e?void 0:e.Field_Name)},a)))]})]})]}),ExcelPrintOption:!0,dataArray:ee,columns:P?Z.filter((e=>ee.length>0&&Object.keys(ee[0]).includes(e.Field_Name)&&e.isEnabled)).map((e=>(0,t.c)((0,t.c)({},e),{},{ColumnHeader:ae(e.Field_Name)}))):Z.filter((e=>e.isEnabled)).map((e=>(0,t.c)((0,t.c)({},e),{},{ColumnHeader:ae(e.Field_Name)}))),isExpendable:!!P,expandableComp:e=>{let{row:a}=e;return(0,Q.jsx)(p.cp,{EnableSerialNumber:!0,headerFontSizePx:12,bodyFontSizePx:12,dataArray:(0,u.dq)(null===a||void 0===a?void 0:a.groupedData),columns:Z.filter((e=>!(0,u.m2)(e.Field_Name,P)&&e.isEnabled)).map((e=>(0,t.c)((0,t.c)({},e),{},{ColumnHeader:ae(e.Field_Name)})))})}}),(0,Q.jsxs)(b.c,{open:M,onClose:oe,maxWidth:"sm",fullWidth:!0,children:[(0,Q.jsxs)(x.c,{children:[(0,Q.jsxs)("h5",{className:"d-flex justify-content-between px-2",children:[(0,Q.jsx)("span",{children:"Filters"}),(0,Q.jsxs)("span",{children:[(0,Q.jsx)(C.c,{title:"Column Visibility",children:(0,Q.jsx)(i.c,{size:"small",onClick:()=>z(!0),children:(0,Q.jsx)(w.c,{})})}),(0,Q.jsx)(C.c,{title:"Clear Filters",children:(0,Q.jsx)(i.c,{size:"small",onClick:()=>G({}),children:(0,Q.jsx)(O.c,{})})})]})]}),(0,Q.jsxs)("div",{className:"border rounded-3",children:[Z.filter((e=>e.isEnabled)).map(((e,a)=>(0,Q.jsxs)("div",{className:"py-3 px-3 hov-bg border-bottom",children:[(0,Q.jsx)("label",{className:"mt-2 mb-1",children:ae(null===e||void 0===e?void 0:e.Field_Name)}),ne(e)]},a))),(0,Q.jsx)("br",{})]})]}),(0,Q.jsx)(g.c,{children:(0,Q.jsx)(h.c,{onClick:oe,color:"error",children:"Close"})})]}),(0,Q.jsxs)(b.c,{open:V,onClose:()=>z(!1),maxWidth:"lg",fullWidth:!0,children:[(0,Q.jsx)(T.c,{children:"Column Settings"}),(0,Q.jsx)(x.c,{children:(0,Q.jsx)("div",{className:"row",children:J.map(((e,a)=>(0,Q.jsx)("div",{className:"col-lg-4 col-md-6 p-2",children:(0,Q.jsxs)(D.c,{component:j.c,className:"p-2 d-flex justify-content-between align-items-center flex-wrap ".concat(a%2!==0?"bg-light":""," ").concat(e.isEnabled?"":"opacity-50"),children:[(0,Q.jsxs)("div",{className:"d-flex justify-content-between align-items-center flex-wrap",children:[(0,Q.jsx)(f.c,{checked:Boolean(null===e||void 0===e?void 0:e.isVisible)&&e.isEnabled,onChange:a=>e.isEnabled&&U((l=>l.map((l=>l.Field_Name===(null===e||void 0===e?void 0:e.Field_Name)?(0,t.c)((0,t.c)({},l),{},{isVisible:a.target.checked?1:0}):l))))}),(0,Q.jsxs)("h6",{className:"fa-13 mb-0 fw-bold",children:[ae(e.Field_Name),!e.isEnabled&&(0,Q.jsx)("span",{className:"text-muted small"})]})]}),(0,Q.jsx)("input",{type:"number",value:(0,u.Q$)(null===e||void 0===e?void 0:e.OrderBy)?null===e||void 0===e?void 0:e.OrderBy:"",onChange:a=>e.isEnabled&&U((l=>l.map((l=>l.Field_Name===(null===e||void 0===e?void 0:e.Field_Name)?(0,t.c)((0,t.c)({},l),{},{OrderBy:a.target.value}):l)))),disabled:!e.isEnabled,className:"mt-2 p-1 border-0 cus-inpt",style:{width:"80px"},placeholder:"Order"})]})},a)))})}),(0,Q.jsxs)(g.c,{children:[(0,Q.jsx)(h.c,{onClick:()=>{U($)},variant:"outlined",children:"Reset"}),(0,Q.jsx)(h.c,{onClick:()=>z(!1),color:"error",children:"Close"})]})]})]})};var G=l(59952);const P=e=>{let{loadingOn:a,loadingOff:l}=e;const[c,p]=(0,s.useState)(1),[v,N]=(0,s.useState)({Fromdate:(0,u.Q7)(),Todate:(0,u.Q7)(),FilterFromDate:(0,u.Q7)(),FilterTodate:(0,u.Q7)()}),y=[{name:"Item Wise",component:(0,Q.jsx)(A,{loadingOn:a,loadingOff:l,Fromdate:v.Fromdate,Todate:v.Todate,api:"itemWise",defaultGrouping:"",storageStockColumns:G.us})},{name:"Godown Wise",component:(0,Q.jsx)(A,{loadingOn:a,loadingOff:l,Fromdate:v.Fromdate,Todate:v.Todate,api:"godownWise",defaultGrouping:"Godown_Name",storageStockColumns:G.__,groupingOption:!1})}];return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsxs)("div",{className:"d-flex align-items-center flex-wrap mb-3",children:[(0,Q.jsx)("label",{htmlFor:"from",className:"me-1 fw-bold ",children:"Fromdate: "}),(0,Q.jsx)("input",{type:"date",id:"from",className:"cus-inpt p-2 w-auto me-2",value:v.FilterFromDate,onChange:e=>N((a=>(0,t.c)((0,t.c)({},a),{},{FilterFromDate:e.target.value})))}),(0,Q.jsx)("label",{htmlFor:"to",className:"me-1 fw-bold ",children:"Todate: "}),(0,Q.jsx)("input",{type:"date",id:"to",className:"cus-inpt p-2 w-auto",value:v.FilterTodate,onChange:e=>N((a=>(0,t.c)((0,t.c)({},a),{},{FilterTodate:e.target.value})))}),(0,Q.jsx)(i.c,{size:"small",onClick:()=>N((e=>(0,t.c)((0,t.c)({},e),{},{Fromdate:e.FilterFromDate?e.FilterFromDate:e.Fromdate,Todate:e.FilterTodate?e.FilterTodate:e.Todate}))),children:(0,Q.jsx)(_.c,{})})]}),(0,Q.jsxs)(n.cp,{value:c,children:[(0,Q.jsx)(m.c,{sx:{borderBottom:1,borderColor:"divider"},children:(0,Q.jsx)(o.c,{indicatorColor:"transparant",onChange:(e,a)=>p(a),variant:"scrollable",scrollButtons:"auto",children:y.map(((e,a)=>(0,Q.jsx)(d.c,{sx:c===a+1?{backgroundColor:"#c6d7eb"}:{},label:e.name,value:a+1},a)))})}),y.map(((e,a)=>(0,Q.jsx)(r.c,{value:a+1,sx:{p:0,pt:2},children:e.component},a)))]})]})}},59952:(e,a,l)=>{l.d(a,{M$:()=>o,__:()=>n,us:()=>t});const t=[{Column_Name:"Trans_Date",Data_Type:"date"},{Column_Name:"Group_Name",Data_Type:"string"},{Column_Name:"stock_item_name",Data_Type:"string"},{Column_Name:"OB_Bal_Qty",Data_Type:"number"},{Column_Name:"OB_Act_Qty",Data_Type:"number"},{Column_Name:"Pur_Qty",Data_Type:"number"},{Column_Name:"Sal_Qty",Data_Type:"number"},{Column_Name:"Bal_Qty",Data_Type:"number"},{Column_Name:"Bal_Act_Qty",Data_Type:"number"},{Column_Name:"Pur_Act_Qty",Data_Type:"number"},{Column_Name:"Sal_Act_Qty",Data_Type:"number"},{Column_Name:"Stock_Item",Data_Type:"string"},{Column_Name:"Group_ST",Data_Type:"string"},{Column_Name:"Bag",Data_Type:"string"},{Column_Name:"Stock_Group",Data_Type:"string"},{Column_Name:"Product_Rate",Data_Type:"number"},{Column_Name:"S_Sub_Group_1",Data_Type:"string"},{Column_Name:"Grade_Item_Group",Data_Type:"string"},{Column_Name:"Item_Name_Modified",Data_Type:"string"}],n=[{Column_Name:"Godown_Name",Data_Type:"string"},{Column_Name:"stock_item_name",Data_Type:"string"},{Column_Name:"OB_Bal_Qty",Data_Type:"number"},{Column_Name:"OB_Act_Qty",Data_Type:"number"},{Column_Name:"Pur_Qty",Data_Type:"number"},{Column_Name:"Sal_Qty",Data_Type:"number"},{Column_Name:"Bal_Qty",Data_Type:"number"},{Column_Name:"Act_Bal_Qty",Data_Type:"number"},{Column_Name:"Pur_Act_Qty",Data_Type:"number"},{Column_Name:"Sal_Act_Qty",Data_Type:"number"},{Column_Name:"Stock_Item",Data_Type:"string"},{Column_Name:"Group_ST",Data_Type:"string"},{Column_Name:"Bag",Data_Type:"string"},{Column_Name:"Stock_Group",Data_Type:"string"},{Column_Name:"Product_Rate",Data_Type:"number"},{Column_Name:"S_Sub_Group_1",Data_Type:"string"},{Column_Name:"Grade_Item_Group",Data_Type:"string"},{Column_Name:"Item_Name_Modified",Data_Type:"string"}],o=[{Column_Name:"Group_Name",Data_Type:"string"},{Column_Name:"Brand",Data_Type:"string"},{Column_Name:"Group_ST",Data_Type:"string"},{Column_Name:"Stock_Group",Data_Type:"string"},{Column_Name:"S_Sub_Group_1",Data_Type:"string"},{Column_Name:"Grade_Item_Group",Data_Type:"string"},{Column_Name:"Trans_Date",Data_Type:"date"},{Column_Name:"OB_Bal_Qty",Data_Type:"number"},{Column_Name:"OB_Rate",Data_Type:"number"},{Column_Name:"OB_Value",Data_Type:"number"},{Column_Name:"Pur_Qty",Data_Type:"number"},{Column_Name:"Pur_Rate",Data_Type:"number"},{Column_Name:"Pur_value",Data_Type:"number"},{Column_Name:"Adj_Pur_Qty",Data_Type:"number"},{Column_Name:"Adj_Pur_Rate",Data_Type:"number"},{Column_Name:"Adj_Pur_value",Data_Type:"number"},{Column_Name:"IN_Qty",Data_Type:"number"},{Column_Name:"IN_Rate",Data_Type:"number"},{Column_Name:"IN_Value",Data_Type:"number"},{Column_Name:"Sal_Qty",Data_Type:"number"},{Column_Name:"Sal_Rate",Data_Type:"number"},{Column_Name:"Sal_value",Data_Type:"number"},{Column_Name:"Adj_Sal_Qty",Data_Type:"number"},{Column_Name:"Adj_Sal_Rate",Data_Type:"number"},{Column_Name:"Adj_Sal_value",Data_Type:"number"},{Column_Name:"OUT_Qty",Data_Type:"number"},{Column_Name:"Out_Rate",Data_Type:"number"},{Column_Name:"Out_Value",Data_Type:"number"},{Column_Name:"Expense_value",Data_Type:"number"},{Column_Name:"Act_Expense",Data_Type:"number"},{Column_Name:"Bal_Qty",Data_Type:"number"},{Column_Name:"CL_Rate",Data_Type:"number"},{Column_Name:"CL_Value",Data_Type:"number"},{Column_Name:"CR_CL_Rate",Data_Type:"number"},{Column_Name:"Pre_Qty",Data_Type:"number"},{Column_Name:"Pre_Rate",Data_Type:"number"},{Column_Name:"Pre_CL_Value",Data_Type:"number"}]}}]);
//# sourceMappingURL=5640.499e771d.chunk.js.map