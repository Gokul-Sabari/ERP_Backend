"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[4632,3692,1312],{34632:(e,t,o)=>{o.r(t),o.d(t,{default:()=>p});var l=o(30800),n=o(69060),r=o(27664),i=o(82496);const s=(0,r.c)((0,i.jsx)("path",{d:"M19 13H5v-2h14z"}),"Remove");var a=o(96064),d=o(43692),c=o(84436),u=o(39308),x=o(1908);const v=(e,t)=>{let o=0;return Array.isArray(e)&&e.forEach((e=>{o+=Number(e[t])})),o},p=()=>{const e=JSON.parse(localStorage.getItem("user")),[t,o]=(0,n.useState)([]),[r,p]=(0,n.useState)({Report_Type:2,Fromdate:(0,u.Ir)(),Todate:(0,u.Q7)(),Report:"PENDING PURCHASE ORDER"});(0,n.useEffect)((()=>{o([]),null!==e&&void 0!==e&&e.Company_id&&(0,x.q)({address:"reports/PurchaseOrderReportCard?Report_Type=".concat(r.Report_Type,"&Fromdate=").concat(r.Fromdate,"&Todate=").concat(r.Todate),headers:{Db:null===e||void 0===e?void 0:e.Company_id}}).then((e=>{e.success&&(e.data.sort(((e,t)=>new Date(t.po_date)-new Date(e.po_date))),o(e.data))})).catch((e=>console.error(e)))}),[r.Report_Type,r.Fromdate,r.Todate]);const h=e=>{var t,o,l,r;let{rowData:d}=e;const[c,u]=(0,n.useState)(!1),x=null===d||void 0===d||null===(t=d.product_details)||void 0===t?void 0:t.reduce(((e,t)=>{var o;return e+(null===t||void 0===t||null===(o=t.product_details_1)||void 0===o?void 0:o.reduce(((e,t)=>e+(null===t||void 0===t?void 0:t.bill_qty)),0))}),0),v=null===d||void 0===d||null===(o=d.product_details)||void 0===o?void 0:o.reduce(((e,t)=>{var o;return e+(null===t||void 0===t||null===(o=t.product_details_1)||void 0===o?void 0:o.reduce(((e,t)=>e+(null===t||void 0===t?void 0:t.amount)),0))}),0);return(null===d||void 0===d||null===(l=d.product_details)||void 0===l?void 0:l.length)>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"fa-12",children:(0,i.jsx)("button",{onClick:()=>u(!c),className:"icon-btn",children:c?(0,i.jsx)(s,{sx:{fontSize:"inherit"}}):(0,i.jsx)(a.c,{sx:{fontSize:"inherit"}})})}),(0,i.jsx)("td",{className:"text-success fa-12 fw-bold bg-light",children:null===d||void 0===d?void 0:d.Stock_Group}),(0,i.jsx)("td",{className:"text-success fa-12",children:"-"}),(0,i.jsx)("td",{className:"text-success fa-12 bg-light fw-bold",children:null===(r=x/1e3)||void 0===r?void 0:r.toLocaleString("en-IN",{maximumFractionDigits:2})}),(0,i.jsx)("td",{className:"text-success fa-12 fw-bold",children:(v/x).toLocaleString("en-IN",{maximumFractionDigits:2})}),(0,i.jsx)("td",{className:"text-success fa-12 bg-light fw-bold",children:null===v||void 0===v?void 0:v.toLocaleString("en-IN")})]}),c&&d.product_details.map(((e,t)=>(0,i.jsx)(m,{subRowData:e},t)))]})},m=e=>{var t,o;let{subRowData:l}=e;const[r,d]=(0,n.useState)(!1),c=v(null===l||void 0===l?void 0:l.product_details_1,"bill_qty"),u=v(null===l||void 0===l?void 0:l.product_details_1,"amount");return(null===l||void 0===l||null===(t=l.product_details_1)||void 0===t?void 0:t.length)>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{style:{fontSize:"12px"},className:"text-primary"}),(0,i.jsx)("td",{style:{fontSize:"12px"},className:"text-primary bg-light",children:(0,i.jsx)("button",{onClick:()=>d(!r),className:"icon-btn",children:r?(0,i.jsx)(s,{sx:{fontSize:"inherit"}}):(0,i.jsx)(a.c,{sx:{fontSize:"inherit"}})})}),(0,i.jsxs)("td",{style:{fontSize:"12px"},className:"text-primary",children:[null===l||void 0===l?void 0:l.Item_Name_Modified," (Sum)"]}),(0,i.jsx)("td",{style:{fontSize:"12px"},className:"text-primary bg-light fw-bold",children:(c/1e3).toLocaleString("en-IN",{maximumFractionDigits:2})}),(0,i.jsx)("td",{style:{fontSize:"12px"},className:"text-primary fw-bold",children:(Number(u)/Number(c)).toLocaleString("en-IN",{maximumFractionDigits:2})}),(0,i.jsx)("td",{style:{fontSize:"12px"},className:"text-primary bg-light fw-bold",children:u.toLocaleString("en-IN",{maximumFractionDigits:2})})]}),r&&(null===l||void 0===l||null===(o=l.product_details_1)||void 0===o?void 0:o.map(((e,t)=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{style:{fontSize:"12px"},children:null===e||void 0===e?void 0:e.po_no}),(0,i.jsx)("td",{style:{fontSize:"12px"},className:"bg-light",children:new Date(null===e||void 0===e?void 0:e.po_date).toLocaleDateString("en-IN")}),(0,i.jsx)("td",{style:{fontSize:"12px"},children:null===e||void 0===e?void 0:e.ledger_name}),(0,i.jsx)("td",{style:{fontSize:"12px"},className:"bg-light fw-bold",children:(null===e||void 0===e?void 0:e.bill_qty.toLocaleString("en-IN"))+" "+(null===e||void 0===e?void 0:e.bill_unit)}),(0,i.jsx)("td",{style:{fontSize:"12px"},className:" fw-bold",children:null===e||void 0===e?void 0:e.item_rate.toLocaleString("en-IN")}),(0,i.jsx)("td",{style:{fontSize:"12px"},className:"bg-light fw-bold",children:null===e||void 0===e?void 0:e.amount.toLocaleString("en-IN")})]},t))))]})},j=e=>{var t,o;let{row:l}=e;const[r,d]=(0,n.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("button",{onClick:()=>d(!r),className:"icon-btn",children:r?(0,i.jsx)(s,{sx:{fontSize:"inherit"}}):(0,i.jsx)(a.c,{sx:{fontSize:"inherit"}})})}),(0,i.jsx)("td",{style:{fontSize:"12px"},children:null===l||void 0===l?void 0:l.ledger_name}),(0,i.jsx)("td",{style:{fontSize:"12px"},children:null===l||void 0===l||null===(t=l.Order_details)||void 0===t?void 0:t.length}),(0,i.jsx)("td",{style:{fontSize:"12px"},className:"text-primary fw-bold",children:v(null===l||void 0===l?void 0:l.Order_details,"total_invoice_value").toLocaleString("en-IN")})]}),r&&(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:4,className:"overflow-scroll",children:(0,i.jsxs)("table",{className:"table",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{fontSize:"14px"},children:"PO No"}),(0,i.jsx)("th",{style:{fontSize:"14px"},children:"Date"}),(0,i.jsx)("th",{style:{fontSize:"14px"},children:"Order Value"})]})}),(0,i.jsx)("tbody",{children:null===l||void 0===l||null===(o=l.Order_details)||void 0===o?void 0:o.map(((e,t)=>{var o;return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{style:{fontSize:"12px"},children:null===e||void 0===e?void 0:e.po_no}),(0,i.jsx)("td",{style:{fontSize:"12px"},children:(null===e||void 0===e?void 0:e.po_date)&&new Date(e.po_date).toLocaleDateString("en-IN")}),(0,i.jsx)("td",{style:{fontSize:"12px"},children:null===e||void 0===e||null===(o=e.total_invoice_value)||void 0===o?void 0:o.toLocaleString("en-IN")})]},t)}))})]})})})]})},f=()=>{let e=0,o=0;return t.forEach((t=>{var l;null===t||void 0===t||null===(l=t.product_details)||void 0===l||l.forEach((t=>{null===t||void 0===t||t.product_details_1.forEach((t=>{e+=Number(t.bill_qty),o+=Number(t.amount)}))}))})),{amount:parseInt(o).toLocaleString("en-IN"),tonage:parseInt(e).toLocaleString("en-IN")}};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(d.c,{children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center px-3 py-2",style:{backgroundColor:"#eae0cc"},children:[(0,i.jsxs)("div",{className:"d-flex flex-column justify-content-center fw-bold text-dark",children:[e.Company_Name,(0,i.jsxs)("span",{style:{fontSize:"11px"},children:["( ",r.Report," )"]})]}),(0,i.jsxs)("select",{className:"cus-inpt w-auto rounded-5 border-0",onChange:e=>{const t=e.target.selectedIndex,o=e.target.options[t].text;p((0,l.c)((0,l.c)({},r),{},{Report_Type:Number(e.target.value),Report:o}))},value:r.Report_Type,children:[(0,i.jsx)("option",{value:2,children:"PENDING PURCHASE ORDER"}),(0,i.jsx)("option",{value:0,children:"PURCHASE ORDER"}),(0,i.jsx)("option",{value:1,children:"PURCHASE"}),(0,i.jsx)("option",{value:3,children:"ORDER VALUE"})]})]}),(0,i.jsxs)("div",{className:"px-3 py-2 d-flex justify-content-between align-items-center",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{type:"date",className:"cus-inpt py-1 w-auto rounded-5",value:r.Fromdate,onChange:e=>{p((0,l.c)((0,l.c)({},r),{},{Fromdate:e.target.value}))}}),(0,i.jsx)("input",{type:"date",className:"cus-inpt py-1 w-auto rounded-5",value:r.Todate,onChange:e=>{p((0,l.c)((0,l.c)({},r),{},{Todate:e.target.value}))}})]}),(0,i.jsx)("p",{className:"text-primary fw-bold fa-14 mb-0",children:3!==Number(r.Report_Type)?" ( "+f().tonage+" ) - ( "+f().amount+" )":" "+(()=>{let e=0;return t.forEach((t=>{var o;null===t||void 0===t||null===(o=t.Order_details)||void 0===o||o.forEach((t=>{e+=Number(null===t||void 0===t?void 0:t.total_invoice_value)}))})),parseInt(e).toLocaleString("en-IN")})()})]}),(0,i.jsx)(c.c,{style:{maxHeight:"75vh"},className:"overflow-auto pt-0",children:3!==Number(r.Report_Type)?(0,i.jsxs)("table",{className:"table",children:[(0,i.jsx)("thead",{children:(0,i.jsx)("tr",{children:["-","Stock Group","Item","Tonnage","Rate","Value (\u20b9)"].map(((e,t)=>(0,i.jsx)("th",{className:"tble-hed-stick fa-13 border",children:e},t)))})}),(0,i.jsx)("tbody",{children:t.map(((e,t)=>(0,i.jsx)(h,{rowData:e},t)))})]}):(0,i.jsxs)("table",{className:"table",children:[(0,i.jsx)("thead",{children:(0,i.jsx)("tr",{children:["SNo","Ledger","Order(s)","Amount"].map(((e,t)=>(0,i.jsx)("th",{className:"tble-hed-stick fa-14 border",children:e},t)))})}),(0,i.jsx)("tbody",{children:t.map(((e,t)=>(0,i.jsx)(j,{row:e},t)))})]})})]})})}},96064:(e,t,o)=>{o.d(t,{c:()=>r});var l=o(27664),n=o(82496);const r=(0,l.c)((0,n.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},84436:(e,t,o)=>{o.d(t,{c:()=>m});var l=o(45072),n=o(95656),r=o(69060),i=o(79736),s=o(21412),a=o(12556),d=o(49836),c=o(10099),u=o(33448);function x(e){return(0,u.cp)("MuiCardContent",e)}(0,c.c)("MuiCardContent",["root"]);var v=o(82496);const p=["className","component"],h=(0,a.cp)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),m=r.forwardRef((function(e,t){const o=(0,d.C)({props:e,name:"MuiCardContent"}),{className:r,component:a="div"}=o,c=(0,n.c)(o,p),u=(0,l.c)({},o,{component:a}),m=(e=>{const{classes:t}=e;return(0,s.c)({root:["root"]},x,t)})(u);return(0,v.jsx)(h,(0,l.c)({as:a,className:(0,i.c)(m.root,r),ownerState:u,ref:t},c))}))},43692:(e,t,o)=>{o.d(t,{c:()=>j});var l=o(45072),n=o(95656),r=o(69060),i=o(79736),s=o(21412),a=o(12556),d=o(49836),c=o(85624),u=o(10099),x=o(33448);function v(e){return(0,x.cp)("MuiCard",e)}(0,u.c)("MuiCard",["root"]);var p=o(82496);const h=["className","raised"],m=(0,a.cp)(c.c,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),j=r.forwardRef((function(e,t){const o=(0,d.C)({props:e,name:"MuiCard"}),{className:r,raised:a=!1}=o,c=(0,n.c)(o,h),u=(0,l.c)({},o,{raised:a}),x=(e=>{const{classes:t}=e;return(0,s.c)({root:["root"]},v,t)})(u);return(0,p.jsx)(m,(0,l.c)({className:(0,i.c)(x.root,r),elevation:a?8:void 0,ref:t,ownerState:u},c))}))}}]);
//# sourceMappingURL=4632.92ddee75.chunk.js.map