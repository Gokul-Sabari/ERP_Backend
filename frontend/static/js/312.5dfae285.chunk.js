"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[312],{20312:(e,l,a)=>{a.r(l),a.d(l,{default:()=>A});var t=a(30800),i=a(18256),n=a(29720),r=a(61584),o=a(5548),d=a(12572),s=a(15786),c=a(69060),m=a(39308),u=a(57704),v=a(1908),p=a(13724),x=a(71448),_=a(52924),h=a(44380),g=a(3358),j=a(82656),b=a(4488),N=a(90048),y=a(89e3),F=a(26773),f=a(43692),C=a(85624),D=a(78092),T=a(68424),O=a(39504),w=a(12120),S=a(74912),k=a(61988);const B=[{Column_Name:"Trans_Date",Data_Type:"date"},{Column_Name:"Group_Name",Data_Type:"string"},{Column_Name:"stock_item_name",Data_Type:"string"},{Column_Name:"OB_Bal_Qty",Data_Type:"number"},{Column_Name:"OB_Act_Qty",Data_Type:"number"},{Column_Name:"Pur_Qty",Data_Type:"number"},{Column_Name:"Sal_Qty",Data_Type:"number"},{Column_Name:"Bal_Qty",Data_Type:"number"},{Column_Name:"Bal_Act_Qty",Data_Type:"number"},{Column_Name:"Pur_Act_Qty",Data_Type:"number"},{Column_Name:"Sal_Act_Qty",Data_Type:"number"},{Column_Name:"Stock_Item",Data_Type:"string"},{Column_Name:"Group_ST",Data_Type:"string"},{Column_Name:"Bag",Data_Type:"string"},{Column_Name:"Stock_Group",Data_Type:"string"},{Column_Name:"Product_Rate",Data_Type:"number"},{Column_Name:"S_Sub_Group_1",Data_Type:"string"},{Column_Name:"Grade_Item_Group",Data_Type:"string"},{Column_Name:"Item_Name_Modified",Data_Type:"string"}];var Q=a(82496);const z=(0,Q.jsx)(T.c,{fontSize:"small"}),E=(0,Q.jsx)(O.c,{fontSize:"small"}),P=e=>{let{loadingOn:l,loadingOff:a,Fromdate:i,Todate:n}=e;const[r,d]=(0,c.useState)([]),[s,u]=(0,c.useState)({}),[T,O]=(0,c.useState)(""),[P,A]=(0,c.useState)([]),[M,V]=(0,c.useState)(!1),[G,I]=(0,c.useState)(!1),W=B.map(((e,l)=>({isVisible:l<11?1:0,Field_Name:null===e||void 0===e?void 0:e.Column_Name,Fied_Data:null===e||void 0===e?void 0:e.Data_Type,OrderBy:l+1}))),[q,H]=(0,c.useState)(W);(0,c.useEffect)((()=>{(0,v.q)({address:"reports/storageStock/itemWise?Fromdate=".concat(i,"&Todate=").concat(n),loadingOn:l,loadingOff:a}).then((e=>{e.success&&d((0,m.dq)(e.data))}))}),[i,n]);const L=(0,c.useMemo)((()=>[...q].sort(((e,l)=>null!==e&&void 0!==e&&e.OrderBy&&null!==l&&void 0!==l&&l.OrderBy?(null===e||void 0===e?void 0:e.OrderBy)-(null===l||void 0===l?void 0:l.OrderBy):(null===l||void 0===l?void 0:l.OrderBy)-(null===e||void 0===e?void 0:e.OrderBy)))),[q]),R=(0,c.useMemo)((()=>L.filter((e=>(0,m.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,m.Qr)(null===e||void 0===e?void 0:e.isVisible,1)))),[L]),$=(0,c.useMemo)((()=>{const e=Object.keys(s).length>0,l=!!T,a=e?P:r,i=l?(0,m.ui)(a,T):[],n=R.filter((e=>"number"===(0,m.MP)(e.Fied_Data))).map((e=>e.Field_Name)),o=i.map((e=>(0,t.c)((0,t.c)({},e),Object.fromEntries(n.map((l=>{var a;return[l,null===e||void 0===e||null===(a=e.groupedData)||void 0===a?void 0:a.reduce(((e,a)=>(0,m.Q5)(e,(0,m.gH)(a[l])||0)),0)]}))))));return l?o:a}),[s,r,P,T,R]);(0,c.useEffect)((()=>{K()}),[s]);const J=(e,l)=>{u((a=>(0,t.c)((0,t.c)({},a),{},{[e]:l})))},K=()=>{let e=[...r];for(const a of L)if(s[a.Field_Name])if("range"===s[a.Field_Name].type){const{min:l,max:t}=s[a.Field_Name];e=e.filter((e=>{const i=e[a.Field_Name];return(void 0===l||i>=l)&&(void 0===t||i<=t)}))}else if("date"===s[a.Field_Name].type){const{start:l,end:t}=s[a.Field_Name].value;e=e.filter((e=>{const i=new Date(e[a.Field_Name]);return(void 0===l||i>=new Date(l))&&(void 0===t||i<=new Date(t))}))}else if(Array.isArray(s[a.Field_Name])){var l;e=(null===(l=s[a.Field_Name])||void 0===l?void 0:l.length)>0?e.filter((e=>{var l;return s[a.Field_Name].includes(null===(l=e[a.Field_Name])||void 0===l?void 0:l.toLowerCase().trim())})):e}A(e)},U=e=>{const{Field_Name:l,Fied_Data:a}=e;var i,n,o,d,c,m,u,v,p,g;if("number"===a)return(0,Q.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,Q.jsx)("input",{placeholder:"Min",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(i=null===(n=s[l])||void 0===n?void 0:n.min)&&void 0!==i?i:"",onChange:e=>J(l,(0,t.c)((0,t.c)({type:"range"},s[l]),{},{min:e.target.value?parseFloat(e.target.value):void 0}))}),(0,Q.jsx)("input",{placeholder:"Max",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(o=null===(d=s[l])||void 0===d?void 0:d.max)&&void 0!==o?o:"",onChange:e=>J(l,(0,t.c)((0,t.c)({type:"range"},s[l]),{},{max:e.target.value?parseFloat(e.target.value):void 0}))})]});if("date"===a)return(0,Q.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,Q.jsx)("input",{placeholder:"Start Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(c=null===(m=s[l])||void 0===m||null===(u=m.value)||void 0===u?void 0:u.start)&&void 0!==c?c:"",onChange:e=>{var a;return J(l,{type:"date",value:(0,t.c)((0,t.c)({},null===(a=s[l])||void 0===a?void 0:a.value),{},{start:e.target.value||void 0})})}}),(0,Q.jsx)("input",{placeholder:"End Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(v=null===(p=s[l])||void 0===p||null===(g=p.value)||void 0===g?void 0:g.end)&&void 0!==v?v:"",onChange:e=>{var a;return J(l,{type:"date",value:(0,t.c)((0,t.c)({},null===(a=s[l])||void 0===a?void 0:a.value),{},{end:e.target.value||void 0})})}})]});if("string"===a){const e=[...new Set(r.map((e=>{var a,t;return null===(a=e[l])||void 0===a||null===(t=a.toLowerCase())||void 0===t?void 0:t.trim()})))];return(0,Q.jsx)(x.c,{multiple:!0,id:"".concat(l,"-filter"),options:e,disableCloseOnSelect:!0,getOptionLabel:e=>e,value:s[l]||[],onChange:(e,a)=>J(l,a),renderOption:(e,l,a)=>{let{selected:i}=a;return(0,Q.jsxs)("li",(0,t.c)((0,t.c)({},e),{},{children:[(0,Q.jsx)(_.c,{icon:z,checkedIcon:E,style:{marginRight:8},checked:i}),l]}))},isOptionEqualToValue:(e,l)=>e===l,renderInput:e=>(0,Q.jsx)(h.c,(0,t.c)((0,t.c)({},e),{},{label:l,placeholder:"Select ".concat(null===l||void 0===l?void 0:l.replace(/_/g," "))}))})}},X=()=>{V(!1),I(!1)};return(0,c.useEffect)((()=>{console.log($)}),[$]),(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(p.cp,{title:"Item Wise",EnableSerialNumber:!0,headerFontSizePx:12,bodyFontSizePx:12,maxHeightOption:!0,ButtonArea:(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(g.c,{title:"Column Visiblity",children:(0,Q.jsx)(o.c,{size:"small",onClick:()=>V(!0),children:(0,Q.jsx)(w.c,{})})}),(0,Q.jsx)(g.c,{title:"Clear Filters",children:(0,Q.jsx)(o.c,{size:"small",onClick:()=>u({}),children:(0,Q.jsx)(S.c,{})})}),(0,Q.jsx)(g.c,{title:"Filters",children:(0,Q.jsx)(o.c,{onClick:()=>I(!0),size:"small",children:(0,Q.jsx)(k.c,{})})}),(0,Q.jsxs)("div",{className:"d-flex align-items-center flex-wrap",children:[(0,Q.jsx)("span",{children:"Group-By: "}),(0,Q.jsxs)("select",{className:"cus-inpt p-2 w-auto m-1",value:T,onChange:e=>O(e.target.value),children:[(0,Q.jsx)("option",{value:"",children:"select group"}),R.filter((e=>"string"===(0,m.MP)(e.Fied_Data)&&"Ledger_Name"!==(null===e||void 0===e?void 0:e.Field_Name))).map(((e,l)=>{var a;return(0,Q.jsx)("option",{value:null===e||void 0===e?void 0:e.Field_Name,children:null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.replace(/_/g," ")},l)}))]})]})]}),ExcelPrintOption:!0,dataArray:$,columns:T?R.filter((e=>$.length>0&&Object.keys($[0]).includes(e.Field_Name))).map((e=>(0,t.c)((0,t.c)({},e),{},{ColumnHeader:e.Field_Name===T?T:e.ColumnHeader}))):R,isExpendable:!!T,expandableComp:e=>{let{row:l}=e;return(0,Q.jsx)(p.cp,{EnableSerialNumber:!0,headerFontSizePx:12,bodyFontSizePx:12,dataArray:(0,m.dq)(null===l||void 0===l?void 0:l.groupedData),columns:R.filter((e=>!(0,m.m2)(e.Field_Name,T)))})}}),(0,Q.jsxs)(j.c,{open:G,onClose:X,maxWidth:"sm",fullWidth:!0,children:[(0,Q.jsxs)(b.c,{children:[(0,Q.jsxs)("h5",{className:"d-flex justify-content-between px-2",children:[(0,Q.jsx)("span",{children:"Filters"}),(0,Q.jsxs)("span",{children:[(0,Q.jsx)(g.c,{title:"Column Visiblity",children:(0,Q.jsx)(o.c,{size:"small",onClick:()=>V(!0),children:(0,Q.jsx)(w.c,{})})}),(0,Q.jsx)(g.c,{title:"Clear Filters",children:(0,Q.jsx)(o.c,{size:"small",onClick:()=>u({}),children:(0,Q.jsx)(S.c,{})})})]})]}),(0,Q.jsxs)("div",{className:"border rounded-3 ",children:[R.map(((e,l)=>{var a;return(0,Q.jsxs)("div",{className:"py-3 px-3 hov-bg border-bottom",children:[(0,Q.jsx)("label",{className:"mt-2 mb-1",children:null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.replace(/_/g," ")}),U(e)]},l)})),(0,Q.jsx)("br",{})]})]}),(0,Q.jsx)(N.c,{children:(0,Q.jsx)(y.c,{onClick:X,color:"error",children:"close"})})]}),(0,Q.jsxs)(j.c,{open:M,onClose:()=>V(!1),maxWidth:"lg",fullWidth:!0,children:[(0,Q.jsx)(F.c,{children:"Column Settings"}),(0,Q.jsx)(b.c,{children:(0,Q.jsx)("div",{className:"row",children:q.map(((e,l)=>(0,Q.jsx)("div",{className:"col-lg-4 col-md-6 p-2",children:(0,Q.jsxs)(f.c,{component:C.c,className:"p-2 d-flex justify-content-between align-items-center flex-wrap ".concat(l%2!==0?"bg-light":""),children:[(0,Q.jsxs)("div",{className:"d-flex justify-content-between align-items-center flex-wrap",children:[(0,Q.jsx)(D.c,{checked:Boolean(null===e||void 0===e?void 0:e.isDefault)||Boolean(null===e||void 0===e?void 0:e.isVisible),disabled:Boolean(null===e||void 0===e?void 0:e.isDefault),onChange:l=>H((a=>a.map((a=>a.Field_Name===(null===e||void 0===e?void 0:e.Field_Name)?(0,t.c)((0,t.c)({},a),{},{isVisible:l.target.checked?1:0}):a))))}),(0,Q.jsx)("h6",{className:"fa-13 mb-0 fw-bold ",children:null===e||void 0===e?void 0:e.Field_Name})]}),(0,Q.jsx)("input",{type:"number",value:(0,m.Q$)(null===e||void 0===e?void 0:e.OrderBy)?null===e||void 0===e?void 0:e.OrderBy:"",onChange:l=>H((a=>a.map((a=>a.Field_Name===(null===e||void 0===e?void 0:e.Field_Name)?(0,t.c)((0,t.c)({},a),{},{OrderBy:l.target.value}):a)))),label:"Order Value",className:"mt-2 p-1 border-0 cus-inpt",style:{width:"80px"},placeholder:"Order"})]})},l)))})}),(0,Q.jsxs)(N.c,{children:[(0,Q.jsx)(y.c,{onClick:()=>H(W),variant:"outlined",children:"Reset"}),(0,Q.jsx)(y.c,{onClick:()=>V(!1),color:"error",children:"close"})]})]})]})},A=e=>{let{loadingOn:l,loadingOff:a}=e;const[v,p]=(0,c.useState)(1),[x,_]=(0,c.useState)({Fromdate:(0,m.Q7)(),Todate:(0,m.Q7)(),FilterFromDate:(0,m.Q7)(),FilterTodate:(0,m.Q7)()}),h=[{name:"Item Wise",component:(0,Q.jsx)(P,{loadingOn:l,loadingOff:a,Fromdate:x.Fromdate,Todate:x.Todate})}];return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsxs)("div",{className:"d-flex align-items-center flex-wrap mb-3",children:[(0,Q.jsx)("label",{htmlFor:"from",className:"me-1 fw-bold ",children:"Fromdate: "}),(0,Q.jsx)("input",{type:"date",id:"from",className:"cus-inpt p-2 w-auto me-2",value:x.FilterFromDate,onChange:e=>_((l=>(0,t.c)((0,t.c)({},l),{},{FilterFromDate:e.target.value})))}),(0,Q.jsx)("label",{htmlFor:"to",className:"me-1 fw-bold ",children:"Todate: "}),(0,Q.jsx)("input",{type:"date",id:"to",className:"cus-inpt p-2 w-auto",value:x.FilterTodate,onChange:e=>_((l=>(0,t.c)((0,t.c)({},l),{},{FilterTodate:e.target.value})))}),(0,Q.jsx)(o.c,{size:"small",onClick:()=>_((e=>(0,t.c)((0,t.c)({},e),{},{Fromdate:e.FilterFromDate?e.FilterFromDate:e.Fromdate,Todate:e.FilterTodate?e.FilterTodate:e.Todate}))),children:(0,Q.jsx)(u.c,{})})]}),(0,Q.jsxs)(i.cp,{value:v,children:[(0,Q.jsx)(d.c,{sx:{borderBottom:1,borderColor:"divider"},children:(0,Q.jsx)(n.c,{indicatorColor:"transparant",onChange:(e,l)=>p(l),variant:"scrollable",scrollButtons:"auto",children:h.map(((e,l)=>(0,Q.jsx)(s.c,{sx:v===l+1?{backgroundColor:"#c6d7eb"}:{},label:e.name,value:l+1},l)))})}),h.map(((e,l)=>(0,Q.jsx)(r.c,{value:l+1,sx:{p:0,pt:2},children:e.component},l)))]})]})}}}]);
//# sourceMappingURL=312.5dfae285.chunk.js.map