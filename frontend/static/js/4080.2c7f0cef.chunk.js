"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[4080],{84968:(e,l,a)=>{a.d(l,{c:()=>h});var d=a(69060),i=a(99904),n=a(85624),t=a(33856),r=a(58612),o=a(27454),s=a(96464),c=a(53248),u=a(29504),v=a(5930),m=a(39308),x=a(82496);const h=e=>{let{dataArray:l,columns:a,onClickFun:h}=e;const[p,g]=(0,d.useState)(0),[j,b]=(0,d.useState)(20),[f,y]=(0,d.useState)([]),N=p*j,S=N+j,_=(e=>{if(!f.length)return e;return[...e].sort(((e,l)=>{for(const a of f){const{columnId:d,direction:i}=a,n=e[d],t=l[d];if(n!==t)return"asc"===i?n>t?1:-1:n<t?1:-1}return 0}))})(l).slice(N,S),F=(e,l)=>{switch(l){case"number":return(0,m.SA)(e);case"date":return(0,m.uy)(e);case"string":return e;default:return""}};return(0,x.jsxs)("div",{children:[(0,x.jsx)(i.c,{component:n.c,sx:{maxHeight:550},children:(0,x.jsxs)(t.c,{stickyHeader:!0,size:"small",children:[(0,x.jsx)(r.c,{children:(0,x.jsx)(o.c,{children:a.map(((e,l)=>{var a;return((0,m.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,m.Qr)(null===e||void 0===e?void 0:e.isVisible,1))&&(0,x.jsx)(s.c,{className:"fa-13 fw-bold border-end border-top",style:{backgroundColor:"#EDF0F7"},sortDirection:!!f.some((l=>l.columnId===e.Field_Name))&&f.find((l=>l.columnId===e.Field_Name)).direction,children:(0,x.jsx)(c.c,{active:f.some((l=>l.columnId===e.Field_Name)),direction:f.some((l=>l.columnId===e.Field_Name))?f.find((l=>l.columnId===e.Field_Name)).direction:"asc",onClick:()=>(e=>{const l=f.find((l=>l.columnId===e));if(l){const a="asc"===l.direction;y(f.map((l=>l.columnId===e?{...l,direction:a?"desc":"asc"}:l)))}else y([...f,{columnId:e,direction:"asc"}])})(e.Field_Name),children:null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.replace(/_/g," ")})},l)}))})}),(0,x.jsx)(u.c,{children:_.map(((e,l)=>(0,x.jsx)(o.c,{children:a.map((a=>Object.entries(e).map((d=>{let[i,n]=d;return a.Field_Name===i&&((0,m.Qr)(null===a||void 0===a?void 0:a.Defult_Display,1)||(0,m.Qr)(null===a||void 0===a?void 0:a.isVisible,1))&&(0,x.jsx)(s.c,{className:"fa-13 border-end",onClick:()=>h?h(e):console.log("Function not supplied"),children:F(n,null===a||void 0===a?void 0:a.Fied_Data)},a+l)}))))},l)))})]})}),(0,x.jsx)("div",{className:"p-2",children:(0,x.jsx)(v.c,{component:"div",count:l.length,page:p,onPageChange:(e,l)=>{g(l)},rowsPerPage:j,onRowsPerPageChange:e=>{b(parseInt(e.target.value,10)),g(0)},rowsPerPageOptions:[20,50,100,200,500],labelRowsPerPage:"Rows per page",showFirstButton:!0,showLastButton:!0})})]})}},68392:(e,l,a)=>{a.d(l,{c:()=>j});var d=a(69060),i=a(5548),n=a(82656),t=a(26773),r=a(4488),o=a(43692),s=a(85624),c=a(78092),u=a(90048),v=a(89e3),m=a(12120),x=a(58560),h=a(56480),p=a(1908),g=a(82496);const j=e=>{let{CompanyId:l,refresh:a,columns:j,ReportId:b}=e;const[f,y]=(0,d.useState)([]),[N,S]=(0,d.useState)(!1),[_,F]=(0,d.useState)(!1);(0,d.useEffect)((()=>{y([...j])}),[j,N]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(i.c,{size:"small",onClick:()=>F((e=>!e)),children:(0,g.jsx)(m.c,{})}),(0,g.jsxs)(n.c,{open:_,onClose:()=>F(!1),fullWidth:!0,maxWidth:"lg",children:[(0,g.jsx)(t.c,{children:"Column Visiblity Settings"}),(0,g.jsx)(r.c,{children:(0,g.jsx)("div",{className:"row",children:null===f||void 0===f?void 0:f.map(((e,l)=>(0,g.jsx)("div",{className:"col-lg-4 col-md-6 p-2",children:(0,g.jsxs)(o.c,{component:s.c,className:"p-2 d-flex justify-content-between align-items-center flex-wrap "+(l%2!==0?"bg-light":""),children:[(0,g.jsxs)("div",{className:"d-flex justify-content-between align-items-center flex-wrap",children:[(0,g.jsx)(c.c,{checked:Boolean(null===e||void 0===e?void 0:e.Defult_Display)||Boolean(null===e||void 0===e?void 0:e.isVisible),disabled:Boolean(null===e||void 0===e?void 0:e.Defult_Display),onChange:l=>y((a=>a.map((a=>a.Field_Id===(null===e||void 0===e?void 0:e.Field_Id)?{...a,isVisible:l.target.checked?1:0}:a))))}),(0,g.jsx)("h6",{className:"fa-13 mb-0 fw-bold ",children:null===e||void 0===e?void 0:e.Field_Name})]}),(0,g.jsx)("input",{type:"number",value:Number(null===e||void 0===e?void 0:e.OrderBy)?null===e||void 0===e?void 0:e.OrderBy:"",onChange:l=>y((a=>a.map((a=>a.Field_Id===(null===e||void 0===e?void 0:e.Field_Id)?{...a,OrderBy:l.target.value}:a)))),label:"Order Value",className:"mt-2 p-1 border-0 cus-inpt",style:{width:"80px"},placeholder:"Order"})]})},l)))})}),(0,g.jsxs)(u.c,{className:"d-flex justify-content-between",children:[(0,g.jsx)(v.c,{onClick:()=>S((e=>!e)),variant:"outlined",startIcon:(0,g.jsx)(x.c,{}),children:"reset"}),(0,g.jsxs)("span",{children:[(0,g.jsx)(v.c,{onClick:()=>F(!1),color:"error",children:"Cancel"}),(0,g.jsx)(v.c,{onClick:()=>{F(!1),(0,p.q)({address:"reports/tallyReports/qpay/columnVisiblity",method:"POST",bodyData:{dataArray:f,CompanyId:l,ReportId:b||1}}).then((e=>{e.success?h.m4.success(e.message):h.m4.error(e.message)})).catch((e=>console.error(e))).finally((()=>{a&&a()}))},variant:"outlined",children:"Save"})]})]})]})]})}},84080:(e,l,a)=>{a.r(l),a.d(l,{default:()=>G});var d=a(69060),i=a(71448),n=a(52924),t=a(44380),r=a(43692),o=a(36852),s=a(78092),c=a(3358),u=a(5548),v=a(12572),m=a(15786),x=a(82656),h=a(4488),p=a(90048),g=a(89e3),j=a(68424),b=a(39504),f=a(61988),y=a(74912),N=a(18256),S=a(29720),_=a(61584),F=a(98944),C=a(39308),w=a(60476),A=a(82496);const D=e=>{let{dataArray:l}=e;const[a,i]=(0,d.useState)([]);(0,d.useEffect)((()=>{const e=[{min:0,max:5e3,data:[]},{min:5e3,max:1e4,data:[]},{min:1e4,max:2e4,data:[]},{min:2e4,max:5e4,data:[]},{min:5e4,max:1e5,data:[]},{min:1e5,max:2e5,data:[]},{min:2e5,max:5e5,data:[]},{min:5e5,max:1e6,data:[]},{min:1e6,max:15e5,data:[]},{min:15e5,max:2e6,data:[]},{min:2e6,max:1e15,data:[]}];l.forEach((l=>{const a=Number(l.Sales_Amount),d=e.findIndex((e=>a>e.min&&a<=e.max));-1!==d&&e[d].data.push(l)})),i(e)}),[l]);const n=e=>{var i,n,t,r;let{o:o,i:s}=e;const[c,u]=(0,d.useState)(!1);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("tr",{onClick:()=>u((e=>!e)),className:"hov",children:[(0,A.jsx)("td",{className:"fa-13 border text-center hov-bg",children:s+1}),(0,A.jsx)("td",{className:"fa-13 border text-center hov-bg",children:a[s+1]?(0,C.SA)(null===o||void 0===o?void 0:o.min)+" - "+(0,C.SA)(null===o||void 0===o?void 0:o.max):"< "+(null===o||void 0===o?void 0:o.min.toString())}),(0,A.jsx)("td",{className:"fa-13 border text-center hov-bg blue-text",children:null===o||void 0===o||null===(i=o.data)||void 0===i?void 0:i.length}),(0,A.jsxs)("td",{className:"fa-13 border text-center hov-bg",children:[(0,C.SA)((null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.length)/(null===l||void 0===l?void 0:l.length)*100),"%"]}),(0,A.jsx)("td",{className:"fa-13 border text-center hov-bg",children:0===o.data.length?0:((null===o||void 0===o||null===(t=o.data)||void 0===t?void 0:t.reduce(((e,l)=>e+l.Sales_Count||0),0))/o.data.length).toFixed(2)}),(0,A.jsx)("td",{className:"fa-13 border text-center hov-bg",children:0===o.data.length?0:((null===o||void 0===o||null===(r=o.data)||void 0===r?void 0:r.reduce(((e,l)=>e+l.Freq_Days||0),0))/o.data.length).toFixed(2)})]}),(0,A.jsx)(w.c,{in:c,unmountOnExit:!0,children:(0,A.jsx)("tr",{children:(0,A.jsx)("td",{colSpan:6})})})]})};return(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)("div",{className:"px-3 d-flex align-items-center justify-content-center flex-column py-2",children:[(0,A.jsx)(F.e,{xAxis:[{scaleType:"band",data:null===a||void 0===a?void 0:a.map(((e,l)=>a[l+1]?"> "+(0,C.SA)(null===e||void 0===e?void 0:e.max):"< "+(null===e||void 0===e?void 0:e.min)))}],series:[{data:null===a||void 0===a?void 0:a.map((e=>{var l;return null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.length})),label:"Parties",color:"skyblue"}],height:400,barLabel:"value",borderRadius:6}),(0,A.jsx)("div",{className:"table-responsive w-100",children:(0,A.jsxs)("table",{className:"table",children:[(0,A.jsx)("thead",{children:(0,A.jsx)("tr",{children:["Sno","Amount-Range","Parties","Percentage","Sales Count (Avg)","Frequency Days (Avg)"].map((e=>(0,A.jsx)("th",{className:"border fa-14 text-center",style:{backgroundColor:"#EDF0F7"},children:e},e)))})}),(0,A.jsxs)("tbody",{children:[a.map(((e,l)=>(0,A.jsx)(n,{o:e,i:l},l))),(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{className:"border"}),(0,A.jsx)("td",{className:"border"}),(0,A.jsx)("td",{className:"fa-13 border text-center",children:(0,C.SA)(null===a||void 0===a?void 0:a.reduce(((e,l)=>{var a;return e+(null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a.length)}),0))}),(0,A.jsxs)("td",{className:"fa-13 border text-center",children:[(0,C.SA)(null===a||void 0===a?void 0:a.reduce(((e,a)=>{var d;return e+(null===a||void 0===a||null===(d=a.data)||void 0===d?void 0:d.length)/(null===l||void 0===l?void 0:l.length)*100}),0)),"%"]}),(0,A.jsx)("td",{className:"fa-13 border text-center",children:(0,C.SA)((null===l||void 0===l?void 0:l.length)/(null===l||void 0===l?void 0:l.reduce(((e,l)=>e+(Number(null===l||void 0===l?void 0:l.Sales_Count)||0)),0))*100)}),(0,A.jsx)("td",{className:"fa-13 border text-center",children:(0,C.SA)((null===l||void 0===l?void 0:l.length)/(null===l||void 0===l?void 0:l.reduce(((e,l)=>e+(Number(null===l||void 0===l?void 0:l.Freq_Days)||0)),0))*100)})]})]})]})})]})})};var k=a(2509);const I=e=>{let{dataArray:l,columns:a,filters:i}=e;const[n,t]=(0,d.useState)([]),[r,o]=(0,d.useState)(!1),[s,c]=(0,d.useState)([]),[u,v]=(0,d.useState)({group:localStorage.getItem("qPayGroup")||""}),m=e=>e?e.trim().toLowerCase():"";(0,d.useEffect)((()=>{const e=Array.isArray(i[u.group])?i[u.group]:[];c(e)}),[i,u.group]),(0,d.useEffect)((()=>{const e=[{min:0,max:5,data:[]},{min:5,max:10,data:[]},{min:10,max:15,data:[]},{min:15,max:20,data:[]},{min:20,max:30,data:[]},{min:30,max:40,data:[]},{min:40,max:60,data:[]},{min:60,max:1e4,data:[]}];l.forEach((l=>{const a=Number(l.Q_Pay_Days),d=e.findIndex((e=>a>e.min&&a<=e.max));-1!==d&&e[d].data.push(l)})),t(e)}),[l,r]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{className:"col-xxl-3 col-lg-4 col-md-6 col-sm-8",children:(0,A.jsxs)("select",{className:"cus-inpt w-auto border",value:u.group,onChange:e=>{v((l=>({...l,group:e.target.value}))),localStorage.setItem("qPayGroup",e.target.value)},children:[(0,A.jsx)("option",{value:"",children:"Select Group By"}),null===a||void 0===a?void 0:a.map(((e,l)=>{var a;return"string"===(null===e||void 0===e?void 0:e.Fied_Data)&&(0,A.jsx)("option",{value:null===e||void 0===e?void 0:e.Field_Name,children:null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.replace(/_/g," ")},l)}))]})}),""===(null===u||void 0===u?void 0:u.group)||0===s.length?(0,A.jsxs)("div",{className:"d-flex justify-content-around align-items-center flex-wrap px-3 py-2",children:[(0,A.jsx)("div",{className:"table-responsive",children:(0,A.jsxs)("table",{className:"table",children:[(0,A.jsx)("thead",{children:(0,A.jsx)("tr",{children:["Sno","Day-Range","Parties","Percentage"].map((e=>(0,A.jsx)("th",{className:"border fa-15",style:{backgroundColor:"#EDF0F7"},children:e},e)))})}),(0,A.jsxs)("tbody",{children:[n.map(((e,a)=>{var d,i,t,r;return(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{className:"fa-15 border text-center",children:a+1}),(0,A.jsx)("td",{className:"fa-15 border text-center",children:n[a+1]?(null===(d=(null===e||void 0===e?void 0:e.min)+1)||void 0===d?void 0:d.toString())+" - "+(null===e||void 0===e||null===(i=e.max)||void 0===i?void 0:i.toString()):"< "+(null===e||void 0===e?void 0:e.min.toString())}),(0,A.jsx)("td",{className:"fa-15 border text-center",children:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.length}),(0,A.jsx)("td",{className:"fa-15 border text-center",children:(0,C.SA)((null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.length)/(null===l||void 0===l?void 0:l.length)*100)})]},a)})),(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{className:"border"}),(0,A.jsx)("td",{className:"border"}),(0,A.jsx)("td",{className:"fa-13 border text-center",children:(0,C.SA)(null===n||void 0===n?void 0:n.reduce(((e,l)=>{var a;return e+(null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a.length)}),0))}),(0,A.jsx)("td",{className:"fa-13 border text-center",children:(0,C.SA)(null===n||void 0===n?void 0:n.reduce(((e,a)=>{var d;return e+(null===a||void 0===a||null===(d=a.data)||void 0===d?void 0:d.length)/(null===l||void 0===l?void 0:l.length)*100}),0))})]})]})]})}),(0,A.jsxs)("div",{className:"d-flex align-items-center flex-column overflow-scroll",children:[(0,A.jsx)("h5",{children:"Q-Pay Days"}),(0,A.jsx)(k.i,{series:[{data:null===n||void 0===n?void 0:n.map(((e,a)=>{var d,i,t;return{label:n[a+1]?(0,C.SA)(null===e||void 0===e?void 0:e.min)+"-"+(0,C.SA)(null===e||void 0===e?void 0:e.max)+"("+(null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.length)+")":"< "+(0,C.SA)(null===e||void 0===e?void 0:e.min)+"("+(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.length)+")",value:((null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.length)/(null===l||void 0===l?void 0:l.length)*100).toFixed(2),color:(0,C.oX)()}})),arcLabel:e=>`${e.label}`,arcLabelMinAngle:35}],width:570,height:400,title:"QPay Days"}),(0,A.jsx)(g.c,{onClick:()=>o((e=>!e)),children:"Change color"})]})]}):(0,A.jsx)(A.Fragment,{children:(0,A.jsx)("div",{className:"cus-grid mt-3",children:s.map(((e,l)=>{var a;return(0,A.jsxs)("div",{className:"table-responsive grid-card bg-white border",children:[(0,A.jsxs)("h6",{className:"fw-bold text-muted d-flex justify-content-between",children:[null===(a=String(e))||void 0===a?void 0:a.toUpperCase(),(0,A.jsx)("span",{children:(0,C.SA)(null===n||void 0===n?void 0:n.reduce(((l,a)=>{var d;return l+(null===a||void 0===a||null===(d=a.data)||void 0===d?void 0:d.reduce(((l,a)=>m(a[u.group])===m(e)?l+1:l),0))}),0))})]}),(0,A.jsxs)("table",{className:"table",children:[(0,A.jsx)("thead",{children:(0,A.jsx)("tr",{children:["Sno","Day-Range","Parties","Percentage"].map((e=>(0,A.jsx)("th",{className:"border fa-14",style:{backgroundColor:"#EDF0F7"},children:e},e)))})}),(0,A.jsx)("tbody",{children:n.map(((l,a)=>{var d,i,t,r;return(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{className:"fa-15 border text-center",children:a+1}),(0,A.jsx)("td",{className:"fa-15 border text-center",children:n[a+1]?(null===(d=(null===l||void 0===l?void 0:l.min)+1)||void 0===d?void 0:d.toString())+" - "+(null===l||void 0===l||null===(i=l.max)||void 0===i?void 0:i.toString()):"< "+(null===l||void 0===l?void 0:l.min.toString())}),(0,A.jsx)("td",{className:"fa-15 border text-center",children:null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.reduce(((l,a)=>m(a[u.group])===m(e)?l+1:l),0)}),(0,A.jsx)("td",{className:"fa-15 border text-center",children:(0,C.SA)((null===l||void 0===l||null===(r=l.data)||void 0===r?void 0:r.reduce(((l,a)=>m(a[u.group])===m(e)?l+1:l),0))/(null===n||void 0===n?void 0:n.reduce(((l,a)=>{var d;return l+(null===a||void 0===a||null===(d=a.data)||void 0===d?void 0:d.reduce(((l,a)=>m(a[u.group])===m(e)?l+1:l),0))}),0))*100)})]},a)}))})]})]},l)}))})})]})};var P=a(84968),E=a(68392),O=a(67604);const B=(e,l)=>{switch(l){case"number":return(0,C.SA)(e);case"date":return(0,C.uy)(e);case"string":return e;default:return""}},L=(e,l,a)=>{switch(l){case"number":return{filterVariant:"range",filterFn:"between"};case"date":case"string":return{filterVariant:"text"};default:return""}},Q=e=>{let{dataArray:l,columns:a}=e;const[i,n]=(0,d.useState)([]);(0,d.useEffect)((()=>{const e=[...a].filter((e=>(0,C.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,C.Qr)(null===e||void 0===e?void 0:e.isVisible,1))).map((e=>{var l,a;return{header:null===e||void 0===e||null===(l=e.Field_Name)||void 0===l?void 0:l.replace(/_/g," "),accessorKey:null===e||void 0===e?void 0:e.Field_Name,sortable:!0,size:150,aggregationFn:null!==e&&void 0!==e&&null!==(a=e.Field_Name)&&void 0!==a&&a.includes("mount")?"sum":"number"===(null===e||void 0===e?void 0:e.Fied_Data)?"mean":"uniqueCount",AggregatedCell:e=>{let{cell:l}=e;return(0,A.jsx)("div",{className:"blue-text text-center float-end w-100",children:(0,C.SA)(l.getValue())})},Cell:l=>{let{cell:a}=l;return(0,A.jsx)("p",{className:"m-0 text-center fa-14 w-100 ",children:B(a.getValue(),null===e||void 0===e?void 0:e.Fied_Data)})},...L(null===e||void 0===e||e.Field_Name,null===e||void 0===e?void 0:e.Fied_Data)}}));n(e)}),[a]);const t=(0,O.g$)({columns:i,data:l||[],enableColumnResizing:!0,enableGrouping:!0,enableStickyHeader:!0,enableStickyFooter:!0,enableColumnOrdering:!0,enableRowNumbers:!1,initialState:{density:"compact",pagination:{pageIndex:0,pageSize:100},sorting:[{id:"Q_Pay_Days"}]},muiToolbarAlertBannerChipProps:{color:"primary"},muiTableContainerProps:{sx:{maxHeight:"64vh",minHeight:"56vh"}}});return(0,A.jsx)(O._Y,{table:t})};var R=a(56480),V=a(51560),z=a(89796),T=a(1908);const q=(0,A.jsx)(j.c,{fontSize:"small"}),$=(0,A.jsx)(b.c,{fontSize:"small"}),G=()=>{const e=(0,V.i6)(),l=["LIST","Q-PAY BASED","SALES VALUE BASED"],[a,j]=(0,d.useState)([]),[b,F]=(0,d.useState)([]),[w,k]=(0,d.useState)(!1),[O,B]=(0,d.useState)({zeros:!1,company:2,consolidate:1,view:"LIST",filterDialog:!1,displayGrouping:!1}),[L,G]=(0,d.useState)([]),[H,M]=(0,d.useState)([]),[W,Y]=(0,d.useState)({}),[U,K]=(0,d.useState)(b),[X,Z]=(0,d.useState)([]);(0,d.useEffect)((()=>{M(null===L||void 0===L?void 0:L.sort(((e,l)=>null!==e&&void 0!==e&&e.OrderBy&&null!==l&&void 0!==l&&l.OrderBy?(null===e||void 0===e?void 0:e.OrderBy)-(null===l||void 0===l?void 0:l.OrderBy):(null===l||void 0===l?void 0:l.OrderBy)-(null===e||void 0===e?void 0:e.OrderBy))))}),[L]),(0,d.useEffect)((()=>{j([]),(0,T.q)({address:`reports/tallyReports/qPay?Company_Id=${null===O||void 0===O?void 0:O.company}&Consolidate=${null===O||void 0===O?void 0:O.consolidate}`}).then((e=>{e.success&&j(e.data)})).catch((e=>console.error(e)))}),[null===O||void 0===O?void 0:O.company,null===O||void 0===O?void 0:O.consolidate,w]),(0,d.useEffect)((()=>{const e=[...a],l=O.zeros?e:e.filter((e=>null===e||void 0===e?void 0:e.Q_Pay_Days));F(l)}),[a,O.zeros]),(0,d.useEffect)((()=>{(0,T.q)({address:`reports/tallyReports/qpay/columnVisiblity?CompanyId=${O.company}&Report_Type_Id=${Boolean(null===O||void 0===O?void 0:O.consolidate)?1:2}`}).then((e=>{var l;e.success&&(null===e||void 0===e||null===(l=e.data)||void 0===l||l.sort(((e,l)=>{var a;return null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.localeCompare(null===l||void 0===l?void 0:l.Field_Name)})),G(e.data))})).catch((e=>console.error(e)))}),[O.company,null===O||void 0===O?void 0:O.consolidate,w]),(0,d.useEffect)((()=>{ae()}),[W]),(0,d.useEffect)((()=>{const e=Object.keys(W).length>0?U:b,l=null===e||void 0===e?void 0:e.reduce(((e,l)=>null!==l&&void 0!==l&&l.Ledger_Tally_Id?[...e,null===l||void 0===l?void 0:l.Ledger_Tally_Id]:e),[]);Z(l)}),[W,b,U]);const J=l=>{if(Array.isArray(l)&&null!==l&&void 0!==l&&l.length){const a=null===l||void 0===l?void 0:l.reduce(((e,l)=>l?e?`${e},${l}`:`${l}`:e),"");e("transaction",{state:{Ledger_Tally_Id:a,isObj:!1,rowDetails:l,company:O.company,preFilters:W}})}else(0,C.Y9)(l)&&(0,C.Q$)(l.Ledger_Tally_Id)?e("transaction",{state:{Ledger_Tally_Id:l.Ledger_Tally_Id,isObj:!0,rowDetails:l,company:O.company,preFilters:W}}):R.m4.error("Ledger Id not available")},ee=e=>{const l=Object.keys(W).length>0?U:b;switch(e){case"LIST":return(0,A.jsx)(P.c,{dataArray:l,columns:H,onClickFun:J});case"Q-PAY BASED":return(0,A.jsx)(I,{dataArray:l,columns:H,filters:W});case"SALES VALUE BASED":return(0,A.jsx)(D,{dataArray:l});default:A.Fragment}},le=(e,l)=>{Y((a=>({...a,[e]:l})))},ae=()=>{let e=[...b];for(const a of H)if(W[a.Field_Name])if("range"===W[a.Field_Name].type){const{min:l,max:d}=W[a.Field_Name];e=e.filter((e=>{const i=e[a.Field_Name];return(void 0===l||i>=l)&&(void 0===d||i<=d)}))}else if("date"===W[a.Field_Name].type){const{start:l,end:d}=W[a.Field_Name].value;e=e.filter((e=>{const i=new Date(e[a.Field_Name]);return(void 0===l||i>=new Date(l))&&(void 0===d||i<=new Date(d))}))}else if(Array.isArray(W[a.Field_Name])){var l;e=(null===(l=W[a.Field_Name])||void 0===l?void 0:l.length)>0?e.filter((e=>W[a.Field_Name].includes(e[a.Field_Name].toLowerCase().trim()))):e}K(e)},de=e=>{const{Field_Name:l,Fied_Data:a}=e;var d,r,o,s,c,u,v,m,x,h;if("number"===a)return(0,A.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,A.jsx)("input",{placeholder:"Min",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(d=null===(r=W[l])||void 0===r?void 0:r.min)&&void 0!==d?d:"",onChange:e=>le(l,{type:"range",...W[l],min:e.target.value?parseFloat(e.target.value):void 0})}),(0,A.jsx)("input",{placeholder:"Max",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(o=null===(s=W[l])||void 0===s?void 0:s.max)&&void 0!==o?o:"",onChange:e=>le(l,{type:"range",...W[l],max:e.target.value?parseFloat(e.target.value):void 0})})]});if("date"===a)return(0,A.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,A.jsx)("input",{placeholder:"Start Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(c=null===(u=W[l])||void 0===u||null===(v=u.value)||void 0===v?void 0:v.start)&&void 0!==c?c:"",onChange:e=>{var a;return le(l,{type:"date",value:{...null===(a=W[l])||void 0===a?void 0:a.value,start:e.target.value||void 0}})}}),(0,A.jsx)("input",{placeholder:"End Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(m=null===(x=W[l])||void 0===x||null===(h=x.value)||void 0===h?void 0:h.end)&&void 0!==m?m:"",onChange:e=>{var a;return le(l,{type:"date",value:{...null===(a=W[l])||void 0===a?void 0:a.value,end:e.target.value||void 0}})}})]});if("string"===a){const e=[...new Set(b.map((e=>{var a,d;return null===(a=e[l])||void 0===a||null===(d=a.toLowerCase())||void 0===d?void 0:d.trim()})))];return(0,A.jsx)(i.c,{multiple:!0,id:`${l}-filter`,options:e,disableCloseOnSelect:!0,getOptionLabel:e=>e,value:W[l]||[],onChange:(e,a)=>le(l,a),renderOption:(e,l,a)=>{let{selected:d}=a;return(0,A.jsxs)("li",{...e,children:[(0,A.jsx)(n.c,{icon:q,checkedIcon:$,style:{marginRight:8},checked:d}),l]})},isOptionEqualToValue:(e,l)=>e===l,renderInput:e=>(0,A.jsx)(t.c,{...e,label:l,placeholder:`Select ${null===l||void 0===l?void 0:l.replace(/_/g," ")}`})})}};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(r.c,{children:[(0,A.jsx)("div",{className:"p-2 border-bottom fa-16 fw-bold",children:(0,A.jsx)("span",{className:"text-uppercase ps-3",children:"Q-Pay Report"})}),(0,A.jsxs)("div",{className:"d-flex flex-wrap justify-content-between p-2",children:[(0,A.jsxs)("span",{children:[(0,A.jsx)(o.c,{control:(0,A.jsx)(s.c,{checked:!O.zeros,onChange:e=>B((l=>({...l,zeros:!e.target.checked})))}),label:"Remove Zeros",labelPlacement:"start",className:" fw-bold text-primary"}),(0,A.jsx)(o.c,{control:(0,A.jsx)(s.c,{checked:1===O.consolidate,onChange:e=>B((l=>({...l,consolidate:e.target.checked?1:0})))}),label:"Consolidate",labelPlacement:"start",className:" fw-bold text-primary"}),(0,A.jsx)(o.c,{control:(0,A.jsx)(s.c,{checked:O.displayGrouping,onChange:e=>B((l=>({...l,displayGrouping:e.target.checked})))}),label:"Grouping",labelPlacement:"start",className:" fw-bold text-primary"})]}),(0,A.jsxs)("span",{children:[(0,A.jsx)(E.c,{CompanyId:O.company,columns:H,refresh:()=>{k((e=>!e))},ReportId:Boolean(null===O||void 0===O?void 0:O.consolidate)?1:2}),(0,A.jsx)(c.c,{title:"Open Sales List",children:(0,A.jsx)(u.c,{onClick:()=>J(X),size:"small",children:(0,A.jsx)(z.AO1,{})})}),(0,A.jsx)(c.c,{title:"Filters",children:(0,A.jsx)(u.c,{onClick:()=>B((e=>({...e,filterDialog:!0}))),size:"small",className:"d-md-none d-inline",children:(0,A.jsx)(f.c,{})})})]})]}),O.displayGrouping?(0,A.jsx)(Q,{dataArray:b,columns:H}):(0,A.jsxs)("div",{className:"row ",children:[(0,A.jsx)("div",{className:"col-xxl-10 col-lg-9 col-md-8",children:(0,A.jsx)("div",{className:"p-2",children:(0,A.jsxs)(N.cp,{value:O.view,children:[(0,A.jsx)(v.c,{sx:{borderBottom:1,borderColor:"divider"},children:(0,A.jsx)(S.c,{indicatorColor:"transparant",onChange:(e,l)=>B((e=>({...e,view:l}))),variant:"scrollable",scrollButtons:"auto",allowScrollButtonsMobile:!0,children:l.map((e=>(0,A.jsx)(m.c,{sx:O.view===e?{backgroundColor:"#c6d7eb"}:{},label:e,value:e},e)))})}),l.map((e=>(0,A.jsx)(_.c,{value:e,sx:{px:0,py:2},children:ee(O.view)},e)))]})})}),(0,A.jsxs)("div",{className:"col-xxl-2 col-lg-3 col-md-4 d-none d-md-block",children:[(0,A.jsxs)("h5",{className:"d-flex justify-content-between px-2",children:["Filters",(0,A.jsx)(c.c,{title:"Clear Filters",children:(0,A.jsx)(u.c,{size:"small",onClick:()=>Y({}),children:(0,A.jsx)(y.c,{})})})]}),(0,A.jsxs)("div",{className:"border rounded-3 ",style:{maxHeight:"70vh",overflow:"auto"},children:[L.map(((e,l)=>{var a;return((0,C.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,C.Qr)(null===e||void 0===e?void 0:e.isVisible,1))&&(0,A.jsxs)("div",{className:"py-3 px-3 hov-bg border-bottom",children:[(0,A.jsx)("label",{className:"mt-2 mb-1",children:null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.replace(/_/g," ")}),de(e)]},l)})),(0,A.jsx)("br",{})]})]})]})]}),(0,A.jsxs)(x.c,{open:null===O||void 0===O?void 0:O.filterDialog,onClose:()=>B((e=>({...e,filterDialog:!1}))),fullWidth:!0,maxWidth:"sm",children:[(0,A.jsxs)(h.c,{children:[(0,A.jsxs)("h5",{className:"d-flex justify-content-between px-2",children:["Filters",(0,A.jsx)(c.c,{title:"Clear Filters",children:(0,A.jsx)(u.c,{size:"small",onClick:()=>Y({}),children:(0,A.jsx)(y.c,{})})})]}),(0,A.jsxs)("div",{className:"border rounded-3 ",style:{maxHeight:"70vh",overflow:"auto"},children:[L.map(((e,l)=>{var a;return((0,C.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,C.Qr)(null===e||void 0===e?void 0:e.isVisible,1))&&(0,A.jsxs)("div",{className:"py-3 px-3 hov-bg border-bottom",children:[(0,A.jsx)("label",{className:"mt-2 mb-1",children:null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.replace(/_/g," ")}),de(e)]},l)})),(0,A.jsx)("br",{})]})]}),(0,A.jsx)(p.c,{children:(0,A.jsx)(g.c,{onClick:()=>B((e=>({...e,filterDialog:!1}))),color:"error",children:"close"})})]})]})}}}]);
//# sourceMappingURL=4080.2c7f0cef.chunk.js.map