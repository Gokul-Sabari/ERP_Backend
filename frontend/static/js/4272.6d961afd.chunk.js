"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[4272],{84272:(e,o,s)=>{s.r(o),s.d(o,{default:()=>y});var a=s(30800),d=s(69060),n=s(44380),l=s(5548),t=s(82656),r=s(26773),c=s(4488),i=s(90048),m=s(75848),u=s(89e3),h=s(56480),w=s(42136),x=s(57704),j=s(86e3),p=s(45180),G=s(1908),C=s(13724),g=s(82496);const f={Godown_Id:"",Godown_Name:""};const y=function(){const[e,o]=(0,d.useState)(!1),[s,y]=(0,d.useState)(!1),[N,_]=(0,d.useState)(!1),[b,v]=(0,d.useState)(f),[S,I]=(0,d.useState)(!1),[k,E]=(0,d.useState)([]),[D,A]=(0,d.useState)([]),[F,q]=(0,d.useState)(""),[z,L]=(0,d.useState)(!1),O=JSON.parse(localStorage.getItem("user")),T=null===O||void 0===O?void 0:O.UserId;(0,d.useEffect)((()=>{(async()=>{try{const e=await(0,G.q)({address:"masters/godown"});e.success&&(E(e.data),A(e.data))}catch(e){console.error(e),h.m4.error("Failed to load account groups")}})()}),[e]),(0,d.useEffect)((()=>{if(""===F.trim())A(k);else{const e=k.filter((e=>{var o,s;return(null===(o=e.Godown_Id)||void 0===o?void 0:o.toLowerCase().includes(F.toLowerCase()))||(null===(s=e.Godown_Name)||void 0===s?void 0:s.toLowerCase().includes(F.toLowerCase()))}));A(e)}}),[F,k]);const P=()=>{z||(_(!1),v(f))},U=()=>{z||(I(!1),v(f))},W=()=>{z||y(!1)};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"card",children:[(0,g.jsxs)("div",{className:"card-header bg-white fw-bold d-flex align-items-center justify-content-between",children:["GODOWN MASTER",(0,g.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,g.jsx)("div",{style:{width:"300px"},children:(0,g.jsx)(n.c,{fullWidth:!0,size:"small",variant:"outlined",placeholder:"Search Godown...",value:F,onChange:e=>q(e.target.value),InputProps:{startAdornment:(0,g.jsx)(x.c,{fontSize:"small",sx:{mr:1}}),style:{height:"40px"}}})}),(0,g.jsx)(w.c,{variant:"contained",size:"small",className:"rounded-1 btn-primary",onClick:()=>{_(!0),v(f)},sx:{textTransform:"none",fontWeight:500,px:2,height:"40px"},children:"Create Godown"})]})]}),(0,g.jsx)(C.cp,{dataArray:D,EnableSerialNumber:!0,maxHeightOption:!0,columns:[(0,C.A5)("Godown_Name","string","Godown_Name"),{ColumnHeader:"Actions",isVisible:1,isCustomCell:!0,Cell:e=>{let{row:o}=e;return(0,g.jsxs)("td",{style:{minWidth:"80px"},children:[(0,g.jsx)(l.c,{onClick:()=>(e=>{v({Godown_Id:e.Godown_Id,Godown_Name:e.Godown_Name}),I(!0)})(o),size:"small",children:(0,g.jsx)(j.c,{})}),(0,g.jsx)(l.c,{onClick:()=>{y(!0),v({Godown_Id:o.Godown_Id,Godown_Name:o.Godown_Name})},size:"small",color:"error",children:(0,g.jsx)(p.c,{})})]})}}]})]}),(0,g.jsxs)(t.c,{open:N,onClose:P,children:[(0,g.jsx)(r.c,{children:"Create Godown"}),(0,g.jsx)(c.c,{children:(0,g.jsxs)("div",{className:"p-2",children:[(0,g.jsx)("label",{children:"Godown Name*"}),(0,g.jsx)("input",{type:"text",value:b.Godown_Name,onChange:e=>v((0,a.c)((0,a.c)({},b),{},{Godown_Name:e.target.value})),className:"cus-inpt",placeholder:"Enter Godown Name"})]})}),(0,g.jsxs)(i.c,{children:[(0,g.jsx)(u.c,{onClick:P,disabled:z,children:"Cancel"}),(0,g.jsx)(u.c,{onClick:async()=>{const{Godown_Name:e}=b;if(e){L(!0);try{const e=await(0,G.q)({address:"masters/godown",method:"POST",bodyData:(0,a.c)((0,a.c)({},b),{},{Created_By:T})});e.success?(h.m4.success("Godown Created successfully!"),_(!1),v(f),o((e=>!e))):h.m4.error(e.message)}catch(s){console.error(s),h.m4.error("Failed to Create Godown")}finally{L(!1)}}else h.m4.error("Please fill all required fields.")},color:"primary",disabled:z||!b.Godown_Name,children:z?"Creating...":"Create"})]})]}),(0,g.jsxs)(t.c,{open:S,onClose:U,children:[(0,g.jsx)(r.c,{children:"Edit Godown"}),(0,g.jsx)(c.c,{children:(0,g.jsxs)("div",{className:"p-2",children:[(0,g.jsx)("label",{children:"Godown Name*"}),(0,g.jsx)("input",{type:"text",value:b.Godown_Name,onChange:e=>v((0,a.c)((0,a.c)({},b),{},{Godown_Name:e.target.value})),className:"cus-inpt"})]})}),(0,g.jsxs)(i.c,{children:[(0,g.jsx)(u.c,{onClick:U,disabled:z,children:"Cancel"}),(0,g.jsx)(u.c,{onClick:()=>{const{Godown_Id:s,Godown_Name:d}=b;s&&d?(L(!0),(0,G.q)({address:"masters/godown",method:"PUT",bodyData:(0,a.c)((0,a.c)({},b),{},{Alter_By:T})}).then((s=>{s.success?(h.m4.success("Godown updated successfully!"),I(!1),v(f),o(!e)):h.m4.error(s.message)})).catch((e=>{h.m4.error("Failed to update Godown")})).finally((()=>L(!1)))):h.m4.error("All required fields must be filled.")},color:"primary",disabled:z||!b.Godown_Id,children:z?"Updating...":"Update"})]})]}),(0,g.jsxs)(t.c,{open:s,onClose:W,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,g.jsx)(r.c,{id:"alert-dialog-title",children:"Confirmation"}),(0,g.jsx)(c.c,{children:(0,g.jsx)(m.c,{id:"alert-dialog-description",children:(0,g.jsx)("b",{children:"Do you want to delete the ".concat(b.Godown_Name,"?")})})}),(0,g.jsxs)(i.c,{children:[(0,g.jsx)(u.c,{onClick:W,children:"Cancel"}),(0,g.jsx)(u.c,{onClick:async()=>{L(!0);const e=b.Godown_Id;try{E((o=>o.filter((o=>o.Godown_Id!==e)))),A((o=>o.filter((o=>o.Godown_Id!==e))));const s=await(0,G.q)({address:"masters/godown",method:"DELETE",bodyData:{Godown_Id:e}});s.success?h.m4.success("Godown deleted successfully!"):(o((e=>!e)),h.m4.error(s.message||"Failed to delete account group"))}catch(s){console.error(s),o((e=>!e)),h.m4.error("Failed to delete account group")}finally{L(!1),y(!1)}},autoFocus:!0,sx:{color:"red"},children:z?"Deleting...":"Delete"})]})]})]})}}}]);
//# sourceMappingURL=4272.6d961afd.chunk.js.map