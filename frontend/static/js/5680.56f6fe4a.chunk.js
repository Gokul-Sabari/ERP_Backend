"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[5680,3692,1312],{25680:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var s=a(30800),r=a(69060),o=a(27664),c=a(82496);const n=(0,o.c)((0,c.jsx)("path",{d:"M12 5.83 15.17 9l1.41-1.41L12 3 7.41 7.59 8.83 9zm0 12.34L8.83 15l-1.41 1.41L12 21l4.59-4.59L15.17 15z"}),"UnfoldMoreOutlined");var l=a(56480),d=a(5548),i=a(43692),u=a(84436),m=a(82656),h=a(26773),x=a(4488),p=a(90048),j=a(89e3),v=a(32635),b=a(77536),f=a(39308),C=a(1908);const y=()=>{const{contextObj:e}=(0,r.useContext)(b.a),[t,a]=(0,r.useState)([]),o=JSON.parse(localStorage.getItem("user")),[y,N]=(0,r.useState)({searchData:"",payStatus:"0"}),[S,g]=(0,r.useState)(!1),_={date:(0,f.Q7)(),discribtion:"",verifyStatus:0,Pay_Id:""},[A,w]=(0,r.useState)(_),[D,I]=(0,r.useState)(!1),[M,P]=(0,r.useState)(null),[R,L]=(0,r.useState)([]),[O,k]=(0,r.useState)([]);(0,r.useEffect)((()=>{a([]),(0,C.q)({address:"userModule/customer/isCustomer?UserId=".concat(null===o||void 0===o?void 0:o.UserId)}).then((e=>{e.success?P(!0):P(!1)})).catch((e=>console.error(e)))}),[]),(0,r.useEffect)((()=>{null===M||!0!==M&&!1!==M||(a([]),(0,C.q)({address:"userModule/customer/payment?payStatus=".concat(y.payStatus,"&Auth=").concat(o.Autheticate_Id)}).then((e=>{e.success&&(e.data.forEach((e=>{e.Created_At=new Date(e.Created_At),e.Total_Amount=Number(e.Total_Amount)})),a(e.data))})).catch((e=>console.error(e))))}),[D,y.payStatus,M]),(0,r.useEffect)((()=>{const e=t.filter((e=>Object.values(e).some((e=>String(e).toLowerCase().includes(y.searchData.toLowerCase())))));L(e)}),[y.searchData,t]),(0,r.useEffect)((()=>{k(R&&R.length>0?R:""===y.searchData?t:[])}),[R,y.searchData]);const B=()=>{w(_)},T=[{name:"Date",selector:e=>e.Created_At,cell:e=>(0,f.uy)(e.Created_At),sortable:!0},{name:"Name",selector:e=>e.Customer_name,sortable:!0},{name:"Bills",selector:e=>e.Bill_Count,sortable:!0},{name:"Amount",selector:e=>e.Total_Amount,cell:e=>(0,f.SA)(e.Total_Amount),sortable:!0},{name:"Company",selector:e=>e.Company_Name,sortable:!0},{name:"OrderId",selector:e=>e.Order_Id},{name:"Status",selector:e=>e.Payment_Status,sortable:!0},{name:"Action",cell:t=>(0,f.Qr)(null===e||void 0===e?void 0:e.Edit_Rights,1)&&(0,f.Qr)(y.payStatus,0)?(0,c.jsx)(d.c,{onClick:()=>{g(!0),w((0,s.c)((0,s.c)({},A),{},{Pay_Id:t.Id}))},children:(0,c.jsx)(n,{})}):(0,c.jsx)(c.Fragment,{}),sortable:!0}],E=[{name:"Date",selector:e=>e.Created_At,cell:e=>(0,f.uy)(e.Created_At),sortable:!0},{name:"Name",selector:e=>e.Customer_name,sortable:!0},{name:"Bills",selector:e=>e.Bill_Count,sortable:!0},{name:"Amount",selector:e=>e.Total_Amount,cell:e=>(0,f.SA)(e.Total_Amount),sortable:!0},{name:"Company",selector:e=>e.Company_Name,sortable:!0},{name:"OrderId",selector:e=>e.Order_Id},{name:"Status",selector:e=>e.Payment_Status,sortable:!0}],V=()=>(0,c.jsx)(v.cp,{data:O,columns:M?E:T,expandableRows:!0,pagination:!0,highlightOnHover:!0,fixedHeader:!0,fixedHeaderScrollHeight:"58vh",expandableRowsComponent:e=>(0,c.jsx)("div",{className:"table-responisve m-2",style:{width:"fit-content"},children:(0,c.jsxs)("table",{className:"table mb-0",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"border fa-14",children:"SNo"}),(0,c.jsx)("td",{className:"border fa-14",children:"Invoice No"}),(0,c.jsx)("td",{className:"border fa-14",children:"Bill Amount"}),(0,c.jsx)("td",{className:"border fa-14",children:"Ledger No"})]})}),(0,c.jsx)("tbody",{children:e.data.PaymentDetails.map(((e,t)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"border",children:t+1}),(0,c.jsx)("td",{className:"border",children:e.Invoice_No}),(0,c.jsx)("td",{className:"border",children:e.Bal_Amount}),(0,c.jsx)("td",{className:"border",children:e.Ledger_Name})]},t)))})]})})});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(i.c,{children:[(0,c.jsx)("div",{className:"p-3 border-bottom",children:(0,c.jsx)("h6",{className:"fa-18 mb-0",children:"Payment Report"})}),(0,c.jsxs)(u.c,{children:[(0,c.jsxs)("div",{className:"d-sm-flex justify-content-between mb-3",children:[(0,c.jsxs)("select",{style:{padding:10},className:"cus-inpt w-auto rounded-2",value:y.payStatus,onChange:e=>N((0,s.c)((0,s.c)({},y),{},{payStatus:e.target.value})),children:[(0,c.jsx)("option",{value:"0",children:"Verification Pending List"}),(0,c.jsx)("option",{value:"1",children:"Verified"}),(0,c.jsx)("option",{value:"2",children:"Rejected"})]}),(0,c.jsx)("div",{className:"flex-column mt-sm-0 mt-2",children:(0,c.jsx)("input",{type:"search",className:"cus-inpt w-auto rounded-5",value:y.searchData,onChange:e=>{N((0,s.c)((0,s.c)({},y),{},{searchData:e.target.value}))},placeholder:"Search..."})})]}),(0,c.jsx)(V,{})]})]}),(0,c.jsxs)(m.c,{open:S,onClose:()=>{g(!1),B()},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",maxWidth:"md",fullWidth:!0,children:[(0,c.jsx)(h.c,{id:"alert-dialog-title",children:"Payment Action"}),(0,c.jsxs)(x.c,{children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{children:"Discrition"}),(0,c.jsx)("textarea",{rows:"3",className:"cus-inpt shadow-none",maxLength:330,onChange:e=>w((0,s.c)((0,s.c)({},A),{},{discribtion:e.target.value})),value:A.discribtion})]}),(0,c.jsxs)("div",{className:"row",children:[(0,c.jsxs)("div",{className:"col-md-6 ",children:[(0,c.jsx)("label",{children:"Verification Date"}),(0,c.jsx)("input",{type:"date",className:"cus-inpt",onChange:e=>w((0,s.c)((0,s.c)({},A),{},{date:e.target.value})),value:A.date})]}),(0,c.jsxs)("div",{className:"col-md-6 ",children:[(0,c.jsx)("label",{children:"Status"}),(0,c.jsxs)("select",{style:{padding:12},className:"cus-inpt",onChange:e=>w((0,s.c)((0,s.c)({},A),{},{verifyStatus:e.target.value})),value:A.verifyStatus,children:[(0,c.jsx)("option",{value:"0",children:"Verification Pending"}),(0,c.jsx)("option",{value:"1",children:"Verify"}),(0,c.jsx)("option",{value:"2",children:"Reject"})]})]})]})]}),(0,c.jsxs)(p.c,{children:[(0,c.jsx)(j.c,{onClick:()=>{g(!1),B()},children:"Close"}),(0,c.jsx)(j.c,{onClick:()=>{M||(0,C.q)({address:"userModule/customer/payment/verification",method:"POST",bodyData:{Pay_Id:A.Pay_Id,description:A.discribtion,verifiedDate:A.date,verifyStatus:A.verifyStatus}}).then((e=>{e.success?(l.m4.success(e.message),B(),g(!1),I(!D)):l.m4.error(e.message)})).catch((e=>console.error(e)))},autoFocus:!0,children:"Submit"})]})]})]})}},84436:(e,t,a)=>{a.d(t,{c:()=>j});var s=a(45072),r=a(95656),o=a(69060),c=a(79736),n=a(21412),l=a(12556),d=a(49836),i=a(10099),u=a(33448);function m(e){return(0,u.cp)("MuiCardContent",e)}(0,i.c)("MuiCardContent",["root"]);var h=a(82496);const x=["className","component"],p=(0,l.cp)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),j=o.forwardRef((function(e,t){const a=(0,d.C)({props:e,name:"MuiCardContent"}),{className:o,component:l="div"}=a,i=(0,r.c)(a,x),u=(0,s.c)({},a,{component:l}),j=(e=>{const{classes:t}=e;return(0,n.c)({root:["root"]},m,t)})(u);return(0,h.jsx)(p,(0,s.c)({as:l,className:(0,c.c)(j.root,o),ownerState:u,ref:t},i))}))},43692:(e,t,a)=>{a.d(t,{c:()=>v});var s=a(45072),r=a(95656),o=a(69060),c=a(79736),n=a(21412),l=a(12556),d=a(49836),i=a(85624),u=a(10099),m=a(33448);function h(e){return(0,m.cp)("MuiCard",e)}(0,u.c)("MuiCard",["root"]);var x=a(82496);const p=["className","raised"],j=(0,l.cp)(i.c,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),v=o.forwardRef((function(e,t){const a=(0,d.C)({props:e,name:"MuiCard"}),{className:o,raised:l=!1}=a,i=(0,r.c)(a,p),u=(0,s.c)({},a,{raised:l}),m=(e=>{const{classes:t}=e;return(0,n.c)({root:["root"]},h,t)})(u);return(0,x.jsx)(j,(0,s.c)({className:(0,c.c)(m.root,o),elevation:l?8:void 0,ref:t,ownerState:u},i))}))}}]);
//# sourceMappingURL=5680.56f6fe4a.chunk.js.map