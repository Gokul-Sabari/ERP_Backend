"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[580],{30580:(e,a,s)=>{s.r(a),s.d(a,{default:()=>y});var r=s(69060),l=s(44380),c=s(5548),t=s(82656),o=s(26773),n=s(4488),i=s(4016),d=s(21420),u=s(93996),p=s(90048),m=s(75848),h=s(89e3),x=s(56480),j=s(42136),_=s(57704),g=s(86e3),N=s(45180),C=s(1908),G=s(13724),A=s(82496);const v={Group_Id:"",Group_Name:"",Alias_Name:"",Parent_AC_id:""};const y=function(){const[e,a]=(0,r.useState)(!1),[s,y]=(0,r.useState)(!1),[f,b]=(0,r.useState)(!1),[w,S]=(0,r.useState)(v),[I,P]=(0,r.useState)(!1),[k,E]=(0,r.useState)([]),[F,q]=(0,r.useState)([]),[D,z]=(0,r.useState)([]),[L,V]=(0,r.useState)(""),[W,T]=(0,r.useState)(!1),U=JSON.parse(localStorage.getItem("user")),O=null===U||void 0===U?void 0:U.UserId;(0,r.useEffect)((()=>{(async()=>{try{const e=await(0,C.q)({address:"masters/accountGroup"});e.success&&(E(e.data),q(e.data))}catch(e){console.error(e),x.m4.error("Failed to load account groups")}})()}),[e]),(0,r.useEffect)((()=>{(async()=>{try{const e=await(0,C.q)({address:"masters/account/dropdown"});e.success&&z(e.data)}catch(e){console.error(e),x.m4.error("Failed to load group dropdown")}})()}),[]),(0,r.useEffect)((()=>{if(""===L.trim())q(k);else{const e=k.filter((e=>{var a,s;return(null===(a=e.Group_Name)||void 0===a?void 0:a.toLowerCase().includes(L.toLowerCase()))||(null===(s=e.Alias_Name)||void 0===s?void 0:s.toLowerCase().includes(L.toLowerCase()))}));q(e)}}),[L,k]);const B=()=>{W||(b(!1),S(v))},H=()=>{W||(P(!1),S(v))},M=()=>{W||y(!1)};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:"card",children:[(0,A.jsxs)("div",{className:"card-header bg-white fw-bold d-flex align-items-center justify-content-between",children:["Account Group Master",(0,A.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,A.jsx)("div",{style:{width:"300px"},children:(0,A.jsx)(l.c,{fullWidth:!0,size:"small",variant:"outlined",placeholder:"Search Group...",value:L,onChange:e=>V(e.target.value),InputProps:{startAdornment:(0,A.jsx)(_.c,{fontSize:"small",sx:{mr:1}}),style:{height:"40px"}}})}),(0,A.jsx)(j.c,{variant:"contained",size:"small",className:"rounded-1 btn-primary",onClick:()=>{b(!0),S(v)},sx:{textTransform:"none",fontWeight:500,px:2,height:"40px"},children:"Create Account Master"})]})]}),(0,A.jsx)(G.cp,{dataArray:F,EnableSerialNumber:!0,maxHeightOption:!0,columns:[(0,G.A5)("Group_Name","string","Group"),(0,G.A5)("Alias_name","string","Alias Name"),(0,G.A5)("Parent_Group_Name","string","Parent AC"),{ColumnHeader:"Actions",isVisible:1,isCustomCell:!0,Cell:e=>{let{row:a}=e;return(0,A.jsxs)("td",{style:{minWidth:"80px"},children:[(0,A.jsx)(c.c,{onClick:()=>(e=>{console.log("row",e),S({Group_Id:e.Group_Id,Group_Name:e.Group_Name,Alias_Name:e.Alias_name,Parent_AC_id:e.Parent_AC_id}),P(!0)})(a),size:"small",children:(0,A.jsx)(g.c,{})}),(0,A.jsx)(c.c,{onClick:()=>{y(!0),S({Group_Id:a.Group_Id,Group_Name:a.Group_Name})},size:"small",color:"error",children:(0,A.jsx)(N.c,{})})]})}}]})]}),(0,A.jsxs)(t.c,{open:f,onClose:B,children:[(0,A.jsx)(o.c,{children:"Create Account Group"}),(0,A.jsxs)(n.c,{children:[(0,A.jsxs)("div",{className:"p-2",children:[(0,A.jsx)("label",{children:"Group Name*"}),(0,A.jsx)("input",{type:"text",value:w.Group_Name,onChange:e=>S({...w,Group_Name:e.target.value}),className:"cus-inpt",placeholder:"Enter Group Name"})]}),(0,A.jsxs)("div",{className:"p-2",children:[(0,A.jsx)("label",{children:"Alias Name*"}),(0,A.jsx)("input",{type:"text",placeholder:"Alias Name",value:w.Alias_Name,onChange:e=>S({...w,Alias_Name:e.target.value}),className:"cus-inpt"})]}),(0,A.jsxs)("div",{className:"p-2",children:[(0,A.jsx)("label",{children:"Parent Account Group"}),(0,A.jsx)(i.c,{fullWidth:!0,children:(0,A.jsxs)(d.c,{labelId:"parent-group-select-label",value:w.Parent_AC_id,onChange:e=>S({...w,Parent_AC_id:e.target.value}),displayEmpty:!0,children:[(0,A.jsx)(u.c,{value:"",children:(0,A.jsx)("em",{children:"None"})}),D.map((e=>(0,A.jsx)(u.c,{value:e.Value,children:e.label},e.Value)))]})})]})]}),(0,A.jsxs)(p.c,{children:[(0,A.jsx)(h.c,{onClick:B,disabled:W,children:"Cancel"}),(0,A.jsx)(h.c,{onClick:async()=>{const{Group_Name:e,Alias_Name:s}=w;if(e&&s){T(!0);try{const e=await(0,C.q)({address:"masters/accountGroup",method:"POST",bodyData:{...w,Created_By:O}});e.success?(x.m4.success("Account group created successfully!"),b(!1),S(v),a((e=>!e))):x.m4.error(e.message)}catch(r){console.error(r),x.m4.error("Failed to create account group")}finally{T(!1)}}else x.m4.error("Please fill all required fields.")},color:"primary",disabled:W||!w.Group_Name,children:W?"Creating...":"Create"})]})]}),(0,A.jsxs)(t.c,{open:I,onClose:H,children:[(0,A.jsx)(o.c,{children:"Edit Account Group"}),(0,A.jsxs)(n.c,{children:[(0,A.jsxs)("div",{className:"p-2",children:[(0,A.jsx)("label",{children:"Group Name*"}),(0,A.jsx)("input",{type:"text",value:w.Group_Name,onChange:e=>S({...w,Group_Name:e.target.value}),className:"cus-inpt"})]}),(0,A.jsxs)("div",{className:"p-2",children:[(0,A.jsx)("label",{children:"Alias Name*"}),(0,A.jsx)("input",{type:"text",value:w.Alias_Name,onChange:e=>S({...w,Alias_Name:e.target.value}),className:"cus-inpt"})]}),(0,A.jsxs)("div",{className:"p-2",children:[(0,A.jsx)("label",{children:"Parent Account Group"}),(0,A.jsx)(i.c,{fullWidth:!0,children:(0,A.jsxs)(d.c,{labelId:"parent-group-edit-select-label",value:w.Parent_AC_id,onChange:e=>S({...w,Parent_AC_id:e.target.value}),displayEmpty:!0,children:[(0,A.jsx)(u.c,{value:"",children:(0,A.jsx)("em",{children:"None"})}),D.map((e=>(0,A.jsx)(u.c,{value:e.Value,children:e.label},e.Value)))]})})]})]}),(0,A.jsxs)(p.c,{children:[(0,A.jsx)(h.c,{onClick:H,disabled:W,children:"Cancel"}),(0,A.jsx)(h.c,{onClick:()=>{const{Group_Id:s,Group_Name:r}=w;s&&r?(T(!0),(0,C.q)({address:"masters/accountGroup",method:"PUT",bodyData:{...w,Alter_By:O}}).then((s=>{s.success?(x.m4.success("Account group updated successfully!"),P(!1),S(v),a(!e)):x.m4.error(s.message)})).catch((e=>{console.error(e),x.m4.error("Failed to update account group")})).finally((()=>T(!1)))):x.m4.error("All required fields must be filled.")},color:"primary",disabled:W||!w.Group_Name,children:W?"Updating...":"Update"})]})]}),(0,A.jsxs)(t.c,{open:s,onClose:M,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,A.jsx)(o.c,{id:"alert-dialog-title",children:"Confirmation"}),(0,A.jsx)(n.c,{children:(0,A.jsx)(m.c,{id:"alert-dialog-description",children:(0,A.jsx)("b",{children:`Do you want to delete the ${w.Group_Name} Group?`})})}),(0,A.jsxs)(p.c,{children:[(0,A.jsx)(h.c,{onClick:M,children:"Cancel"}),(0,A.jsx)(h.c,{onClick:async()=>{T(!0);const e=w.Group_Id;try{E((a=>a.filter((a=>a.Group_Id!==e)))),q((a=>a.filter((a=>a.Group_Id!==e))));const s=await(0,C.q)({address:"masters/accountGroup",method:"DELETE",bodyData:{Group_Id:e}});s.success?x.m4.success("Account group deleted successfully!"):(a((e=>!e)),x.m4.error(s.message||"Failed to delete account group"))}catch(s){console.error(s),a((e=>!e)),x.m4.error("Failed to delete account group")}finally{T(!1),y(!1)}},autoFocus:!0,sx:{color:"red"},children:W?"Deleting...":"Delete"})]})]})]})}}}]);
//# sourceMappingURL=580.b0047c2e.chunk.js.map