"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[3068,3692,1312],{60687:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var s=a(30800),r=a(69060),n=a(41459),c=a(46864),l=a(43692),o=a(84436),d=a(39308),i=a(1908),u=a(82496);const m=()=>{const e=JSON.parse(localStorage.getItem("user")),[t,a]=(0,r.useState)([]),[m,h]=(0,r.useState)({zero:!1,inm:"",date:(new Date).toISOString().split("T")[0]}),[x,p]=(0,r.useState)(!0);(0,r.useEffect)((()=>{null!==e&&void 0!==e&&e.Company_id&&(a([]),(0,i.q)({address:"reports/stockReport?ReportDate=".concat(m.date),headers:{Db:null===e||void 0===e?void 0:e.Company_id}}).then((e=>{e.success?a(e.data):a([])})).catch((e=>console.error(e))))}),[m.date]);const j=(0,r.useMemo)((()=>null!==t?t.map((e=>{const t=e.product_details.filter((e=>(m.zero||0!==Number(e.Bal_Qty))&&(!m.inm||e.Group_Name.toLowerCase().includes(m.inm.toLowerCase()))));return(0,s.c)((0,s.c)({},e),{},{product_details:t})})):[]),[t,m.zero,m.inm]),f=e=>{var t;let{rows:a}=e;const[s,l]=(0,r.useState)(!1),[o,i]=(0,r.useState)(!0),m=e=>{var t;let s=0;return null===a||void 0===a||null===(t=a.product_details)||void 0===t||t.forEach((t=>{s+=Number(t[e])})),Number(s)};function h(){var e;let t=0;return null===a||void 0===a||null===(e=a.product_details)||void 0===e||e.forEach((e=>{e.CL_Rate&&(t+=Number(e.CL_Rate))})),t/(null===a||void 0===a?void 0:a.product_details.length)}return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{className:"border fa-13 text-center",children:(0,u.jsx)("button",{onClick:()=>l(!s),className:"icon-btn",children:s?(0,u.jsx)(n.c,{sx:{fontSize:"inherit"}}):(0,u.jsx)(c.c,{sx:{fontSize:"inherit"}})})}),(0,u.jsxs)("td",{className:"fa-13 text-center bg-light",children:[a.Stock_Group,(0,u.jsxs)("span",{className:"text-danger",children:[" (",a.product_details.length,")"]})]}),(0,u.jsx)("td",{className:"fa-13 text-end text-primary",children:(0,d.SA)(m("Bal_Qty")/1e3)}),(0,u.jsx)("td",{className:"fa-13 text-end text-primary bg-light",children:h()?(0,d.SA)(h()):0}),(0,u.jsx)("td",{className:"fa-13 text-end text-primary",onClick:()=>i(!o),children:o?(0,d.SA)(m("Stock_Value")/1e5):(0,d.SA)(m("Stock_Value"))}),(0,u.jsx)("td",{className:"fa-13 text-end text-primary bg-light",children:(0,d.SA)(m("Bal_Qty"))})]}),s&&(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:6,className:"px-0 py-2",children:(0,u.jsxs)("table",{className:"table mb-0",children:[(0,u.jsx)("thead",{children:(0,u.jsx)("tr",{children:["SNo","INM","Quantity","Rate","Value (\u20b9)"].map(((e,t)=>(0,u.jsx)("th",{className:"fa-13 border text-center",children:e},t)))})}),(0,u.jsx)("tbody",{children:null===a||void 0===a||null===(t=a.product_details)||void 0===t?void 0:t.map(((e,t)=>(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{className:"fa-13 bg-light",children:t+1}),(0,u.jsx)("td",{className:"fa-13",children:e.Group_Name}),(0,u.jsx)("td",{className:"fa-13 text-end bg-light",children:(0,d.SA)(e.Bal_Qty)}),(0,u.jsx)("td",{className:"fa-13 text-end",children:(0,d.SA)(e.CL_Rate)}),(0,u.jsx)("td",{className:"fa-13 text-end fw-bold bg-light",children:(0,d.SA)(e.Stock_Value)})]},t)))})]})})})]})},N=(0,r.useMemo)((()=>j.map(((e,t)=>(0,u.jsx)(f,{rows:e},t)))),[j,m.zero]),v=()=>{let e=0;return j.forEach((t=>{t.product_details.forEach((t=>{e+=Number(t.Stock_Value)}))})),e};return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(l.c,{children:[(0,u.jsxs)("div",{className:"px-3 py-2 d-flex justify-content-between align-items-center fw-bold text-dark",style:{backgroundColor:"#eae0cc"},children:[(0,u.jsx)("span",{children:null===e||void 0===e?void 0:e.Company_Name}),(0,u.jsx)("span",{children:(0,u.jsx)("input",{type:"search",className:"cus-inpt ps-3 w-100 rounded-5 border-0",value:m.inm,placeholder:"Search",onChange:e=>{h((0,s.c)((0,s.c)({},m),{},{inm:e.target.value}))}})})]}),(0,u.jsxs)("div",{className:"d-flex justify-content-between align-items-center px-3 py-2",style:{boxShadow:"none"},children:[(0,u.jsx)("input",{type:"date",className:"cus-inpt w-auto ps-3 border rounded-5",value:m.date,onChange:e=>{h((0,s.c)((0,s.c)({},m),{},{date:e.target.value}))}}),(0,u.jsx)("h6",{children:(0,u.jsxs)("span",{className:"text-primary fw-bold",onClick:()=>p(!x),children:["\u20b9",x?(0,d.SA)(v()/1e5)+" (L)":(0,d.SA)(v())]})})]}),(0,u.jsx)(o.c,{className:"overflow-scroll pt-0",style:{maxHeight:"75vh"},children:(0,u.jsxs)("table",{className:"table",children:[(0,u.jsx)("thead",{children:(0,u.jsx)("tr",{children:["-","Group Name","Tonnage","Rate","Value (L)","Quantity"].map(((e,t)=>(0,u.jsx)("th",{className:"tble-hed-stick text-center fa-14 border",children:e},t)))})}),(0,u.jsx)("tbody",{children:N})]})})]})})}},84436:(e,t,a)=>{a.d(t,{c:()=>j});var s=a(45072),r=a(95656),n=a(69060),c=a(79736),l=a(21412),o=a(12556),d=a(49836),i=a(10099),u=a(33448);function m(e){return(0,u.cp)("MuiCardContent",e)}(0,i.c)("MuiCardContent",["root"]);var h=a(82496);const x=["className","component"],p=(0,o.cp)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),j=n.forwardRef((function(e,t){const a=(0,d.C)({props:e,name:"MuiCardContent"}),{className:n,component:o="div"}=a,i=(0,r.c)(a,x),u=(0,s.c)({},a,{component:o}),j=(e=>{const{classes:t}=e;return(0,l.c)({root:["root"]},m,t)})(u);return(0,h.jsx)(p,(0,s.c)({as:o,className:(0,c.c)(j.root,n),ownerState:u,ref:t},i))}))},43692:(e,t,a)=>{a.d(t,{c:()=>f});var s=a(45072),r=a(95656),n=a(69060),c=a(79736),l=a(21412),o=a(12556),d=a(49836),i=a(85624),u=a(10099),m=a(33448);function h(e){return(0,m.cp)("MuiCard",e)}(0,u.c)("MuiCard",["root"]);var x=a(82496);const p=["className","raised"],j=(0,o.cp)(i.c,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),f=n.forwardRef((function(e,t){const a=(0,d.C)({props:e,name:"MuiCard"}),{className:n,raised:o=!1}=a,i=(0,r.c)(a,p),u=(0,s.c)({},a,{raised:o}),m=(e=>{const{classes:t}=e;return(0,l.c)({root:["root"]},h,t)})(u);return(0,x.jsx)(j,(0,s.c)({className:(0,c.c)(m.root,n),elevation:o?8:void 0,ref:t,ownerState:u},i))}))}}]);
//# sourceMappingURL=3068.a035b670.chunk.js.map