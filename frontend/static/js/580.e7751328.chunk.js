"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[580],{30580:(e,a,s)=>{s.r(a),s.d(a,{default:()=>f});var r=s(30800),l=s(69060),c=s(44380),t=s(5548),o=s(82656),n=s(26773),i=s(4488),d=s(4016),u=s(21420),p=s(93996),m=s(90048),h=s(75848),x=s(89e3),j=s(56480),_=s(42136),g=s(57704),N=s(86e3),C=s(45180),G=s(1908),A=s(13724),v=s(82496);const y={Group_Id:"",Group_Name:"",Alias_Name:"",Parent_AC_id:""};const f=function(){const[e,a]=(0,l.useState)(!1),[s,f]=(0,l.useState)(!1),[b,w]=(0,l.useState)(!1),[S,I]=(0,l.useState)(y),[P,k]=(0,l.useState)(!1),[E,F]=(0,l.useState)([]),[q,D]=(0,l.useState)([]),[z,L]=(0,l.useState)([]),[V,W]=(0,l.useState)(""),[T,U]=(0,l.useState)(!1),O=JSON.parse(localStorage.getItem("user")),B=null===O||void 0===O?void 0:O.UserId;(0,l.useEffect)((()=>{(async()=>{try{const e=await(0,G.q)({address:"masters/accountGroup"});e.success&&(F(e.data),D(e.data))}catch(e){console.error(e),j.m4.error("Failed to load account groups")}})()}),[e]),(0,l.useEffect)((()=>{(async()=>{try{const e=await(0,G.q)({address:"masters/account/dropdown"});e.success&&L(e.data)}catch(e){console.error(e),j.m4.error("Failed to load group dropdown")}})()}),[]),(0,l.useEffect)((()=>{if(""===V.trim())D(E);else{const e=E.filter((e=>{var a,s;return(null===(a=e.Group_Name)||void 0===a?void 0:a.toLowerCase().includes(V.toLowerCase()))||(null===(s=e.Alias_Name)||void 0===s?void 0:s.toLowerCase().includes(V.toLowerCase()))}));D(e)}}),[V,E]);const H=()=>{T||(w(!1),I(y))},M=()=>{T||(k(!1),I(y))},J=()=>{T||f(!1)};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"card",children:[(0,v.jsxs)("div",{className:"card-header bg-white fw-bold d-flex align-items-center justify-content-between",children:["Account Group Master",(0,v.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,v.jsx)("div",{style:{width:"300px"},children:(0,v.jsx)(c.c,{fullWidth:!0,size:"small",variant:"outlined",placeholder:"Search Group...",value:V,onChange:e=>W(e.target.value),InputProps:{startAdornment:(0,v.jsx)(g.c,{fontSize:"small",sx:{mr:1}}),style:{height:"40px"}}})}),(0,v.jsx)(_.c,{variant:"contained",size:"small",className:"rounded-1 btn-primary",onClick:()=>{w(!0),I(y)},sx:{textTransform:"none",fontWeight:500,px:2,height:"40px"},children:"Create Account Master"})]})]}),(0,v.jsx)(A.cp,{dataArray:q,EnableSerialNumber:!0,maxHeightOption:!0,columns:[(0,A.A5)("Group_Name","string","Group"),(0,A.A5)("Alias_name","string","Alias Name"),(0,A.A5)("Parent_Group_Name","string","Parent AC"),{ColumnHeader:"Actions",isVisible:1,isCustomCell:!0,Cell:e=>{let{row:a}=e;return(0,v.jsxs)("td",{style:{minWidth:"80px"},children:[(0,v.jsx)(t.c,{onClick:()=>(e=>{console.log("row",e),I({Group_Id:e.Group_Id,Group_Name:e.Group_Name,Alias_Name:e.Alias_name,Parent_AC_id:e.Parent_AC_id}),k(!0)})(a),size:"small",children:(0,v.jsx)(N.c,{})}),(0,v.jsx)(t.c,{onClick:()=>{f(!0),I({Group_Id:a.Group_Id,Group_Name:a.Group_Name})},size:"small",color:"error",children:(0,v.jsx)(C.c,{})})]})}}]})]}),(0,v.jsxs)(o.c,{open:b,onClose:H,children:[(0,v.jsx)(n.c,{children:"Create Account Group"}),(0,v.jsxs)(i.c,{children:[(0,v.jsxs)("div",{className:"p-2",children:[(0,v.jsx)("label",{children:"Group Name*"}),(0,v.jsx)("input",{type:"text",value:S.Group_Name,onChange:e=>I((0,r.c)((0,r.c)({},S),{},{Group_Name:e.target.value})),className:"cus-inpt",placeholder:"Enter Group Name"})]}),(0,v.jsxs)("div",{className:"p-2",children:[(0,v.jsx)("label",{children:"Alias Name*"}),(0,v.jsx)("input",{type:"text",placeholder:"Alias Name",value:S.Alias_Name,onChange:e=>I((0,r.c)((0,r.c)({},S),{},{Alias_Name:e.target.value})),className:"cus-inpt"})]}),(0,v.jsxs)("div",{className:"p-2",children:[(0,v.jsx)("label",{children:"Parent Account Group"}),(0,v.jsx)(d.c,{fullWidth:!0,children:(0,v.jsxs)(u.c,{labelId:"parent-group-select-label",value:S.Parent_AC_id,onChange:e=>I((0,r.c)((0,r.c)({},S),{},{Parent_AC_id:e.target.value})),displayEmpty:!0,children:[(0,v.jsx)(p.c,{value:"",children:(0,v.jsx)("em",{children:"None"})}),z.map((e=>(0,v.jsx)(p.c,{value:e.Value,children:e.label},e.Value)))]})})]})]}),(0,v.jsxs)(m.c,{children:[(0,v.jsx)(x.c,{onClick:H,disabled:T,children:"Cancel"}),(0,v.jsx)(x.c,{onClick:async()=>{const{Group_Name:e,Alias_Name:s}=S;if(e&&s){U(!0);try{const e=await(0,G.q)({address:"masters/accountGroup",method:"POST",bodyData:(0,r.c)((0,r.c)({},S),{},{Created_By:B})});e.success?(j.m4.success("Account group created successfully!"),w(!1),I(y),a((e=>!e))):j.m4.error(e.message)}catch(l){console.error(l),j.m4.error("Failed to create account group")}finally{U(!1)}}else j.m4.error("Please fill all required fields.")},color:"primary",disabled:T||!S.Group_Name,children:T?"Creating...":"Create"})]})]}),(0,v.jsxs)(o.c,{open:P,onClose:M,children:[(0,v.jsx)(n.c,{children:"Edit Account Group"}),(0,v.jsxs)(i.c,{children:[(0,v.jsxs)("div",{className:"p-2",children:[(0,v.jsx)("label",{children:"Group Name*"}),(0,v.jsx)("input",{type:"text",value:S.Group_Name,onChange:e=>I((0,r.c)((0,r.c)({},S),{},{Group_Name:e.target.value})),className:"cus-inpt"})]}),(0,v.jsxs)("div",{className:"p-2",children:[(0,v.jsx)("label",{children:"Alias Name*"}),(0,v.jsx)("input",{type:"text",value:S.Alias_Name,onChange:e=>I((0,r.c)((0,r.c)({},S),{},{Alias_Name:e.target.value})),className:"cus-inpt"})]}),(0,v.jsxs)("div",{className:"p-2",children:[(0,v.jsx)("label",{children:"Parent Account Group"}),(0,v.jsx)(d.c,{fullWidth:!0,children:(0,v.jsxs)(u.c,{labelId:"parent-group-edit-select-label",value:S.Parent_AC_id,onChange:e=>I((0,r.c)((0,r.c)({},S),{},{Parent_AC_id:e.target.value})),displayEmpty:!0,children:[(0,v.jsx)(p.c,{value:"",children:(0,v.jsx)("em",{children:"None"})}),z.map((e=>(0,v.jsx)(p.c,{value:e.Value,children:e.label},e.Value)))]})})]})]}),(0,v.jsxs)(m.c,{children:[(0,v.jsx)(x.c,{onClick:M,disabled:T,children:"Cancel"}),(0,v.jsx)(x.c,{onClick:()=>{const{Group_Id:s,Group_Name:l}=S;s&&l?(U(!0),(0,G.q)({address:"masters/accountGroup",method:"PUT",bodyData:(0,r.c)((0,r.c)({},S),{},{Alter_By:B})}).then((s=>{s.success?(j.m4.success("Account group updated successfully!"),k(!1),I(y),a(!e)):j.m4.error(s.message)})).catch((e=>{console.error(e),j.m4.error("Failed to update account group")})).finally((()=>U(!1)))):j.m4.error("All required fields must be filled.")},color:"primary",disabled:T||!S.Group_Name,children:T?"Updating...":"Update"})]})]}),(0,v.jsxs)(o.c,{open:s,onClose:J,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,v.jsx)(n.c,{id:"alert-dialog-title",children:"Confirmation"}),(0,v.jsx)(i.c,{children:(0,v.jsx)(h.c,{id:"alert-dialog-description",children:(0,v.jsx)("b",{children:"Do you want to delete the ".concat(S.Group_Name," Group?")})})}),(0,v.jsxs)(m.c,{children:[(0,v.jsx)(x.c,{onClick:J,children:"Cancel"}),(0,v.jsx)(x.c,{onClick:async()=>{U(!0);const e=S.Group_Id;try{F((a=>a.filter((a=>a.Group_Id!==e)))),D((a=>a.filter((a=>a.Group_Id!==e))));const s=await(0,G.q)({address:"masters/accountGroup",method:"DELETE",bodyData:{Group_Id:e}});s.success?j.m4.success("Account group deleted successfully!"):(a((e=>!e)),j.m4.error(s.message||"Failed to delete account group"))}catch(s){console.error(s),a((e=>!e)),j.m4.error("Failed to delete account group")}finally{U(!1),f(!1)}},autoFocus:!0,sx:{color:"red"},children:T?"Deleting...":"Delete"})]})]})]})}}}]);
//# sourceMappingURL=580.e7751328.chunk.js.map