"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[1008],{2940:(e,s,l)=>{l.d(s,{c:()=>r});var t=l(69060),a=l(47620),d=(l(34688),l(82496));const r=e=>{let{TasksArray:s}=e;const[l,r]=(0,t.useState)(null),[i,n]=(0,t.useState)(null),[o,c]=(0,t.useState)(null);(0,t.useEffect)((()=>{if(s.length>0){const e=s.reduce(((e,s)=>{const l=new Date((new Date).toISOString().split("T")[0]+"T"+s.Start_Time);return e+(new Date((new Date).toISOString().split("T")[0]+"T"+s.End_Time)-l)}),0),l=new Date((new Date).toISOString().split("T")[0]+"T"+s[0].Start_Time),t=new Date((new Date).toISOString().split("T")[0]+"T"+s[s.length-1].End_Time)-l,a=t-e,d=Math.floor(t/1e3),i=Math.floor(d/3600),n=Math.floor(d%3600/60),o=d%60;c(`${String(i).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(o).padStart(2,"0")}`);const h=s.map((e=>{const s=new Date((new Date).toISOString().split("T")[0]+"T"+e.Start_Time),l=new Date((new Date).toISOString().split("T")[0]+"T"+e.End_Time)-s;return{label:`${e.Task_Name} (${e.Start_Time} - ${e.End_Time})`,duration:l,backgroundColor:m()}})),u={labels:h.map((e=>e.label)),datasets:[{data:h.map((e=>e.duration)),backgroundColor:h.map((e=>e.backgroundColor)),borderColor:"rgba(255, 255, 255, 1)",borderWidth:1}]};u.labels.push("Free Time"),u.datasets[0].data.push(a),u.datasets[0].backgroundColor.push("#ADD8E6"),r(u)}}),[s]),(0,t.useEffect)((()=>{if(l){i&&i.destroy();const e=document.getElementById("empWokHours"),s=new a.cp(e,{type:"pie",data:l,options:{responsive:!0,plugins:{tooltip:{callbacks:{label:function(e){const s=e.parsed||0,l=e.dataset.data.reduce(((e,s)=>e+s),0),t=Math.round(s/l*100);return`${Math.round(s/6e4)} minutes (${t}%)`}}},datalabels:{color:"#fff",formatter:(e,s)=>{const l=s.chart.data.labels[s.dataIndex],t=s.parsed||0,a=s.dataset.data.reduce(((e,s)=>e+s),0);return`${l}: ${e} (${Math.round(t/a*100)}%)`}}}}});n(s)}}),[l]);const m=()=>{let e="#";for(let s=0;s<6;s++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e};return s.length>0?(0,d.jsxs)("div",{className:"d-flex flex-column align-items-center my-3",style:{maxHeight:"500px"},children:[o&&(0,d.jsxs)("p",{className:"my-2",children:["Total Time: ",o]}),(0,d.jsx)("canvas",{id:"empWokHours",width:"400",height:"100"})]}):(0,d.jsx)("h5",{className:"text-center my-5",children:"No Data For PieChart!"})}},70408:(e,s,l)=>{l.r(s),l.d(s,{default:()=>J});var t=l(69060),a=l(94968),d=l(32440),r=l(85400),i=l(57876),n=l(60832),o=l(49124),c=l(2940),m=l(36852),h=l(78092),u=l(43692),x=l(84436),v=l(11096),j=l(85624),N=l(56640),b=l(82656),p=l(26773),f=l(89e3),g=l(4488),S=l(90048),y=l(33452),C=l(35832);const T=l.p+"static/media/ic_launcher.aa4d4f940bbebff07a57.png";var _=l(1908),D=l(82496);const I=()=>{var e,s,l,a,d,r,i,n,o,c;const m=JSON.parse(localStorage.getItem("user")),[h,u]=(0,t.useState)(!1),[x,v]=(0,t.useState)([]),j=null===m||void 0===m?void 0:m.UserId,[I,k]=(0,t.useState)(0),[w,E]=(0,t.useState)(!1),[A,L]=(0,t.useState)([]),[U,$]=(0,t.useState)({}),O=new Date,P=new Date(O.getFullYear(),O.getMonth(),2),[R,z]=(0,t.useState)({from:P.toISOString().split("T")[0],to:(new Date).toISOString().split("T")[0]}),B=T,[V,M]=(0,t.useState)({debit:0,credit:0}),q=(0,t.useRef)();(0,t.useEffect)((()=>{(0,_.q)({address:`userModule/customer/getBalance?UserId=${j}`}).then((e=>{if("Success"===e.status){var s;v(e.data);let l=0;null===(s=e.data)||void 0===s||s.forEach((e=>{l+=Number(e.Bal_Amount)})),k(l)}null!==e&&void 0!==e&&e.isCustomer?u(!0):u(!1)})).catch((e=>console.error(e)))}),[]);const F=(e,s)=>{var l,t,a;let d;d=s&&1===s?U:e,$(d),E(!0),(0,_.q)({address:`userModule/customer/StatementOfAccound?Cust_Id=${null===(l=d)||void 0===l?void 0:l.Cust_Id}&Acc_Id=${null===(t=d)||void 0===t?void 0:t.tally_id}&Company_Id=${null===(a=d)||void 0===a?void 0:a.Company_Id}&Fromdate=${null===R||void 0===R?void 0:R.from}&Todate=${null===R||void 0===R?void 0:R.to}`}).then((e=>{var s;L(e.data);let l={debit:0,credit:0};null===e||void 0===e||null===(s=e.data)||void 0===s||s.forEach((e=>{l.debit+=Number(e.Debit_Amt),l.credit+=Number(e.Credit_Amt)})),M(l)})).catch((e=>console.error(e)))},W=()=>{E(!1),L([]),$({}),z({from:P.toISOString().split("T")[0],to:(new Date).toISOString().split("T")[0]})},Q=(0,y.useReactToPrint)({content:()=>q.current});return h?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{className:"card",children:[(0,D.jsx)("div",{className:"card-header py-3 bg-white",children:(0,D.jsxs)("p",{className:"mb-0 fw-bold",children:[(0,D.jsxs)("span",{children:["Balance of ",null===m||void 0===m?void 0:m.Name]}),(0,D.jsxs)("span",{className:I>0?"text-primary":"text-danger",children:[" \xa0( ",I.toLocaleString("en-IN")+(I<0?" CR":" DR")," )"]})]})}),(0,D.jsx)("div",{className:"card-body p-0 table-responsive",children:(0,D.jsxs)("table",{className:"table",children:[(0,D.jsx)("thead",{children:(0,D.jsxs)("tr",{children:[(0,D.jsx)("th",{style:{fontSize:"13px"},children:"S.No"}),(0,D.jsx)("th",{style:{fontSize:"13px"},children:" - "}),(0,D.jsx)("th",{style:{fontSize:"13px"},children:"Company"}),(0,D.jsx)("th",{style:{fontSize:"13px"},children:"Ledger"}),(0,D.jsx)("th",{style:{fontSize:"13px"},children:"Balance"}),(0,D.jsx)("th",{style:{fontSize:"13px"},children:"Dr/Cr"})]})}),(0,D.jsx)("tbody",{children:x.map(((e,s)=>{var l;return(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{style:{fontSize:"13px"},children:s+1}),(0,D.jsx)("td",{style:{fontSize:"13px"},children:(0,D.jsx)("button",{className:"icon-btn",onClick:()=>{F(e)},children:(0,D.jsx)(N.c,{sx:{fontSize:"inherit"}})})}),(0,D.jsx)("td",{style:{fontSize:"13px"},children:null===e||void 0===e?void 0:e.Company_Name}),(0,D.jsx)("td",{style:{fontSize:"13px"},children:null===e||void 0===e?void 0:e.ledger_name}),(0,D.jsx)("td",{style:{fontSize:"13px"},children:null===e||void 0===e||null===(l=e.Bal_Amount)||void 0===l?void 0:l.toLocaleString("en-IN")}),(0,D.jsx)("td",{style:{fontSize:"13px"},children:null===e||void 0===e?void 0:e.CR_DR})]},s)}))})]})})]}),(0,D.jsxs)(b.c,{open:w,onClose:W,fullScreen:!0,fullWidth:!0,children:[(0,D.jsxs)(p.c,{className:"border-bottom text-primary d-flex align-items-center fa-18",children:[(0,D.jsxs)("span",{className:"flex-grow-1",children:["Transaction Report of ",null===U||void 0===U?void 0:U.Customer_name]}),(0,D.jsx)(f.c,{className:"fw-bold",onClick:Q,children:"PDF"}),(0,D.jsx)(f.c,{className:"ms-1 fw-bold",onClick:()=>{(e=>{const s=C.c$.json_to_sheet(e),l=C.c$.book_new();C.c$.book_append_sheet(l,s,"Sheet1"),(0,C.a8)(l,`erpsmt_SOA_${(new Date).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})}.xlsx`)})(A.map(((e,s)=>({Sno:s+1,Date:new Date(null===e||void 0===e?void 0:e.Ledger_Date).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}),Purticular:null===e||void 0===e?void 0:e.Ledger_Desc,InvoiceNo:null===e||void 0===e?void 0:e.invoice_no,Debit:Boolean(Number(e.Debit_Amt))?e.Debit_Amt.toLocaleString("en-IN"):"",Credit:Boolean(Number(e.Credit_Amt))?e.Credit_Amt.toLocaleString("en-IN"):"",Company:null===e||void 0===e?void 0:e.Company_Name,Ledger:null===e||void 0===e?void 0:e.Ledger_Name,Mobile_Number:null===e||void 0===e?void 0:e.Mobile_no}))))},children:"excel"})]}),(0,D.jsxs)(g.c,{className:"rounded-2 shadow m-4 mb-2 p-0",children:[(0,D.jsxs)("div",{className:"row align-content-center",children:[(0,D.jsx)("div",{className:"col-lg-1",children:(0,D.jsx)("img",{src:B,alt:"Company Logo",className:"smtlogo"})}),(0,D.jsx)("div",{className:"col-lg-4 p-2 ps-3",children:(0,D.jsx)("table",{className:"table border-0",children:(0,D.jsxs)("tbody",{children:[(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0",children:"Company"}),(0,D.jsx)("td",{className:"border-0",children:null===U||void 0===U?void 0:U.Company_Name})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0",children:"Ledger Name"}),(0,D.jsx)("td",{className:"border-0",children:null===U||void 0===U?void 0:U.ledger_name})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0",children:"Contact Person"}),(0,D.jsx)("td",{className:"border-0",children:null===(e=A[0])||void 0===e?void 0:e.Contact_Person})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0",children:"Mobile"}),(0,D.jsx)("td",{className:"border-0",children:null===(s=A[0])||void 0===s?void 0:s.Mobile_no})]})]})})}),(0,D.jsx)("div",{className:"col-lg-4 p-2",children:(0,D.jsx)("table",{className:"table",children:(0,D.jsxs)("tbody",{children:[(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0",children:"Opening Balnce"}),(0,D.jsx)("td",{className:"border-0 text-primary",children:(null===(l=A[0])||void 0===l?void 0:l.Debit_Amt)>0?(null===(a=A[0])||void 0===a?void 0:a.Debit_Amt.toLocaleString("en-IN"))+" DR":(null===(d=A[0])||void 0===d?void 0:d.Credit_Amt.toLocaleString("en-IN"))+" CR"})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0",children:"Closing Balance"}),(0,D.jsx)("td",{className:"border-0 text-primary",children:(null===V||void 0===V?void 0:V.debit)-(null===V||void 0===V?void 0:V.credit)<0?((null===V||void 0===V?void 0:V.debit)-(null===V||void 0===V?void 0:V.credit)).toLocaleString("en-IN")+" CR":((null===V||void 0===V?void 0:V.debit)-(null===V||void 0===V?void 0:V.credit)).toLocaleString("en-IN")+" DR"})]})]})})}),(0,D.jsx)("div",{className:"col-lg-3 p-2",children:(0,D.jsx)("table",{className:"table border-0",children:(0,D.jsxs)("tbody",{children:[(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0",children:"From :"}),(0,D.jsx)("td",{className:"p-0 border-0",children:(0,D.jsx)("input",{type:"date",className:"form-control w-auto ms-2",onChange:e=>z({...R,from:e.target.value}),value:R.from})})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0",children:"To :"}),(0,D.jsx)("td",{className:"p-0 border-0",children:(0,D.jsx)("input",{type:"date",className:"form-control w-auto ms-2",onChange:e=>{R.from&&R.from<=e.target.value?z({...R,to:e.target.value}):window.alert("Invald Date Range")},value:R.to,disabled:!R.from})})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0"}),(0,D.jsx)("td",{className:"border-0",children:(0,D.jsx)("button",{className:"btn text-white",style:{backgroundColor:"rgb(66, 34, 225)"},onClick:()=>{F("",1)},children:"Search"})})]})]})})})]}),(0,D.jsx)("div",{className:"p-2 table-responsive",children:(0,D.jsxs)("table",{className:"table",children:[(0,D.jsx)("thead",{children:(0,D.jsxs)("tr",{children:[(0,D.jsx)("th",{className:"fa-13 tble-hed-stick",children:"-"}),(0,D.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Date"}),(0,D.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Particulars"}),(0,D.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Invoice No"}),(0,D.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Dr"}),(0,D.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Cr"})]})}),(0,D.jsx)("tbody",{children:A.map(((e,s)=>(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"fa-13 bg-light",children:s+1}),(0,D.jsx)("td",{className:"fa-13 bg-light",children:new Date(null===e||void 0===e?void 0:e.Ledger_Date).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"})}),(0,D.jsx)("td",{className:"fa-13 bg-light",children:e.Ledger_Desc}),(0,D.jsx)("td",{className:"fa-13",children:e.invoice_no}),(0,D.jsx)("td",{className:"fa-13",children:e.Debit_Amt.toLocaleString("en-IN")}),(0,D.jsx)("td",{className:"fa-13 bg-light",children:e.Credit_Amt.toLocaleString("en-IN")})]},s)))})]})}),(0,D.jsx)("div",{className:"d-none",children:(0,D.jsxs)("div",{className:"d-block px-5 py-2",ref:q,children:[(0,D.jsx)("img",{src:B,alt:"smtlogo",className:"smtlogo"}),(0,D.jsx)("table",{className:"table",children:(0,D.jsxs)("tbody",{children:[(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0 fa-14",children:"Company"}),(0,D.jsx)("td",{className:"border-0 fa-14 fw-bold",children:null===U||void 0===U?void 0:U.Company_Name})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0 fa-14",children:"Ledger Name"}),(0,D.jsx)("td",{className:"border-0 fa-14 fw-bold",children:null===U||void 0===U?void 0:U.ledger_name})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0 fa-14",children:"Contact Person"}),(0,D.jsx)("td",{className:"border-0 fa-14 fw-bold",children:null===(r=A[0])||void 0===r?void 0:r.Contact_Person})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0 fa-14",children:"Mobile"}),(0,D.jsx)("td",{className:"border-0 fa-14 fw-bold",children:null===(i=A[0])||void 0===i?void 0:i.Mobile_no})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0 fa-14",children:"From"}),(0,D.jsx)("td",{className:"border-0 fa-14 fw-bold",children:R.from})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0 fa-14",children:"To"}),(0,D.jsx)("td",{className:"border-0 fa-14 fw-bold",children:R.to})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0 fa-14",children:"Opening Balance"}),(0,D.jsx)("td",{className:"border-0 fa-14 fw-bold",children:(null===(n=A[0])||void 0===n?void 0:n.Debit_Amt)>0?(null===(o=A[0])||void 0===o?void 0:o.Debit_Amt.toLocaleString("en-IN"))+" DR":(null===(c=A[0])||void 0===c?void 0:c.Credit_Amt.toLocaleString("en-IN"))+" CR"})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0 fa-14",children:"Closing Balance"}),(0,D.jsx)("td",{className:"border-0 fa-14 fw-bold",children:(null===V||void 0===V?void 0:V.debit)-(null===V||void 0===V?void 0:V.credit)<0?((null===V||void 0===V?void 0:V.debit)-(null===V||void 0===V?void 0:V.credit)).toLocaleString("en-IN")+" CR":((null===V||void 0===V?void 0:V.debit)-(null===V||void 0===V?void 0:V.credit)).toLocaleString("en-IN")+" DR"})]})]})}),(0,D.jsx)("div",{className:"p-2 table-responsive",children:(0,D.jsxs)("table",{className:"table",children:[(0,D.jsx)("thead",{children:(0,D.jsxs)("tr",{children:[(0,D.jsx)("th",{className:"fa-13 tble-hed-stick",children:"-"}),(0,D.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Date"}),(0,D.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Particulars"}),(0,D.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Invoice No"}),(0,D.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Dr"}),(0,D.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Cr"})]})}),(0,D.jsx)("tbody",{children:A.map(((e,s)=>(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"fa-13 bg-light",children:s+1}),(0,D.jsx)("td",{className:"fa-13 bg-light",children:new Date(null===e||void 0===e?void 0:e.Ledger_Date).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"})}),(0,D.jsx)("td",{className:"fa-13 bg-light",children:e.Ledger_Desc}),(0,D.jsx)("td",{className:"fa-13",children:e.invoice_no}),(0,D.jsx)("td",{className:"fa-13",children:Boolean(Number(e.Debit_Amt))&&e.Debit_Amt.toLocaleString("en-IN")}),(0,D.jsx)("td",{className:"fa-13 bg-light",children:Boolean(Number(e.Credit_Amt))&&e.Credit_Amt.toLocaleString("en-IN")})]},s)))})]})})]})})]}),(0,D.jsx)(S.c,{children:(0,D.jsx)(f.c,{onClick:W,variant:"contained",color:"error",children:"Close"})})]})]}):(0,D.jsx)(D.Fragment,{})};var k=l(39308),w=l(56480);const E=()=>{const e=JSON.parse(localStorage.getItem("user")),s={Latitude:null,Longitude:null,error:null,UserId:e.UserId,Description:"",dialog:!1},[l,a]=(0,t.useState)({}),[d,r]=(0,t.useState)(!1),[i,n]=(0,t.useState)(s);(0,t.useEffect)((()=>{a({}),(0,_.q)({address:`empAttendance/attendance?UserId=${null===e||void 0===e?void 0:e.UserId}`}).then((e=>{var s;null!==e&&void 0!==e&&e.success&&(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.length)>0&&a(null===e||void 0===e?void 0:e.data[0])})).catch((e=>console.error(e)))}),[null===e||void 0===e?void 0:e.UserId,d]);const o=()=>{n(s)};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(u.c,{className:"col-xl-4    col-lg-6 col-md-6",children:[(0,D.jsxs)("div",{className:"d-flex justify-content-between align-items-center p-3 border-bottom",children:[(0,D.jsx)("h5",{className:"mb-0",children:"Attendance"}),(0,D.jsx)(f.c,{variant:"outlined",onClick:()=>{(async()=>{try{const e=await new Promise(((e,s)=>{navigator.geolocation.getCurrentPosition(e,s)})),{latitude:s,longitude:l}=e.coords;return n((e=>({...e,Latitude:s,Longitude:l,error:null}))),!0}catch(e){return e.code===e.PERMISSION_DENIED?(n((e=>({...e,Latitude:null,Longitude:null,error:"Location access denied"}))),w.m4.warn("Allow Location Access")):n((s=>({...s,Latitude:null,Longitude:null,error:e.message}))),!1}})().then((e=>{e?null!==i&&void 0!==i&&i.Latitude&&null!==i&&void 0!==i&&i.Longitude?(0,_.q)({address:"empAttendance/attendance",method:"POST",bodyData:{UserId:null===i||void 0===i?void 0:i.UserId,Latitude:null===i||void 0===i?void 0:i.Latitude,Longitude:null===i||void 0===i?void 0:i.Longitude}}).then((e=>{r(!d),e.success?w.m4.success(e.message):w.m4.error(e.message)})):w.m4.warn("Please Retry"):w.m4.error("There is a problem in get location")}))},disabled:Boolean(null===l||void 0===l?void 0:l.Active_Status),children:"START Day"})]}),Boolean(null===l||void 0===l?void 0:l.Active_Status)&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(x.c,{children:(0,D.jsxs)("div",{className:"fw-bold text-muted",children:[(0,D.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,D.jsx)("span",{children:"Start Date"}),(0,D.jsx)("br",{}),(0,D.jsx)("span",{children:null!==l&&void 0!==l&&l.Start_Date?(0,k.uy)(null===l||void 0===l?void 0:l.Start_Date):" --:--:-- "})]}),(0,D.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,D.jsx)("span",{children:"In Time"}),(0,D.jsx)("span",{children:null!==l&&void 0!==l&&l.Start_Date?(0,k.AX)(null===l||void 0===l?void 0:l.Start_Date):" --:--:-- "})]})]})}),(0,D.jsx)("div",{className:"border-top p-3 d-flex justify-content-end",children:(0,D.jsx)(f.c,{variant:"outlined",onClick:()=>n((e=>({...e,dialog:!0}))),children:"End Day"})})]})]}),(0,D.jsxs)(b.c,{open:null===i||void 0===i?void 0:i.dialog,onClose:o,fullWidth:!0,maxWidth:"md",children:[(0,D.jsx)(p.c,{children:"Cloase Attendance"}),(0,D.jsxs)(g.c,{children:[(0,D.jsx)("label",{className:"mb-3",children:"Work Summary"}),(0,D.jsx)("textarea",{value:null===i||void 0===i?void 0:i.Description,className:"cus-inpt",rows:5,onChange:e=>n((s=>({...s,Description:e.target.value}))),placeholder:"Narrate the today's work summary"})]}),(0,D.jsxs)(S.c,{children:[(0,D.jsx)(f.c,{onClick:o,children:"Cancel"}),(0,D.jsx)(f.c,{variant:"outlined",onClick:()=>{(0,_.q)({address:"empAttendance/attendance",method:"PUT",bodyData:{Id:null===l||void 0===l?void 0:l.Id,Description:null===i||void 0===i?void 0:i.Description}}).then((e=>{e.success?(r(!d),w.m4.success(e.message),o()):w.m4.error(e.message)}))},children:"Confirm"})]})]})]})};var A=l(4600),L=l(81256),U=l(89168),$=l(75304),O=l(57780),P=l(68256),R=l(64016),z=l(11304),B=l(29280),V=l(87016),M=l(5548),q=l(52384),F=l(35840);const W=[{actualName:"STOCKVALUE",str:"STOCKVALUE",icon:(0,D.jsx)(F.SAV,{style:{fontSize:"80px"}}),orderBy:1},{actualName:"SaleOrder",str:"SALE ORDER",icon:(0,D.jsx)(A.c,{style:{fontSize:"80px"}}),orderBy:2},{actualName:"SalesInvoice",str:"SALES INVOICE",icon:(0,D.jsx)(L.c,{style:{fontSize:"80px"}}),orderBy:3},{actualName:"PurchaseOrder",str:"PURCHASE ORDER",icon:(0,D.jsx)(U.c,{style:{fontSize:"80px"}}),orderBy:4},{actualName:"PurchaseInvoice",str:"PURCHASE INVOICE",icon:(0,D.jsx)($.c,{style:{fontSize:"80px"}}),orderBy:5},{actualName:"EXPENCES",str:"EXPENCES",icon:(0,D.jsx)(q.Gcr,{style:{fontSize:"80px"}}),orderBy:6},{actualName:"Payment",str:"PAYMENT",icon:(0,D.jsx)(O.c,{style:{fontSize:"80px"}}),orderBy:7},{actualName:"Receipt",str:"RECEIPT",icon:(0,D.jsx)(P.c,{style:{fontSize:"80px"}}),orderBy:8},{actualName:"Journal",str:"JOURNAL",icon:(0,D.jsx)(R.c,{style:{fontSize:"80px"}}),orderBy:9},{actualName:"StockJournal",str:"STOCK JOURNAL",icon:(0,D.jsx)(z.c,{style:{fontSize:"80px"}}),orderBy:10},{actualName:"Contra",str:"CONTRA",icon:(0,D.jsx)(B.c,{style:{fontSize:"80px"}}),orderBy:11}],Q=()=>{const e=JSON.parse(localStorage.getItem("user")),s=2===Number(null===e||void 0===e?void 0:e.UserTypeId)||0===Number(null===e||void 0===e?void 0:e.UserTypeId)||1===Number(null===e||void 0===e?void 0:e.UserTypeId),[l,a]=(0,t.useState)([]),[d,r]=(0,t.useState)({EXPENCES:0,STOCKVALUE:0}),i="vctr text-white bg-transparent p-0",[n,o]=(0,t.useState)({date:(0,k.Q7)(),reload:!1});return(0,t.useEffect)((()=>{s&&e.Company_id&&(a([]),(0,_.q)({address:`dashboard/dayBook?Fromdate=${n.date}&Todate=${n.date}`,headers:{Db:e.Company_id}}).then((e=>{e.success&&a(e.data)})).catch((e=>console.error(e))))}),[n.reload]),(0,t.useEffect)((()=>{s&&e.Company_id&&(0,_.q)({address:`dashboard/erp/dashboardData?Fromdate=${null===n||void 0===n?void 0:n.date}&Company_Id=${e.Company_id}`}).then((e=>{if(e.success){var s,l;const t=(0,k.gH)(null===e||void 0===e||null===(s=e.data[1][0])||void 0===s?void 0:s.Total_Cost_Vlaue),a=(0,k.gH)(null===e||void 0===e||null===(l=e.data[2][0])||void 0===l?void 0:l.Stock_Value);r((e=>({...e,EXPENCES:t,STOCKVALUE:a})))}else r((e=>({...e,EXPENCES:0,STOCKVALUE:0})))})).catch((e=>console.error(e)))}),[s,n.date]),s&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{className:"d-flex align-items-center flex-wrap ",children:[(0,D.jsx)("input",{type:"date",className:"cus-inpt w-auto m-1",value:n.date,onChange:e=>o((s=>({...s,date:e.target.value})))}),(0,D.jsx)(M.c,{size:"small",onClick:()=>o((e=>({...e,reload:!e.reload}))),children:(0,D.jsx)(V.c,{})})]}),(0,D.jsx)("div",{className:"p-1 row",children:W.map(((e,s)=>{const t=(0,k.m2)(e.actualName,"EXPENCES")||(0,k.m2)(e.actualName,"STOCKVALUE")?{ModuleName:e.actualName,groupedData:[{VoucherBreakUpCount:0,Voucher_Type:"",ModuleName:e.actualName,Amount:d[e.str],navLink:"",dataSource:"TALLY"}]}:l.find((s=>s.ModuleName===e.actualName))||{ModuleName:e.actualName,groupedData:[]},a=(0,k.dq)(t.groupedData),r=a.filter((e=>(0,k.m2)(e.dataSource,"ERP"))),n=a.filter((e=>(0,k.m2)(e.dataSource,"TALLY"))),o=r.reduce(((e,s)=>(0,k.Q5)(e,(null===s||void 0===s?void 0:s.Amount)||0)),0),c=r.reduce(((e,s)=>(0,k.Q5)(e,(null===s||void 0===s?void 0:s.VoucherBreakUpCount)||0)),0),m=n.reduce(((e,s)=>(0,k.Q5)(e,(null===s||void 0===s?void 0:s.Amount)||0)),0),h=n.reduce(((e,s)=>(0,k.Q5)(e,(null===s||void 0===s?void 0:s.VoucherBreakUpCount)||0)),0);return(0,D.jsx)("div",{className:"col-xxl-3 col-lg-4 col-md-6 col-sm-12 p-2",children:(0,D.jsxs)("div",{className:"coloredDiv d-flex align-items-center text-light cus-shadow coloredDiv"+(s+7),children:[(0,D.jsxs)("div",{className:"flex-grow-1 p-3 table-responsive",children:[(0,D.jsx)("h5",{style:{fontSize:"18px"},children:e.str}),(0,D.jsx)("table",{className:"table table-borderless text-white",children:(0,D.jsxs)("tbody",{children:[(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:`${i} fa-13`,children:"ERP"}),(0,D.jsxs)("td",{className:`${i} text-end`,children:[(0,D.jsx)("span",{className:"fa-19 me-1",children:(0,k.SA)(parseInt(o))}),(0,D.jsxs)("span",{className:"fa-11",children:["/ ",(0,k.SA)(parseInt(c))]})]})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:`${i} fa-13`,children:"TALLY"}),(0,D.jsxs)("td",{className:`${i} text-end`,children:[(0,D.jsx)("span",{className:"fa-19 me-1",children:(0,k.SA)(parseInt(m))}),(0,D.jsxs)("span",{className:"fa-11",children:["/ ",(0,k.SA)(parseInt(h))]})]})]})]})})]}),e.icon]})},e.actualName)}))})]})},H=e=>{let{loadingOn:s,loadingOff:l,reqDate:a=(0,k.Q7)()}=e;const{user:d}=(0,k.gV)(),[r,i]=(0,t.useState)([]),[n,o]=(0,t.useState)({fetchReqDate:a});return(0,t.useEffect)((()=>{(0,k.e8)(n.fetchReqDate)&&(0,k.Q$)(d.UserId)&&(i([]),s&&s(),(0,_.q)({address:`dataEntry/costCenter/report/employee?userid=${d.UserId}&reqDate=${n.fetchReqDate}`}).then((e=>{e.success&&i(e.data)})).catch((e=>console.error(e))).finally((()=>{l&&l()})))}),[n.fetchReqDate,d.UserId]),(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)(u.c,{children:[(0,D.jsxs)("div",{className:"d-flex flex-wrap align-items-center border-bottom px-3 py-2",children:[(0,D.jsx)("span",{className:"flex-grow-1 fa-16",children:"ERP Activity"}),(0,D.jsx)("input",{type:"date",value:n.fetchReqDate,onChange:e=>o((s=>({...s,fetchReqDate:e.target.value}))),className:"cus-inpt w-auto p-2"})]}),(0,D.jsxs)("div",{className:"d-flex flex-wrap align-items-center px-3 py-2 fa-15",children:[(0,D.jsx)(u.c,{className:"mx-2",style:{minWidth:200},children:(0,D.jsxs)(x.c,{className:"d-flex flex-column align-items-center",children:[(0,D.jsx)("h4",{children:r.reduce(((e,s)=>(0,k.Q5)(e,s.StockJournalTotal)),0)}),(0,D.jsx)("h6",{children:"Stock Handled KGs"})]})}),(0,D.jsx)(u.c,{className:"mx-2",style:{minWidth:200},children:(0,D.jsxs)(x.c,{className:"d-flex flex-column align-items-center",children:[(0,D.jsx)("h4",{children:r.reduce(((e,s)=>{var l;return(0,k.Q5)(e,null===s||void 0===s||null===(l=s.Stock_Journals)||void 0===l?void 0:l.length)}),0)}),(0,D.jsx)("h6",{children:"Movement Activity"})]})}),(0,D.jsx)(u.c,{className:"mx-2",style:{minWidth:200},children:(0,D.jsxs)(x.c,{className:"d-flex flex-column align-items-center",children:[(0,D.jsx)("h4",{children:r.reduce(((e,s)=>(0,k.Q5)(e,s.TripSheetTotal)),0)}),(0,D.jsx)("h6",{children:"Trip Sheet KGs"})]})}),(0,D.jsx)(u.c,{className:"mx-2",style:{minWidth:200},children:(0,D.jsxs)(x.c,{className:"d-flex flex-column align-items-center",children:[(0,D.jsx)("h4",{children:r.reduce(((e,s)=>{var l;return(0,k.Q5)(e,null===s||void 0===s||null===(l=s.Trip_Sheet)||void 0===l?void 0:l.length)}),0)}),(0,D.jsx)("h6",{children:"Total Trips"})]})})]})]})})},J=e=>{let{loadingOn:s,loadingOff:l}=e;const N=JSON.parse(localStorage.getItem("user")),[b,p]=(0,t.useState)({}),[f,g]=(0,t.useState)([]),[S,y]=(0,t.useState)([]),[C,T]=(0,t.useState)([]),w=0===Number(null===N||void 0===N?void 0:N.UserTypeId)||1===Number(null===N||void 0===N?void 0:N.UserTypeId),A=2===Number(null===N||void 0===N?void 0:N.UserTypeId),L=6===Number(null===N||void 0===N?void 0:N.UserTypeId)||3===Number(null===N||void 0===N?void 0:N.UserTypeId),U=4===Number(null===N||void 0===N?void 0:N.UserTypeId)||5===Number(null===N||void 0===N?void 0:N.UserTypeId),[$,O]=(0,t.useState)(!1);(0,t.useEffect)((()=>{(w||L||A)&&(0,_.q)({address:`dashboard/dashboardData?UserType=${null===N||void 0===N?void 0:N.UserTypeId}&Emp_Id=${null===N||void 0===N?void 0:N.UserId}`}).then((e=>{e.success?p(e.data[0]):p({})})).catch((e=>{console.error(e)}))}),[null===N||void 0===N?void 0:N.UserId,null===N||void 0===N?void 0:N.UserTypeId,w,A,L]),(0,t.useEffect)((()=>{L&&(0,_.q)({address:`dashboard/getTallyData?UserId=${null===N||void 0===N?void 0:N.UserId}`}).then((e=>{e.success?T(e.data):T([])})).catch((e=>console.error(e)))}),[L]),(0,t.useEffect)((()=>{L&&((0,_.q)({address:`taskManagement/task/work?Emp_Id=${null===N||void 0===N?void 0:N.UserId}&from=${(0,k.Q7)()}&to=${(0,k.Q7)()}`}).then((e=>{e.success?g(e.data):T([])})).catch((e=>console.error(e))),(0,_.q)({address:`taskManagement/tasks/myTasks?Emp_Id=${null===N||void 0===N?void 0:N.UserId}&reqDate=${(0,k.Q7)()}`}).then((e=>{e.success?(e.data.sort(((e,s)=>{const[l,t]=null===e||void 0===e?void 0:e.Sch_Time.split(":").map(Number),[a,d]=null===s||void 0===s?void 0:s.Sch_Time.split(":").map(Number);return l!==a?l-a:t-d})),y(e.data)):y([])})).catch((e=>console.error(e))))}),[L,null===N||void 0===N?void 0:N.UserId]);const P=e=>{let{title:s,icon:l,firstVal:t,secondVal:a,classCount:d}=e;return(0,D.jsx)(D.Fragment,{children:(0,D.jsx)("div",{className:`${(w||A)&&"col-xxl-3"} col-lg-4 col-md-6 col-sm-12 p-2`,children:(0,D.jsxs)("div",{className:"coloredDiv d-flex align-items-center text-light cus-shadow coloredDiv"+d,children:[(0,D.jsxs)("div",{className:"flex-grow-1 p-3",children:[(0,D.jsx)("h5",{className:"text-uppercase",children:s}),(0,D.jsxs)("h3",{className:"fa-16 text-end pe-3",children:[(0,D.jsxs)("span",{style:{fontSize:"30px"},children:[t||0," "]}),a&&"/"+a]})]}),l]})})})},R=e=>{const s=Math.floor(Number(e)/60),l=Number(e)%60,t=s<10?"0"+s:s,a=l<10?"0"+l:l;return t&&a?t+":"+a:"00:00"},z=e=>["bg-dark","bg-info","bg-warning","bg-success","bg-danger"][Number(e)];return(0,D.jsxs)(D.Fragment,{children:[U&&(0,D.jsx)(I,{}),(A||w)&&(0,D.jsx)(Q,{}),(w||A)&&(0,D.jsx)(m.c,{control:(0,D.jsx)(h.c,{checked:$,onChange:e=>O(e.target.checked)}),label:"Show Task Management",className:" fw-bold text-primary"}),(0,D.jsxs)("div",{className:"px-1",children:[(w||A)&&$&&(0,D.jsxs)("div",{className:"row",children:[(0,D.jsx)(P,{title:"Projects",icon:(0,D.jsx)(n.AFi,{style:{fontSize:"80px"}}),firstVal:null===b||void 0===b?void 0:b.ActiveProjects,secondVal:null===b||void 0===b?void 0:b.AllProjects,classCount:"1"}),(0,D.jsx)(P,{title:"Schedule",icon:(0,D.jsx)(a.fs,{style:{fontSize:"80px"}}),firstVal:null===b||void 0===b?void 0:b.ActiveSchedule,secondVal:null===b||void 0===b?void 0:b.AllSchedule,classCount:"2"}),(0,D.jsx)(P,{title:"Completed Tasks",icon:(0,D.jsx)(o.eE9,{style:{fontSize:"80px"}}),firstVal:null===b||void 0===b?void 0:b.TaskCompleted,classCount:"3"}),(0,D.jsx)(P,{title:"Employee",icon:(0,D.jsx)(r.xBK,{style:{fontSize:"80px"}}),firstVal:null===b||void 0===b?void 0:b.EmployeeCounts,secondVal:Number(null===b||void 0===b?void 0:b.EmployeeCounts)+(null===b||void 0===b?void 0:b.OtherUsers),classCount:"4"}),(0,D.jsx)(P,{title:"Worked Hours",icon:(0,D.jsx)(i.cDd,{style:{fontSize:"80px"}}),firstVal:R(null===b||void 0===b?void 0:b.TotalMinutes),classCount:"5"}),(0,D.jsx)(P,{title:"Today Tasks",icon:(0,D.jsx)(d.yic,{style:{fontSize:"80px"}}),firstVal:null===b||void 0===b?void 0:b.TodayTaskCompleted,secondVal:null===b||void 0===b?void 0:b.TodayTasks,classCount:"6"})]}),L&&(0,D.jsxs)("div",{className:"row",children:[(0,D.jsx)(P,{title:"Completed Tasks",firstVal:null===b||void 0===b?void 0:b.TaskCompleted,secondVal:null===b||void 0===b?void 0:b.TotalTasks,icon:(0,D.jsx)(o.eE9,{style:{fontSize:"80px"}}),classCount:"1"}),(0,D.jsx)(P,{title:"Today Tasks",firstVal:null===b||void 0===b?void 0:b.TodayTaskCompleted,secondVal:null===b||void 0===b?void 0:b.TodayTasks,icon:(0,D.jsx)(d.yic,{style:{fontSize:"80px"}}),classCount:"2"}),(0,D.jsx)(P,{title:"Total Work Hours",firstVal:R(null===b||void 0===b?void 0:b.WorkedMinutes),icon:(0,D.jsx)(d.yic,{style:{fontSize:"80px"}}),classCount:"3"})]})]}),(0,D.jsx)("br",{}),L&&(0,D.jsx)(E,{}),(0,D.jsx)("br",{}),L&&f.length>0&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(u.c,{children:(0,D.jsxs)(x.c,{sx:{pb:2},children:[(0,D.jsx)("h5",{children:"Today Activity"}),(0,D.jsx)(c.c,{TasksArray:f}),(0,D.jsx)("br",{})]})}),(0,D.jsx)("br",{})]}),(0,D.jsx)(H,{loadingOn:s,loadingOff:l}),L&&S.length>0&&(0,D.jsxs)(u.c,{children:[(0,D.jsx)(v.c,{title:"Today Tasks:"+S.length,sx:{pb:0}}),(0,D.jsx)(x.c,{children:(0,D.jsx)("div",{className:"table-responsive",children:(0,D.jsxs)("table",{className:"table mb-1 ",children:[(0,D.jsx)("thead",{children:(0,D.jsxs)("tr",{children:[(0,D.jsx)("th",{className:"fa-13 border",children:"SNo"}),(0,D.jsx)("th",{className:"fa-13 border",children:"Task"}),(0,D.jsx)("th",{className:"fa-13 border",children:"Timer Based"}),(0,D.jsx)("th",{className:"fa-13 border",children:"Schedule"}),(0,D.jsx)("th",{className:"fa-13 border",children:"Duration"}),(0,D.jsx)("th",{className:"fa-13 border",children:"Status"})]})}),(0,D.jsx)("tbody",{children:S.map(((e,s)=>(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"fa-13 border",children:s+1}),(0,D.jsx)("td",{className:"fa-13 border",children:null===e||void 0===e?void 0:e.Task_Name}),(0,D.jsx)("td",{className:"fa-13 border text-center",children:(0,D.jsx)("span",{className:`badge rounded-4 px-3 fw-bold text-white ${z(1===Number(null===e||void 0===e?void 0:e.Timer_Based)?3:1)}`,children:1===Number(null===e||void 0===e?void 0:e.Timer_Based)?"Yes":"No"})}),(0,D.jsxs)("td",{className:"fa-13 border text-center",children:[null===e||void 0===e?void 0:e.Sch_Time," - ",null===e||void 0===e?void 0:e.EN_Time]}),(0,D.jsx)("td",{className:"fa-13 border text-center",children:null===e||void 0===e?void 0:e.Sch_Period}),(0,D.jsx)("td",{className:"fa-13 border text-center",children:(0,D.jsx)("span",{className:`badge rounded-4 px-3 fw-bold text-white ${z(null!==e&&void 0!==e&&e.Work_Id?3:1)}`,children:null!==e&&void 0!==e&&e.Work_Id?"Completed":"Pending"})})]},s)))})]})})})]}),(0,D.jsx)("br",{}),L&&(null===C||void 0===C?void 0:C.length)>0&&(0,D.jsxs)(u.c,{component:j.c,children:[(0,D.jsx)(v.c,{title:"Tally Entries",sx:{pb:0}}),(0,D.jsx)(x.c,{children:(0,D.jsx)("div",{className:"table-responsive",children:(0,D.jsxs)("table",{className:"table",children:[(0,D.jsx)("thead",{children:(0,D.jsxs)("tr",{children:[(0,D.jsx)("th",{className:"fa-13 border",children:"Sno"}),(0,D.jsx)("th",{className:"fa-13 border",children:"Particulars"}),(0,D.jsx)("th",{className:"fa-13 border",children:"Value"})]})}),(0,D.jsx)("tbody",{children:null===C||void 0===C?void 0:C.map(((e,s)=>(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"fa-13 border",children:s+1}),(0,D.jsx)("td",{className:"fa-13 border",children:null===e||void 0===e?void 0:e.Particulars}),(0,D.jsx)("td",{className:"fa-13 border",children:null===e||void 0===e?void 0:e.Tally_Count})]},s)))})]})})})]})]})}}}]);
//# sourceMappingURL=1008.e3148b25.chunk.js.map