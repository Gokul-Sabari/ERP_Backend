"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[3640],{78688:(e,l,a)=>{a.d(l,{c:()=>u});var d=a(69060),s=a(3358),t=a(82656),o=a(26773),i=a(5548),n=a(4488),r=a(14499),c=a(82496);const u=e=>{const[l,a]=(0,d.useState)(!1),{url:u}=e,v=()=>{a(!1)};return(0,c.jsxs)("span",{children:[(0,c.jsx)(s.c,{title:"Tap to Open",children:(0,c.jsx)("span",{onClick:()=>{a(!0)},style:{cursor:"pointer"},children:e.children})}),(0,c.jsxs)(t.c,{open:l,onClose:v,fullWidth:!0,maxWidth:"lg",children:[(0,c.jsxs)(o.c,{className:"bg-dark text-white d-flex justify-content-between",children:[(0,c.jsx)("span",{children:"Image Preview"}),(0,c.jsx)(i.c,{onClick:v,children:(0,c.jsx)(r.c,{sx:{color:"white"}})})]}),(0,c.jsx)(n.c,{className:"bg-dark pb-4 d-flex align-items-center justify-content-center",children:(0,c.jsx)("img",{src:u,alt:"Preview",style:{maxWidth:"100%",maxHeight:"100%"}})})]})]})}},62344:(e,l,a)=>{a.d(l,{o$:()=>i,o5:()=>n,cF:()=>o,iI:()=>t});var d=a(30800);const s=a.p+"static/media/smt.aa4d4f940bbebff07a57.png",t={table:{style:{width:"auto",backgroundColor:"transparent"}},rows:{style:{backgroundColor:"transparent"}},headCells:{style:{backgroundColor:"#6b9080f8",color:"white",fontSize:"14px"}}},o={control:(e,l)=>(0,d.c)((0,d.c)({},e),{},{height:"45px",background:"rgba(255, 255, 255, 0.322)"}),menu:(e,l)=>(0,d.c)((0,d.c)({},e),{},{zIndex:9999}),menuPortal:e=>(0,d.c)((0,d.c)({},e),{},{zIndex:9999}),groupHeading:e=>(0,d.c)((0,d.c)({},e),{},{backgroundColor:"#f5f5f5",color:"#333",fontWeight:"bold",fontSize:"14px",padding:"8px 12px",borderBottom:"1px solid #ddd",textTransform:"uppercase"}),option:(e,l)=>(0,d.c)((0,d.c)({},e),{},{backgroundColor:l.isSelected?"#2684FF":l.isFocused?"#E2ECF9":"white",color:l.isSelected?"white":"#333",padding:"10px 12px"})},i=[{id:1,headname:"Menu ID",variant:"head",align:"left",width:100},{id:2,headname:"MenuName"},{id:3,headname:"Read Rights"},{id:4,headname:"Add Rights"},{id:5,headname:"Edit Rights"},{id:6,headname:"Delete Rights"},{id:7,headname:"Print Rights"},{id:8,headname:"Action"}],n=[{dataBase:1,name:"SHANKAR TRADERS",business:"Wholesale Merchant in Dhall",address:"32, Chitrakara Street, Madurai - 01 <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:s,gstin:"33AADFS6973R1ZD",phone:"984-313-1353, 984-335-5166",fssai:"12418012000818",bankAccount:"0021 5032 0885 122",ifsc:"TMBL0000002"},{dataBase:2,name:"SMT AGRO PRODUCTS",business:"",address:"H.O: 153, Chitrakara Street, 2nd Floor, Madurai -01 <br /> G.O: 746 Puliyur, Sayanapuram, Svga <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:s,gstin:"33ACMFS3420Q1ZQ",phone:"0452-4371625",fssai:"12418012000818",bankAccount:"0025 3031 0875 947",ifsc:"TMBL0000002"},{dataBase:3,name:"BHAVANI TRADERS",business:"",address:"H.O: 152-A, Chitrakara Street, Madurai -01 <br /> G.O: 30/1-Rajman Nagar, Chintamani Main Road, Mdu-01 <br /> Tax Invoice",logo:s,gstin:"33AAEFB6728J1ZG",phone:"958-559-7641, 958-559-7614",fssai:"12418012000670",bankAccount:"0021 5005 0800 309",ifsc:"TMBL0000002"}]},89620:(e,l,a)=>{a.r(l),a.d(l,{default:()=>M});var d=a(69060),s=a(5548),t=a(60476),o=a(43692),i=a(84436),n=a(39308),r=a(50952),c=a(96064),u=a(1908),v=a(82496);const m=()=>{const e=JSON.parse(localStorage.getItem("user")),[l,a]=(0,d.useState)([]);(0,d.useEffect)((()=>{(0,u.q)({address:"masters/retailers/closingStock/areaBased?Company_id=".concat(null===e||void 0===e?void 0:e.Company_id)}).then((e=>{e.success&&a(e.data)})).catch((e=>console.error(e)))}),[null===e||void 0===e?void 0:e.Company_id]);const m=e=>{let{o:l,sno:a}=e;const[o,i]=(0,d.useState)(!1),[u,m]=(0,d.useState)("RETAILER"),h=(e=>{const l=new Map;return null===e||void 0===e||e.forEach((e=>{var a;null===e||void 0===e||null===(a=e.Closing_Stock)||void 0===a||a.forEach((e=>{const a=null===e||void 0===e?void 0:e.Item_Id,d=(null===e||void 0===e?void 0:e.Previous_Balance)*(null===e||void 0===e?void 0:e.Item_Rate),s=null===e||void 0===e?void 0:e.Previous_Balance;if(l.has(a)){const e=l.get(a);e.totalWorth+=d,e.totalQuantity+=s}else l.set(a,{Item_Id:a,Product_Name:null===e||void 0===e?void 0:e.Product_Name,totalWorth:d,totalQuantity:s})}))})),Array.from(l.values())})(null===l||void 0===l?void 0:l.Retailer);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{className:"fa-13 border",children:(0,v.jsx)(s.c,{size:"small",onClick:()=>i(!o),children:o?(0,v.jsx)(r.c,{sx:{fontSize:"16px",color:"red"}}):(0,v.jsx)(c.c,{sx:{fontSize:"16px"}})})}),(0,v.jsx)("td",{className:"fa-13 border",children:a}),(0,v.jsx)("td",{className:"fa-13 border fw-bold text-muted",children:null!==l&&void 0!==l&&l.Area_Name?null===l||void 0===l?void 0:l.Area_Name:"unknown"}),(0,v.jsx)("td",{className:"fa-13 border text-end",children:null===h||void 0===h?void 0:h.length}),(0,v.jsx)("td",{className:"fa-13 border text-end text-primary fw-bold",children:(0,n.SA)((()=>{var e;let a=0;return null===l||void 0===l||null===(e=l.Retailer)||void 0===e||e.forEach((e=>{var l;null===e||void 0===e||null===(l=e.Closing_Stock)||void 0===l||l.forEach((e=>{a+=e.Previous_Balance*e.Item_Rate}))})),a})())})]}),(0,v.jsx)("tr",{children:(0,v.jsx)("td",{colSpan:5,className:"p-0 border-0",children:(0,v.jsxs)(t.c,{in:o,timeout:"auto",unmountOnExit:!0,children:[(0,v.jsxs)("div",{className:"my-3",children:[(0,v.jsx)("label",{className:"w-100 mb-2 text-muted fw-bold",children:"Report Type"}),(0,v.jsxs)("select",{value:u,onChange:e=>m(e.target.value),className:"cus-inpt w-auto",children:[(0,v.jsx)("option",{value:"RETAILER",children:"RETAILER BASED"}),(0,v.jsx)("option",{value:"PRODUCT",children:"PRODUCT BASED"})]})]}),(0,v.jsx)("div",{className:"table-responsive my-2",children:(e=>{var a;switch(e){case"RETAILER":return(0,v.jsxs)("table",{className:"table mb-0",children:[(0,v.jsx)("thead",{children:(0,v.jsx)("tr",{children:["","SNo","Retailer","Products","Value"].map(((e,l)=>(0,v.jsx)("th",{className:"fa-14 border",children:e},l)))})}),(0,v.jsx)("tbody",{children:null===l||void 0===l||null===(a=l.Retailer)||void 0===a?void 0:a.map(((e,l)=>(0,v.jsx)(x,{o:e,sno:l+1},l)))})]});case"PRODUCT":return(0,v.jsxs)("table",{className:"table",children:[(0,v.jsx)("thead",{children:(0,v.jsx)("tr",{children:["SNo","Product","Quantity","Value"].map(((e,l)=>(0,v.jsx)("th",{className:"fa-14 border text-center",children:e},l)))})}),(0,v.jsx)("tbody",{children:null===h||void 0===h?void 0:h.map(((e,l)=>(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{className:"fa-13 border text-center",children:l+1}),(0,v.jsx)("td",{className:"fa-13 border",children:null===e||void 0===e?void 0:e.Product_Name}),(0,v.jsx)("td",{className:"fa-13 border text-end",children:(0,n.SA)(null===e||void 0===e?void 0:e.totalQuantity)}),(0,v.jsx)("td",{className:"fa-13 border text-end text-primary",children:(0,n.SA)(null===e||void 0===e?void 0:e.totalWorth)})]},l)))})]});default:v.Fragment}})(u)})]})})})]})},x=e=>{var l,a;let{o:o,sno:i}=e;const[u,m]=(0,d.useState)(!1);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:(0,v.jsx)(s.c,{size:"small",onClick:()=>m(!u),children:u?(0,v.jsx)(r.c,{sx:{fontSize:"16px",color:"red"}}):(0,v.jsx)(c.c,{sx:{fontSize:"16px"}})})}),(0,v.jsx)("td",{className:"fa-13 border",children:i}),(0,v.jsxs)("td",{className:"fa-13 border",children:[(0,v.jsx)("span",{className:"fw-bold text-muted",children:null===o||void 0===o?void 0:o.Retailer_Name})," ",(0,v.jsx)("br",{}),(0,v.jsx)("span",{className:"fa-12 text-muted",children:null===o||void 0===o?void 0:o.Reatailer_Address})]}),(0,v.jsx)("td",{className:"fa-13 border",children:null===o||void 0===o||null===(l=o.Closing_Stock)||void 0===l?void 0:l.length}),(0,v.jsx)("td",{className:"fa-13 border",children:(0,n.SA)((()=>{var e;let l=0;return null===o||void 0===o||null===(e=o.Closing_Stock)||void 0===e||e.forEach((e=>{l+=(null===e||void 0===e?void 0:e.Previous_Balance)*(null===e||void 0===e?void 0:e.Item_Rate)})),l})())})]}),(0,v.jsx)("tr",{children:(0,v.jsx)("td",{colSpan:5,className:"p-0 border-0",children:(0,v.jsx)(t.c,{in:u,timeout:"auto",unmountOnExit:!0,children:(0,v.jsx)("div",{className:"table-responsive my-2",children:(0,v.jsxs)("table",{className:"table",children:[(0,v.jsx)("thead",{children:(0,v.jsx)("tr",{children:["Sno","Product Name","Date","Quantity","Rate","Value"].map((e=>(0,v.jsx)("th",{className:"fa-14 border text-center",children:e},e)))})}),(0,v.jsx)("tbody",{children:null===o||void 0===o||null===(a=o.Closing_Stock)||void 0===a?void 0:a.map(((e,l)=>(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{className:"fa-14 border",children:l+1}),(0,v.jsx)("td",{className:"fa-14 border",children:null===e||void 0===e?void 0:e.Product_Name}),(0,v.jsx)("td",{className:"fa-14 border text-center",children:(0,n.uy)(null===e||void 0===e?void 0:e.Cl_Date)}),(0,v.jsx)("td",{className:"fa-14 border text-end",children:(0,n.SA)(null===e||void 0===e?void 0:e.Previous_Balance)}),(0,v.jsx)("td",{className:"fa-14 border text-end",children:null===e||void 0===e?void 0:e.Item_Rate}),(0,v.jsx)("td",{className:"fa-14 border text-end",children:null!==e&&void 0!==e&&e.Previous_Balance&&null!==e&&void 0!==e&&e.Item_Rate?(0,n.SA)((null===e||void 0===e?void 0:e.Item_Rate)*(null===e||void 0===e?void 0:e.Previous_Balance)):0})]},l)))})]})})})})})]})};return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(o.c,{children:[(0,v.jsxs)("div",{className:"p-3 pb-2 d-flex align-items-center justify-content-between border-bottom",children:[(0,v.jsx)("h6",{className:"fa-18",children:"Closing Stock Reports"}),(0,v.jsxs)("span",{className:"fw-bold ",children:["\u20b9 ",(0,n.SA)((e=>{let l=0;return null===e||void 0===e||e.forEach((e=>{var a;null===e||void 0===e||null===(a=e.Retailer)||void 0===a||a.forEach((e=>{var a;null===e||void 0===e||null===(a=e.Closing_Stock)||void 0===a||a.forEach((e=>{l+=(null===e||void 0===e?void 0:e.Previous_Balance)*(null===e||void 0===e?void 0:e.Item_Rate)}))}))})),l})(l))]})]}),(0,v.jsx)(i.c,{children:(0,v.jsx)("div",{className:"table-responsive",children:(0,v.jsxs)("table",{className:"table",children:[(0,v.jsx)("thead",{children:(0,v.jsx)("tr",{children:["","SNo","Area","Products","Value"].map(((e,l)=>(0,v.jsx)("th",{className:"border text-center fa-14",children:e},l)))})}),(0,v.jsx)("tbody",{children:null===l||void 0===l?void 0:l.map(((e,l)=>(0,v.jsx)(m,{sno:l+1,o:e},l)))})]})})})]})})};var x=a(30800),h=a(85624),j=a(50864),p=a(89e3),b=a(82656),N=a(26773),f=a(4488),_=a(12572),g=a(15786),S=a(90048),C=a(1571),I=a(19424),y=a(34036),R=a(22727),P=a(99768),w=a(86e3),k=a(12260),T=a(43564),D=a(40656),A=a(62344),E=a(56480),B=a(18256),F=a(29720),O=a(61584),L=a(78688);const Q=()=>{var e,l;const a=JSON.parse(localStorage.getItem("user")),[r,c]=(0,d.useState)([]),[m,Q]=(0,d.useState)([]),[M,G]=(0,d.useState)({}),[z,U]=(0,d.useState)([]),[q,V]=(0,d.useState)([]),[W,H]=(0,d.useState)("1"),[J,Z]=(0,d.useState)(!1),[Y,K]=(0,d.useState)({closingStock:!1}),[$,X]=(0,d.useState)({cust:"",custGet:"Select Retailer",Fromdate:(0,n.SO)(10),Todate:(0,n.Q7)()}),ee={Company_Id:null===a||void 0===a?void 0:a.Company_id,ST_Date:(0,n.Q7)(),Retailer_Id:"",Retailer_Name:"",Narration:"",Created_by:null===a||void 0===a?void 0:a.UserId,Product_Stock_List:[],ST_Id:""},[le,ae]=(0,d.useState)(ee),[de,se]=(0,d.useState)([]),[te,oe]=(0,d.useState)(!1);(0,d.useEffect)((()=>{(0,u.q)({address:"masters/retailers/dropDown?Company_Id=".concat(null===a||void 0===a?void 0:a.Company_id)}).then((e=>{e.success&&c(e.data)})).catch((e=>console.error(e))),(0,u.q)({address:"masters/products/grouped?Company_Id=".concat(null===a||void 0===a?void 0:a.Company_id)}).then((e=>{e.success&&Q(e.data)})).catch((e=>console.error(e)))}),[null===a||void 0===a?void 0:a.Company_id]),(0,d.useEffect)((()=>{null!==le&&void 0!==le&&le.Retailer_Id&&(0,u.q)({address:"masters/retailers/closingStock/productBased?Retailer_Id=".concat(null===le||void 0===le?void 0:le.Retailer_Id,"&reqDate=").concat(null===le||void 0===le?void 0:le.ST_Date)}).then((e=>{e.success&&U(e.data)})).catch((e=>console.error(e)))}),[null===le||void 0===le?void 0:le.ST_Date,null===le||void 0===le?void 0:le.Retailer_Id,J]),(0,d.useEffect)((()=>{G({}),null!==$&&void 0!==$&&$.cust&&(0,u.q)({address:"masters/retailers/info?Retailer_Id=".concat(null===$||void 0===$?void 0:$.cust,"&Fromdate=").concat(null===$||void 0===$?void 0:$.Fromdate,"&Todate=").concat(null===$||void 0===$?void 0:$.Todate)}).then((e=>{var l;null!==e&&void 0!==e&&e.success&&(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.length)>0&&G(e.data[0])})).catch((e=>console.error(e)))}),[null===$||void 0===$?void 0:$.cust,null===$||void 0===$?void 0:$.Fromdate,null===$||void 0===$?void 0:$.Todate,J]);const ie=e=>{let{data:l}=e;return(0,v.jsx)(o.c,{component:h.c,variant:"outlined",sx:{mt:2},children:(0,v.jsxs)("div",{className:"row",children:[(0,v.jsx)("div",{className:"col-xl-2 col-md-3 d-flex align-items-center",children:(0,v.jsx)(L.c,{url:null===l||void 0===l?void 0:l.imageUrl,children:(0,v.jsx)(j.c,{component:"img",sx:{width:200,height:200},image:null===l||void 0===l?void 0:l.imageUrl,alt:"retailer_picture"})})}),(0,v.jsx)("div",{className:"col-xl-10 col-md-9 d-flex flex-column justify-content-center p-2",children:(0,v.jsxs)(i.c,{children:[(0,v.jsx)("h6",{className:"mb-2 fa-18 fw-bold text-primary text-decoration-underline",onClick:()=>{var e,a,d,s;null!==l&&void 0!==l&&null!==(e=l.VERIFIED_LOCATION)&&void 0!==e&&e.latitude&&null!==l&&void 0!==l&&null!==(a=l.VERIFIED_LOCATION)&&void 0!==a&&a.longitude?window.open("https://www.google.com/maps/search/?api=1&query=".concat(null===l||void 0===l||null===(d=l.VERIFIED_LOCATION)||void 0===d?void 0:d.latitude,",").concat(null===l||void 0===l||null===(s=l.VERIFIED_LOCATION)||void 0===s?void 0:s.longitude),"_blank"):null!==l&&void 0!==l&&l.Latitude&&null!==l&&void 0!==l&&l.Longitude&&window.open("https://www.google.com/maps/search/?api=1&query=".concat(null===l||void 0===l?void 0:l.Latitude,",").concat(null===l||void 0===l?void 0:l.Longitude),"_blank")},children:null===l||void 0===l?void 0:l.Retailer_Name}),(0,v.jsxs)("p",{children:[(0,v.jsx)(C.c,{className:"fa-14 text-primary"})," ",null===l||void 0===l?void 0:l.Reatailer_Address]}),(0,v.jsxs)("p",{className:"fa-14 ",children:[" ",null===l||void 0===l?void 0:l.RouteGet]}),(0,v.jsxs)("p",{className:"fa-14 ",children:["Class: ",null===l||void 0===l?void 0:l.Retailer_Class]}),(0,v.jsxs)("p",{className:"text-primary ",children:[(0,v.jsx)(I.c,{className:"fa-14 text-primary"})," ",null===l||void 0===l?void 0:l.Contact_Person]}),(0,v.jsxs)("a",{href:"tel:".concat(null===l||void 0===l?void 0:l.Mobile_No),children:[(0,v.jsx)(y.c,{className:"fa-14 text-primary"}),(0,v.jsx)("span",{className:"ps-1",children:null===l||void 0===l?void 0:l.Mobile_No})]}),(0,v.jsxs)("p",{className:"fw-bold fa-14 text-muted",children:["Created: ",null!==l&&void 0!==l&&l.Created_Date?new Date(null===l||void 0===l?void 0:l.Created_Date).toLocaleDateString("en-IN"):"--:--:--","\xa0 - \xa0",null===l||void 0===l?void 0:l.createdBy]})]})})]})})},ne=()=>{K((0,x.c)((0,x.c)({},Y),{},{closingStock:!1})),se([]),ae((0,x.c)((0,x.c)({},ee),{},{Retailer_Id:null===$||void 0===$?void 0:$.cust,Retailer_Name:null===$||void 0===$?void 0:$.custGet})),oe(!1)},re=e=>{var l;return(null===(l=(null===z||void 0===z?void 0:z.filter((l=>Number(null===l||void 0===l?void 0:l.Item_Id)===Number(e))))[0])||void 0===l?void 0:l.Previous_Balance)||0},ce=e=>{var l;return(null===(l=(null===z||void 0===z?void 0:z.filter((l=>Number(null===l||void 0===l?void 0:l.Item_Id)===Number(e))))[0])||void 0===l?void 0:l.Cl_Date)||new Date},ue=e=>{var l,o;let{o:i}=e;const[n,r]=(0,d.useState)(!1);return(0,v.jsxs)("div",{className:" pt-3 ",children:[(0,v.jsxs)("div",{className:"fa-14 fw-bold text-muted d-flex align-items-center",children:[(0,v.jsx)(s.c,{size:"small",className:"me-2",onClick:()=>r(!n),children:n?(0,v.jsx)(R.c,{}):(0,v.jsx)(P.c,{})}),(0,v.jsxs)("span",{className:"flex-grow-1",children:["Date:\u2003",(0,v.jsx)("span",{className:"ps-1 text-primary",children:null!==i&&void 0!==i&&i.ST_Date?new Date(null===i||void 0===i?void 0:i.ST_Date).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}):null}),(0,v.jsx)("br",{}),"By:\u2003\u2003",(0,v.jsxs)("span",{className:"ps-1 text-primary",children:[null===i||void 0===i?void 0:i.CreatedByGet," "]}),"( ",null===i||void 0===i||null===(l=i.ProductCount)||void 0===l?void 0:l.length," )"]}),(0,v.jsx)("span",{className:"ps-1",children:(0,v.jsx)(s.c,{size:"small",onClick:()=>{var e;oe(!0),ae((0,x.c)((0,x.c)({},le),{},{Company_Id:null===M||void 0===M?void 0:M.Company_Id,ST_Date:new Date(null===i||void 0===i?void 0:i.ST_Date).toISOString().split("T")[0],Retailer_Id:null===M||void 0===M?void 0:M.Retailer_Id,Retailer_Name:null===M||void 0===M?void 0:M.Retailer_Name,Narration:null===i||void 0===i?void 0:i.Narration,Created_by:null===a||void 0===a?void 0:a.UserId,ST_Id:null===i||void 0===i?void 0:i.ST_Id})),se([...null===i||void 0===i||null===(e=i.ProductCount)||void 0===e?void 0:e.map((e=>({Product_Id:null===e||void 0===e?void 0:e.Item_Id,ST_Qty:null===e||void 0===e?void 0:e.ST_Qty})))]),K((0,x.c)((0,x.c)({},Y),{},{closingStock:!0}))},children:(0,v.jsx)(w.c,{className:"fa-16 text-dark"})})})]}),(0,v.jsx)(t.c,{in:n,unmountOnExit:!0,children:(0,v.jsx)("div",{className:"table-responsive mt-2",children:(0,v.jsxs)("table",{className:"table",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{className:"border fa-14",children:"SNo"}),(0,v.jsx)("th",{className:"border fa-14",children:"Product"}),(0,v.jsx)("th",{className:"border fa-14",children:"Quantity"})]})}),(0,v.jsx)("tbody",{children:null===i||void 0===i||null===(o=i.ProductCount)||void 0===o?void 0:o.map(((e,l)=>(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{className:"border fa-14",children:l+1}),(0,v.jsx)("td",{className:"border fa-14 fw-bold text-muted",children:null===e||void 0===e?void 0:e.ProductName}),(0,v.jsx)("td",{className:"border fa-14",children:null===e||void 0===e?void 0:e.ST_Qty})]},l)))})]})})})]})};return(0,d.useEffect)((()=>{const e=null===z||void 0===z?void 0:z.filter((e=>Number(null===e||void 0===e?void 0:e.Previous_Balance)>0));V(e)}),[z]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"row mb-2",children:[(0,v.jsxs)("div",{className:"col-lg-3 col-md-4 col-sm-6",children:[(0,v.jsx)("label",{children:"Retailer"}),(0,v.jsx)(D.cp,{value:{value:null===$||void 0===$?void 0:$.cust,label:null===$||void 0===$?void 0:$.custGet},onChange:e=>{X((0,x.c)((0,x.c)({},$),{},{cust:e.value,custGet:e.label})),ae((0,x.c)((0,x.c)({},le),{},{Retailer_Id:e.value,Retailer_Name:e.label}))},options:[{value:"",label:"All Retailer"},...r.map((e=>({value:null===e||void 0===e?void 0:e.Retailer_Id,label:null===e||void 0===e?void 0:e.Retailer_Name})))],styles:A.cF,isSearchable:!0,placeholder:"Retailer Name"})]}),(0,v.jsxs)("div",{className:"col-lg-3 col-md-4 col-sm-6",children:[(0,v.jsx)("label",{children:"From Date"}),(0,v.jsx)("input",{type:"date",onChange:e=>X((0,x.c)((0,x.c)({},$),{},{Fromdate:e.target.value})),className:"cus-inpt",value:$.Fromdate?new Date($.Fromdate).toISOString().split("T")[0]:""})]}),(0,v.jsxs)("div",{className:"col-lg-3 col-md-4 col-sm-6",children:[(0,v.jsx)("label",{children:"To Date"}),(0,v.jsx)("input",{type:"date",onChange:e=>X((0,x.c)((0,x.c)({},$),{},{Todate:e.target.value})),className:"cus-inpt",value:$.Todate?new Date($.Todate).toISOString().split("T")[0]:""})]})]}),$.cust&&(0,v.jsx)(ie,{data:M}),$.cust&&(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(o.c,{component:h.c,variant:"outlined",sx:{mt:2},children:[(0,v.jsxs)("div",{className:"p-3 d-flex align-items-center border-bottom",children:[(0,v.jsx)("span",{className:"fa-18 fw-bold flex-grow-1",children:"Closing Stock"}),(0,v.jsx)("span",{children:(0,v.jsx)(p.c,{startIcon:(0,v.jsx)(k.c,{}),variant:"outlined",onClick:()=>K((0,x.c)((0,x.c)({},Y),{},{closingStock:!0})),children:"Add"})})]}),(null===M||void 0===M||null===(e=M.ClosingStocks)||void 0===e?void 0:e.length)>0&&(0,v.jsx)(i.c,{className:"pt-0",sx:{maxHeight:"50vh",overflowY:"auto"},children:null===M||void 0===M||null===(l=M.ClosingStocks)||void 0===l?void 0:l.map(((e,l)=>(0,v.jsx)(ue,{o:e},l)))})]})}),(null===$||void 0===$?void 0:$.cust)&&(0,v.jsxs)(o.c,{component:h.c,variant:"outlined",sx:{mt:2},children:[(0,v.jsxs)("div",{className:"p-3 d-flex justify-content-between fa-18 fw-bold",children:[(0,v.jsxs)("span",{children:["Current Stock",(0,v.jsxs)("span",{style:{fontWeight:"normal",fontSize:"16px"},children:[" ( Products ",null===q||void 0===q?void 0:q.length," )"]})]}),(0,v.jsxs)("span",{children:["\u20b9 ",(0,n.SA)(q.reduce(((e,l)=>e+l.Previous_Balance*l.Item_Rate),0))]})]}),(null===q||void 0===q?void 0:q.length)>0&&(0,v.jsx)(i.c,{sx:{maxHeight:"50vh",overflowY:"auto"},children:(0,v.jsx)("div",{className:"table-responsive",children:(0,v.jsxs)("table",{className:"table",children:[(0,v.jsx)("thead",{children:(0,v.jsx)("tr",{children:["Sno","Product Name","Date","Quantity","Rate","Value"].map((e=>(0,v.jsx)("th",{className:"fa-14 border text-center",children:e},e)))})}),(0,v.jsx)("tbody",{children:null===q||void 0===q?void 0:q.map(((e,l)=>(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{className:"fa-14 border",children:l+1}),(0,v.jsx)("td",{className:"fa-14 border",children:null===e||void 0===e?void 0:e.Product_Name}),(0,v.jsx)("td",{className:"fa-14 border text-center",children:(0,n.uy)(null===e||void 0===e?void 0:e.Cl_Date)}),(0,v.jsx)("td",{className:"fa-14 border text-end",children:(0,n.SA)(null===e||void 0===e?void 0:e.Previous_Balance)}),(0,v.jsx)("td",{className:"fa-14 border text-end",children:null===e||void 0===e?void 0:e.Item_Rate}),(0,v.jsx)("td",{className:"fa-14 border text-end",children:null!==e&&void 0!==e&&e.Previous_Balance&&null!==e&&void 0!==e&&e.Item_Rate?(0,n.SA)((null===e||void 0===e?void 0:e.Item_Rate)*(null===e||void 0===e?void 0:e.Previous_Balance)):0})]},l)))})]})})})]}),(0,v.jsxs)(b.c,{open:null===Y||void 0===Y?void 0:Y.closingStock,onClose:ne,fullScreen:!0,children:[(0,v.jsxs)(N.c,{children:[(0,v.jsx)(s.c,{size:"small",onClick:ne,className:"me-2",children:(0,v.jsx)(T.c,{})}),te?"Modify":"Add"," Closing Stock For",(0,v.jsx)("span",{className:"ps-1 text-primary",children:null===le||void 0===le?void 0:le.Retailer_Name})]}),(0,v.jsxs)(f.c,{className:"bg-light",children:[(0,v.jsxs)("div",{className:"col-xl-3 col-sm-4 mb-4",children:[(0,v.jsx)("label",{children:"Date"}),(0,v.jsx)("input",{type:"date",value:null!==le&&void 0!==le&&le.ST_Date?new Date(null===le||void 0===le?void 0:le.ST_Date).toISOString().split("T")[0]:"",onChange:e=>ae((0,x.c)((0,x.c)({},le),{},{ST_Date:e.target.value})),className:"cus-inpt",required:!0})]}),(0,v.jsxs)(B.cp,{value:W,children:[(0,v.jsx)(_.c,{sx:{borderBottom:1,borderColor:"divider"},children:(0,v.jsx)(F.c,{indicatorColor:"transparant",onChange:(e,l)=>H(l),variant:"scrollable",scrollButtons:"auto",children:null===m||void 0===m?void 0:m.map(((e,l)=>(0,v.jsx)(g.c,{sx:String(W)===String(null===e||void 0===e?void 0:e.Pro_Group_Id)?{backgroundColor:"#c6d7eb"}:{},label:null===e||void 0===e?void 0:e.Pro_Group,value:String(null===e||void 0===e?void 0:e.Pro_Group_Id)},l)))})}),null===m||void 0===m?void 0:m.map(((e,l)=>{var a;return(0,v.jsx)(O.c,{value:String(null===e||void 0===e?void 0:e.Pro_Group_Id),sx:{p:0},children:(0,v.jsx)("div",{className:"row",children:null===e||void 0===e||null===(a=e.GroupedProductArray)||void 0===a?void 0:a.map(((e,l)=>{var a;return(0,v.jsx)("div",{className:"col-xl-4 col-lg-6 p-2",children:(0,v.jsxs)(o.c,{sx:{display:"flex"},children:[(0,v.jsx)(j.c,{component:"img",sx:{width:151},image:null===e||void 0===e?void 0:e.productImageUrl,alt:"Pic"}),(0,v.jsxs)(i.c,{sx:{flexGrow:"1"},children:[(0,v.jsx)("h6",{className:(0,n.QT)(re(null===e||void 0===e?void 0:e.Product_Id)||0,0)&&"text-primary",children:null===e||void 0===e?void 0:e.Product_Name}),(0,v.jsx)("p",{children:(null===e||void 0===e?void 0:e.Product_Description)+" - "+(null===e||void 0===e?void 0:e.UOM)}),(0,v.jsxs)("div",{className:"py-2",children:[(0,v.jsx)("label",{className:"mb-2 w-100",children:"Closing Stock"}),(0,v.jsx)("input",{style:{maxWidth:350},type:"number",className:"cus-inpt",onChange:l=>((e,l,a,d)=>{const s=de.findIndex((l=>l.Product_Id===e));if(-1!==s){const e=[...de];e[s].ST_Qty=l,e[s].PR_Qty=d,e[s].LT_CL_Date=a,se(e)}else se((s=>[...s,{Product_Id:e,ST_Qty:l,PR_Qty:d,LT_CL_Date:a}]))})(null===e||void 0===e?void 0:e.Product_Id,l.target.value,ce(null===e||void 0===e?void 0:e.Product_Id),re(null===e||void 0===e?void 0:e.Product_Id)),value:(null===(a=de.find((l=>Number(null===l||void 0===l?void 0:l.Product_Id)===Number(null===e||void 0===e?void 0:e.Product_Id))))||void 0===a?void 0:a.ST_Qty)||""}),(0,v.jsx)("label",{className:" text-muted fa-13",children:re(null===e||void 0===e?void 0:e.Product_Id)?(0,v.jsxs)(v.Fragment,{children:["Previous:\xa0",(0,v.jsx)("span",{className:"me-2",children:(0,n.uy)(ce(null===e||void 0===e?void 0:e.Product_Id))}),(0,v.jsxs)("span",{className:"text-primary ",children:["( ",re(null===e||void 0===e?void 0:e.Product_Id)," )"]})]}):""})]})]})]})},l)}))})},l)}))]}),(0,v.jsxs)("div",{className:"col-lg-6 col-md-6 col-sm-8 mb-4",children:[(0,v.jsx)("label",{children:"Narration"}),(0,v.jsx)("textarea",{className:"cus-inpt",onChange:e=>ae((0,x.c)((0,x.c)({},le),{},{Narration:e.target.value})),value:null===le||void 0===le?void 0:le.Narration,rows:4})]})]}),(0,v.jsxs)(S.c,{children:[(0,v.jsx)(p.c,{onClick:ne,children:"cancel"}),(0,v.jsx)(p.c,{variant:"contained",color:"success",onClick:()=>{(null===de||void 0===de?void 0:de.length)>0&&null!==le&&void 0!==le&&le.Retailer_Id?(0,u.q)({address:"masters/retailers/closingStock",method:te?"PUT":"POST",bodyData:(0,x.c)((0,x.c)({},le),{},{Product_Stock_List:de})}).then((e=>{e.success?(E.m4.success(null===e||void 0===e?void 0:e.message),ne(),Z(!J)):E.m4.error(null===e||void 0===e?void 0:e.message)})).catch((e=>console.error(e))):E.m4.error("Enter any one valid stock value")},children:"confirm"})]})]})]})},M=()=>{const[e,l]=(0,d.useState)(1);return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(B.cp,{value:e,children:[(0,v.jsx)(_.c,{sx:{borderBottom:1,borderColor:"divider"},children:(0,v.jsxs)(F.c,{indicatorColor:"transparant",onChange:(e,a)=>l(a),variant:"scrollable",scrollButtons:"auto",children:[(0,v.jsx)(g.c,{sx:1===e?{backgroundColor:"#c6d7eb"}:{},label:"Retailer Based",value:1}),(0,v.jsx)(g.c,{sx:2===e?{backgroundColor:"#c6d7eb"}:{},label:"Area Based",value:2})]})}),(0,v.jsx)(O.c,{value:1,sx:{p:0,pt:2},children:(0,v.jsx)(Q,{})}),(0,v.jsx)(O.c,{value:2,sx:{p:0,pt:2},children:(0,v.jsx)(m,{})})]})})}}}]);
//# sourceMappingURL=3640.7d6289da.chunk.js.map