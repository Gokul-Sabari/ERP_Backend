"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[7480],{62344:(e,a,t)=>{t.d(a,{o$:()=>n,o5:()=>d,cF:()=>o,iI:()=>l,_8:()=>r});const s=t.p+"static/media/smt.aa4d4f940bbebff07a57.png",l={table:{style:{width:"auto",backgroundColor:"transparent"}},rows:{style:{backgroundColor:"transparent"}},headCells:{style:{backgroundColor:"#6b9080f8",color:"white",fontSize:"14px"}}},o={menu:(e,a)=>({...e,zIndex:9999}),menuPortal:e=>({...e,zIndex:9999}),groupHeading:e=>({...e,backgroundColor:"#f5f5f5",color:"#333",fontWeight:"bold",fontSize:"14px",padding:"8px 12px",borderBottom:"1px solid #ddd",textTransform:"uppercase"}),option:(e,a)=>({...e,backgroundColor:a.isSelected?"#2684FF":a.isFocused?"#E2ECF9":"white",color:a.isSelected?"white":"#333",padding:"10px 12px"})},n=[{id:1,headname:"Menu ID",variant:"head",align:"left",width:100},{id:2,headname:"MenuName"},{id:3,headname:"Read Rights"},{id:4,headname:"Add Rights"},{id:5,headname:"Edit Rights"},{id:6,headname:"Delete Rights"},{id:7,headname:"Print Rights"},{id:8,headname:"Action"}],d=[{dataBase:1,name:"SHANKAR TRADERS",business:"Wholesale Merchant in Dhall",address:"32, Chitrakara Street, Madurai - 01 <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:s,gstin:"33AADFS6973R1ZD",phone:"984-313-1353, 984-335-5166",fssai:"12418012000818",bankAccount:"0021 5032 0885 122",ifsc:"TMBL0000002"},{dataBase:2,name:"SMT AGRO PRODUCTS",business:"",address:"H.O: 153, Chitrakara Street, 2nd Floor, Madurai -01 <br /> G.O: 746 Puliyur, Sayanapuram, Svga <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:s,gstin:"33ACMFS3420Q1ZQ",phone:"0452-4371625",fssai:"12418012000818",bankAccount:"0025 3031 0875 947",ifsc:"TMBL0000002"},{dataBase:3,name:"BHAVANI TRADERS",business:"",address:"H.O: 152-A, Chitrakara Street, Madurai -01 <br /> G.O: 30/1-Rajman Nagar, Chintamani Main Road, Mdu-01 <br /> Tax Invoice",logo:s,gstin:"33AAEFB6728J1ZG",phone:"958-559-7641, 958-559-7614",fssai:"12418012000670",bankAccount:"0021 5005 0800 309",ifsc:"TMBL0000002"}],r=[{name:"PURCHASE_ORDER"},{name:"PURCHASE_INVOICE"},{name:"SALE_ORDER"},{name:"SALE_INVOICE"},{name:"JOURNAL"},{name:"STOCK_JOURNAL"},{name:"PAYMENT"},{name:"RECEIPT"},{name:"CONTRA"}]},2940:(e,a,t)=>{t.d(a,{c:()=>n});var s=t(69060),l=t(47620),o=(t(34688),t(82496));const n=e=>{let{TasksArray:a}=e;const[t,n]=(0,s.useState)(null),[d,r]=(0,s.useState)(null),[i,c]=(0,s.useState)(null);(0,s.useEffect)((()=>{if(a.length>0){const e=a.reduce(((e,a)=>{const t=new Date((new Date).toISOString().split("T")[0]+"T"+a.Start_Time);return e+(new Date((new Date).toISOString().split("T")[0]+"T"+a.End_Time)-t)}),0),t=new Date((new Date).toISOString().split("T")[0]+"T"+a[0].Start_Time),s=new Date((new Date).toISOString().split("T")[0]+"T"+a[a.length-1].End_Time)-t,l=s-e,o=Math.floor(s/1e3),d=Math.floor(o/3600),r=Math.floor(o%3600/60),i=o%60;c(`${String(d).padStart(2,"0")}:${String(r).padStart(2,"0")}:${String(i).padStart(2,"0")}`);const m=a.map((e=>{const a=new Date((new Date).toISOString().split("T")[0]+"T"+e.Start_Time),t=new Date((new Date).toISOString().split("T")[0]+"T"+e.End_Time)-a;return{label:`${e.Task_Name} (${e.Start_Time} - ${e.End_Time})`,duration:t,backgroundColor:u()}})),p={labels:m.map((e=>e.label)),datasets:[{data:m.map((e=>e.duration)),backgroundColor:m.map((e=>e.backgroundColor)),borderColor:"rgba(255, 255, 255, 1)",borderWidth:1}]};p.labels.push("Free Time"),p.datasets[0].data.push(l),p.datasets[0].backgroundColor.push("#ADD8E6"),n(p)}}),[a]),(0,s.useEffect)((()=>{if(t){d&&d.destroy();const e=document.getElementById("empWokHours"),a=new l.cp(e,{type:"pie",data:t,options:{responsive:!0,plugins:{tooltip:{callbacks:{label:function(e){const a=e.parsed||0,t=e.dataset.data.reduce(((e,a)=>e+a),0),s=Math.round(a/t*100);return`${Math.round(a/6e4)} minutes (${s}%)`}}},datalabels:{color:"#fff",formatter:(e,a)=>{const t=a.chart.data.labels[a.dataIndex],s=a.parsed||0,l=a.dataset.data.reduce(((e,a)=>e+a),0);return`${t}: ${e} (${Math.round(s/l*100)}%)`}}}}});r(a)}}),[t]);const u=()=>{let e="#";for(let a=0;a<6;a++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e};return a.length>0?(0,o.jsxs)("div",{className:"d-flex flex-column align-items-center my-3",style:{maxHeight:"500px"},children:[i&&(0,o.jsxs)("p",{className:"my-2",children:["Total Time: ",i]}),(0,o.jsx)("canvas",{id:"empWokHours",width:"400",height:"100"})]}):(0,o.jsx)("h5",{className:"text-center my-5",children:"No Data For PieChart!"})}},35684:(e,a,t)=>{t.r(a),t.d(a,{default:()=>p});var s=t(69060),l=(t(21680),t(99852)),o=t(62344),n=t(2940),d=t(47620),r=(t(95382),t(82496));const i=e=>{let{startDate:a,endDate:t,taskActivity:l}=e;const o=(0,s.useRef)(null),n=(0,s.useRef)(null);return(0,s.useEffect)((()=>{if(o&&o.current){const e=o.current.getContext("2d"),s=l.map((e=>new Date(e.Work_Dt))),r=l.map((e=>e.Worked_Minutes));n.current&&n.current.destroy(),n.current=new d.cp(e,{type:"line",data:{labels:s,datasets:[{label:"Worked Minutes",data:r,borderColor:"blue",backgroundColor:"transparent",pointBackgroundColor:"blue",pointRadius:5,pointHoverRadius:7}]},options:{scales:{x:{type:"time",time:{unit:"day",min:a,max:t},title:{display:!0,text:"Date"}},y:{title:{display:!0,text:"Worked Minutes"}}},plugins:{tooltip:{callbacks:{label:function(e){let a=e.dataset.label||"";a&&(a+=": "),null!==e.parsed.y&&(a+=e.parsed.y+" minutes");const t=l[e.dataIndex];return t&&(a+=` (${t.Employee_Name}, Time: ${t.Start_Time}-${t.End_Time})`),a}}}}}})}return()=>{n.current&&n.current.destroy()}}),[a,t,l]),(0,r.jsx)("canvas",{ref:o})};var c=t(43692),u=t(84436),m=t(1908);const p=()=>{const e=localStorage.getItem("user"),a=JSON.parse(e),[t,d]=(0,s.useState)([]),[p,h]=(0,s.useState)([]),[g,v]=(0,s.useState)([]),[b,k]=(0,s.useState)([]),[T,S]=(0,s.useState)([]),x={Emp_Id:null===a||void 0===a?void 0:a.UserId,date:(new Date).toISOString().split("T")[0],EmpGet:null===a||void 0===a?void 0:a.Name},f={Emp_Id:null===a||void 0===a?void 0:a.UserId,From:new Date((new Date).setDate((new Date).getDate()-30)).toISOString().split("T")[0],To:(new Date).toISOString().split("T")[0],EmpGet:null===a||void 0===a?void 0:a.Name,Task_Id:"",TaskGet:""},[E,I]=(0,s.useState)(x),[y,_]=(0,s.useState)(f);return(0,s.useEffect)((()=>{(0,m.q)({address:`taskManagement/task/work?Emp_Id=${E.Emp_Id}&from=${E.date}&to=${E.date}`}).then((e=>{e.success&&d(e.data)})).catch((e=>console.error(e)))}),[null===E||void 0===E?void 0:E.Emp_Id,null===E||void 0===E?void 0:E.date]),(0,s.useEffect)((()=>{(0,m.q)({address:`taskManagement/task/assignEmployee/user/dropDown?Company_id=${null===a||void 0===a?void 0:a.Company_id}`}).then((e=>{e.success&&v(e.data)})).catch((e=>console.error(e))),(0,m.q)({address:"taskManagement/task/assignEmployee/task/dropDown"}).then((e=>{var a;e.success&&S(e.data),(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.length)>0&&_((a=>({...a,Task_Id:e.data[0].Task_Id,TaskGet:e.data[0].Task_Name})))})).catch((e=>console.error(e)))}),[]),(0,s.useEffect)((()=>{(0,m.q)({address:`taskManagement/task/work/barChart?Emp_Id=${null===y||void 0===y?void 0:y.Emp_Id}&From=${null===y||void 0===y?void 0:y.From}&To=${null===y||void 0===y?void 0:y.To}&Task_Id=${null===y||void 0===y?void 0:y.Task_Id}`}).then((e=>{e.success&&h(e.data)})).catch((e=>console.error(e)))}),[y.Emp_Id,y.From,y.To,y.Task_Id]),(0,s.useEffect)((()=>{k([]),(0,m.q)({address:`taskManagement/task/workedUsers/dropDown?Task_Id=${y.Task_Id}`}).then((e=>{e.success&&k(e.data)})).catch((e=>console.error(e)))}),[null===y||void 0===y?void 0:y.Task_Id]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.c,{children:(0,r.jsxs)(u.c,{style:{minHeight:500},children:[(0,r.jsx)("h5",{children:"User Work Report"}),(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-4 col-sm-4 p-2",children:(0,r.jsx)(l.cp,{value:{value:null===E||void 0===E?void 0:E.Emp_Id,label:null===E||void 0===E?void 0:E.EmpGet},onChange:e=>I({...E,Emp_Id:e.value,EmpGet:e.label}),options:[{value:"",label:"All Employee"},...g.map((e=>({value:e.UserId,label:e.Name})))],styles:o.cF,isSearchable:!0,placeholder:"Employee Name"})}),(0,r.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-4 col-sm-4 p-2",children:(0,r.jsx)("input",{type:"date",value:E.date,onChange:e=>I({...E,date:e.target.value}),className:"cus-inpt bg-test",style:{backgroundColor:"rgba(255, 255, 255, 0.322)"}})})]}),(0,r.jsx)(n.c,{TasksArray:t})]})}),(0,r.jsx)(c.c,{className:"mt-3",children:(0,r.jsxs)(u.c,{style:{minHeight:500},children:[(0,r.jsx)("h5",{children:"Task Activity Report"}),(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-4 col-sm-4 p-2",children:(0,r.jsx)(l.cp,{value:{value:null===y||void 0===y?void 0:y.Task_Id,label:null===y||void 0===y?void 0:y.TaskGet},onChange:e=>_({...y,Task_Id:e.value,TaskGet:e.label}),options:[...T.map((e=>({value:e.Task_Id,label:e.Task_Name})))],styles:o.cF,isSearchable:!0,placeholder:"Task Name"})}),(0,r.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-4 col-sm-4 p-2",children:(0,r.jsx)(l.cp,{value:{value:null===y||void 0===y?void 0:y.Emp_Id,label:null===y||void 0===y?void 0:y.EmpGet},onChange:e=>_({...y,Emp_Id:e.value,EmpGet:e.label}),options:[{value:"",label:"All Employee"},...b.map((e=>({value:null===e||void 0===e?void 0:e.Emp_Id,label:null===e||void 0===e?void 0:e.Name})))],styles:o.cF,isSearchable:!0,placeholder:"Employee Name"})}),(0,r.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-4 col-sm-4 p-2",children:(0,r.jsx)("input",{type:"date",value:y.From,onChange:e=>_({...y,From:e.target.value}),className:"cus-inpt bg-test",style:{backgroundColor:"rgba(255, 255, 255, 0.322)"}})}),(0,r.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-4 col-sm-4 p-2",children:(0,r.jsx)("input",{type:"date",value:y.To,onChange:e=>_({...y,To:e.target.value}),className:"cus-inpt bg-test",style:{backgroundColor:"rgba(255, 255, 255, 0.322)"}})})]}),(0,r.jsx)(i,{taskActivity:p,startDate:y.From,endDate:y.To})]})})]})}}}]);
//# sourceMappingURL=7480.5df5c868.chunk.js.map