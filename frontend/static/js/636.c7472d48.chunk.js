"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[636],{60636:(e,a,t)=>{t.r(a),t.d(a,{default:()=>p});var s=t(30800),r=t(69060),l=t(1908),c=t(39308),n=t(13724),o=t(43692),i=t(89e3),d=t(5548),h=t(56480),u=t(71412),m=t(87016),x=t(82496);const p=e=>{let{loadingOn:a,loadingOff:t}=e;const[p,v]=(0,r.useState)([]),[g,j]=(0,r.useState)([]),[y,N]=(0,r.useState)({FromDate:new Date((new Date).setDate((new Date).getDate()-1)).toISOString().split("T")[0],ToDate:(new Date).toISOString().split("T")[0],refresh:!1,viewNotSynced:!1,searchERPLol:"",searchTallyLol:"",searchNotSynced:""}),b=(0,r.useMemo)((()=>p.filter((e=>!g.some((a=>(0,c.Qr)(e.invoiceno,a.invoiceno)))))),[p,g]),A=(0,r.useMemo)((()=>y.searchERPLol?p.filter((e=>(0,c.MP)(Object.values(e).join(" ")).includes((0,c.MP)(y.searchERPLol)))):p),[y.searchERPLol,p]),S=(0,r.useMemo)((()=>y.searchTallyLol?g.filter((e=>(0,c.MP)(Object.values(e).join(" ")).includes((0,c.MP)(y.searchTallyLol)))):g),[y.searchTallyLol,g]),f=(0,r.useMemo)((()=>y.searchNotSynced?b.filter((e=>(0,c.MP)(Object.values(e).join(" ")).includes((0,c.MP)(y.searchNotSynced)))):b),[b,y.searchNotSynced]);(0,r.useEffect)((()=>{a&&a(),(0,l.q)({address:"masters/posProductList?FromDate=".concat(y.FromDate,"&ToDate=").concat(y.ToDate)}).then((e=>{if(e.success){var a;const t=Array.isArray(null===e||void 0===e||null===(a=e.others)||void 0===a?void 0:a.tallyResult)?e.others.tallyResult:[];v(e.data),j(t)}})).catch((e=>{console.error(e)})).finally((()=>{t&&t()}))}),[y.refresh,y.FromDate,y.ToDate]);const D=e=>{var a;let{row:t}=e;return(0,x.jsxs)("table",{className:"table",children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{className:"border p-2 bg-light",children:"Product ID"}),(0,x.jsx)("th",{className:"border p-2 bg-light",children:"Product Name"}),(0,x.jsx)("th",{className:"border p-2 bg-light",children:"Qty"}),(0,x.jsx)("th",{className:"border p-2 bg-light",children:"Price"}),(0,x.jsx)("th",{className:"border p-2 bg-light",children:"Total Price"})]})}),(0,x.jsx)("tbody",{children:null===t||void 0===t||null===(a=t.items)||void 0===a?void 0:a.map(((e,a)=>(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{className:"border p-2",children:null===e||void 0===e?void 0:e.icode}),(0,x.jsx)("td",{className:"border p-2",children:null===e||void 0===e?void 0:e.product_name}),(0,x.jsx)("td",{className:"border p-2",children:null===e||void 0===e?void 0:e.qty}),(0,x.jsx)("td",{className:"border p-2",children:null===e||void 0===e?void 0:e.sell}),(0,x.jsx)("td",{className:"border p-2",children:null!==e&&void 0!==e&&e.qty&&null!==e&&void 0!==e&&e.sell?e.qty*e.sell:0})]},a)))})]})};return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)(o.c,{children:[(0,x.jsxs)("div",{className:"px-3 py-2 fa-14",children:[(0,x.jsxs)("div",{className:"d-flex flex-wrap align-items-center",children:[(0,x.jsxs)("h5",{className:"flex-grow-1",children:["POS SYNC (Differents: ",b.length,")"]}),(0,x.jsx)("td",{style:{verticalAlign:"middle"},children:"From"}),(0,x.jsx)("td",{children:(0,x.jsx)("input",{type:"date",value:y.FromDate,onChange:e=>N((0,s.c)((0,s.c)({},y),{},{FromDate:e.target.value})),className:"cus-inpt"})}),(0,x.jsx)("td",{style:{verticalAlign:"middle"},children:"To"}),(0,x.jsx)("td",{children:(0,x.jsx)("input",{type:"date",value:y.ToDate,onChange:e=>N((0,s.c)((0,s.c)({},y),{},{ToDate:e.target.value})),className:"cus-inpt"})}),(0,x.jsx)(i.c,{onClick:()=>{a&&a(),(0,l.q)({address:"masters/posProductList?FromDate=".concat(y.FromDate,"&ToDate=").concat(y.ToDate)}).then((e=>{if(e.success){var a,t;const s=Array.isArray(null===e||void 0===e||null===(a=e.others)||void 0===a?void 0:a.tallyResult)?null===e||void 0===e||null===(t=e.others)||void 0===t?void 0:t.tallyResult:[];v(e.data),j(s)}})).catch((e=>console.error(e))).finally((()=>{t&&t()}))},children:"Search"}),(0,x.jsx)(d.c,{size:"small",onClick:()=>{N((e=>(0,s.c)((0,s.c)({},e),{},{viewNotSynced:!e.viewNotSynced})))},children:(0,x.jsx)(u.c,{})})]}),(0,x.jsx)("div",{className:"d-flex flex-wrap align-items-center"})]}),y.viewNotSynced?(0,x.jsx)(n.cp,{title:"Not synced list ",bodyFontSizePx:11,headerFontSizePx:11,dataArray:f,columns:[(0,n.A5)("invoiceno","string","Invoice"),(0,n.A5)("edate","date","edate"),(0,n.A5)("Retailer_Name","string","Retailer"),(0,n.A5)("Broker","string","Broker_Name"),(0,n.A5)("Transporter","string","Transporter"),(0,n.A5)("namount","string","Net Amount"),{Field_Name:"Actions",ColumnHeader:"Actions",isVisible:1,isCustomCell:!0,Cell:e=>{let{row:r}=e;return(0,x.jsx)("td",{className:"fa-12",style:{minWidth:"80px"},children:(0,x.jsx)(d.c,{size:"small",onClick:()=>{return e=r,a&&a(),void(0,l.q)({address:"masters/syncPOSData?invoiceId=".concat(e.invoiceno)}).then((e=>{e.success?h.m4.success(e.message):h.m4.error(e.message)})).catch((e=>console.error(e))).finally((()=>{N((e=>(0,s.c)((0,s.c)({},e),{},{refresh:!e.refresh}))),t&&t()}));var e},children:(0,x.jsx)(m.c,{})})})}}],isExpendable:!0,tableMaxHeight:550,expandableComp:D,ButtonArea:(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("input",{type:"search",className:"cus-inpt p-1 w-auto",value:y.searchNotSynced,onChange:e=>N((a=>(0,s.c)((0,s.c)({},a),{},{searchNotSynced:e.target.value}))),placeholder:"Search.."})})}):(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-lg-6 p-1",children:(0,x.jsx)(n.cp,{title:"Data POS - "+p.length,bodyFontSizePx:11,headerFontSizePx:11,dataArray:A,columns:[(0,n.A5)("invoiceno","string","Invoice"),(0,n.A5)("edate","date","edate"),(0,n.A5)("Retailer_Name","string","Retailer_Name"),(0,n.A5)("Broker","string","Broker"),(0,n.A5)("Transporter","string","Transporter"),(0,n.A5)("namount","string","Net Amount")],ButtonArea:(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("input",{type:"search",className:"cus-inpt p-1 w-auto",value:y.searchERPLol,onChange:e=>N((a=>(0,s.c)((0,s.c)({},a),{},{searchERPLol:e.target.value}))),placeholder:"Search.."})}),isExpendable:!0,tableMaxHeight:550,expandableComp:D})}),(0,x.jsx)("div",{className:"col-lg-6 p-1",children:(0,x.jsx)(n.cp,{title:"DataBase - "+g.length,bodyFontSizePx:11,headerFontSizePx:11,dataArray:S,columns:[(0,n.A5)("invoiceno","string","invoiceno"),(0,n.A5)("edate","date","edate"),(0,n.A5)("Retailer_Name","string","Retailer_Name"),(0,n.A5)("Broker_Name","string","Broker"),(0,n.A5)("Transporter_Name","string","Transporter"),(0,n.A5)("namount","string","Net Amount")],ButtonArea:(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("input",{type:"search",className:"cus-inpt p-1 w-auto",value:y.searchTallyLol,onChange:e=>N((a=>(0,s.c)((0,s.c)({},a),{},{searchTallyLol:e.target.value}))),placeholder:"Search.."})}),isExpendable:!0,tableMaxHeight:550,expandableComp:D})})]})})]})})}},87016:(e,a,t)=>{t.d(a,{c:()=>l});var s=t(27664),r=t(82496);const l=(0,s.c)((0,r.jsx)("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8m0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4z"}),"Sync")},71412:(e,a,t)=>{t.d(a,{c:()=>l});var s=t(27664),r=t(82496);const l=(0,s.c)((0,r.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")}}]);
//# sourceMappingURL=636.c7472d48.chunk.js.map