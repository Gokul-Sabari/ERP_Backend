"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[7712],{17712:(e,l,a)=>{a.r(l),a.d(l,{default:()=>F});var s=a(30800),d=a(69060),i=a(3358),t=a(5548),r=a(43692),o=a(89e3),n=a(78092),c=a(84436),u=a(82656),v=a(26773),h=a(4488),m=a(44380),_=a(90048),x=(a(67472),a(40656)),p=a(62344),b=a(39308),j=a(71412),y=a(61988),g=a(80236),S=a(1908),C=a(13724),N=a(55312),I=a(91924),D=a(40691),f=a(91164),A=a(56480),P=a(82496);const F=e=>{let{loadingOn:l,loadingOff:a}=e;const[F,w]=(0,d.useState)([]),T=JSON.parse(localStorage.getItem("user")),[R,G]=(0,d.useState)([]),[L,O]=(0,d.useState)([]),[k,V]=(0,d.useState)([]),[H,B]=(0,d.useState)([]),[q,E]=(0,d.useState)(!0),[Q,W]=(0,d.useState)({}),[U,z]=(0,d.useState)({}),[M,J]=(0,d.useState)(!1),[Y,K]=(0,d.useState)([]),[X,Z]=(0,d.useState)([]),[$,ee]=(0,d.useState)(!1),[le,ae]=(0,d.useState)([]),se=(0,d.useState)(!0),de=null===T||void 0===T?void 0:T.UserId,ie=null===T||void 0===T?void 0:T.BranchId,[te,re]=(0,d.useState)(!1),oe=()=>re(!1),[ne,ce]=(0,d.useState)([]),ue={Fromdate:(0,b.SO)(7),Todate:(0,b.Q7)(),Retailer_Id:"",RetailerGet:"ALL",Created_by:"",CreatedByGet:"ALL",Sales_Person_Id:"",SalsePersonGet:"ALL",Cancel_status:0,Route_Id:"",RoutesGet:"ALL",Area_Id:"",AreaGet:"ALL"},[ve,he]=(0,d.useState)(ue),[me,_e]=(0,d.useState)(!1),[xe,pe]=(0,d.useState)({Do_Date:(0,b.Q7)(),Vehicle_No:"",Trip_No:"",Trip_Date:(0,b.Q7)(),StartTime:"",Created_by:"",Delivery_Person_Id:"",Delivery_Location:"",Delivery_Time:"",Payment_Ref_No:"",Payment_Mode:"",Payment_Status:"",Narration:"",Alter_Id:"",Delivery_Status:"",GoDown_Id:"",GodDown_Name:""}),[be,je]=(0,d.useState)({filters:!1,orderDetails:!1});(0,d.useEffect)((()=>{(0,S.q)({address:"sales/saleDelivery?Fromdate=".concat(null===ve||void 0===ve?void 0:ve.Fromdate,"&Todate=").concat(null===ve||void 0===ve?void 0:ve.Todate,"&Retailer_Id=").concat(null===ve||void 0===ve?void 0:ve.Retailer_Id,"&Sales_Person_Id=").concat(null===ve||void 0===ve?void 0:ve.Sales_Person_Id,"&Created_by=").concat(null===ve||void 0===ve?void 0:ve.Created_by,"&Cancel_status=").concat(null===ve||void 0===ve?void 0:ve.Cancel_status,"&Route_Id=").concat(null===ve||void 0===ve?void 0:ve.Route_Id,"&Area_Id=").concat(null===ve||void 0===ve?void 0:ve.Area_Id)}).then((e=>{e.success&&G(null===e||void 0===e?void 0:e.data)})).catch((e=>console.error(e)))}),[ve.Fromdate,null===ve||void 0===ve?void 0:ve.Todate,null===ve||void 0===ve?void 0:ve.Retailer_Id,null===ve||void 0===ve?void 0:ve.Sales_Person_Id,null===ve||void 0===ve?void 0:ve.Created_by,null===ve||void 0===ve?void 0:ve.Cancel_status,null===ve||void 0===ve?void 0:ve.Route_Id,null===ve||void 0===ve?void 0:ve.Area_Id,M,me]);(0,d.useEffect)((()=>{(0,S.q)({address:"masters/retailers/dropDown?Company_Id=".concat(null===T||void 0===T?void 0:T.Company_id)}).then((e=>{e.success&&O(e.data)})).catch((e=>console.error(e))),(0,S.q)({address:"masters/users/salesPerson/dropDown?Company_id=".concat(null===T||void 0===T?void 0:T.Company_id)}).then((e=>{e.success&&V(e.data)})).catch((e=>console.error(e))),(0,S.q)({address:"masters/user/dropDown?Company_id=".concat(null===T||void 0===T?void 0:T.Company_id)}).then((e=>{e.success&&B(e.data)})).catch((e=>console.error(e))),(0,S.q)({address:"/dataEntry/godownLocationMaster"}).then((e=>{e.success&&ae(e.data)})).catch((e=>console.error(e))),(0,S.q)({address:"masters/routes/dropdown?Company_id=".concat(null===T||void 0===T?void 0:T.Company_id)}).then((e=>{e.success&&K(e.data)})).catch((e=>console.error(e))),(0,S.q)({address:"masters/areas/dropdown?Company_id=".concat(null===T||void 0===T?void 0:T.Company_id)}).then((e=>{e.success&&Z(e.data)})).catch((e=>console.error(e)))}),[]);const ye=[{Field_Name:"checkbox",ColumnHeader:"",isVisible:1,pointer:!0,isCustomCell:!0,Cell:e=>{let{row:l}=e;const a=F.some((e=>e.So_Id===l.So_Id));return(0,P.jsx)("input",{type:"checkbox",checked:a,onChange:()=>(e=>{const l=F.some((l=>l.So_Id===e.So_Id));w(l?F.filter((l=>l.So_Id!==e.So_Id)):[...F,e])})(l),disabled:0!==(null===l||void 0===l?void 0:l.isConverted),onFocus:e=>{e.target.blur()},style:{cursor:"pointer",transform:"scale(1.5)",width:"14px",height:"20px"}})}},{Field_Name:"So_Id",ColumnHeader:"Order ID",Fied_Data:"string",isVisible:1},{Field_Name:"Retailer_Name",ColumnHeader:"Customer",Fied_Data:"string",isVisible:1},{Field_Name:"So_Date",ColumnHeader:"Sale Order Date",Fied_Data:"date",isVisible:1,align:"center"},{Field_Name:"So_Inv_No",ColumnHeader:"So_Inv_No",Fied_Data:"string",isVisible:1,align:"center"},{Field_Name:"Total_Before_Tax",ColumnHeader:"Before Tax",Fied_Data:"number",isVisible:1,align:"center"},{Field_Name:"Total_Tax",ColumnHeader:"Tax",Fied_Data:"number",isVisible:1,align:"center"},{Field_Name:"Total_Invoice_value",ColumnHeader:"Invoice Value",Fied_Data:"number",isVisible:1,align:"center"},{ColumnHeader:"Status",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{var l,a;let{row:s}=e;const d=g.o.find((e=>e.id===Number(null===s||void 0===s?void 0:s.isConverted)));return(0,P.jsx)("span",{className:null!==(l="py-0 fw-bold px-2 rounded-4 fa-12 "+(null===d||void 0===d?void 0:d.color))&&void 0!==l?l:"bg-secondary text-white",children:null!==(a=null===d||void 0===d?void 0:d.label)&&void 0!==a?a:"Undefined"})}},{Field_Name:"Action",isVisible:1,isCustomCell:!0,Cell:e=>{let{row:l}=e;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(i.c,{title:"View Order",children:(0,P.jsx)(t.c,{onClick:()=>{z({orderDetails:l,orderProducts:null!==l&&void 0!==l&&l.Products_List?null===l||void 0===l?void 0:l.Products_List:[]})},color:"primary",size:"small",children:(0,P.jsx)(j.c,{className:"fa-16"})})}),(0,P.jsx)(i.c,{title:"Sales Delivery",children:(0,P.jsx)(t.c,{onClick:()=>{ge(),W((0,s.c)({},l))},size:"small",children:(0,P.jsx)(D.c,{className:"fa-16"})})})]})}}],ge=()=>{E(!q),W({})},Se=()=>{je((0,s.c)((0,s.c)({},be),{},{filters:!1,orderDetails:!1})),W({})};return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(r.c,{children:[(0,P.jsxs)("div",{className:"p-3 py-2 d-flex align-items-center justify-content-between",children:[(0,P.jsx)("h6",{className:"fa-18 m-0 p-0",children:q?"Sale Orders":(0,b.CY)(Q)}),(0,P.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[F.length>0&&(0,P.jsxs)("h6",{className:"m-0 text-muted",children:["Selected Rows: ",F.length]}),q&&(0,P.jsx)(i.c,{title:"Filters",children:(0,P.jsx)(t.c,{size:"small",onClick:()=>je((0,s.c)((0,s.c)({},be),{},{filters:!0})),children:(0,P.jsx)(y.c,{})})}),F.length>0&&q&&(0,P.jsx)(o.c,{variant:"outlined",onClick:()=>(e=>{if(!Array.isArray(e))return void console.error("Invalid data format. Expected an array.");re(!0);const l=[],a=[];e.forEach((e=>{e&&(l.push(e),e.Products_List&&Array.isArray(e.Products_List)&&a.push(...e.Products_List))})),ce(l),pe({DeliveryList:l,Product_Array:a})})(F),children:"Convert To Delivery"}),q&&(0,P.jsx)(n.c,{checked:se,onChange:()=>{E(!1),ee(!0)},inputProps:{"aria-label":"controlled"}})]})]}),(0,P.jsx)(c.c,{className:"p-0",children:q?(0,P.jsx)(C.cp,{dataArray:R,columns:ye,isExpendable:!0,tableMaxHeight:550,expandableComp:e=>{let{row:l}=e;return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)("table",{className:"table",children:(0,P.jsxs)("tbody",{children:[(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:"border p-2 bg-light",children:"Branch"}),(0,P.jsx)("td",{className:"border p-2",children:l.Branch_Name}),(0,P.jsx)("td",{className:"border p-2 bg-light",children:"Sales Person"}),(0,P.jsx)("td",{className:"border p-2",children:l.Sales_Person_Name}),(0,P.jsx)("td",{className:"border p-2 bg-light",children:"Round off"}),(0,P.jsx)("td",{className:"border p-2",children:l.Round_off})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:"border p-2 bg-light",children:"Invoice Type"}),(0,P.jsxs)("td",{className:"border p-2",children:[(0,b.Qr)(l.GST_Inclusive,1)&&"Inclusive",(0,b.Qr)(l.GST_Inclusive,0)&&"Exclusive"]}),(0,P.jsx)("td",{className:"border p-2 bg-light",children:"Tax Type"}),(0,P.jsxs)("td",{className:"border p-2",children:[(0,b.Qr)(l.IS_IGST,1)&&"IGST",(0,b.Qr)(l.IS_IGST,0)&&"GST"]}),(0,P.jsx)("td",{className:"border p-2 bg-light",children:"Sales Person"}),(0,P.jsx)("td",{className:"border p-2",children:l.Sales_Person_Name})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:"border p-2 bg-light",children:"Narration"}),(0,P.jsx)("td",{className:"border p-2",colSpan:5,children:l.Narration})]})]})})})}}):$?(0,P.jsx)(f.c,{editValues:Q,loadingOn:l,loadingOff:a,reload:()=>{J((e=>!e)),E((e=>!e))},switchScreen:()=>E(!0),onToggle:()=>{E((e=>!e)),ee((e=>!e))},triggerReload:()=>{J((e=>!e))}}):(0,P.jsx)(N.c,{editValues:Q,loadingOn:l,loadingOff:a,reload:()=>{J((e=>!e)),E((e=>!e))},switchScreen:()=>E(!0),editOn:!0})})]}),Object.keys(U).length>0&&(0,P.jsx)(I.c,{orderDetails:null===U||void 0===U?void 0:U.orderDetails,orderProducts:null===U||void 0===U?void 0:U.orderProducts,download:!0,actionOpen:!0,clearDetails:()=>z({}),TitleText:"Sale Order"}),(0,P.jsxs)(u.c,{open:te,onClose:oe,fullWidth:!0,maxWidth:"sm",children:[(0,P.jsx)(v.c,{children:"Delivery Details"}),(0,P.jsx)(h.c,{children:(0,P.jsxs)("form",{children:[(0,P.jsxs)("td",{style:{verticalAlign:"middle"},children:["Delivery Date ",(0,P.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,P.jsx)(m.c,{fullWidth:!0,type:"date",name:"Do_Date",value:xe.Do_Date,onChange:e=>{const{name:l,value:a}=e.target;pe((e=>(0,s.c)((0,s.c)({},e),{},{[l]:a})))},InputLabelProps:{shrink:!0}}),(0,P.jsxs)("div",{children:[(0,P.jsxs)("div",{style:{verticalAlign:"middle"},children:["Godown ",(0,P.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,P.jsx)("div",{children:(0,P.jsx)(x.cp,{value:null!==xe&&void 0!==xe&&xe.GoDown_Id?{value:null===xe||void 0===xe?void 0:xe.GoDown_Id,label:null===xe||void 0===xe?void 0:xe.GodDown_Name}:{value:"",label:"select",isDisabled:!0},onChange:e=>pe((0,s.c)((0,s.c)({},xe),{},{GoDown_Id:e.value,GodDown_Name:e.label})),options:[{value:"",label:"select",isDisabled:!0},...le.map((e=>({value:null===e||void 0===e?void 0:e.Godown_Id,label:null===e||void 0===e?void 0:e.Godown_Name})))],styles:p.cF,isSearchable:!0,menuPortalTarget:document.body,menuPosition:"fixed",menuPlacement:"auto"})})]})]})}),(0,P.jsxs)(_.c,{children:[(0,P.jsx)(o.c,{onClick:oe,children:"Cancel"}),(0,P.jsx)(o.c,{onClick:async()=>{const e=(0,s.c)((0,s.c)({},xe),{},{DeliveryList:ne,Branch_Id:ie,Created_by:de});try{const l=await(0,S.q)({address:"delivery/multipleDelivery",method:"POST",bodyData:e});if(!l.success)return A.m4.error(l.message),!1;A.m4.success(l.message),he(ue),J((e=>!e)),oe(),w([])}catch(l){oe()}},children:"Submit"})]})]}),(0,P.jsxs)(u.c,{open:be.filters,onClose:Se,fullWidth:!0,maxWidth:"sm",children:[(0,P.jsx)(v.c,{children:"Filters"}),(0,P.jsx)(h.c,{children:(0,P.jsx)("div",{className:"table-responsive pb-4",children:(0,P.jsx)("table",{className:"table",children:(0,P.jsxs)("tbody",{children:[(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{style:{verticalAlign:"middle"},children:"Retailer"}),(0,P.jsx)("td",{children:(0,P.jsx)(x.cp,{value:{value:null===ve||void 0===ve?void 0:ve.Retailer_Id,label:null===ve||void 0===ve?void 0:ve.RetailerGet},onChange:e=>he((0,s.c)((0,s.c)({},ve),{},{Retailer_Id:e.value,RetailerGet:e.label})),options:[{value:"",label:"ALL"},...L.map((e=>({value:null===e||void 0===e?void 0:e.Retailer_Id,label:null===e||void 0===e?void 0:e.Retailer_Name})))],styles:p.cF,isSearchable:!0,placeholder:"Retailer Name"})})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{style:{verticalAlign:"middle"},children:"Salse Person"}),(0,P.jsx)("td",{children:(0,P.jsx)(x.cp,{value:{value:null===ve||void 0===ve?void 0:ve.Sales_Person_Id,label:null===ve||void 0===ve?void 0:ve.SalsePersonGet},onChange:e=>he((0,s.c)((0,s.c)({},ve),{},{Sales_Person_Id:e.value,SalsePersonGet:e.label})),options:[{value:"",label:"ALL"},...k.map((e=>({value:null===e||void 0===e?void 0:e.UserId,label:null===e||void 0===e?void 0:e.Name})))],styles:p.cF,isSearchable:!0,placeholder:"Sales Person Name"})})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{style:{verticalAlign:"middle"},children:"Created By"}),(0,P.jsx)("td",{children:(0,P.jsx)(x.cp,{value:{value:null===ve||void 0===ve?void 0:ve.Created_by,label:null===ve||void 0===ve?void 0:ve.CreatedByGet},onChange:e=>he((0,s.c)((0,s.c)({},ve),{},{Created_by:e.value,CreatedByGet:e.label})),options:[{value:"",label:"ALL"},...H.map((e=>({value:null===e||void 0===e?void 0:e.UserId,label:null===e||void 0===e?void 0:e.Name})))],styles:p.cF,isSearchable:!0,placeholder:"Sales Person Name"})})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{style:{verticalAlign:"middle"},children:"From"}),(0,P.jsx)("td",{children:(0,P.jsx)("input",{type:"date",value:ve.Fromdate,onChange:e=>he((0,s.c)((0,s.c)({},ve),{},{Fromdate:e.target.value})),className:"cus-inpt"})})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{style:{verticalAlign:"middle"},children:"To"}),(0,P.jsx)("td",{children:(0,P.jsx)("input",{type:"date",value:ve.Todate,onChange:e=>he((0,s.c)((0,s.c)({},ve),{},{Todate:e.target.value})),className:"cus-inpt"})})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{style:{verticalAlign:"middle"},children:"Canceled Order"}),(0,P.jsx)("td",{children:(0,P.jsxs)("select",{type:"date",value:ve.Cancel_status,onChange:e=>he((0,s.c)((0,s.c)({},ve),{},{Cancel_status:Number(e.target.value)})),className:"cus-inpt",children:[(0,P.jsx)("option",{value:1,children:"Show"}),(0,P.jsx)("option",{value:0,children:"Hide"})]})})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{style:{verticalAlign:"middle"},children:"Routes"}),(0,P.jsx)("td",{children:(0,P.jsx)(x.cp,{value:{value:null===ve||void 0===ve?void 0:ve.Route_Id,label:null===ve||void 0===ve?void 0:ve.RoutesGet},onChange:e=>he((0,s.c)((0,s.c)({},ve),{},{Route_Id:e.value,RoutesGet:e.label})),options:[{value:"",label:"ALL"},...Y.map((e=>({value:null===e||void 0===e?void 0:e.Route_Id,label:null===e||void 0===e?void 0:e.Route_Name})))],styles:p.cF,isSearchable:!0,placeholder:"Route Name"})})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{style:{verticalAlign:"middle"},children:"Area"}),(0,P.jsx)("td",{children:(0,P.jsx)(x.cp,{value:{value:null===ve||void 0===ve?void 0:ve.Area_Id,label:null===ve||void 0===ve?void 0:ve.AreaGet},onChange:e=>he((0,s.c)((0,s.c)({},ve),{},{Area_Id:e.value,AreaGet:e.label})),options:[{value:"",label:"ALL"},...X.map((e=>({value:null===e||void 0===e?void 0:e.Area_Id,label:null===e||void 0===e?void 0:e.Area_Name})))],styles:p.cF,isSearchable:!0,placeholder:"Area Name"})})]})]})})})}),(0,P.jsx)(_.c,{children:(0,P.jsx)(o.c,{onClick:Se,children:"close"})})]})]})}}}]);
//# sourceMappingURL=7712.cf730230.chunk.js.map