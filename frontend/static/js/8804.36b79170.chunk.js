"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[8804],{78688:(e,a,t)=>{t.d(a,{c:()=>u});var l=t(69060),s=t(3358),c=t(82656),r=t(26773),d=t(5548),o=t(4488),n=t(14499),i=t(82496);const u=e=>{const[a,t]=(0,l.useState)(!1),{url:u}=e,p=()=>{t(!1)};return(0,i.jsxs)("span",{children:[(0,i.jsx)(s.c,{title:"Tap to Open",children:(0,i.jsx)("span",{onClick:()=>{t(!0)},style:{cursor:"pointer"},children:e.children})}),(0,i.jsxs)(c.c,{open:a,onClose:p,fullWidth:!0,maxWidth:"lg",children:[(0,i.jsxs)(r.c,{className:"bg-dark text-white d-flex justify-content-between",children:[(0,i.jsx)("span",{children:"Image Preview"}),(0,i.jsx)(d.c,{onClick:p,children:(0,i.jsx)(n.c,{sx:{color:"white"}})})]}),(0,i.jsx)(o.c,{className:"bg-dark pb-4 d-flex align-items-center justify-content-center",children:(0,i.jsx)("img",{src:u,alt:"Preview",style:{maxWidth:"100%",maxHeight:"100%"}})})]})]})}},64568:(e,a,t)=>{t.d(a,{c:()=>s});var l=t(82496);const s=()=>(0,l.jsx)("span",{style:{color:"red",fontWeight:"bold",fontSize:"1em"},children:" *"})},58804:(e,a,t)=>{t.r(a),t.d(a,{default:()=>D});var l=t(30800),s=t(69060),c=t(89e3),r=t(5548),d=t(43692),o=t(85624),n=t(3358),i=t(84436),u=t(82656),p=t(26773),m=t(4488),v=t(90048),h=t(27664),x=t(82496);const _=(0,h.c)((0,x.jsx)("path",{d:"M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8zM5 19l3-4 2 3 3-4 4 5z"}),"AddPhotoAlternate");var b=t(86e3),j=t(87016),g=t(96064),P=t(79476),S=t(56480),N=t(78688),f=t(1908),I=t(39308),C=t(64568);const y={Product_Id:"",Product_Name:"",Short_Name:"",Product_Description:"",Brand:"",Product_Group:"",Pack_Id:"",UOM_Id:"",IS_Sold:"",Display_Order_By:"",HSN_Code:"",Gst_P:"",Cgst_P:"",Sgst_P:"",Igst_P:"",ERP_Id:"",Pos_Brand_Id:"",IsActive:""},w=e=>{let{row:a,children:t,openAction:r,reload:d,onCloseFun:o,loadingOn:n,loadingOff:i}=e;const[h,_]=(0,s.useState)([]),[b,j]=(0,s.useState)([]),[g,P]=(0,s.useState)([]),[N,w]=(0,s.useState)([]),[O,U]=(0,s.useState)(y),[k,D]=(0,s.useState)(!1),[E,A]=(0,s.useState)(!1),[B,G]=(0,s.useState)([]);(0,s.useEffect)((()=>D(!!r)),[r]),(0,s.useEffect)((()=>{(0,I.CY)(a)?(U((e=>{let t=(0,l.c)({},e);return Object.entries(a).forEach((e=>{let[a,l]=e;t[a]=null!==l&&void 0!==l?l:""})),t})),A(!0),D(!0)):(U(y),A(!1))}),[a]),(0,s.useEffect)((()=>{(0,f.q)({address:"masters/uom"}).then((e=>{e.success&&_(e.data)})).catch((e=>console.error(e))),(0,f.q)({address:"masters/brand"}).then((e=>{e.success&&j(e.data)})).catch((e=>console.error(e))),(0,f.q)({address:"masters/products/packs"}).then((e=>{e.success&&P(e.data)})).catch((e=>console.error(e))),(0,f.q)({address:"masters/products/productGroups"}).then((e=>{e.success&&w(e.data)})).catch((e=>console.error(e))),(0,f.q)({address:"masters/posbranch/dropdown"}).then((e=>{e.success&&G(e.data)})).catch((e=>console.error(e)))}),[]);const q=[{label:"Product Name",elem:"input",placeholder:"Enter Product Name",event:e=>U((a=>(0,l.c)((0,l.c)({},a),{},{Product_Name:e.target.value}))),required:!0,value:O.Product_Name,max:100},{label:"Short Name",elem:"input",placeholder:"Enter Short Name",event:e=>U((a=>(0,l.c)((0,l.c)({},a),{},{Short_Name:e.target.value}))),value:O.Short_Name,max:100},{label:"Is Saleable",elem:"select",options:[{value:"",label:" - Select - ",disabled:!0,selected:!0},{value:0,label:"Not Salable"},{value:1,label:"Salable"}],event:e=>U((a=>(0,l.c)((0,l.c)({},a),{},{IS_Sold:e.target.value}))),value:O.IS_Sold},{label:"Brand",elem:"select",options:[{value:"",label:" - Select - ",disabled:!0,selected:!0},...b.map((e=>({value:Number(e.Brand_Id),label:e.Brand_Name})))],event:e=>U((a=>(0,l.c)((0,l.c)({},a),{},{Brand:e.target.value}))),value:O.Brand},{label:"Product Group",elem:"select",options:[{value:"",label:" - Select - ",disabled:!0,selected:!0},...N.map((e=>({value:Number(e.Pro_Group_Id),label:e.Pro_Group})))],event:e=>U((a=>(0,l.c)((0,l.c)({},a),{},{Product_Group:e.target.value}))),value:O.Product_Group},{label:"Pack",elem:"select",options:[{value:"",label:" - Select - ",disabled:!0,selected:!0},...g.map((e=>({value:Number(e.Pack_Id),label:e.Pack})))],event:e=>U((a=>(0,l.c)((0,l.c)({},a),{},{Pack_Id:e.target.value}))),value:O.Pack_Id},{label:"Unit Of Measurement",elem:"select",options:[{value:"",label:" - Select - ",disabled:!0,selected:!0},...h.map((e=>({value:Number(e.Unit_Id),label:e.Units})))],event:e=>U((a=>(0,l.c)((0,l.c)({},a),{},{UOM_Id:e.target.value}))),value:O.UOM_Id},{label:"HSN / SAC Code",elem:"input",placeholder:"Enter HSN / SAC",event:e=>U((a=>(0,l.c)((0,l.c)({},a),{},{HSN_Code:e.target.value}))),required:!0,value:O.HSN_Code},{label:"GST Percentage (%)",elem:"input",oninput:e=>(0,I.Gk)(e),placeholder:"Enter GST Percentage",event:e=>U((a=>(0,l.c)((0,l.c)({},a),{},{Gst_P:e.target.value}))),required:!0,value:O.Gst_P},{label:"Order By",elem:"input",oninput:e=>(0,I.Gk)(e),placeholder:"Enter list order number",event:e=>U((a=>(0,l.c)((0,l.c)({},a),{},{Display_Order_By:e.target.value}))),value:O.Display_Order_By},{label:"ERP ID",elem:"input",placeholder:"Enter ERP ID",event:e=>U((a=>(0,l.c)((0,l.c)({},a),{},{ERP_Id:e.target.value}))),value:O.ERP_Id},{label:"POS BRAND",elem:"select",options:[{value:"",label:" - Select - ",disabled:!0,selected:!0},...B.map((e=>({value:Number(e.value),label:e.label})))],event:e=>U((a=>(0,l.c)((0,l.c)({},a),{},{Pos_Brand_Id:e.target.value}))),value:O.Pos_Brand_Id},{label:"Status",elem:"select",options:[{value:"",label:" - Select - ",disabled:!0},{value:"0",label:"Active"},{value:"1",label:"Inactive"}],event:e=>U((a=>(0,l.c)((0,l.c)({},a),{},{Is_Active_Decative:e.target.value}))),value:O.Is_Active_Decative||"0"},{label:"Product Description",elem:"textarea",event:e=>U((a=>(0,l.c)((0,l.c)({},a),{},{Product_Description:e.target.value}))),value:O.Product_Description}],M=()=>{U(y),D(!1),A(!1),o&&o()};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("span",{onClick:()=>D(!0),style:{cursor:"pointer"},children:t}),(0,x.jsxs)(u.c,{open:k,onClose:M,fullScreen:!0,children:[(0,x.jsx)(p.c,{children:E?"Update Product Details":"Create New Product"}),(0,x.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n&&n(),(0,f.q)({address:"masters/products",method:E?"PUT":"POST",bodyData:O}).then((e=>{e.success?(d&&d(),M(),S.m4.success(e.message)):S.m4.error(e.message)})).catch((e=>console.error(e))).finally((()=>{i&&i()}))},children:[(0,x.jsx)(m.c,{children:(0,x.jsx)("div",{className:"row",children:q.map(((e,a)=>(0,x.jsxs)("div",{className:"col-lg-4 col-md-6 p-2 px-3",children:[(0,x.jsxs)("label",{children:[e.label," ",e.required&&(0,x.jsx)(C.c,{})]}),"input"===e.elem?(0,x.jsx)("input",{type:e.type||"text",className:"cus-inpt b-0",onChange:e.event,onInput:e.oninput,disabled:e.disabled,value:e.value,maxLength:e.max,required:!!e.required}):"select"===e.elem?(0,x.jsx)("select",{className:"cus-inpt b-0",onChange:e.event,value:e.value,required:!!e.required,children:e.options.map(((e,a)=>(0,x.jsx)("option",{value:e.value,disabled:e.disabled,defaultValue:e.selected,children:e.label},a)))}):"textarea"===e.elem?(0,x.jsx)("textarea",{className:"cus-inpt b-0",onChange:e.event,rows:4,value:e.value}):null]},a)))})}),(0,x.jsxs)(v.c,{children:[(0,x.jsx)(c.c,{type:"button",onClick:M,children:"cancel"}),(0,x.jsx)(c.c,{type:"submit",children:"save"})]})]})]})]})};var O=t(13724);const U={Product_Id:"",Product_Code:"",Product_Name:"",Short_Name:"",Product_Description:"",Brand:"",Product_Group:"",Pack_Id:"",UOM_Id:"",IS_Sold:"",Display_Order_By:"",HSN_Code:"",Gst_P:"",Cgst_P:"",Sgst_P:"",Igst_P:"",ERP_Id:"",Product_Image:""},k=e=>{var a,t,s;let{product:d,setProductInputValue:o,setDialog:n}=e;return(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-sm-2 p-0",children:(0,x.jsxs)("div",{className:"product-card-image d-flex align-items-center flex-column",children:[(0,x.jsx)(N.c,{url:null===d||void 0===d?void 0:d.productImageUrl,children:(0,x.jsx)("img",{src:null===d||void 0===d?void 0:d.productImageUrl,alt:null===d||void 0===d?void 0:d.Product_Name,style:{maxWidth:"150px"}})}),(0,x.jsx)(c.c,{onClick:()=>{n((e=>(0,l.c)((0,l.c)({},e),{},{imageUpload:!0}))),o((e=>(0,l.c)((0,l.c)({},e),{},{Product_Id:d.Product_Id,Product_Name:null===d||void 0===d?void 0:d.Product_Name})))},size:"small",variant:"outlined",startIcon:(0,x.jsx)(_,{sx:{fontSize:"15px"}}),className:"w-100 mt-2",children:"Change Photo"})]})}),(0,x.jsxs)("div",{className:" col-sm-10 p-2",children:[(0,x.jsxs)("div",{className:"product-brand-group",children:[(0,x.jsxs)("span",{children:[null===d||void 0===d?void 0:d.Brand_Name," - ",null===d||void 0===d?void 0:d.Pro_Group]}),(0,x.jsx)("span",{children:(0,x.jsx)(r.c,{onClick:()=>{o((e=>{let a=(0,l.c)({},e);return Object.entries(d).forEach((e=>{let[t,l]=e;a[t]=null!==l&&void 0!==l?l:""})),a})),n((e=>(0,l.c)((0,l.c)({},e),{},{createAndUpdate:!0})))},children:(0,x.jsx)(b.c,{})})})]}),(0,x.jsx)("h6",{className:"fw-bold fa-18",children:null===d||void 0===d?void 0:d.Product_Name}),(0,x.jsx)("p",{className:"product-description",children:null===d||void 0===d?void 0:d.Product_Description}),(0,x.jsx)("table",{style:{minWidth:"300px",marginBottom:"15px"},children:(0,x.jsxs)("tbody",{children:[(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{className:"border fa-12 p-1 fw-bold",children:"HSN Code"}),(0,x.jsx)("td",{className:"border fa-12 p-1",children:null!==(a=null===d||void 0===d?void 0:d.HSN_Code)&&void 0!==a?a:"-"}),(0,x.jsx)("td",{className:"border fa-12 p-1 fw-bold",children:"ERP Id"}),(0,x.jsx)("td",{className:"border fa-12 p-1",children:null!==(t=null===d||void 0===d?void 0:d.ERP_Id)&&void 0!==t?t:"-"})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{className:"border fa-12 p-1 fw-bold",children:"Tax"}),(0,x.jsxs)("td",{className:"border fa-12 p-1",children:[null!==(s=null===d||void 0===d?void 0:d.Gst_P)&&void 0!==s?s:0,"(%)"]}),(0,x.jsx)("td",{className:"border fa-12 p-1 fw-bold",children:"Is Salable?"}),(0,x.jsx)("td",{className:"border fa-12 p-1",children:(()=>{switch(null===d||void 0===d?void 0:d.IS_Sold){case 0:return"Not Salable";case 1:return"Salable";default:return"Unknown"}})()})]})]})}),(0,x.jsxs)("div",{className:"product-price",children:[(0,x.jsx)("span",{className:"price",children:(0,I.iQ)(null===d||void 0===d?void 0:d.Item_Rate)}),(0,x.jsxs)("span",{className:"units",children:[" / ",null===d||void 0===d?void 0:d.Units]})]})]})]})},D=e=>{let{loadingOn:a,loadingOff:t}=e;const h=JSON.parse(localStorage.getItem("user")),[_,b]=(0,s.useState)([]),[N,I]=(0,s.useState)(!1),[C,y]=(0,s.useState)([]),[D,E]=(0,s.useState)(""),[A,B]=(0,s.useState)(U),[G,q]=(0,s.useState)({imageUpload:!1,createAndUpdate:!1});(0,s.useEffect)((()=>{(0,f.q)({address:"masters/products?Company_Id=".concat(null===h||void 0===h?void 0:h.Company_id)}).then((e=>{e.success&&b(e.data)})).catch((e=>console.error(e)))}),[N,null===h||void 0===h?void 0:h.Company_id]),(0,s.useEffect)((()=>{const e=_.filter((e=>Object.values(e).some((e=>String(e).toLowerCase().includes(D.toLowerCase())))));y(e)}),[_,D]);const M=()=>{q({imageUpload:!1,createAndUpdate:!1}),B(U)};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(d.c,{component:o.c,children:[(0,x.jsxs)("div",{className:"p-3 pb-1 d-flex align-items-center flex-wrap",children:[(0,x.jsx)("h6",{className:"flex-grow-1 fa-18",children:"Products"}),(0,x.jsx)(n.c,{title:"Sync Tally LOS",children:(0,x.jsx)(r.c,{onClick:()=>{a&&a(),(0,f.q)({address:"masters/products/losSync",method:"POST"}).then((e=>{e.success?S.m4.success(e.message):S.m4.error(e.message)})).catch((e=>console.error(e))).finally((()=>{t&&t()}))},children:(0,x.jsx)(j.c,{})})}),(0,x.jsx)(w,{reload:()=>I((e=>!e)),loadingOn:a,loadingOff:t,onCloseFun:()=>{B(U),q((e=>(0,l.c)((0,l.c)({},e),{},{createAndUpdate:!1})))},children:(0,x.jsx)(c.c,{variant:"outlined",startIcon:(0,x.jsx)(g.c,{}),children:"New"})}),(0,x.jsx)("input",{type:"search",value:D,className:"cus-inpt w-auto p-1 ps-2 ms-2",placeholder:"Search",onChange:e=>E(e.target.value)})]}),(0,x.jsx)(i.c,{sx:{p:0},children:(0,x.jsx)(O.cp,{dataArray:""===D?_:C,columns:[{isVisible:1,isCustomCell:!0,Cell:e=>{let{row:a}=e;return(0,x.jsx)(k,{product:a,setDialog:q,setProductInputValue:B})}}],tableMaxHeight:600,initialPageCount:10})})]}),(0,x.jsxs)(u.c,{open:G.imageUpload,onClose:M,fullWidth:!0,maxWidth:"sm",children:[(0,x.jsxs)(p.c,{children:["Update Product Image",(0,x.jsx)("span",{className:"ps-1 text-primary",children:null===A||void 0===A?void 0:A.Product_Name})]}),(0,x.jsxs)("form",{onSubmit:e=>{e.preventDefault();const a=new FormData;a.append("Product_Image",A.Product_Image),a.append("Product_Id",null===A||void 0===A?void 0:A.Product_Id),null!==A&&void 0!==A&&A.Product_Image&&null!==A&&void 0!==A&&A.Product_Id&&fetch("".concat(P.c,"masters/products/productImage"),{method:"PUT",body:a}).then((e=>e.json())).then((e=>{e.success?(S.m4.success(e.message),M(),I(!N)):S.m4.error(e.message)})).catch((e=>console.error(e)))},children:[(0,x.jsxs)(m.c,{children:[(0,x.jsx)("label",{children:"Select Product Image"}),(0,x.jsx)("input",{type:"file",className:"cus-inpt",required:!0,onChange:e=>B((0,l.c)((0,l.c)({},A),{},{Product_Image:e.target.files[0]})),accept:"image/*"}),A.Product_Image&&(0,x.jsx)("img",{src:URL.createObjectURL(A.Product_Image),alt:"Preview",style:{maxWidth:"100%",maxHeight:200,marginTop:10}})]}),(0,x.jsxs)(v.c,{children:[(0,x.jsx)(c.c,{type:"button",onClick:M,children:"cancel"}),(0,x.jsx)(c.c,{type:"submit",children:"update"})]})]})]}),G.createAndUpdate&&(0,x.jsx)(w,{reload:()=>I((e=>!e)),loadingOn:a,loadingOff:t,row:A,openAction:G.createAndUpdate,onCloseFun:()=>{B(U),q((e=>(0,l.c)((0,l.c)({},e),{},{createAndUpdate:!1})))}})]})}},96064:(e,a,t)=>{t.d(a,{c:()=>c});var l=t(27664),s=t(82496);const c=(0,l.c)((0,s.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},14499:(e,a,t)=>{t.d(a,{c:()=>c});var l=t(27664),s=t(82496);const c=(0,l.c)((0,s.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},86e3:(e,a,t)=>{t.d(a,{c:()=>c});var l=t(27664),s=t(82496);const c=(0,l.c)((0,s.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},87016:(e,a,t)=>{t.d(a,{c:()=>c});var l=t(27664),s=t(82496);const c=(0,l.c)((0,s.jsx)("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8m0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4z"}),"Sync")},84436:(e,a,t)=>{t.d(a,{c:()=>x});var l=t(45072),s=t(95656),c=t(69060),r=t(79736),d=t(21412),o=t(12556),n=t(49836),i=t(10099),u=t(33448);function p(e){return(0,u.cp)("MuiCardContent",e)}(0,i.c)("MuiCardContent",["root"]);var m=t(82496);const v=["className","component"],h=(0,o.cp)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,a)=>a.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),x=c.forwardRef((function(e,a){const t=(0,n.C)({props:e,name:"MuiCardContent"}),{className:c,component:o="div"}=t,i=(0,s.c)(t,v),u=(0,l.c)({},t,{component:o}),x=(e=>{const{classes:a}=e;return(0,d.c)({root:["root"]},p,a)})(u);return(0,m.jsx)(h,(0,l.c)({as:o,className:(0,r.c)(x.root,c),ownerState:u,ref:a},i))}))}}]);
//# sourceMappingURL=8804.36b79170.chunk.js.map