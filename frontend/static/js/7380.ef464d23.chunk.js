"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[7380],{64568:(e,t,a)=>{a.d(t,{c:()=>r});var s=a(82496);const r=()=>(0,s.jsx)("span",{style:{color:"red",fontWeight:"bold",fontSize:"1em"},children:" *"})},8436:(e,t,a)=>{a.d(t,{c:()=>h});var s=a(30800),r=a(69060),o=a(82656),n=a(26773),c=a(4488),l=a(90048),d=a(1908),i=a(56480),p=(a(21680),a(64568)),u=a(39308),m=a(82496);const h=e=>{let{open:t,onClose:a,inputValue:h,isEdit:x,setReload:y}=e;const j=localStorage.getItem("user"),g=JSON.parse(j),[v,b]=(0,r.useState)([]),[f,_]=(0,r.useState)([]),[S,C]=(0,r.useState)({Project_Id:"",Project_Name:"",Project_Desc:"",Project_Head:"",Est_Start_Dt:(0,u.Q7)(),Est_End_Dt:(0,u.Q7)(),Project_Status:"",Entry_By:null===g||void 0===g?void 0:g.UserId,Company_id:null===g||void 0===g?void 0:g.Company_id});(0,r.useEffect)((()=>{(0,d.q)({address:"masters/users/employee/dropDown?Company_id=".concat(null===g||void 0===g?void 0:g.Company_id)}).then((e=>{b(e.success?e.data:[])})).catch((e=>console.error("Fetch Error:",e)))}),[null===g||void 0===g?void 0:g.Company_id]),(0,r.useEffect)((()=>{(0,d.q)({address:"taskManagement/statusList"}).then((e=>{e.success&&_(e.data)})).catch((e=>console.error("Fetch Error:",e)))}),[]),(0,r.useEffect)((()=>{t&&(x&&h?C((0,s.c)((0,s.c)({},h),{},{Project_Head:null===h||void 0===h?void 0:h.Project_Head_Id,Est_Start_Dt:h.Est_Start_Dt?(0,u.Q7)(h.Est_Start_Dt):"",Est_End_Dt:h.Est_End_Dt?(0,u.Q7)(h.Est_End_Dt):"",Project_Status:(null===h||void 0===h?void 0:h.Project_Status)||"",Project_Desc:(null===h||void 0===h?void 0:h.Project_Desc)||"-"})):x||C({Project_Name:"",Project_Desc:"",Project_Head:"",Est_Start_Dt:(0,u.Q7)(),Est_End_Dt:(0,u.Q7)(),Project_Status:"",Entry_By:null===g||void 0===g?void 0:g.UserId,Company_id:null===g||void 0===g?void 0:g.Company_id}))}),[h,t,x]);const E=e=>{C((0,s.c)((0,s.c)({},S),{},{[e.target.name]:e.target.value}))},P=()=>{const e=["Project_Name","Project_Head","Est_Start_Dt","Est_End_Dt","Project_Status"];for(const t of e)if(!S[t])return i.m4.error("".concat(t.replace(/_/g," ")," is required")),!1;return!0},N=[{label:"Project Name",elem:"input",type:"text",required:!0,name:"Project_Name",value:S.Project_Name||""},{label:"Project Head",elem:"select",options:v.map((e=>({value:null===e||void 0===e?void 0:e.UserId,label:null===e||void 0===e?void 0:e.Name}))),required:!0,name:"Project_Head",value:S.Project_Head||""},{label:"Estimated Start Date",elem:"input",type:"date",required:!0,name:"Est_Start_Dt",value:S.Est_Start_Dt||""},{label:"Estimated End Date",elem:"input",type:"date",required:!0,name:"Est_End_Dt",value:S.Est_End_Dt||""},{label:"Project Status",elem:"select",options:f.map((e=>({value:e.Status_Id,label:e.Status}))),required:!0,name:"Project_Status",value:S.Project_Status||""},{label:"Description",elem:"textarea",name:"Project_Desc",value:S.Project_Desc||" "}];return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(o.c,{open:t,onClose:a,children:[(0,m.jsx)(n.c,{className:"bg-primary text-white mb-2 px-3 py-2",children:x?"Edit Project":"Create Project"}),(0,m.jsx)(c.c,{children:(0,m.jsxs)("form",{onSubmit:e=>{e.preventDefault(),x?P()&&(0,d.q)({address:"taskManagement/project",method:"PUT",bodyData:S}).then((e=>{e.success?(a(),y((e=>!e)),i.m4.success(e.message)):i.m4.error(e.message)})).catch((e=>console.error("Fetch Error:",e))):(()=>{if(!P())return;const e=(0,s.c)((0,s.c)({},S),{},{Company_id:g.Company_id});(0,d.q)({address:"taskManagement/project",method:"POST",bodyData:e}).then((e=>{e.success?(a(),y((e=>!e)),i.m4.success(e.message)):i.m4.error(e.message)})).catch((e=>{console.error("Fetch Error:",e),i.m4.error("An error occurred while creating the project.")}))})()},children:[(0,m.jsx)("div",{className:"row",children:N.map(((e,t)=>(0,m.jsxs)("div",{className:"col-lg-4 mb-3",children:[(0,m.jsxs)("label",{children:[e.label," ",e.required&&(0,m.jsx)(p.c,{})]}),"textarea"===e.elem?(0,m.jsx)("textarea",{name:e.name,className:"cus-inpt",value:e.value,onChange:E}):"select"===e.elem?(0,m.jsxs)("select",{name:e.name,className:"cus-inpt",value:e.value,onChange:E,children:[(0,m.jsx)("option",{value:"",children:"Select"}),e.options&&e.options.map(((e,t)=>(0,m.jsx)("option",{value:e.value,children:e.label},t)))]}):(0,m.jsx)("input",{type:e.type,name:e.name,className:"cus-inpt",value:e.value,onChange:E})]},t)))}),(0,m.jsxs)(l.c,{children:[(0,m.jsx)("button",{className:"btn btn-light rounded-5 px-3",type:"button",onClick:a,children:"Cancel"}),(0,m.jsx)("button",{className:"btn btn-primary rounded-5 px-3",type:"submit",children:x?"Update":"Submit"})]})]})})]})})}},69272:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var s=a(69060),r=a(5548),o=a(82656),n=a(26773),c=a(4488),l=a(90048),d=a(28655),i=a(14168),p=a(56480),u=a(77536),m=a(1908),h=a(8436),x=a(45108),y=a(32635),j=a(30800),g=a(12572),v=a(15786),b=a(56880),f=a(89e3),_=a(27532),S=a(18256),C=a(29720),E=a(61584),P=a(39308),N=a(82496);const T=function(e){let{dialogOpen:t,setDialogOpen:a,projectid:r,reload:d,onReload:i,selectedProject:u}=e;const[h,x]=(0,s.useState)([]),y=JSON.parse(localStorage.getItem("user")),[T,k]=(null===y||void 0===y||y.Company_id,(0,s.useState)({startDate:(0,P.Q7)()||(new Date).toISOString().split("T")[0]})),[D,w]=(0,s.useState)(!1),[I,A]=(0,s.useState)([]),[q,M]=(0,s.useState)(""),[F,L]=(0,s.useState)("1"),[R,O]=(0,s.useState)([]),[H,U]=(0,s.useState)([]),V=(e,t)=>{L(t)},W=(e,t)=>{A(e),M(t),w(!0)},z=()=>{w(!1),A([]),M("")};return(0,s.useEffect)((()=>{if(h.length>0&&h[0].TaskDetails)try{const e=JSON.parse(h[0].TaskDetails);U(e)}catch(e){console.error("Error parsing TaskDetails:",e)}}),[h]),(0,s.useEffect)((()=>{(async()=>{(0,m.q)({address:"taskManagement/project/schedule/newscheduleType"}).then((e=>{e.success?O(e.data):p.m4.error(e.message)}))})()}),[r]),(0,s.useEffect)((()=>{r&&(async()=>{T.startDate&&""!==T.startDate||k((0,j.c)((0,j.c)({},T),{},{startDate:(new Date).toISOString().split("T")[0]}));try{const e=await(0,m.q)({address:"taskManagement/project/schedule/projectDetailsforReport?Project_Id=".concat(r,"&StartDate=").concat(T.startDate)});e.success?x(e.data):p.m4.error("Failed to fetch task details")}catch(e){p.m4.error("Error while fetching task details"),console.error("Error while fetching task details:",e)}})()}),[T.startDate,r]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(o.c,{open:t,fullWidth:!0,maxWidth:"lg",PaperProps:{style:{height:"75vh"}},children:[(0,N.jsx)(n.c,{children:(0,N.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,N.jsx)("span",{children:null===u||void 0===u?void 0:u.Project_Name}),(0,N.jsx)("div",{style:{display:"flex",alignItems:"center"}})]})}),(0,N.jsx)(g.c,{sx:{width:"100%",typography:"body1"},children:h.map(((e,t)=>{const a=JSON.parse(e.SchTypes);return(0,N.jsxs)(S.cp,{value:F,children:[(0,N.jsx)(g.c,{sx:{borderBottom:1,borderColor:"divider"},children:(0,N.jsxs)(C.c,{onChange:V,"aria-label":"Schedule Types",children:[Array.isArray(a)&&a.length>0?a.map(((e,t)=>(0,N.jsx)(v.c,{label:e.SchType||"No SchType",value:(e.SchTypeId||t).toString(),id:"tab-".concat(e.SchTypeId||t),"aria-controls":"tabpanel-".concat(e.SchTypeId||t)},"".concat(e.SchTypeId||"index","-").concat(t)))):(0,N.jsxs)(b.c,{variant:"body2",color:"textSecondary",sx:{padding:2},children:["No Details Available for ",a]}),(0,N.jsx)(v.c,{label:"Today",value:"today",id:"tab-today","aria-controls":"tabpanel-today"})]})}),Array.isArray(a)&&a.map(((e,t)=>(0,N.jsxs)(E.c,{value:(e.SchTypeId||t).toString(),id:"tabpanel-".concat(e.SchTypeId||t),"aria-labelledby":"tab-".concat(e.SchTypeId||t),children:[(0,N.jsx)(g.c,{sx:{marginBottom:2,padding:2,backgroundColor:"#f9f9f9",borderRadius:"8px"},children:Array.isArray(e.TaskCountsInSchType)&&e.TaskCountsInSchType.length>0?e.TaskCountsInSchType.map(((t,a)=>(0,N.jsxs)(b.c,{variant:"body1",display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,N.jsxs)(g.c,{children:["Schedule Type: ",(0,N.jsx)("strong",{children:e.SchType})]}),(0,N.jsxs)(g.c,{textAlign:"right",children:["Total Tasks: ",(0,N.jsx)("strong",{children:t.TotalTasks})," / Completed Tasks: ",(0,N.jsx)("strong",{children:t.CompletedTasks})]})]},a))):(0,N.jsx)(b.c,{variant:"body2",color:"textSecondary",children:"No tasks counted for this schedule type."})}),Array.isArray(e.Tasks)&&e.Tasks.length>0?(0,N.jsx)(g.c,{sx:{display:"flex",flexDirection:"column",width:"100%"},children:e.Tasks.map((e=>(0,N.jsxs)("div",{style:{backgroundColor:"#f0f4ff",boxShadow:"black",padding:"16px",borderRadius:"8px",display:"flex",margin:"8px 0",width:"100%",justifyContent:"space-between"},children:[(0,N.jsx)(b.c,{fontWeight:"bold",style:{marginBottom:"8px"},children:e.Task_Name||"DEFAULT TASK"}),Array.isArray(e.AssignedEmployees)&&e.AssignedEmployees.length>0?(0,N.jsx)(f.c,{onClick:()=>W(e.AssignedEmployees,e.Task_Name),sx:{marginLeft:"auto"},children:(0,N.jsx)("span",{style:{textAlign:"left"},children:"View Employees"})}):(0,N.jsx)("span",{style:{marginLeft:"60px",textAlign:"left"},children:"No employees assigned"})]},e.Task_Id)))}):(0,N.jsx)(b.c,{variant:"body2",color:"textSecondary",children:"No tasks available for this task type."})]},"".concat(e.SchTypeId||"index","-").concat(t)))),(0,N.jsxs)(E.c,{value:"today",id:"tabpanel-today","aria-labelledby":"tab-today",children:[(0,N.jsx)(g.c,{sx:{padding:2},children:Array.isArray(H)&&H.length>0?(0,N.jsx)("div",{children:(0,N.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,N.jsx)(b.c,{variant:"h6",gutterBottom:!0,style:{margin:0},children:"Task Details for"}),(0,N.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,N.jsx)("span",{style:{verticalAlign:"middle"},children:"From:"}),(0,N.jsx)("input",{type:"date",value:T.startDate,onChange:e=>k((0,j.c)((0,j.c)({},T),{},{startDate:e.target.value})),className:"cus-inpt",style:{padding:"5px",borderRadius:"4px",border:"1px solid #ccc"}})]})]})}):(0,N.jsx)(b.c,{variant:"body2",color:"textSecondary",children:"No tasks available for today."})}),Array.isArray(H)&&H.length>0?H.map((e=>(0,N.jsxs)("div",{style:{backgroundColor:"#fff",padding:"16px",borderRadius:"12px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",marginBottom:"16px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[(0,N.jsx)(b.c,{variant:"h6",fontWeight:"bold",sx:{color:"#2c3e50",marginRight:"16px"},children:e.Task_Name||"DEFAULT TASK"}),(0,N.jsx)(g.c,{sx:{display:"flex",flexWrap:"wrap"},children:Array.isArray(e.AssignedEmployees)&&e.AssignedEmployees.length>0?(0,N.jsx)(f.c,{onClick:()=>W(e.AssignedEmployees,e.Task_Name),sx:{marginLeft:"8px"},children:"View Employees"}):(0,N.jsx)(b.c,{variant:"body2",color:"textSecondary",sx:{marginLeft:"8px"},children:"No Employees Assigned"})})]},e.Task_Id))):(0,N.jsx)(b.c,{variant:"body2",color:"textSecondary",sx:{padding:"16px"},children:"No tasks available for today."})]})]},t)}))}),(0,N.jsx)(l.c,{sx:{marginTop:"auto",position:"sticky",bottom:0},children:(0,N.jsx)(f.c,{variant:"contained",color:"primary",onClick:async()=>{a(!1)},children:"Close"})})]}),(0,N.jsxs)(o.c,{open:D,onClose:z,children:[(0,N.jsxs)(n.c,{children:["Employee Details for ",q]}),(0,N.jsx)(c.c,{children:I.length>0?(0,N.jsx)(g.c,{sx:{display:"flex",flexWrap:"wrap"},children:I.map(((e,t)=>(0,N.jsx)(_.c,{label:e.Name,variant:"outlined",size:"small",sx:{margin:"4px",color:"green"}},t)))}):(0,N.jsx)(b.c,{variant:"body1",children:"No employees assigned to this task."})}),(0,N.jsx)(l.c,{children:(0,N.jsx)(f.c,{onClick:z,color:"primary",children:"Close"})})]})]})},k=()=>{const[e,t]=(0,s.useState)(!1),[a,j]=(0,s.useState)([]),[g,v]=(0,s.useState)([]),{contextObj:b}=(0,s.useContext)(u.a),[f,_]=(0,s.useState)(!1),[S,C]=(0,s.useState)(null),[E,P]=(0,s.useState)(!1),[k,D]=(0,s.useState)(0),[w,I]=(0,s.useState)(!1),[A,q]=(0,s.useState)(null),[M,F]=(0,s.useState)(!1),[L,R]=(0,s.useState)(!1),[O,H]=(0,s.useState)(""),U=JSON.parse(localStorage.getItem("user"));(0,s.useEffect)((()=>{W(),z()}),[null===U||void 0===U?void 0:U.Company_id,e]);const V=()=>t((e=>!e)),W=async()=>{try{const e=await(0,m.q)({address:"taskManagement/project/newProjectAbstract?Company_id=".concat(null===U||void 0===U?void 0:U.Company_id)});j(e.success?e.data:[])}catch(e){console.error(e),j([])}},z=async()=>{try{const e=await(0,m.q)({address:"taskManagement/project?Company_id=".concat(null===U||void 0===U?void 0:U.Company_id)});v(e.success?e.data:[])}catch(e){console.error(e),v([])}},B=()=>{A&&(0,m.q)({address:"taskManagement/project",method:"DELETE",bodyData:{Project_Id:null===A||void 0===A?void 0:A.Project_Id}}).then((a=>{a.success?(t(!e),p.m4.success(a.message)):p.m4.error(a.message)})).catch((e=>console.error("Fetch Error:",e))),I(!1)},Q=[{name:"Project",selector:e=>e.Project_Name,sortable:!0,width:"250px"},{name:"Head",selector:e=>{var t;return null===(t=g.find((t=>t.Project_Id===e.Project_Id)))||void 0===t?void 0:t.Project_Head_Name},sortable:!0},{name:"Status",selector:e=>{var t;return null===(t=g.find((t=>t.Project_Id===e.Project_Id)))||void 0===t?void 0:t.Status},sortable:!0},{name:"End Date",selector:e=>e.Est_End_Dt?new Date(e.Est_End_Dt).toLocaleDateString("en-IN"):"N/A",sortable:!0},{name:"Progress",selector:e=>{return"".concat((t=e.TodayTaskcounts,a=e.CompletedTasks,0===Number(t)?0:(Number(a)/Number(t)*100).toFixed(0)),"%");var t,a},sortable:!0},{name:"Task Details",cell:e=>(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(r.c,{onClick:()=>K(e),children:(0,N.jsx)(d.c,{})}),e.CompletedTasks," / ",e.TodayTaskcounts]})},{name:"Task Count",selector:e=>null===e||void 0===e?void 0:e.TodayTaskcounts,sortable:!0,sortable:!0},{name:"Assigned",selector:e=>e.TasksAssignedToEmployee},{name:"Employees",cell:e=>(0,N.jsxs)(N.Fragment,{children:[1===Number(null===b||void 0===b?void 0:b.Add_Rights)&&(0,N.jsx)(r.c,{onClick:()=>G(e.Project_Id),children:(0,N.jsx)(i.c,{})}),e.EmployeesInvolved]})}],J=a.filter((e=>{var t,a;const s=(null===(t=g.find((t=>t.Project_Id===e.Project_Id)))||void 0===t?void 0:t.Project_Head_Name)||"",r=(null===(a=g.find((t=>t.Project_Id===e.Project_Id)))||void 0===a?void 0:a.Status)||"";return e.Project_Name.toLowerCase().includes(O.toLowerCase())||s.toLowerCase().includes(O.toLowerCase())||r.toLowerCase().includes(O.toLowerCase())})),K=e=>{C(e),D(e.Project_Id),R(!0)},Y=()=>{_(!1),R(!1),C(null),q(null),I(!1)},G=e=>{D(e),F(!0)};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:"fw-bold d-flex align-items-center justify-content-between mt-0 mb-3 ",children:[(0,N.jsx)("span",{style:{marginLeft:"10px"},children:"Projects"}),(0,N.jsx)("div",{className:"mb-1",style:{display:"flex",alignItems:"center"},children:(0,N.jsx)("div",{style:{position:"relative",display:"flex",alignItems:"center"}})})]}),(0,N.jsxs)("div",{className:"card-body p-0 table-container",children:[(0,N.jsx)(y.cp,{columns:Q,data:J,pagination:!0,highlightOnHover:!0,fixedHeader:!0,paginationPerPage:15,responsive:!0,persistTableHead:!0,customStyles:{headCells:{style:{fontSize:"16px",fontWeight:"bold",padding:"10px",backgroundColor:"#2c3e50",color:"#ecf0f1",position:"sticky",top:0,zIndex:2}},cells:{style:{padding:"8px",fontSize:"14px",backgroundColor:"#f9f9f9",color:"#2c3e50"}},rows:{style:{borderBottom:"1px solid #ddd"}}},style:{overflowY:"auto",maxHeight:"calc(100vh - 200px)"}}),(0,N.jsxs)(o.c,{open:w,onClose:Y,"aria-labelledby":"delete-dialog-title","aria-describedby":"delete-dialog-description",children:[(0,N.jsx)(n.c,{className:"bg-danger text-white mb-2 px-3 py-2",style:{fontSize:"18px"},children:"Confirm Deletion"}),(0,N.jsxs)(c.c,{className:"p-4",style:{fontSize:"16px"},children:["Are you sure you want to delete the project",(0,N.jsx)("span",{className:"text-primary",children:" "+(null===A||void 0===A?void 0:A.Project_Name)+" "}),"?"]}),(0,N.jsxs)(l.c,{children:[(0,N.jsx)("button",{onClick:()=>I(!1),className:"btn btn-secondary fa-13 shadow",style:{background:"#95a5a6",color:"white",borderRadius:"25px",padding:"8px 15px",cursor:"pointer"},children:"Cancel"}),(0,N.jsx)("button",{onClick:B,className:"btn btn-danger fa-13 shadow",style:{background:"#e74c3c",color:"white",borderRadius:"25px",padding:"8px 15px",cursor:"pointer"},children:"Delete"})]})]})]}),(0,N.jsx)(T,{onClose:Y,dialogOpen:L,setDialogOpen:R,isEdit:!1,parseData:U,projectid:k,onReload:V,selectedProject:S}),(0,N.jsx)(h.c,{open:f,onClose:Y,inputValue:S,isEdit:E,setReload:V,projectData:k}),(0,N.jsx)(x.c,{open:M,onClose:()=>F(!1),projectId:k,onReload:V}),(0,N.jsxs)(o.c,{open:w,onClose:Y,"aria-labelledby":"delete-dialog-title","aria-describedby":"delete-dialog-description",children:[(0,N.jsx)(n.c,{className:"bg-primary text-white mb-2 px-3 py-2",children:"Confirmation"}),(0,N.jsxs)(c.c,{className:"p-4",children:["Do you want to delete the project",(0,N.jsx)("span",{className:"text-primary",children:" "+(null===A||void 0===A?void 0:A.Project_Name)+" "}),"?"]}),(0,N.jsxs)(l.c,{children:[(0,N.jsx)("button",{onClick:()=>I(!1),className:"btn btn-secondary fa-13 shadow",children:"Cancel"}),(0,N.jsx)("button",{onClick:B,className:"btn btn-danger fa-13 shadow",children:"Delete"})]})]})]})}},45108:(e,t,a)=>{a.d(t,{c:()=>C});var s=a(30800),r=a(69060),o=a(82656),n=a(90048),c=a(89e3),l=a(4488),d=a(99904),i=a(33856),p=a(58612),u=a(27454),m=a(96464),h=a(29504),x=a(26773),y=a(71448),j=a(44380),g=a(1908),v=a(56480),b=a(12572),f=a(77536),_=a(76552),S=a(82496);const C=e=>{let{open:t,onClose:a,projectId:C,onReload:E}=e;const P={Name:"",Designation_Name:"",BranchName:""},[N,T]=(0,r.useState)(P),[k,D]=(0,r.useState)(!0),[w,I]=(0,r.useState)(!1),[A,q]=(0,r.useState)([]),[M,F]=(0,r.useState)([]),L=localStorage.getItem("user"),R=JSON.parse(L),{contextObj:O}=(0,r.useContext)(f.a);(0,r.useEffect)((()=>{t&&C&&(H(),U(),V())}),[t,C]);const H=async()=>{D(!0);try{const e=await(0,g.q)({address:"masters/Employeedetails?Project_Id=".concat(C)});e.success&&T(e.data)}catch(e){console.error(e),v.m4.error("Failed to fetch employee details")}finally{D(!1)}},U=async()=>{D(!0);try{const e=await(0,g.q)({address:"masters/Employeedetails/dropDown?Company_id=".concat(R.Company_id)});e.success&&q(e.data)}catch(e){console.error(e),v.m4.error("Failed to fetch employees for dropdown")}finally{D(!1)}},V=async()=>{D(!0);try{const e=await(0,g.q)({address:"masters/Employeedetails?Project_Id=".concat(C)});e.success&&F(e.data)}catch(e){console.error(e),v.m4.error("Failed to fetch assigned employees")}finally{D(!1)}},W=()=>{a(),T(P)};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(o.c,{open:t,maxWidth:"sm",fullWidth:!0,children:[(0,S.jsxs)(b.c,{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:2,marginInlineStart:2,children:[(0,S.jsx)("span",{children:"Employee Details"}),(0,S.jsx)(n.c,{children:(0,S.jsx)(c.c,{variant:"contained",color:"primary",onClick:()=>{I(!0)},sx:{mr:1},children:"Add"})})]}),(0,S.jsx)(l.c,{children:k?(0,S.jsx)("p",{children:"Loading..."}):(0,S.jsx)(d.c,{children:(0,S.jsxs)(i.c,{children:[(0,S.jsx)(p.c,{children:(0,S.jsxs)(u.c,{children:[(0,S.jsx)(m.c,{children:"Employee Name"}),(0,S.jsx)(m.c,{children:"Position"}),(0,S.jsx)(m.c,{children:"Department"})]})}),(0,S.jsx)(h.c,{children:Array.isArray(N)&&N.length>0?N.map((e=>(0,S.jsxs)(u.c,{children:[(0,S.jsx)(m.c,{children:e.Name||"N/A"}),(0,S.jsx)(m.c,{children:e.Designation_Name||"-"}),(0,S.jsx)(m.c,{children:e.BranchName||"-"})]},e.EmployeeId||e.UserId))):(0,S.jsx)(u.c,{children:(0,S.jsx)(m.c,{colSpan:3,children:"No data available"})})})]})})}),(0,S.jsx)(n.c,{sx:{marginTop:"auto ",position:"sticky",bottom:0},children:(0,S.jsx)(c.c,{variant:"contained",color:"primary",onClick:W,children:"Close"})})]}),(0,S.jsxs)(o.c,{open:w,maxWidth:"sm",fullWidth:!0,children:[(0,S.jsx)(x.c,{children:"Add Employee"}),(0,S.jsx)(l.c,{children:(0,S.jsx)(y.c,{multiple:!0,options:A,getOptionLabel:e=>e.Name,isOptionEqualToValue:(e,t)=>e.UserId===t.UserId,onChange:(e,t)=>{const a=t.filter(((e,t,a)=>t===a.findIndex((t=>t.UserId===e.UserId))));F(a)},PopperComponent:e=>(0,S.jsx)(_.c,(0,s.c)((0,s.c)({},e),{},{placement:"top"})),value:M,onClose:onclose,renderInput:e=>(0,S.jsx)(j.c,(0,s.c)((0,s.c)({},e),{},{placeholder:"Employees"}))})}),(0,S.jsxs)(n.c,{children:[(0,S.jsx)(c.c,{onClick:()=>{I(!1),W(),T(P)},children:"Cancel"}),(0,S.jsx)(c.c,{onClick:async()=>{if(1===Number(null===O||void 0===O?void 0:O.Add_Rights))try{(await(0,g.q)({address:"masters/Employeedetails/employeeAdd",method:"POST",bodyData:{Project_Id:C,UserIds:M.map((e=>e.UserId))}})).success?(v.m4.success("Employees added successfully"),I(!1),await H(),await V(),E()):v.m4.error("Failed to add employees")}catch(e){console.error(e),v.m4.error("Error adding employees")}},variant:"contained",color:"primary",children:"Add"})]})]})]})}},28655:(e,t,a)=>{a.d(t,{c:()=>o});var s=a(27664),r=a(82496);const o=(0,s.c)((0,r.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"Launch")},14168:(e,t,a)=>{a.d(t,{c:()=>o});var s=a(27664),r=a(82496);const o=(0,s.c)((0,r.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"People")},18256:(e,t,a)=>{a.d(t,{Ed:()=>d,cp:()=>n,oF:()=>c,qM:()=>l});var s=a(69060),r=a(82496);const o=s.createContext(null);function n(e){const{children:t,value:a}=e,n=function(){const[e,t]=s.useState(null);return s.useEffect((()=>{t("mui-p-".concat(Math.round(1e5*Math.random())))}),[]),e}(),c=s.useMemo((()=>({idPrefix:n,value:a})),[n,a]);return(0,r.jsx)(o.Provider,{value:c,children:t})}function c(){return s.useContext(o)}function l(e,t){const{idPrefix:a}=e;return null===a?null:"".concat(e.idPrefix,"-P-").concat(t)}function d(e,t){const{idPrefix:a}=e;return null===a?null:"".concat(e.idPrefix,"-T-").concat(t)}},29720:(e,t,a)=>{a.d(t,{c:()=>i});var s=a(45072),r=a(95656),o=a(69060),n=a(77828),c=a(18256),l=a(82496);const d=["children"],i=o.forwardRef((function(e,t){const{children:a}=e,i=(0,r.c)(e,d),p=(0,c.oF)();if(null===p)throw new TypeError("No TabContext provided");const u=o.Children.map(a,(e=>o.isValidElement(e)?o.cloneElement(e,{"aria-controls":(0,c.qM)(p,e.props.value),id:(0,c.Ed)(p,e.props.value)}):null));return(0,l.jsx)(n.c,(0,s.c)({},i,{ref:t,value:p.value,children:u}))}))},61584:(e,t,a)=>{a.d(t,{c:()=>y});var s=a(45072),r=a(95656),o=a(69060),n=a(79736),c=a(12556),l=a(23456),d=a(21412),i=a(33448);function p(e){return(0,i.cp)("MuiTabPanel",e)}(0,a(10099).c)("MuiTabPanel",["root"]);var u=a(18256),m=a(82496);const h=["children","className","value"],x=(0,c.cp)("div",{name:"MuiTabPanel",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;return{padding:t.spacing(3)}})),y=o.forwardRef((function(e,t){const a=(0,l.c)({props:e,name:"MuiTabPanel"}),{children:o,className:c,value:i}=a,y=(0,r.c)(a,h),j=(0,s.c)({},a),g=(e=>{const{classes:t}=e;return(0,d.c)({root:["root"]},p,t)})(j),v=(0,u.oF)();if(null===v)throw new TypeError("No TabContext provided");const b=(0,u.qM)(v,i),f=(0,u.Ed)(v,i);return(0,m.jsx)(x,(0,s.c)({"aria-labelledby":f,className:(0,n.c)(g.root,c),hidden:i!==v.value,id:b,ref:t,role:"tabpanel",ownerState:j},y,{children:i===v.value&&o}))}))},12572:(e,t,a)=>{a.d(t,{c:()=>d});var s=a(0),r=a(31152),o=a(46712),n=a(83068);const c=(0,a(10099).c)("MuiBox",["root"]),l=(0,o.c)(),d=(0,s.c)({themeId:n.c,defaultTheme:l,defaultClassName:c.root,generateClassName:r.c.generate})},38780:(e,t,a)=>{a.d(t,{c:()=>o});a(69060);var s=a(27664),r=a(82496);const o=(0,s.c)((0,r.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft")},46320:(e,t,a)=>{a.d(t,{c:()=>o});a(69060);var s=a(27664),r=a(82496);const o=(0,s.c)((0,r.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight")}}]);
//# sourceMappingURL=7380.ef464d23.chunk.js.map