"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[9708],{50764:(e,l,a)=>{a.d(l,{c:()=>D});var s=a(30800),t=a(69060),i=a(39308),n=a(71448),c=a(52924),d=a(44380),r=a(12572),o=a(89e3),u=a(3358),m=a(5548),v=a(82656),x=a(26773),p=a(4488),h=a(90048),j=a(43692),g=a(85624),f=a(78092),b=a(68424),y=a(39504),N=a(61988),F=a(12120),C=a(74912),_=a(97332),w=a(13724),S=a(82496);(0,_.g0)({fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0});const k=(0,S.jsx)(b.c,{fontSize:"small"}),A=(0,S.jsx)(y.c,{fontSize:"small"}),D=e=>{let{dataArray:l=[],columns:a=[],ExpandableComp:b,enableFilters:y=!1,ExportAllData:_=!1}=e;const[D,O]=(0,t.useState)([]),[T,E]=(0,t.useState)({}),[B,z]=(0,t.useState)(l),I=Object.keys(T).length>0?B:l,[V,W]=(0,t.useState)({filters:!1,columnSettings:!1});(0,t.useEffect)((()=>{const e=a.map(((e,l)=>({Field_Name:null===e||void 0===e?void 0:e.Column_Name,Fied_Data:null===e||void 0===e?void 0:e.Data_Type,isVisible:l<=7?1:0,align:"center",OrderBy:l+1})));O(e)}),[a]);const P=(0,t.useMemo)((()=>[...D].sort(((e,l)=>e.OrderBy-l.OrderBy))),[D]);(0,t.useEffect)((()=>{H()}),[T]);const R=(e,l)=>{E((a=>(0,s.c)((0,s.c)({},a),{},{[e]:l})))},H=()=>{let e=[...l];for(const l of D)if(T[l.Field_Name])if("range"===T[l.Field_Name].type){const{min:a,max:s}=T[l.Field_Name];e=e.filter((e=>{const t=e[l.Field_Name];return(void 0===a||t>=a)&&(void 0===s||t<=s)}))}else if("date"===T[l.Field_Name].type){const{start:a,end:s}=T[l.Field_Name].value;e=e.filter((e=>{const t=new Date(e[l.Field_Name]);return(void 0===a||t>=new Date(a))&&(void 0===s||t<=new Date(s))}))}else if(Array.isArray(T[l.Field_Name])){var a;e=(null===(a=T[l.Field_Name])||void 0===a?void 0:a.length)>0?e.filter((e=>T[l.Field_Name].includes(e[l.Field_Name].toLowerCase().trim()))):e}z(e)},L=e=>{const{Field_Name:l,Fied_Data:a}=e;var t,i,r,o,u,m,v,x,p,h;if("number"===a)return(0,S.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,S.jsx)("input",{placeholder:"Min",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(t=null===(i=T[l])||void 0===i?void 0:i.min)&&void 0!==t?t:"",onChange:e=>R(l,(0,s.c)((0,s.c)({type:"range"},T[l]),{},{min:e.target.value?parseFloat(e.target.value):void 0}))}),(0,S.jsx)("input",{placeholder:"Max",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(r=null===(o=T[l])||void 0===o?void 0:o.max)&&void 0!==r?r:"",onChange:e=>R(l,(0,s.c)((0,s.c)({type:"range"},T[l]),{},{max:e.target.value?parseFloat(e.target.value):void 0}))})]});if("date"===a)return(0,S.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,S.jsx)("input",{placeholder:"Start Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(u=null===(m=T[l])||void 0===m||null===(v=m.value)||void 0===v?void 0:v.start)&&void 0!==u?u:"",onChange:e=>{var a;return R(l,{type:"date",value:(0,s.c)((0,s.c)({},null===(a=T[l])||void 0===a?void 0:a.value),{},{start:e.target.value||void 0})})}}),(0,S.jsx)("input",{placeholder:"End Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(x=null===(p=T[l])||void 0===p||null===(h=p.value)||void 0===h?void 0:h.end)&&void 0!==x?x:"",onChange:e=>{var a;return R(l,{type:"date",value:(0,s.c)((0,s.c)({},null===(a=T[l])||void 0===a?void 0:a.value),{},{end:e.target.value||void 0})})}})]});if("string"===a){const e=[...new Set(I.map((e=>{var a,s;return null===(a=e[l])||void 0===a||null===(s=a.toLowerCase())||void 0===s?void 0:s.trim()})))];return(0,S.jsx)(n.c,{multiple:!0,id:"".concat(l,"-filter"),options:e,disableCloseOnSelect:!0,getOptionLabel:e=>e,value:T[l]||[],onChange:(e,a)=>R(l,a),renderOption:(e,l,a)=>{let{selected:t}=a;return(0,S.jsxs)("li",(0,s.c)((0,s.c)({},e),{},{children:[(0,S.jsx)(c.c,{icon:k,checkedIcon:A,style:{marginRight:8},checked:t}),l]}))},isOptionEqualToValue:(e,l)=>e===l,renderInput:e=>(0,S.jsx)(d.c,(0,s.c)((0,s.c)({},e),{},{label:l,placeholder:"Select ".concat(null===l||void 0===l?void 0:l.replace(/_/g," "))}))})}};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(r.c,{sx:{display:"flex",gap:"16px",padding:"8px",flexWrap:"wrap"},children:(0,S.jsx)(o.c,{onClick:()=>W((e=>(0,s.c)((0,s.c)({},e),{},{filters:!0}))),className:y?"d-md-none d-inline":"d-none",startIcon:(0,S.jsx)(N.c,{}),children:"Filters"})}),(0,S.jsxs)("div",{className:"row ",children:[(0,S.jsx)("div",{className:y?"col-xxl-10 col-lg-9 col-md-8":"",children:(0,S.jsx)("div",{className:"p-2",children:(0,S.jsx)(w.cp,{dataArray:I,columns:P,isExpendable:!!b,expandableComp:b||void 0,tableMaxHeight:650,ExcelPrintOption:!0})})}),y&&(0,S.jsxs)("div",{className:"col-xxl-2 col-lg-3 col-md-4 d-none d-md-block",children:[(0,S.jsxs)("h5",{className:"d-flex justify-content-between px-2",children:[(0,S.jsx)("span",{children:"Filters"}),(0,S.jsxs)("span",{children:[(0,S.jsx)(u.c,{title:"Column Visiblity",children:(0,S.jsx)(m.c,{size:"small",onClick:()=>W((e=>(0,s.c)((0,s.c)({},e),{},{columnSettings:!0}))),children:(0,S.jsx)(F.c,{})})}),(0,S.jsx)(u.c,{title:"Clear Filters",children:(0,S.jsx)(m.c,{size:"small",onClick:()=>E({}),children:(0,S.jsx)(C.c,{})})})]})]}),(0,S.jsxs)("div",{className:"border rounded-3 ",style:{maxHeight:"70vh",overflow:"auto"},children:[D.map(((e,l)=>{var a;return(0,S.jsxs)("div",{className:"py-3 px-3 hov-bg border-bottom",children:[(0,S.jsx)("label",{className:"mt-2 mb-1",children:null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.replace(/_/g," ")}),L(e)]},l)})),(0,S.jsx)("br",{})]})]})]}),(0,S.jsxs)(v.c,{open:V.filters,onClose:()=>W((e=>(0,s.c)((0,s.c)({},e),{},{filters:!1}))),fullWidth:!0,maxWidth:"sm",children:[(0,S.jsx)(x.c,{children:(0,S.jsx)("span",{children:(0,S.jsxs)("h5",{className:"d-flex justify-content-between px-2",children:[(0,S.jsx)("span",{children:"Filters"}),(0,S.jsxs)("span",{children:[(0,S.jsx)(u.c,{title:"Column Visiblity",children:(0,S.jsx)(m.c,{size:"small",onClick:()=>W((e=>(0,s.c)((0,s.c)({},e),{},{filters:!1}))),children:(0,S.jsx)(F.c,{})})}),(0,S.jsx)(u.c,{title:"Clear Filters",children:(0,S.jsx)(m.c,{size:"small",onClick:()=>E({}),children:(0,S.jsx)(C.c,{})})})]})]})})}),(0,S.jsx)(p.c,{children:(0,S.jsxs)("div",{className:"border rounded-3 ",style:{maxHeight:"70vh",overflow:"auto"},children:[D.map(((e,l)=>{var a;return(0,S.jsxs)("div",{className:"py-3 px-3 hov-bg border-bottom",children:[(0,S.jsx)("label",{className:"mt-2 mb-1",children:null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.replace(/_/g," ")}),L(e)]},l)})),(0,S.jsx)("br",{})]})}),(0,S.jsx)(h.c,{children:(0,S.jsx)(o.c,{onClick:()=>W((e=>(0,s.c)((0,s.c)({},e),{},{filters:!1}))),children:"Close"})})]}),(0,S.jsxs)(v.c,{open:V.columnSettings,onClose:()=>W((e=>(0,s.c)((0,s.c)({},e),{},{columnSettings:!1}))),maxWidth:"lg",fullWidth:!0,children:[(0,S.jsx)(x.c,{children:"Column Settings"}),(0,S.jsx)(p.c,{children:(0,S.jsx)("div",{className:"row",children:a.map(((e,l)=>{const a=D.find((l=>l.Field_Name===(null===e||void 0===e?void 0:e.Column_Name)));return(0,S.jsx)("div",{className:"col-lg-4 col-md-6 p-2",children:(0,S.jsxs)(j.c,{component:g.c,className:"p-2 d-flex justify-content-between align-items-center flex-wrap ".concat(l%2!==0?"bg-light":""),children:[(0,S.jsxs)("div",{className:"d-flex justify-content-between align-items-center flex-wrap",children:[(0,S.jsx)(f.c,{checked:Boolean(null===a||void 0===a?void 0:a.isVisible),onChange:l=>O((a=>a.map((a=>a.Field_Name===(null===e||void 0===e?void 0:e.Column_Name)?(0,s.c)((0,s.c)({},a),{},{isVisible:l.target.checked?1:0}):a))))}),(0,S.jsx)("h6",{className:"fa-13 mb-0 fw-bold ",children:null===e||void 0===e?void 0:e.Column_Name})]}),(0,S.jsx)("input",{type:"number",value:(0,i.Q$)(null===a||void 0===a?void 0:a.OrderBy)?null===a||void 0===a?void 0:a.OrderBy:"",onChange:e=>O((l=>l.map((l=>l.Field_Name===(null===a||void 0===a?void 0:a.Field_Name)?(0,s.c)((0,s.c)({},l),{},{OrderBy:e.target.value}):l)))),label:"Order Value",className:"mt-2 p-1 border-0 cus-inpt",style:{width:"80px"},placeholder:"Order"})]})},l)}))})}),(0,S.jsx)(h.c,{children:(0,S.jsx)(o.c,{onClick:()=>W((e=>(0,s.c)((0,s.c)({},e),{},{columnSettings:!1}))),color:"error",children:"close"})})]})]})}},59708:(e,l,a)=>{a.r(l),a.d(l,{default:()=>h});var s=a(30800),t=a(69060),i=a(43692),n=a(84436),c=a(3358),d=a(5548),r=a(39308),o=a(50764),u=a(31664),m=a(61988),v=a(1908),x=a(82496);const p=e=>{let{row:l,Fromdate:a,Todate:i,DB:n}=e;const[c,d]=(0,t.useState)([]),[r,u]=(0,t.useState)([]);return(0,t.useEffect)((()=>{(0,v.q)({address:"sales/partyWiseReport/details?Fromdate=".concat(a,"&Todate=").concat(i,"&Party_Name=").concat(null===l||void 0===l?void 0:l.Actual_Party_Name),headers:{Db:n}}).then((e=>{let{success:l,data:a,others:t}=e;if(l){const{dataTypeInfo:e}=t;d(a),u((l=>(0,s.c)((0,s.c)({},l),{},{salesInfo:Array.isArray(e)?e:[]})))}else d([])})).catch(console.error)}),[null===l||void 0===l?void 0:l.Party_Name,a,i]),(0,x.jsx)(o.c,{dataArray:c,columns:r.salesInfo})},h=()=>{const e=JSON.parse(localStorage.getItem("user")),[l,a]=(0,t.useState)(null),[h,j]=(0,t.useState)([]),[g,f]=(0,t.useState)({Fromdate:(0,r.SO)(1),Todate:(0,r.Q7)(),filterDialog:!1,reload:!0});return(0,t.useEffect)((()=>{a(null),j([]),(0,v.q)({address:"sales/partyWiseReport?Fromdate=".concat(null===g||void 0===g?void 0:g.Fromdate,"&Todate=").concat(null===g||void 0===g?void 0:g.Todate),headers:{Db:null===e||void 0===e?void 0:e.Company_id}}).then((e=>{let{success:l,data:s,others:t}=e;if(l){const{dataTypeInfo:e}=t;a(s),j(Array.isArray(e)?e:[])}else a([])})).catch(console.error)}),[g.reload]),(0,x.jsx)(t.Fragment,{children:(0,x.jsxs)(i.c,{className:"mt-3",children:[(0,x.jsx)("div",{className:"px-3 py-2 d-flex justify-content-between align-items-center fw-bold text-dark",style:{backgroundColor:"#eae0cc"},children:(0,x.jsx)("span",{children:"PARTY BASED SALES"})}),(0,x.jsxs)(n.c,{children:[(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("input",{type:"date",className:"cus-inpt w-auto ps-3 border rounded-5 me-1",value:g.Fromdate,onChange:e=>f((l=>(0,s.c)((0,s.c)({},l),{},{Fromdate:e.target.value})))}),(0,x.jsx)("input",{type:"date",className:"cus-inpt w-auto ps-3 border rounded-5",value:g.Todate,onChange:e=>f((l=>(0,s.c)((0,s.c)({},l),{},{Todate:e.target.value})))}),(0,x.jsx)(c.c,{title:"Reload Data",children:(0,x.jsx)(d.c,{onClick:()=>f((e=>(0,s.c)((0,s.c)({},e),{},{reload:!e.reload}))),size:"small",className:"ms-2",children:(0,x.jsx)(u.c,{})})}),(0,x.jsx)(c.c,{title:"Filters",children:(0,x.jsx)(d.c,{onClick:()=>f((e=>(0,s.c)((0,s.c)({},e),{},{filterDialog:!0}))),size:"small",className:"d-md-none d-inline",children:(0,x.jsx)(m.c,{})})})]}),null===l&&(0,x.jsx)("h6",{className:"blue-text text-center",children:"Fetching data..."}),Array.isArray(l)&&(0,x.jsx)(o.c,{dataArray:l,columns:h,ExpandableComp:l=>{let{row:a}=l;return(0,x.jsx)(p,{row:a,DB:null===e||void 0===e?void 0:e.Company_id,Fromdate:null===g||void 0===g?void 0:g.Fromdate,Todate:null===g||void 0===g?void 0:g.Todate})},enableFilters:!0})]})]})})}}}]);
//# sourceMappingURL=9708.a6f6f710.chunk.js.map