"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[636],{60636:(e,a,t)=>{t.r(a),t.d(a,{default:()=>x});var s=t(69060),r=t(1908),l=t(39308),n=t(13724),i=t(43692),o=t(89e3),c=t(5548),d=t(56480),h=t(71412),u=t(87016),m=t(82496);const x=e=>{let{loadingOn:a,loadingOff:t}=e;const[x,p]=(0,s.useState)([]),[v,g]=(0,s.useState)([]),[j,y]=(0,s.useState)({FromDate:new Date((new Date).setDate((new Date).getDate()-1)).toISOString().split("T")[0],ToDate:(new Date).toISOString().split("T")[0],refresh:!1,viewNotSynced:!1,searchERPLol:"",searchTallyLol:"",searchNotSynced:""}),N=(0,s.useMemo)((()=>x.filter((e=>!v.some((a=>(0,l.Qr)(e.invoiceno,a.invoiceno)))))),[x,v]),b=(0,s.useMemo)((()=>j.searchERPLol?x.filter((e=>(0,l.MP)(Object.values(e).join(" ")).includes((0,l.MP)(j.searchERPLol)))):x),[j.searchERPLol,x]),A=(0,s.useMemo)((()=>j.searchTallyLol?v.filter((e=>(0,l.MP)(Object.values(e).join(" ")).includes((0,l.MP)(j.searchTallyLol)))):v),[j.searchTallyLol,v]),S=(0,s.useMemo)((()=>j.searchNotSynced?N.filter((e=>(0,l.MP)(Object.values(e).join(" ")).includes((0,l.MP)(j.searchNotSynced)))):N),[N,j.searchNotSynced]);(0,s.useEffect)((()=>{a&&a(),(0,r.q)({address:`masters/posProductList?FromDate=${j.FromDate}&ToDate=${j.ToDate}`}).then((e=>{if(e.success){var a;const t=Array.isArray(null===e||void 0===e||null===(a=e.others)||void 0===a?void 0:a.tallyResult)?e.others.tallyResult:[];p(e.data),g(t)}})).catch((e=>{console.error(e)})).finally((()=>{t&&t()}))}),[j.refresh,j.FromDate,j.ToDate]);const f=e=>{var a;let{row:t}=e;return(0,m.jsxs)("table",{className:"table",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{className:"border p-2 bg-light",children:"Product ID"}),(0,m.jsx)("th",{className:"border p-2 bg-light",children:"Product Name"}),(0,m.jsx)("th",{className:"border p-2 bg-light",children:"Qty"}),(0,m.jsx)("th",{className:"border p-2 bg-light",children:"Price"}),(0,m.jsx)("th",{className:"border p-2 bg-light",children:"Total Price"})]})}),(0,m.jsx)("tbody",{children:null===t||void 0===t||null===(a=t.items)||void 0===a?void 0:a.map(((e,a)=>(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"border p-2",children:null===e||void 0===e?void 0:e.icode}),(0,m.jsx)("td",{className:"border p-2",children:null===e||void 0===e?void 0:e.product_name}),(0,m.jsx)("td",{className:"border p-2",children:null===e||void 0===e?void 0:e.qty}),(0,m.jsx)("td",{className:"border p-2",children:null===e||void 0===e?void 0:e.sell}),(0,m.jsx)("td",{className:"border p-2",children:null!==e&&void 0!==e&&e.qty&&null!==e&&void 0!==e&&e.sell?e.qty*e.sell:0})]},a)))})]})};return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(i.c,{children:[(0,m.jsxs)("div",{className:"px-3 py-2 fa-14",children:[(0,m.jsxs)("div",{className:"d-flex flex-wrap align-items-center",children:[(0,m.jsxs)("h5",{className:"flex-grow-1",children:["POS SYNC (Differents: ",N.length,")"]}),(0,m.jsx)("td",{style:{verticalAlign:"middle"},children:"From"}),(0,m.jsx)("td",{children:(0,m.jsx)("input",{type:"date",value:j.FromDate,onChange:e=>y({...j,FromDate:e.target.value}),className:"cus-inpt"})}),(0,m.jsx)("td",{style:{verticalAlign:"middle"},children:"To"}),(0,m.jsx)("td",{children:(0,m.jsx)("input",{type:"date",value:j.ToDate,onChange:e=>y({...j,ToDate:e.target.value}),className:"cus-inpt"})}),(0,m.jsx)(o.c,{onClick:()=>{a&&a(),(0,r.q)({address:`masters/posProductList?FromDate=${j.FromDate}&ToDate=${j.ToDate}`}).then((e=>{if(e.success){var a,t;const s=Array.isArray(null===e||void 0===e||null===(a=e.others)||void 0===a?void 0:a.tallyResult)?null===e||void 0===e||null===(t=e.others)||void 0===t?void 0:t.tallyResult:[];p(e.data),g(s)}})).catch((e=>console.error(e))).finally((()=>{t&&t()}))},children:"Search"}),(0,m.jsx)(c.c,{size:"small",onClick:()=>{y((e=>({...e,viewNotSynced:!e.viewNotSynced})))},children:(0,m.jsx)(h.c,{})})]}),(0,m.jsx)("div",{className:"d-flex flex-wrap align-items-center"})]}),j.viewNotSynced?(0,m.jsx)(n.cp,{title:"Not synced list ",bodyFontSizePx:11,headerFontSizePx:11,dataArray:S,columns:[(0,n.A5)("invoiceno","string","Invoice"),(0,n.A5)("edate","date","edate"),(0,n.A5)("Retailer_Name","string","Retailer"),(0,n.A5)("Broker","string","Broker_Name"),(0,n.A5)("Transporter","string","Transporter"),(0,n.A5)("namount","string","Net Amount"),{Field_Name:"Actions",ColumnHeader:"Actions",isVisible:1,isCustomCell:!0,Cell:e=>{let{row:s}=e;return(0,m.jsx)("td",{className:"fa-12",style:{minWidth:"80px"},children:(0,m.jsx)(c.c,{size:"small",onClick:()=>{return e=s,a&&a(),void(0,r.q)({address:`masters/syncPOSData?invoiceId=${e.invoiceno}`}).then((e=>{e.success?d.m4.success(e.message):d.m4.error(e.message)})).catch((e=>console.error(e))).finally((()=>{y((e=>({...e,refresh:!e.refresh}))),t&&t()}));var e},children:(0,m.jsx)(u.c,{})})})}}],isExpendable:!0,tableMaxHeight:550,expandableComp:f,ButtonArea:(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("input",{type:"search",className:"cus-inpt p-1 w-auto",value:j.searchNotSynced,onChange:e=>y((a=>({...a,searchNotSynced:e.target.value}))),placeholder:"Search.."})})}):(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"col-lg-6 p-1",children:(0,m.jsx)(n.cp,{title:"Data POS - "+x.length,bodyFontSizePx:11,headerFontSizePx:11,dataArray:b,columns:[(0,n.A5)("invoiceno","string","Invoice"),(0,n.A5)("edate","date","edate"),(0,n.A5)("Retailer_Name","string","Retailer_Name"),(0,n.A5)("Broker","string","Broker"),(0,n.A5)("Transporter","string","Transporter"),(0,n.A5)("namount","string","Net Amount")],ButtonArea:(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("input",{type:"search",className:"cus-inpt p-1 w-auto",value:j.searchERPLol,onChange:e=>y((a=>({...a,searchERPLol:e.target.value}))),placeholder:"Search.."})}),isExpendable:!0,tableMaxHeight:550,expandableComp:f})}),(0,m.jsx)("div",{className:"col-lg-6 p-1",children:(0,m.jsx)(n.cp,{title:"DataBase - "+v.length,bodyFontSizePx:11,headerFontSizePx:11,dataArray:A,columns:[(0,n.A5)("invoiceno","string","invoiceno"),(0,n.A5)("edate","date","edate"),(0,n.A5)("Retailer_Name","string","Retailer_Name"),(0,n.A5)("Broker_Name","string","Broker"),(0,n.A5)("Transporter_Name","string","Transporter"),(0,n.A5)("namount","string","Net Amount")],ButtonArea:(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("input",{type:"search",className:"cus-inpt p-1 w-auto",value:j.searchTallyLol,onChange:e=>y((a=>({...a,searchTallyLol:e.target.value}))),placeholder:"Search.."})}),isExpendable:!0,tableMaxHeight:550,expandableComp:f})})]})})]})})}},87016:(e,a,t)=>{t.d(a,{c:()=>l});var s=t(27664),r=t(82496);const l=(0,s.c)((0,r.jsx)("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8m0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4z"}),"Sync")},71412:(e,a,t)=>{t.d(a,{c:()=>l});var s=t(27664),r=t(82496);const l=(0,s.c)((0,r.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")}}]);
//# sourceMappingURL=636.630989b8.chunk.js.map