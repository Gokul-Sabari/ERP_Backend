"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[1380],{13760:(e,s,l)=>{l.r(s),l.d(s,{default:()=>k});var r=l(30800),t=l(69060),a=l(43692),d=l(89e3),n=l(84436),o=l(5548),i=l(40656),c=l(62344),u=l(56480),m=l(39308),v=l(27664),h=l(82496);const x=(0,v.c)((0,h.jsx)("path",{d:"m14 7-5 5 5 5z"}),"ArrowLeft");var _=l(80156),j=l(96064),p=l(49608),I=l(86e3),b=l(45180),T=l(36992),S=l(1908),g=l(13724),N=l(128),C=l(51560);const f=(0,m.gV)().user,y={So_Id:"",So_Inv_No:"",So_Year:"",So_Branch_Inv_Id:"",So_Date:(0,m.Q7)(),Retailer_Id:"",Sales_Person_Id:"",Branch_Id:"",VoucherType:"",GST_Inclusive:2,IS_IGST:0,Narration:"",isConverted:"",Cancel_status:"",CSGT_Total:0,SGST_Total:0,IGST_Total:0,Round_off:0,Total_Before_Tax:0,Total_Tax:0,Total_Invoice_value:0,Created_by:null===f||void 0===f?void 0:f.UserId,Altered_by:null===f||void 0===f?void 0:f.UserId,Approved_By:"",Approve_Status:"",Created_on:"",Alterd_on:"",Trans_Type:"",Alter_Id:""},P={BrandID:"",Brand:"",GroupID:"",Group:"",SO_St_Id:"",So_Date:"",Sales_Order_Id:"",S_No:"",Pre_Id:"",Item_Id:"",Item_Rate:0,Bill_Qty:0,Amount:0,HSN_Code:"",Unit_Id:"",Unit_Name:"",Free_Qty:0,Total_Qty:0,Taxble:0,Taxable_Rate:0,Taxable_Amount:0,Tax_Rate:0,Cgst:0,Cgst_Amo:0,Sgst:0,Sgst_Amo:0,Igst:0,Igst_Amo:0,Final_Amo:0,Created_on:""};var A=l(82656),Q=l(26773),R=l(4488),G=l(42376);const O=e=>{let{loadingOn:s,loadingOff:l,open:a,onClose:n,retailer:i,children:c,selectedItems:u,setSelectedItems:v,products:x=[],GST_Inclusive:_,IS_IGST:j}=e;const p=(0,m.Qr)(_,1),I=(0,m.Qr)(_,2),[b,T]=(0,t.useState)([]),[g,C]=(0,t.useState)({Fromdate:(0,m.Q7)(),Todate:(0,m.Q7)(),search:!1});(0,t.useEffect)((()=>{if((0,m.Q$)(i)&&a){const{Fromdate:e,Todate:r}=g;s&&s(),(0,S.q)({address:"sales/saleOrder/importPosOrders?Fromdate=".concat(e,"&Todate=").concat(r,"&Retailer_Id=").concat(i)}).then((e=>{e.success?T(e.data):T([])})).catch((e=>console.error(e))).finally((()=>{l&&l()}))}}),[g.search]);const f=function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];v((l=>{const r=l.filter((s=>!(0,m.Qr)(null===s||void 0===s?void 0:s.Pre_Id,e.Pre_Id)));let t;if(s)t=r;else{const s=b.filter((s=>(0,m.Qr)(s.Pre_Id,e.Pre_Id))).map((e=>Object.fromEntries(Object.entries(P).map((s=>{var l,r,t,a,d;let[n,o]=s;const i=(e=>{var s;return null!==(s=null===x||void 0===x?void 0:x.find((s=>(0,m.Qr)(null===s||void 0===s?void 0:s.Product_Id,e))))&&void 0!==s?s:{}})(e.Item_Id),c=j?i.Igst_P:i.Gst_P,u=c>0,{Item_Rate:v,Bill_Qty:h,Tonnage:_,PackValue:b}=e,T=(0,m.eX)(v,(0,m.eX)(h,b)),S=I?"zerotax":p?"remove":"add",g=(0,N.O)(v,c,S),C=(0,N.O)(T,c,S),f=j?0:C.cgst_per,y=j?C.igst_per:0,P=j?0:C.cgst_amount,A=j?C.igst_amount:0;switch(n){case"Pre_Id":return[n,null!==(l=e.Pre_Id)&&void 0!==l?l:o];case"Item_Id":return[n,null!==(r=e.Item_Id)&&void 0!==r?r:o];case"Item_Rate":return[n,(0,m.gH)(v)];case"Bill_Qty":case"Total_Qty":return[n,(0,m.gH)(_)];case"Amount":return[n,T];case"Unit_Id":return[n,null!==(t=e.Unit_Id)&&void 0!==t?t:o];case"Unit_Name":return[n,null!==(a=e.Units)&&void 0!==a?a:o];case"HSN_Code":return[n,null!==(d=i.HSN_Code)&&void 0!==d?d:o];case"Taxable_Rate":return[n,g.base_amount];case"Taxble":return[n,u?1:0];case"Taxable_Amount":return[n,C.base_amount];case"Tax_Rate":return[n,c];case"Cgst":case"Sgst":return[n,null!==f&&void 0!==f?f:0];case"Cgst_Amo":case"Sgst_Amo":return[n,I?0:P];case"Igst":return[n,null!==y&&void 0!==y?y:0];case"Igst_Amo":return[n,I?0:A];case"Final_Amo":return[n,C.with_tax];default:return[n,o]}})))));t=[...r,...s]}return t}))},y=()=>{n&&n(),T([])};return(0,h.jsxs)(h.Fragment,{children:[c,(0,h.jsxs)(A.c,{open:a,onClose:y,fullScreen:!0,children:[(0,h.jsx)(Q.c,{children:(0,h.jsxs)("div",{className:"d-flex flex-wrap align-items-center ",children:[(0,h.jsx)("span",{className:"flex-grow-1",children:"Import from POS"}),(0,h.jsx)(o.c,{onClick:y,color:"success",children:(0,h.jsx)(G.c,{className:"fa-20"})})]})}),(0,h.jsxs)(R.c,{children:[(0,h.jsx)("form",{onSubmit:e=>{e.preventDefault(),C((e=>(0,r.c)((0,r.c)({},e),{},{search:!e.search})))},children:(0,h.jsxs)("div",{className:"d-flex flex-wrap align-items-end",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"d-block ms-2",children:"From Date"}),(0,h.jsx)("input",{className:"cus-inpt p-2 w-auto",type:"date",value:null===g||void 0===g?void 0:g.Fromdate,onChange:e=>C((s=>(0,r.c)((0,r.c)({},s),{},{Fromdate:e.target.value}))),required:!0})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"d-block ms-2",children:"To Date"}),(0,h.jsx)("input",{className:"cus-inpt p-2 w-auto ms-2",type:"date",min:g.Fromdate,value:null===g||void 0===g?void 0:g.Todate,onChange:e=>C((s=>(0,r.c)((0,r.c)({},s),{},{Todate:e.target.value}))),required:!0})]}),(0,h.jsx)(d.c,{variant:"outlined",className:"ms-2",type:"submit",children:"search"})]})}),(0,h.jsx)("div",{className:"table-responsive mt-3",children:(0,h.jsxs)("table",{className:"table table-bordered fa-13",children:[(0,h.jsx)("thead",{children:(0,h.jsx)("tr",{children:["Sno","#","Item","Qty","Pack","Rate","Amount","Order ID","Date","Invoice Value"].map(((e,s)=>(0,h.jsx)("th",{children:e},s)))})}),(0,h.jsx)("tbody",{children:b.filter((e=>(0,m.Qr)(e.Custome_Id,i))).map(((e,s)=>(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:s+1}),(0,h.jsx)("td",{children:(()=>{const s=-1!==u.findIndex((s=>(0,m.Qr)(null===s||void 0===s?void 0:s.Pre_Id,e.Pre_Id)));return(0,h.jsx)("div",{children:(0,h.jsx)("input",{className:"form-check-input shadow-none pointer",style:{padding:"0.7em"},type:"checkbox",checked:s,onChange:()=>{s?f(e,!0):f(e)}})})})()}),(0,h.jsx)("td",{children:null===e||void 0===e?void 0:e.Product_Name}),(0,h.jsx)("td",{children:null===e||void 0===e?void 0:e.Bill_Qty}),(0,h.jsx)("td",{children:null===e||void 0===e?void 0:e.Tonnage}),(0,h.jsx)("td",{children:null===e||void 0===e?void 0:e.Item_Rate}),(0,h.jsx)("td",{children:null===e||void 0===e?void 0:e.Amount}),(0,h.jsx)("td",{children:null===e||void 0===e?void 0:e.Pre_Id}),(0,h.jsx)("td",{children:(0,m.uy)(null===e||void 0===e?void 0:e.Pre_Date)}),(0,h.jsx)("td",{children:null===e||void 0===e?void 0:e.Total_Invoice_value})]},s)))})]})})]})]})]})};var w=l(664);const V=(0,m.gV)().user,B=function(){var e;let s=arguments.length>1?arguments[1]:void 0;return null!==(e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find((e=>(0,m.Qr)(e.Product_Id,s))))&&void 0!==e?e:{}},k=e=>{var s,l;let{loadingOn:v,loadingOff:f}=e;const A=(0,C.i6)(),Q=(0,C.IT)().state,[R,G]=(0,t.useState)({products:[],branch:[],retailers:[],voucherType:[],uom:[],staff:[],staffType:[],salesPerson:[],brand:[]}),[k,D]=(0,t.useState)(y),[F,H]=(0,t.useState)([]),[q,E]=(0,t.useState)({}),[U,z]=(0,t.useState)(null),[M,$]=(0,t.useState)(!1),[L,X]=(0,t.useState)(!1),Y=(0,m.Qr)(k.GST_Inclusive,1),J=(0,m.Qr)(k.GST_Inclusive,2),K=(0,m.Qr)(k.IS_IGST,1),W=J?"zerotax":Y?"remove":"add";(0,t.useEffect)((()=>{if((0,m.CY)(Q)&&Array.isArray(null===Q||void 0===Q?void 0:Q.Products_List)){const{Products_List:e}=Q;D(Object.fromEntries(Object.entries(y).map((e=>{var s;let[l,r]=e;return"So_Date"===l?[l,Q[l]?(0,m.Q7)(Q[l]):r]:[l,null!==(s=Q[l])&&void 0!==s?s:r]})))),H(e.map((e=>Object.fromEntries(Object.entries(P).map((s=>{var l;let[r,t]=s;return[r,null!==(l=e[r])&&void 0!==l?l:t]}))))))}}),[Q]),(0,t.useEffect)((()=>{(async()=>{try{const[e,s,l,t,a,d,n,o,i]=await Promise.all([(0,S.q)({address:"masters/branch/dropDown"}),(0,S.q)({address:"masters/products"}),(0,S.q)({address:"masters/retailers/dropDown?Company_Id=".concat(null===V||void 0===V?void 0:V.Company_id)}),(0,S.q)({address:"purchase/voucherType"}),(0,S.q)({address:"masters/uom"}),(0,S.q)({address:"dataEntry/costCenter"}),(0,S.q)({address:"dataEntry/costCenter/category"}),(0,S.q)({address:"masters/users/salesPerson/dropDown"}),(0,S.q)({address:"masters/company?Company_id=".concat(null===V||void 0===V?void 0:V.Company_id)})]),c=(e.success?e.data:[]).sort(((e,s)=>String(null===e||void 0===e?void 0:e.BranchName).localeCompare(null===s||void 0===s?void 0:s.BranchName))),u=(s.success?s.data:[]).sort(((e,s)=>String(null===e||void 0===e?void 0:e.Product_Name).localeCompare(null===s||void 0===s?void 0:s.Product_Name))),v=(l.success?l.data:[]).sort(((e,s)=>String(null===e||void 0===e?void 0:e.Retailer_Name).localeCompare(null===s||void 0===s?void 0:s.Retailer_Name))),h=(t.success?t.data:[]).sort(((e,s)=>String(null===e||void 0===e?void 0:e.Voucher_Type).localeCompare(null===s||void 0===s?void 0:s.Voucher_Type))),x=(a.success?a.data:[]).sort(((e,s)=>String(e.Units).localeCompare(s.Units))),_=(d.success?d.data:[]).sort(((e,s)=>String(null===e||void 0===e?void 0:e.Cost_Center_Name).localeCompare(null===s||void 0===s?void 0:s.Cost_Center_Name))),j=(n.success?n.data:[]).sort(((e,s)=>String(null===e||void 0===e?void 0:e.Cost_Category).localeCompare(null===s||void 0===s?void 0:s.Cost_Category))),p=(o.success?o.data:[]).sort(((e,s)=>String(null===e||void 0===e?void 0:e.Name).localeCompare(null===s||void 0===s?void 0:s.Name)));G((e=>(0,r.c)((0,r.c)({},e),{},{products:u,branch:c,retailers:v,voucherType:h,uom:x,staff:_,staffType:j,salesPerson:p,brand:(0,m.Un)(u,"Brand",["Brand_Name"])}))),E(i.success&&null!==i&&void 0!==i&&i.data[0]?null===i||void 0===i?void 0:i.data[0]:{})}catch(e){console.error("Error fetching data:",e)}})()}),[null===V||void 0===V?void 0:V.Company_id]);const Z=(0,t.useMemo)((()=>F.reduce(((e,s)=>{const l=(0,m.kR)(null===s||void 0===s?void 0:s.Amount);if(J)return(0,m.Q5)(e,l);const r=B(R.products,s.Item_Id),t=(0,m.Qr)(K,1)?r.Igst_P:r.Gst_P;return Y?(0,m.Q5)(e,(0,N.O)(l,t,"remove").with_tax):(0,m.Q5)(e,(0,N.O)(l,t,"add").with_tax)}),0)),[F,J,R.products,K,Y]),ee=(0,t.useMemo)((()=>F.reduce(((e,s)=>{const l=(0,m.kR)(null===s||void 0===s?void 0:s.Amount);if(J)return{TotalValue:(0,m.Q5)(e.TotalValue,l),TotalTax:0};const r=B(R.products,s.Item_Id),t=(0,m.Qr)(K,1)?r.Igst_P:r.Gst_P,a=(0,N.O)(l,t,Y?"remove":"add");return{TotalValue:(0,m.Q5)(e.TotalValue,a.without_tax),TotalTax:(0,m.Q5)(e.TotalTax,a.tax_amount)}}),{TotalValue:0,TotalTax:0})),[F,J,R.products,K,Y]);return(0,t.useEffect)((()=>{H((e=>[...e].map((e=>Object.fromEntries(Object.entries(P).map((s=>{let[l,r]=s;const t=B(R.products,null===e||void 0===e?void 0:e.Item_Id),a=K?t.Igst_P:t.Gst_P,d=a>0,{Bill_Qty:n,Item_Rate:o,Amount:i}=e,c=(0,N.O)(o,a,W),u=(0,N.O)(i,a,W),m=K?0:u.cgst_per,v=K?u.igst_per:0,h=K?0:u.cgst_amount,x=K?u.igst_amount:0;switch(l){case"Taxable_Rate":return[l,c.base_amount];case"Total_Qty":return[l,n];case"Taxble":return[l,d?1:0];case"Taxable_Amount":return[l,u.base_amount];case"Tax_Rate":return[l,a];case"Cgst":case"Sgst":return[l,null!==m&&void 0!==m?m:0];case"Cgst_Amo":case"Sgst_Amo":return[l,J?0:h];case"Igst":return[l,null!==v&&void 0!==v?v:0];case"Igst_Amo":return[l,J?0:x];case"Final_Amo":return[l,u.with_tax];default:return[l,e[l]||r]}})))))))}),[P,R.products,K,W]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(w.c,{orderProducts:F,setOrderProducts:H,open:M,onClose:()=>{$(!1),z(null)},products:R.products,brands:R.brand,uom:R.uom,GST_Inclusive:k.GST_Inclusive,IS_IGST:K,editValues:U,initialValue:P}),(0,h.jsxs)(a.c,{children:[(0,h.jsxs)("div",{className:"d-flex align-items-center flex-wrap p-2",children:[(0,h.jsx)("h5",{className:"flex-grow-1 ps-2",children:"Create Order"}),(0,h.jsx)(d.c,{variant:"outlined",sx:{ml:1},startIcon:(0,h.jsx)(x,{}),onClick:()=>A("/erp/sales/saleOrder"),children:"Back"}),(0,h.jsx)(d.c,{variant:"outlined",sx:{ml:1},startIcon:(0,h.jsx)(_.c,{}),onClick:()=>{D(y),H([])},children:"Clear"})]}),(0,h.jsx)(n.c,{children:(0,h.jsxs)("div",{className:"pt-0",children:[(0,h.jsxs)("div",{className:"p-3 rounded-3 mb-3 shadow-sm",children:[(0,h.jsx)("h5",{className:"border-bottom",children:"From:"}),(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-lg-4 col-md-6",children:(0,h.jsx)("table",{className:"table table-borderless m-0 fa-13",children:(0,h.jsxs)("tbody",{children:[(0,h.jsx)("tr",{children:(0,h.jsxs)("td",{children:[(0,h.jsx)("span",{className:"me-2",children:"Company: "}),(0,h.jsx)("span",{children:null===q||void 0===q?void 0:q.Company_Name})]})}),(0,h.jsx)("tr",{children:(0,h.jsxs)("td",{children:[(0,h.jsx)("span",{className:"me-2",children:"Address: "}),(0,h.jsx)("span",{children:null===q||void 0===q?void 0:q.Company_Address})]})}),(0,h.jsx)("tr",{children:(0,h.jsxs)("td",{children:[(0,h.jsx)("span",{className:"me-2",children:"Phone: "}),(0,h.jsx)("span",{children:null===q||void 0===q?void 0:q.Telephone_Number})]})})]})})}),(0,h.jsx)("div",{className:"col-lg-4 col-md-6",children:(0,h.jsx)("table",{className:"table table-borderless fa-13 m-0",children:(0,h.jsxs)("tbody",{children:[(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:"Date:"}),(0,h.jsx)("td",{children:(0,h.jsx)("input",{type:"date",value:null!==k&&void 0!==k&&k.So_Date?(0,m.Q7)(null===k||void 0===k?void 0:k.So_Date):"",onChange:e=>D((0,r.c)((0,r.c)({},k),{},{So_Date:e.target.value})),className:"cus-inpt p-1"})})]}),(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:"Invoice Type:"}),(0,h.jsx)("td",{children:(0,h.jsxs)("select",{className:"cus-inpt p-1",onChange:e=>D((0,r.c)((0,r.c)({},k),{},{GST_Inclusive:Number(e.target.value)})),value:k.GST_Inclusive,children:[(0,h.jsx)("option",{value:1,children:"Inclusive Tax"}),(0,h.jsx)("option",{value:0,children:"Exclusive Tax"}),(0,h.jsx)("option",{value:2,children:"Not Taxable"})]})})]}),(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:"Tax Type:"}),(0,h.jsx)("td",{children:(0,h.jsxs)("select",{className:"cus-inpt p-1",onChange:e=>D((0,r.c)((0,r.c)({},k),{},{IS_IGST:Number(e.target.value)})),value:k.IS_IGST,children:[(0,h.jsx)("option",{value:"0",children:"GST"}),(0,h.jsx)("option",{value:"1",children:"IGST"})]})})]})]})})}),(0,h.jsx)("div",{className:"col-lg-4 col-md-6",children:(0,h.jsx)("table",{className:"table table-borderless fa-13 m-0",children:(0,h.jsxs)("tbody",{children:[(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:"Sales Person:"}),(0,h.jsx)("td",{children:(0,h.jsxs)("select",{className:"cus-inpt p-1",onChange:e=>D((0,r.c)((0,r.c)({},k),{},{Sales_Person_Id:Number(e.target.value)})),value:k.Sales_Person_Id,children:[(0,h.jsx)("option",{value:"",disabled:!0,children:"select sales person"}),(0,h.jsx)("option",{value:null===V||void 0===V?void 0:V.UserId,children:null===V||void 0===V?void 0:V.Name}),null===(s=R.salesPerson)||void 0===s?void 0:s.map(((e,s)=>(0,h.jsx)("option",{value:e.UserId,children:e.Name},s)))]})})]}),(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:"Voucher Type:"}),(0,h.jsx)("td",{children:(0,h.jsxs)("select",{className:"cus-inpt p-1",onChange:e=>D((0,r.c)((0,r.c)({},k),{},{VoucherType:Number(e.target.value)})),value:k.VoucherType,children:[(0,h.jsx)("option",{value:"",disabled:!0,children:"select voucher"}),null===(l=R.voucherType)||void 0===l?void 0:l.filter((e=>"SALES"===e.Type)).map(((e,s)=>(0,h.jsx)("option",{value:e.Vocher_Type_Id,children:e.Voucher_Type},s)))]})})]}),(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:"Branch"}),(0,h.jsx)("td",{children:(0,h.jsxs)("select",{className:"cus-inpt p-1",onChange:e=>D((0,r.c)((0,r.c)({},k),{},{Branch_Id:Number(e.target.value)})),value:k.Branch_Id,children:[(0,h.jsx)("option",{value:"",disabled:!0,children:"select Branch"}),R.branch.map(((e,s)=>(0,h.jsx)("option",{value:e.BranchId,children:e.BranchName},s)))]})})]})]})})})]})]}),(0,h.jsxs)("div",{className:"p-3 rounded-3 mb-3 shadow-sm",children:[(0,h.jsx)("h5",{className:"border-bottom",children:"To:"}),(0,h.jsxs)("div",{className:"row ",children:[(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsx)("table",{className:"table table-borderless",children:(0,h.jsxs)("tbody",{children:[(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:"Retailer Name:"}),(0,h.jsx)("td",{children:(0,h.jsx)(i.cp,{value:{value:null===k||void 0===k?void 0:k.Retailer_Id,label:null===k||void 0===k?void 0:k.Retailer_Name},onChange:e=>{D((0,r.c)((0,r.c)({},k),{},{Retailer_Id:e.value,Retailer_Name:e.label})),H([])},options:[{value:"",label:"select",isDisabled:!0},...R.retailers.map((e=>({value:null===e||void 0===e?void 0:e.Retailer_Id,label:null===e||void 0===e?void 0:e.Retailer_Name})))],styles:c.cF,isSearchable:!0,placeholder:"Retailer Name",maxMenuHeight:200})})]}),(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:"Address:"}),(0,h.jsx)("td",{children:V.Name})]}),(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:"Phone:"}),(0,h.jsx)("td",{})]})]})})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsx)("table",{className:"table table-borderless",children:(0,h.jsxs)("tbody",{children:[(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:"Q-Pay:"}),(0,h.jsx)("td",{children:10})]}),(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:"Frequency Days:"}),(0,h.jsx)("td",{children:20})]})]})})})]})]}),(0,h.jsx)(g.cp,{title:"Products",ButtonArea:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(d.c,{onClick:()=>{z(null),$(!0)},sx:{ml:1},variant:"outlined",startIcon:(0,h.jsx)(j.c,{}),disabled:!(0,m.Q$)(k.Retailer_Id)||F.length>0&&F.some((e=>(0,m.Q$)(e.Pre_Id))),children:"Add Product"}),(0,h.jsx)(O,{loadingOn:v,loadingOff:f,open:L,onClose:()=>X(!1),retailer:null===k||void 0===k?void 0:k.Retailer_Id,selectedItems:F,setSelectedItems:H,products:R.products,GST_Inclusive:k.GST_Inclusive,IS_IGST:K,children:(0,h.jsx)(d.c,{onClick:()=>X(!0),disabled:!(0,m.Q$)(k.Retailer_Id)||F.length>0&&F.some((e=>!(0,m.Q$)(e.Pre_Id))),sx:{ml:1},variant:"outlined",startIcon:(0,h.jsx)(p.c,{}),children:"Import pos"})})]}),dataArray:F,columns:[{isCustomCell:!0,Cell:e=>{let{row:s}=e;return B(R.products,null===s||void 0===s?void 0:s.Item_Id).Product_Name},ColumnHeader:"Product",isVisible:1},{isCustomCell:!0,Cell:e=>{var s;let{row:l}=e;return null===(s=B(R.products,null===l||void 0===l?void 0:l.Item_Id).Product_Name)||void 0===s?void 0:s.HSN_Code},ColumnHeader:"HSN Code",isVisible:1},{isCustomCell:!0,Cell:e=>{var s;let{row:l}=e;return(null===l||void 0===l?void 0:l.Bill_Qty)+" "+(null!==(s=null===l||void 0===l?void 0:l.Units)&&void 0!==s?s:"")},ColumnHeader:"Quantity",isVisible:1,align:"center"},(0,g.A5)("Item_Rate","number","Rate","right"),(0,g.A5)("Taxable_Amount","number","Taxable Amount","right"),{isCustomCell:!0,Cell:e=>{var s;let{row:l}=e;const r=null===(s=B(R.products,null===l||void 0===l?void 0:l.Item_Id))||void 0===s?void 0:s.Gst_P,t=(0,m.gH)(null===l||void 0===l?void 0:l.Amount),a=(0,N.O)(t,r,W);return(0,m.SA)(a.tax_amount)+" ("+a.tax_per+"%)"},ColumnHeader:"Tax",isVisible:1,align:"right"},{ColumnHeader:"Amount",isCustomCell:!0,Cell:e=>{var s,l;let{row:r}=e;const t=null===(s=B(R.products,null===r||void 0===r?void 0:r.Item_Id))||void 0===s?void 0:s.Gst_P,a=null!==(l=r.Amount)&&void 0!==l?l:0,d=(0,N.O)(a,t,W).tax_amount;return(0,m.SA)((0,m.Qr)(k.GST_Inclusive,1)?a:(0,m.Q5)(a,d))},isVisible:1,align:"right"},{isCustomCell:!0,Cell:e=>{let{row:s}=e;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(o.c,{onClick:()=>{z(s),$(!0)},size:"small",children:(0,h.jsx)(I.c,{})}),(0,h.jsx)(o.c,{size:"small",onClick:()=>{(0,m.Q$)(null===s||void 0===s?void 0:s.Pre_Id)?H((e=>e.filter((e=>!(0,m.Qr)(null===e||void 0===e?void 0:e.Pre_Id,null===s||void 0===s?void 0:s.Pre_Id))))):H((e=>e.filter((e=>!(0,m.Qr)(e.Item_Id,s.Item_Id)))))},color:"error",children:(0,h.jsx)(b.c,{})})]})},ColumnHeader:"Action",isVisible:1}],EnableSerialNumber:!0,CellSize:"small",disablePagination:!0}),F.length>0&&(0,h.jsx)("div",{className:"d-flex justify-content-end py-2",children:(0,h.jsx)("table",{className:"table",children:(0,h.jsxs)("tbody",{children:[(0,h.jsxs)("tr",{children:[(0,h.jsxs)("td",{className:"border p-2",rowSpan:(0,m.Qr)(k.IS_IGST,1)?4:5,children:["Total in words: ",(0,m.m4)(parseInt(Z))]}),(0,h.jsx)("td",{className:"border p-2",children:"Total Taxable Amount"}),(0,h.jsx)("td",{className:"border p-2",children:(0,m.SA)(ee.TotalValue)})]}),(0,m.Qr)(k.IS_IGST,1)?(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{className:"border p-2",children:"IGST"}),(0,h.jsx)("td",{className:"border p-2",children:(0,m.SA)(ee.TotalTax)})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{className:"border p-2",children:"CGST"}),(0,h.jsx)("td",{className:"border p-2",children:(0,m.SA)(ee.TotalTax/2)})]}),(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{className:"border p-2",children:"SGST"}),(0,h.jsx)("td",{className:"border p-2",children:(0,m.SA)(ee.TotalTax/2)})]})]}),(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{className:"border p-2",children:"Round Off"}),(0,h.jsx)("td",{className:"border p-2",children:(0,m.kR)(Math.round(Z)-Z)})]}),(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{className:"border p-2",children:"Total"}),(0,h.jsx)("td",{className:"border p-2",children:(0,m.SA)(Math.round(Z))})]})]})})}),(0,h.jsx)("p",{className:"fa-15 mt-3 m-0",children:"Narration"}),(0,h.jsx)("textarea",{className:"cus-inpt ",value:k.Narration,onChange:e=>D((s=>(0,r.c)((0,r.c)({},s),{},{Narration:e.target.value})))}),(0,h.jsx)("div",{className:"d-flex justify-content-end",children:(0,h.jsx)(d.c,{onClick:()=>{if((null===F||void 0===F?void 0:F.length)>0&&null!==k&&void 0!==k&&k.Retailer_Id)v(),(0,S.q)({address:"sales/saleOrder",method:(0,m.Q$)(null===k||void 0===k?void 0:k.So_Id)?"PUT":"POST",bodyData:(0,r.c)((0,r.c)({},k),{},{Product_Array:F.filter((e=>(0,m.QT)(null===e||void 0===e?void 0:e.Bill_Qty,0)))})}).then((e=>{e.success?(u.m4.success(null===e||void 0===e?void 0:e.message),D(y),H([])):u.m4.error(null===e||void 0===e?void 0:e.message)})).catch((e=>console.error(e))).finally((()=>f()));else{if(F.length<=0)return u.m4.error("Enter any one product quantity");if(null===k||void 0===k||!k.Retailer_Id)return u.m4.error("Select Retailer")}},sx:{ml:1},variant:"outlined",color:"success",startIcon:(0,h.jsx)(T.c,{}),disabled:0===(null===F||void 0===F?void 0:F.length)||!(null!==k&&void 0!==k&&k.Retailer_Id),children:"Save"})})]})})]})]})}},80156:(e,s,l)=>{l.d(s,{c:()=>a});var r=l(27664),t=l(82496);const a=(0,r.c)((0,t.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear")},36992:(e,s,l)=>{l.d(s,{c:()=>a});var r=l(27664),t=l(82496);const a=(0,r.c)((0,t.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save")}}]);
//# sourceMappingURL=1380.9868ce81.chunk.js.map