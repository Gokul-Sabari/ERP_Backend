"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[7472],{1336:(e,t,a)=>{a.d(t,{c:()=>s});var l=a(69060),o=a(1908),n=a(39308),r=a(13724),i=a(82496);const s=e=>{let{loadingOn:t,loadingOff:a,Fromdate:s,Todate:d,module:c="Sales",api:u="salesInvoice"}=e;const[m,v]=(0,l.useState)([]),[h,x]=(0,l.useState)({comparisonDialog:!1,excluedeSyced:1});return(0,l.useEffect)((()=>{(0,o.q)({address:`\n                analytics/dataComparison/${u}/itemWise?\n                Fromdate=${s}&\n                Todate=${d}&\n                excluedeSyced=${h.excluedeSyced}`,loadingOn:t,loadingOff:a}).then((e=>{if(e.success){const t=(0,n.dq)(null===e||void 0===e?void 0:e.data);v(t)}else v([])})).catch((e=>console.error(e)))}),[s,d,h.excluedeSyced]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(r.cp,{title:c+" unsynced list",headerFontSizePx:12,bodyFontSizePx:12,EnableSerialNumber:!0,ExcelPrintOption:!0,ButtonArea:(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("select",{className:"cus-inpt p-2 w-auto",value:h.excluedeSyced,onChange:e=>x((t=>({...t,excluedeSyced:e.target.value}))),children:[(0,i.jsx)("option",{value:"0",children:"Show Synced"}),(0,i.jsx)("option",{value:"1",children:"Exclude Synced"})]})}),dataArray:m,columns:[(0,r.A5)("transactionDate","date","Date"),(0,r.A5)("invoiceNo","string","Voucher Number"),(0,r.A5)("VoucherTypeGet","string","Voucher"),(0,r.A5)("LedgerName","string","Ledger"),(0,r.A5)("ItemName","string","Item"),(0,r.A5)("erpQty","number","E-Qty"),(0,r.A5)("tallyQty","number","T-Qty"),(0,r.A5)("erpRate","number","E-Rate"),(0,r.A5)("tallyRate","number","T-Rate"),(0,r.A5)("erpAmount","number","E-Amount"),(0,r.A5)("tallyAmount","number","T-Amount"),(0,r.A5)("Status","string","Reason")]})})}},7472:(e,t,a)=>{a.r(t),a.d(t,{default:()=>T});var l=a(18256),o=a(29720),n=a(61584),r=a(5548),i=a(12572),s=a(15786),d=a(69060),c=a(39308),u=a(57704),m=a(1908),v=a(13724),h=a(60348),x=a(82656),p=a(26773),f=a(4488),y=a(90048),g=a(71412),b=a(14499),j=a(82496);const S=e=>{let{loadingOn:t,loadingOff:a,Fromdate:l,Todate:o}=e;const[n,i]=(0,d.useState)([]),[s,u]=(0,d.useState)([]),[S,_]=(0,d.useState)({erpStatus:"",tallyStatus:"",comparisonDialog:!1,erpRow:{},tallyRow:{},reload:!1});(0,d.useEffect)((()=>{(0,m.q)({address:`analytics/dataComparison/salesInvoice/alterBased?Fromdate=${l}&Todate=${o}`,loadingOn:t,loadingOff:a}).then((e=>{if(e.success){var t,a;const l=(0,c.dq)(null===e||void 0===e||null===(t=e.others)||void 0===t?void 0:t.ERPDifference),o=(0,c.dq)(null===e||void 0===e||null===(a=e.others)||void 0===a?void 0:a.TallyDifference);i(l.map((e=>{const t=o.find((t=>(0,c.Qr)(null===t||void 0===t?void 0:t.tally_id,null===e||void 0===e?void 0:e.Tally_Id)));return{...e,RowStatus:t?"Modified":"ONLY IN ERP",statusCode:t?3:1}}))),u(o.map((e=>{const t=l.find((t=>(0,c.Qr)(null===t||void 0===t?void 0:t.Tally_Id,null===e||void 0===e?void 0:e.tally_id)));return{...e,RowStatus:t?"Modified":"ONLY IN Tally",statusCode:t?3:2}})))}else i([]),u([])})).catch((e=>console.error(e)))}),[l,o]);const C=()=>{_((e=>({...e,comparisonDialog:!1,erpRow:{},tallyRow:{}})))},T=(0,d.useMemo)((()=>function(e,t,a){const l=[];for(const[r,[i,s]]of Object.entries(a)){var o,n;const a=null!==(o=e[i])&&void 0!==o?o:"",d=null!==(n=t[s])&&void 0!==n?n:"",c=String(a)===String(d)?"Match":"Different";l.push({label:r,tallyValue:String(a),erpValue:String(d),status:c})}return l}(S.tallyRow,S.erpRow,h.w)),[S.erpRow,S.tallyRow,h.w]);return console.log(n,s),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"row p-2",children:[(0,j.jsx)("div",{className:"col-lg-6 p-2",children:(0,j.jsx)(v.cp,{title:"ERP Miss-Matched",headerFontSizePx:12,bodyFontSizePx:12,EnableSerialNumber:!0,ButtonArea:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("select",{className:"cus-inpt p-2 w-auto",value:S.erpStatus,onChange:e=>_((t=>({...t,erpStatus:e.target.value}))),children:[(0,j.jsx)("option",{value:"",children:"All Type"}),(0,j.jsx)("option",{value:"1",children:"ERP only"}),(0,j.jsx)("option",{value:"3",children:"Modified"}),(0,j.jsx)("option",{value:"4",children:"Child"})]}),(0,j.jsx)("label",{className:"me-1",children:"Error Type:"})]}),dataArray:((0,c.Q$)(S.erpStatus)?n.filter((e=>(0,c.Qr)(e.statusCode,S.erpStatus))):n).sort(((e,t)=>String((null===e||void 0===e?void 0:e.Do_Inv_No)||"").localeCompare(String((null===t||void 0===t?void 0:t.Do_Inv_No)||"")))),columns:[(0,v.A5)("Do_Inv_No","string","Voucher Number"),(0,v.A5)("Do_Date","date","Date"),(0,v.A5)("Total_Invoice_value","number","Invoice Value"),(0,v.A5)("RowStatus","string","Reason"),{isVisible:1,ColumnHeader:"Preview Invoice",isCustomCell:!0,Cell:e=>{let{row:t}=e;const a=s.find((e=>(0,c.Qr)(null===e||void 0===e?void 0:e.tally_id,null===t||void 0===t?void 0:t.Tally_Id)));return(0,j.jsx)(r.c,{size:"small",onClick:()=>_((e=>({...e,comparisonDialog:!0,erpRow:t,tallyRow:a||{}}))),children:(0,j.jsx)(g.c,{})})}}]})}),(0,j.jsx)("div",{className:"col-lg-6 p-2",children:(0,j.jsx)(v.cp,{title:"Tally Miss-Matched",headerFontSizePx:12,bodyFontSizePx:12,EnableSerialNumber:!0,ButtonArea:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("select",{className:"cus-inpt p-2 w-auto",value:S.tallyStatus,onChange:e=>_((t=>({...t,tallyStatus:e.target.value}))),children:[(0,j.jsx)("option",{value:"",children:"All Type"}),(0,j.jsx)("option",{value:"2",children:"Tally only"}),(0,j.jsx)("option",{value:"3",children:"Modified"}),(0,j.jsx)("option",{value:"4",children:"Child"})]}),(0,j.jsx)("label",{className:"me-1",children:"Error Type:"})]}),dataArray:((0,c.Q$)(S.tallyStatus)?s.filter((e=>(0,c.Qr)(e.statusCode,S.tallyStatus))):s).sort(((e,t)=>String((null===e||void 0===e?void 0:e.invoice_no)||"").localeCompare(String((null===t||void 0===t?void 0:t.invoice_no)||"")))),columns:[(0,v.A5)("invoice_no","string","Voucher Number"),(0,v.A5)("invoice_date","date","Date"),(0,v.A5)("total_invoice_value","number","Invoice Value"),(0,v.A5)("RowStatus","string","Reason"),{isVisible:1,ColumnHeader:"Preview Invoice",isCustomCell:!0,Cell:e=>{let{row:t}=e;const a=n.find((e=>(0,c.Qr)(null===e||void 0===e?void 0:e.Tally_Id,null===t||void 0===t?void 0:t.tally_id)));return(0,j.jsx)(r.c,{size:"small",onClick:()=>_((e=>({...e,comparisonDialog:!0,tallyRow:t,erpRow:a}))),children:(0,j.jsx)(g.c,{})})}}]})})]}),(0,j.jsxs)(x.c,{open:S.comparisonDialog,onClose:C,fullWidth:!0,maxWidth:"md",children:[(0,j.jsxs)(p.c,{className:"d-flex justify-content-between align-items-center",children:[(0,j.jsx)("span",{children:"Invoice Difference"}),(0,j.jsx)(r.c,{size:"small",onClick:C,children:(0,j.jsx)(b.c,{color:"error"})})]}),(0,j.jsx)(f.c,{children:(0,j.jsxs)("div",{className:"table-responsive ",children:[(0,j.jsx)("h2",{className:"text-xl font-bold mb-4",children:"ERP vs Tally Comparison"}),(0,j.jsxs)("table",{className:"table table-bordered border-gray-300",children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{className:"bg-gray-100 text-left",children:[(0,j.jsx)("th",{children:"Field"}),(0,j.jsx)("th",{children:"Tally DB"}),(0,j.jsx)("th",{children:"ERP DB"}),(0,j.jsx)("th",{children:"Status"})]})}),(0,j.jsx)("tbody",{children:T.map(((e,t)=>{let{label:a,tallyValue:l,erpValue:o,status:n}=e;return(0,j.jsxs)("tr",{className:"Different"===n?"bg-red-100":"bg-white",children:[(0,j.jsx)("td",{className:" font-medium",children:a}),(0,j.jsx)("td",{children:l}),(0,j.jsx)("td",{children:o}),(0,j.jsx)("td",{className:"p-2 border font-semibold "+("Different"===n?"text-red-600":"text-green-600"),children:n})]},t)}))})]})]})}),(0,j.jsx)(y.c,{})]})]})},_=e=>{let{loadingOn:t,loadingOff:a,Fromdate:l,Todate:o}=e;const[n,r]=(0,d.useState)([]),[i,s]=(0,d.useState)({comparisonDialog:!1,excluedeSyced:1});return(0,d.useEffect)((()=>{(0,m.q)({address:`\n                analytics/dataComparison/salesInvoice/invoiceBased?\n                Fromdate=${l}&\n                Todate=${o}&\n                excluedeSyced=${i.excluedeSyced}`,loadingOn:t,loadingOff:a}).then((e=>{if(e.success){const t=(0,c.dq)(null===e||void 0===e?void 0:e.data);r(t)}else r([])})).catch((e=>console.error(e)))}),[l,o,i.excluedeSyced]),(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(v.cp,{title:"Sales unsynced list",headerFontSizePx:12,bodyFontSizePx:12,EnableSerialNumber:!0,ButtonArea:(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("select",{className:"cus-inpt p-2 w-auto",value:i.excluedeSyced,onChange:e=>s((t=>({...t,excluedeSyced:e.target.value}))),children:[(0,j.jsx)("option",{value:"0",children:"Show Synced"}),(0,j.jsx)("option",{value:"1",children:"Exclude Synced"})]})}),dataArray:n,columns:[(0,v.A5)("Do_Date","date","Date"),(0,v.A5)("Do_Inv_No","string","Voucher Number"),(0,v.A5)("Retailer_Name","string","Ledger"),(0,v.A5)("Total_Invoice_value","number","Invoice Value"),(0,v.A5)("erpChildCount","number","ERP-Products"),(0,v.A5)("erpChildQuantity","number","ERP Bill Quantity"),(0,v.A5)("tallyChildCount","number","Tally-Products"),(0,v.A5)("tallyChildQuantity","number","Tally Bill Quantity"),(0,v.A5)("RowStatus","string","Reason")]})})};var C=a(1336);const T=e=>{let{loadingOn:t,loadingOff:a}=e;const[m,v]=(0,d.useState)(1),[h,x]=(0,d.useState)({Fromdate:(0,c.SO)(10),Todate:(0,c.Q7)(),FilterFromDate:(0,c.SO)(10),FilterTodate:(0,c.Q7)()}),p=[{name:"Item based",component:(0,j.jsx)(C.c,{loadingOn:t,loadingOff:a,Fromdate:h.Fromdate,Todate:h.Todate})},{name:"InvoiceId based",component:(0,j.jsx)(_,{loadingOn:t,loadingOff:a,Fromdate:h.Fromdate,Todate:h.Todate})},{name:"AlterId based",component:(0,j.jsx)(S,{loadingOn:t,loadingOff:a,Fromdate:h.Fromdate,Todate:h.Todate})}];return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"d-flex align-items-center flex-wrap mb-3",children:[(0,j.jsx)("label",{htmlFor:"from",className:"me-1 fw-bold ",children:"Fromdate: "}),(0,j.jsx)("input",{type:"date",id:"from",className:"cus-inpt p-2 w-auto me-2",value:h.FilterFromDate,onChange:e=>x((t=>({...t,FilterFromDate:e.target.value})))}),(0,j.jsx)("label",{htmlFor:"to",className:"me-1 fw-bold ",children:"Todate: "}),(0,j.jsx)("input",{type:"date",id:"to",className:"cus-inpt p-2 w-auto",value:h.FilterTodate,onChange:e=>x((t=>({...t,FilterTodate:e.target.value})))}),(0,j.jsx)(r.c,{size:"small",onClick:()=>x((e=>({...e,Fromdate:e.FilterFromDate?e.FilterFromDate:e.Fromdate,Todate:e.FilterTodate?e.FilterTodate:e.Todate}))),children:(0,j.jsx)(u.c,{})})]}),(0,j.jsxs)(l.cp,{value:m,children:[(0,j.jsx)(i.c,{sx:{borderBottom:1,borderColor:"divider"},children:(0,j.jsx)(o.c,{indicatorColor:"transparant",onChange:(e,t)=>v(t),variant:"scrollable",scrollButtons:"auto",children:p.map(((e,t)=>(0,j.jsx)(s.c,{sx:m===t+1?{backgroundColor:"#c6d7eb"}:{},label:e.name,value:t+1},t)))})}),p.map(((e,t)=>(0,j.jsx)(n.c,{value:t+1,sx:{p:0,pt:2},children:e.component},t)))]})]})}},60348:(e,t,a)=>{a.d(t,{w:()=>l});const l={"Invoice No":["invoice_no","Do_Inv_No"],"Invoice Date":["invoice_date","Do_Date"],"Tally ID":["tally_id","Tally_Id"],"Alter ID":["alter_id","Alter_Id"],"Sales Ledger / Retailer":["sales_party_ledger_id","Retailer_Id"],"Before Tax":["invoice_value_before_tax","Total_Before_Tax"],"After Tax":["invoice_value_after_tax","Total_Invoice_value"],"Round Off":["round_off","Round_off"],Narration:["narration","Narration"],"Cancel Status":["cancel_status","Cancel_status"],"Created By":["created_by","Created_by"],"Altered By":["altered_by","Altered_by"],"Created On":["created_on_date","Created_on"],"Altered On":["alterd_date","Alterd_on"]}},14499:(e,t,a)=>{a.d(t,{c:()=>n});var l=a(27664),o=a(82496);const n=(0,l.c)((0,o.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},57704:(e,t,a)=>{a.d(t,{c:()=>n});var l=a(27664),o=a(82496);const n=(0,l.c)((0,o.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},71412:(e,t,a)=>{a.d(t,{c:()=>n});var l=a(27664),o=a(82496);const n=(0,l.c)((0,o.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},18256:(e,t,a)=>{a.d(t,{Ed:()=>d,cp:()=>r,oF:()=>i,qM:()=>s});var l=a(69060),o=a(82496);const n=l.createContext(null);function r(e){const{children:t,value:a}=e,r=function(){const[e,t]=l.useState(null);return l.useEffect((()=>{t(`mui-p-${Math.round(1e5*Math.random())}`)}),[]),e}(),i=l.useMemo((()=>({idPrefix:r,value:a})),[r,a]);return(0,o.jsx)(n.Provider,{value:i,children:t})}function i(){return l.useContext(n)}function s(e,t){const{idPrefix:a}=e;return null===a?null:`${e.idPrefix}-P-${t}`}function d(e,t){const{idPrefix:a}=e;return null===a?null:`${e.idPrefix}-T-${t}`}},29720:(e,t,a)=>{a.d(t,{c:()=>c});var l=a(45072),o=a(95656),n=a(69060),r=a(77828),i=a(18256),s=a(82496);const d=["children"],c=n.forwardRef((function(e,t){const{children:a}=e,c=(0,o.c)(e,d),u=(0,i.oF)();if(null===u)throw new TypeError("No TabContext provided");const m=n.Children.map(a,(e=>n.isValidElement(e)?n.cloneElement(e,{"aria-controls":(0,i.qM)(u,e.props.value),id:(0,i.Ed)(u,e.props.value)}):null));return(0,s.jsx)(r.c,(0,l.c)({},c,{ref:t,value:u.value,children:m}))}))},61584:(e,t,a)=>{a.d(t,{c:()=>p});var l=a(45072),o=a(95656),n=a(69060),r=a(79736),i=a(12556),s=a(23456),d=a(21412),c=a(33448);function u(e){return(0,c.cp)("MuiTabPanel",e)}(0,a(10099).c)("MuiTabPanel",["root"]);var m=a(18256),v=a(82496);const h=["children","className","value"],x=(0,i.cp)("div",{name:"MuiTabPanel",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;return{padding:t.spacing(3)}})),p=n.forwardRef((function(e,t){const a=(0,s.c)({props:e,name:"MuiTabPanel"}),{children:n,className:i,value:c}=a,p=(0,o.c)(a,h),f=(0,l.c)({},a),y=(e=>{const{classes:t}=e;return(0,d.c)({root:["root"]},u,t)})(f),g=(0,m.oF)();if(null===g)throw new TypeError("No TabContext provided");const b=(0,m.qM)(g,c),j=(0,m.Ed)(g,c);return(0,v.jsx)(x,(0,l.c)({"aria-labelledby":j,className:(0,r.c)(y.root,i),hidden:c!==g.value,id:b,ref:t,role:"tabpanel",ownerState:f},p,{children:c===g.value&&n}))}))},12572:(e,t,a)=>{a.d(t,{c:()=>d});var l=a(0),o=a(31152),n=a(46712),r=a(83068);const i=(0,a(10099).c)("MuiBox",["root"]),s=(0,n.c)(),d=(0,l.c)({themeId:r.c,defaultTheme:s,defaultClassName:i.root,generateClassName:o.c.generate})}}]);
//# sourceMappingURL=7472.3dc76001.chunk.js.map