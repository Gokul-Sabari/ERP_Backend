"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[3528],{63528:(e,t,s)=>{s.r(t),s.d(t,{default:()=>b});var a=s(69060),l=s(86e3),r=s(3358),n=s(5548),d=s(89e3),c=s(30800),i=s(56480),o=(s(21680),s(1908)),u=s(39308),m=s(82496);function v(e){e.target.value=e.target.value.replace(/[^0-9]/g,"")}const _=e=>{let{screen:t,setScreen:s,underArray:l,row:r,refresh:n}=e;const d=JSON.parse(localStorage.getItem("user")),_={Branch_Id:0,Company_Id:0,Cust_Id:"",Cust_No:"",Customer_name:"",Contact_Person:"",Mobile_no:"",Email_Id:"",Address1:"",Address2:"",Address3:"",Address4:"",Pincode:"",State:"",Country:"India",Gstin:"",Under_Id:"",User_Mgt_Id:"",User_Type_Id:"",Entry_By:null===d||void 0===d?void 0:d.UserId},[p,b]=(0,a.useState)(_),[h,C]=(0,a.useState)([]);(0,a.useEffect)((()=>{(0,o.q)({address:"masters/branch/dropDown?User_Id=".concat(null===d||void 0===d?void 0:d.UserId,"&Company_id=").concat(null===d||void 0===d?void 0:d.Company_id)}).then((e=>{e.success&&C(e.data)})).catch((e=>console.error(e)))}),[]),(0,a.useEffect)((()=>{const{Branch_Id:e,Company_Id:t,Cust_Id:s,Cust_No:a,Customer_name:l,Contact_Person:n,Mobile_no:d,Email_Id:i,Address1:o,Address2:u,Address3:m,Address4:v,Pincode:_,State:p,Country:h,Gstin:C,Under_Id:I,User_Mgt_Id:g,User_Type_Id:x}=r;b((r=>(0,c.c)((0,c.c)({},r),{},{Branch_Id:e,Company_Id:t,Cust_Id:s,Cust_No:a,Customer_name:l,Contact_Person:n,Mobile_no:d,Email_Id:i,Address1:o,Address2:u,Address3:m,Address4:v,Pincode:_,State:p,Country:h,Gstin:C,Under_Id:I,User_Mgt_Id:g,User_Type_Id:x})))}),[r]);const I=()=>{b(_)},g=l.filter((e=>(0,u.Qr)(e.User_Type_Id,5)&&(0,u.Qr)(e.Id,null===p||void 0===p?void 0:p.Cust_Id))).map((e=>({value:e.Cust_Id,label:e.Customer_name}))),x=[{label:"Name",elem:"input",placeholder:"Mr / Ms",event:e=>b((0,c.c)((0,c.c)({},p),{},{Customer_name:e.target.value})),required:!0,value:p.Customer_name},{label:"Mobile",elem:"input",oninput:e=>v(e),placeholder:"Enter Mobile Number",event:e=>b((0,c.c)((0,c.c)({},p),{},{Mobile_no:e.target.value})),required:!0,value:p.Mobile_no,max:10},{label:"Branch",elem:"select",options:[{value:0,label:" - Select - ",disabled:!0,selected:!0},...h.map((e=>({value:Number(e.BranchId),label:e.BranchName})))],class:"selectpicker",data:!0,event:e=>b((0,c.c)((0,c.c)({},p),{},{Branch_Id:parseInt(e.target.value)})),required:!0,value:p.Branch_Id},{label:"User Type",elem:"select",options:[{value:"",label:" - Select - ",disabled:!0,selected:!0},{value:4,label:"CUSTOMER"},{value:5,label:"BROKER"}],event:e=>b((0,c.c)((0,c.c)({},p),{},{User_Type_Id:parseInt(e.target.value)})),required:!0,value:p.User_Type_Id},{label:"Contact Person",elem:"input",placeholder:"",event:e=>b((0,c.c)((0,c.c)({},p),{},{Contact_Person:e.target.value})),required:!0,value:p.Contact_Person},{label:"Email ID",elem:"input",type:"email",placeholder:"emailaddress@mail.com",event:e=>b((0,c.c)((0,c.c)({},p),{},{Email_Id:e.target.value})),required:!1,value:p.Email_Id},{label:"Gstin",elem:"input",placeholder:"",event:e=>b((0,c.c)((0,c.c)({},p),{},{Gstin:e.target.value})),required:!1,value:p.Gstin,max:15},{label:"Under",elem:"select",options:[{value:"",label:" - Select - ",disabled:!0,selected:!0},{value:0,label:" Primary "},...g],class:"selectpicker",data:!0,event:e=>b((0,c.c)((0,c.c)({},p),{},{Under_Id:parseInt(e.target.value)})),required:!0,value:p.Under_Id},{label:"Pincode",elem:"input",placeholder:"654321",oninput:e=>v(e),event:e=>b((0,c.c)((0,c.c)({},p),{},{Pincode:e.target.value})),required:!1,value:p.Pincode,max:6},{label:"State",elem:"input",placeholder:"",event:e=>b((0,c.c)((0,c.c)({},p),{},{State:e.target.value})),required:!1,value:p.State},{label:"Address Line 1",elem:"textarea",event:e=>b((0,c.c)((0,c.c)({},p),{},{Address1:e.target.value})),required:!0,value:p.Address1},{label:"Address Line 2",elem:"textarea",event:e=>b((0,c.c)((0,c.c)({},p),{},{Address2:e.target.value})),value:p.Address2},{label:"Address Line 3",elem:"textarea",event:e=>b((0,c.c)((0,c.c)({},p),{},{Address3:e.target.value})),value:p.Address3},{label:"Address Line 4",elem:"textarea",event:e=>b((0,c.c)((0,c.c)({},p),{},{Address4:e.target.value})),value:p.Address4}],A=()=>{for(const e of x)if(e.required&&""===e.value)return"".concat(e.label," is required.");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p.Email_Id)&&""!==p.Email_Id)return"Invalid email address";if(!/^\d{10}$/.test(p.Mobile_no))return"Invalid phone number";if(!/^\d{15}$/.test(p.Gstin)&&""!==p.Gstin)return"Invalid gstin";return/^\d{6}$/.test(p.Pincode)||""===p.Pincode?"Success":"Invalid Pincode"};return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:"card",children:[(0,m.jsxs)("div",{className:"card-header py-2 d-flex align-items-center justify-content-between",children:[(0,m.jsx)("h5",{className:"mb-0 ",children:"Customer Details"}),(0,m.jsx)("button",{className:"comadbtn mb-0",onClick:()=>{s(!t),I()},children:"Back"})]}),(0,m.jsx)("div",{className:"card-body row",children:x.map(((e,t)=>(0,m.jsxs)("div",{className:"col-lg-4 col-md-6 p-2 px-3",children:[(0,m.jsxs)("label",{children:[e.label,e.required&&(0,m.jsx)("p",{style:{color:"red",display:"inline",fontWeight:"bold",fontSize:"1em"},children:" *"})]}),"input"===e.elem?(0,m.jsx)("input",{type:e.type||"text",className:"cus-inpt b-0",onChange:e.event,onInput:e.oninput,disabled:e.disabled,value:e.value,maxLength:e.max}):"select"===e.elem?(0,m.jsx)("select",{className:"cus-inpt b-0",onChange:e.event,value:e.value,children:e.options.map(((e,t)=>(0,m.jsx)("option",{value:e.value,disabled:e.disabled,defaultValue:e.selected,children:e.label},t)))}):"textarea"===e.elem?(0,m.jsx)("textarea",{className:"cus-inpt b-0",onChange:e.event,rows:4,value:e.value}):null]},t)))}),(0,m.jsxs)("div",{className:"card-footer text-end",children:[(0,m.jsx)("button",{className:"cancelbtn",onClick:()=>s(!t),children:"Cancel"}),(0,m.jsx)("button",{className:"comadbtn mb-0",onClick:r.Cust_Id?()=>{const e=A();"Success"===e?(0,o.q)({address:"userModule/customer",method:"PUT",bodyData:(0,c.c)({},p)}).then((e=>{e.success?(I(),i.m4.success(e.message),n(),s(!t)):i.m4.error(e.message)})).catch((e=>console.error(e))):i.m4.error(e)}:()=>{const e=A();"Success"===e?(0,o.q)({address:"userModule/customer",method:"POST",bodyData:(0,c.c)({},p)}).then((e=>{e.success?(I(),i.m4.success(e.message),n(),s(!t)):i.m4.error(e.message)})).catch((e=>console.error(e))):i.m4.error(e)},children:r.Cust_Id?"Update":"Create"})]})]})})};var p=s(13724);const b=e=>{let{loadingOn:t,loadingOff:s,AddRights:c,EditRights:i}=e;const[u,v]=(0,a.useState)([]),[b,h]=(0,a.useState)(!1),[C,I]=(0,a.useState)({}),[g,x]=(0,a.useState)(!0);(0,a.useEffect)((()=>{(0,o.q)({address:"userModule/customer",loadingOn:t,loadingOff:s}).then((e=>{v(e.data?e.data:[])})).catch((e=>console.error(e)))}),[b]),(0,a.useEffect)((()=>{!0===g&&I({})}),[g]);return(0,m.jsx)(m.Fragment,{children:g?(0,m.jsx)(p.cp,{title:"Customers",dataArray:u,headerFontSizePx:13,bodyFontSizePx:12,columns:[(0,p.A5)("Cust_No","string","CusID"),(0,p.A5)("Customer_name","string","Name"),(0,p.A5)("UserTypeGet","string","Type"),(0,p.A5)("Mobile_no","string","Phone"),(0,p.A5)("Contact_Person","string","Contact Person"),(0,p.A5)("Email_Id","string","Email"),(0,p.A5)("State","string","State"),(0,p.A5)("Gstin","string","Gstin"),{isVisible:1,ColumnHeader:"Action",isCustomCell:!0,Cell:e=>{let{row:t}=e;return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(r.c,{title:"Edit",children:(0,m.jsx)("span",{children:(0,m.jsx)(n.c,{size:"small",onClick:()=>{I(t),x(!g)},children:(0,m.jsx)(l.c,{className:"fa-20"})})})})})}}],ButtonArea:(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(d.c,{variant:"outlined",onClick:()=>x(!g),children:"Add"})})}):(0,m.jsx)(_,{screen:g,setScreen:x,underArray:u,row:C,refresh:()=>{h(!b)}})})}},86e3:(e,t,s)=>{s.d(t,{c:()=>r});var a=s(27664),l=s(82496);const r=(0,a.c)((0,l.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")}}]);
//# sourceMappingURL=3528.8f01cbc1.chunk.js.map