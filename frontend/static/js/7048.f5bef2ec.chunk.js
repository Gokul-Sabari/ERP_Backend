"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[7048,3692,1312],{64568:(e,s,a)=>{a.d(s,{c:()=>t});var r=a(82496);const t=()=>(0,r.jsx)("span",{style:{color:"red",fontWeight:"bold",fontSize:"1em"},children:" *"})},7048:(e,s,a)=>{a.r(s),a.d(s,{default:()=>_});var r=a(30800),t=a(69060),n=a(42136),c=a(43692),l=a(84436),o=a(5548),d=a(82656),i=a(26773),u=a(4488),m=a(90048),p=a(86e3),h=a(45180),v=a(56480),x=(a(21680),a(32635)),j=a(1908),f=a(39308),C=a(2728),y=a(64568),N=a(11192),b=a(82496);const g=e=>(0,b.jsx)("td",{className:"border-0 fa-14 p-2 vctr",children:e.children}),_=e=>{let{loadingOn:s,loadingOff:a}=e;const _=JSON.parse(localStorage.getItem("user")),I={UserId:"",Name:"",UserName:"",UserTypeId:"",Password:"",BranchId:"",Company_id:null===_||void 0===_?void 0:_.Company_id},U={Cost_Center_Id:"",Cost_Center_Name:"",User_Type:"",Is_Converted_To_User:1,User_Id:""},[T,w]=(0,t.useState)(U),[S,P]=(0,t.useState)([]),[k,M]=(0,t.useState)(!1),[E,D]=(0,t.useState)(!1),[B,q]=(0,t.useState)(I),[O,R]=(0,t.useState)(!1),[z,L]=(0,t.useState)(!1),[H,A]=(0,t.useState)(""),[F,V]=(0,t.useState)([]),[W,K]=(0,t.useState)([]),[G,J]=(0,t.useState)([]),[Y,Q]=(0,t.useState)([]),[X,Z]=(0,t.useState)({dialog:!1,deleteDialog:!1,refresh:!1,filterText:"ALL"});(0,t.useEffect)((()=>{(0,j.q)({address:"masters/users?Company_id=".concat(null===_||void 0===_?void 0:_.Company_id)}).then((e=>{var s;e.success&&(null===e||void 0===e||null===(s=e.data)||void 0===s||s.sort(((e,s)=>e.Name.localeCompare(s.Name))),P(e.data))})).catch((e=>console.error(e)))}),[E,null===_||void 0===_?void 0:_.Company_id]),(0,t.useEffect)((()=>{(0,j.q)({address:"masters/userType?Company_id=".concat(null===_||void 0===_?void 0:_.Company_id)}).then((e=>{e.success&&J(e.data)})).catch((e=>console.error(e)))}),[null===_||void 0===_?void 0:_.Company_id]),(0,t.useEffect)((()=>{(0,j.q)({address:"masters/branch/dropDown?Company_id=".concat(null===_||void 0===_?void 0:_.Company_id)}).then((e=>{e.success&&Q(e.data)})).catch((e=>console.error(e)))}),[null===_||void 0===_?void 0:_.Company_id]),(0,t.useEffect)((()=>{if(H){const e=S.filter((e=>Object.values(e).some((e=>String(e).toLowerCase().includes(H.toLowerCase())))));V(e)}}),[H,S]);const $=()=>{q(I),M((e=>!e))},ee=()=>{Z((e=>(0,r.c)((0,r.c)({},e),{},{dialog:!1,deleteDialog:!1}))),q(U)};return(0,t.useEffect)((()=>{(0,j.q)({address:"masters/userTypecostcenter"}).then((e=>{e.success&&K(e.data)})).catch((e=>console.error(e)))}),[null===_||void 0===_?void 0:_.Company_id,E]),(0,b.jsxs)(t.Fragment,{children:[(0,b.jsxs)(c.c,{children:[(0,b.jsxs)("div",{className:"px-3 py-2 fw-bold d-flex align-items-center justify-content-between border-bottom",children:["USERS",(0,b.jsx)("div",{className:"text-end",children:(0,b.jsx)(n.c,{onClick:$,className:"rounded-5 px-3 py-1 fa-13 shadow",children:k?"Back":"Add User"})})]}),(0,b.jsx)(l.c,{children:k?(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(0,j.q)({address:"masters/users",method:B.UserId?"PUT":"POST",bodyData:(0,r.c)((0,r.c)({},B),{},{Password:(0,f.ER)(B.Password)})}).then((e=>{e.success?(D(!E),v.m4.success(e.message),$()):v.m4.error(e.message)}))},children:[(0,b.jsxs)("div",{className:"row p-3",children:[(0,b.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,b.jsx)("label",{children:"Name"}),(0,b.jsx)("input",{className:"cus-inpt",value:B.Name,required:!0,minLength:3,onChange:e=>q((0,r.c)((0,r.c)({},B),{},{Name:e.target.value}))})]}),(0,b.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,b.jsx)("label",{children:"Password"}),(0,b.jsx)("input",{className:"cus-inpt",type:"password",required:!0,minLength:6,value:B.Password,onChange:e=>q((0,r.c)((0,r.c)({},B),{},{Password:e.target.value}))})]}),(0,b.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,b.jsx)("label",{children:"Mobile"}),(0,b.jsx)("input",{className:"cus-inpt",type:"number",required:!0,value:B.UserName,maxLength:10,onChange:e=>q((0,r.c)((0,r.c)({},B),{},{UserName:e.target.value}))})]}),(0,b.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,b.jsx)("label",{children:"Branch"}),(0,b.jsxs)("select",{className:"cus-inpt",value:B.BranchId,required:!0,onChange:e=>q((0,r.c)((0,r.c)({},B),{},{BranchId:e.target.value})),children:[(0,b.jsx)("option",{value:"",children:"select"}),null===Y||void 0===Y?void 0:Y.map(((e,s)=>(0,b.jsx)("option",{value:e.BranchId,children:e.BranchName},s)))]})]}),(0,b.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,b.jsx)("label",{children:"User Type"}),(0,b.jsxs)("select",{className:"cus-inpt",value:B.UserTypeId,required:!0,onChange:e=>q((0,r.c)((0,r.c)({},B),{},{UserTypeId:e.target.value})),children:[(0,b.jsx)("option",{value:"",children:"Select"}),null===G||void 0===G?void 0:G.map(((e,s)=>(0,b.jsx)("option",{value:e.Id,children:e.UserType},s)))]})]})]}),(0,b.jsxs)("div",{className:"pe-3 d-flex justify-content-end",children:[(0,b.jsx)(n.c,{className:"rounded-5 px-4 mx-1 btn-light bg-white",onClick:$,type:"button",children:"cancel"}),(0,b.jsx)(n.c,{className:"rounded-5 px-4 shadow mx-1",type:"submit",children:B.UserId?"Update":"Create"})]})]})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"d-flex justify-content-end",children:(0,b.jsx)("div",{className:" pb-2",children:(0,b.jsx)("input",{value:H,className:"cus-inpt w-auto",placeholder:"Search",onChange:e=>A(e.target.value)})})}),(0,b.jsx)(x.cp,{data:H?F.length>0?F:[]:S,columns:[{name:"Name",selector:e=>e.Name,sortable:!0},{name:"Type",selector:e=>e.UserType,sortable:!0},{name:"Mobile",selector:e=>e.UserName,sortable:!1},{name:"Company",selector:e=>e.Company_Name,sortable:!0},{name:"Company",selector:e=>e.BranchName,sortable:!0},{name:"Cost_Center_User",sortable:!0,selector:e=>""!==(null===e||void 0===e?void 0:e.Cost_Center_Id)&&null!==(null===e||void 0===e?void 0:e.Cost_Center_Id)?(0,b.jsx)("span",{children:(0,b.jsx)(N.c,{style:{cursor:"pointer"}})}):(0,b.jsx)(C.c,{onClick:()=>{w({Cost_Center_Id:null,Name:null===e||void 0===e?void 0:e.Name,UserTypeId:null===e||void 0===e?void 0:e.UserTypeId,UserType:null===e||void 0===e?void 0:e.UserType,UserId:null===e||void 0===e?void 0:e.UserId,Is_Converted_To_User:1}),Z((e=>(0,r.c)((0,r.c)({},e),{},{dialog:!0})))},style:{cursor:"pointer"}})},{name:"CostCenterType",selector:e=>""!==(null===e||void 0===e?void 0:e.costcentertype)&&null!==(null===e||void 0===e?void 0:e.costcentertype)?(0,b.jsx)("span",{children:null===e||void 0===e?void 0:e.costcentertype}):(0,b.jsx)("span",{className:"cus-badge text-black ",children:"-"}),sortable:!0},{name:"Action",cell:e=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.c,{onClick:()=>{(e=>{const{UserId:s,Name:a,UserName:t,UserTypeId:n,Password:c,BranchId:l}=e,o=(0,f.YP)(c);q((e=>(0,r.c)((0,r.c)({},e),{},{UserId:s,Name:a,UserName:t,UserTypeId:n,Password:o,BranchId:l}))),M(!0)})(e)},size:"small",children:(0,b.jsx)(p.c,{className:"fa-in"})}),(0,b.jsx)(o.c,{onClick:()=>{const{UserId:s,Name:a,UserName:t,UserTypeId:n,Password:c,BranchId:l}=e;q((e=>(0,r.c)((0,r.c)({},e),{},{UserId:s,Name:a,UserName:t,UserTypeId:n,Password:c,BranchId:l}))),R(!0)},size:"small",children:(0,b.jsx)(h.c,{className:"fa-in del-red"})})]})}],direction:"auto",fixedHeader:!0,fixedHeaderScrollHeight:"63dvh",highlightOnHover:!0,pagination:!0,responsive:!0,striped:!0,subHeaderAlign:"right",subHeaderWrap:!0})]})})]}),(0,b.jsxs)(d.c,{open:O,onClose:()=>R(!1),fullWidth:!0,maxWidth:"sm",children:[(0,b.jsx)(i.c,{id:"alert-dialog-title",children:"Confirmation"}),(0,b.jsx)(u.c,{children:(0,b.jsxs)("b",{className:"text-muted",children:["Do you want to Delete the user ",(0,b.jsx)("span",{className:"blue-text",children:B.Name}),"?"]})}),(0,b.jsxs)(m.c,{children:[(0,b.jsx)(n.c,{className:" btn-light",onClick:()=>{R(!1)},children:"Cancel"}),(0,b.jsx)(n.c,{onClick:()=>{(0,j.q)({address:"masters/users",method:"DELETE",bodyData:{UserId:B.UserId}}).then((e=>{e.success?(D(!E),R((e=>!e)),q(I),v.m4.success(e.message)):v.m4.error(e.message)})).catch((e=>{console.error("Error deleting user:",e),v.m4.error("An error occurred. Please try again later.")}))},children:"Delete"})]})]}),(0,b.jsxs)(d.c,{open:X.dialog,onClose:ee,fullWidth:!0,maxWidth:"sm",children:[(0,b.jsx)(i.c,{children:T.Cost_Center_Id?"Modify Records":"Add Records"}),(0,b.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s&&s(),(0,j.q)({address:"dataEntry/costCenter",method:"POST",bodyData:{Cost_Center_Id:null===T||void 0===T?void 0:T.Cost_Center_Id,Cost_Center_Name:null===T||void 0===T?void 0:T.Name,User_Type:null===T||void 0===T?void 0:T.UserTypeId,User_Id:Number(null===T||void 0===T?void 0:T.UserId),Is_Converted_To_User:null===T||void 0===T?void 0:T.Is_Converted_To_User}}).then((e=>{e.success?(v.m4.success(e.message),ee(),D(!E)):v.m4.error(e.message)})).catch((e=>console.error(e))).finally((()=>{a&&a()}))},children:[(0,b.jsx)(u.c,{children:(0,b.jsx)("div",{className:"table-responsive",children:(0,b.jsx)("table",{className:"table m-0",children:(0,b.jsxs)("tbody",{children:[(0,b.jsxs)("tr",{children:[(0,b.jsxs)(g,{children:["Cost Center Name ",(0,b.jsx)(y.c,{})]}),(0,b.jsx)(g,{children:(0,b.jsx)("input",{value:T.Name,onChange:e=>w((s=>(0,r.c)((0,r.c)({},s),{},{Name:e.target.value}))),className:"cus-inpt p-2",required:!0,maxLength:150})})]}),(0,b.jsxs)("tr",{children:[(0,b.jsxs)(g,{children:["User Type ",(0,b.jsx)(y.c,{})]}),(0,b.jsx)(g,{children:(0,b.jsxs)("select",{value:T.UserTypeId||"",onChange:e=>w((s=>(0,r.c)((0,r.c)({},s),{},{UserTypeId:e.target.value}))),className:"cus-inpt p-2",required:!0,"aria-label":"Select User Type",children:[(0,b.jsx)("option",{value:"",children:"Select User Type"}),W.map(((e,s)=>(0,b.jsx)("option",{value:e.UserTypeId,children:e.UserType},s)))]})})]})]})})})}),(0,b.jsxs)(m.c,{className:"d-flex justify-content-between flex-wrap",children:[(0,b.jsx)(n.c,{type:"button",variant:"outlined",onClick:()=>w({Cost_Center_Id:null,Name:"",UserTypeId:""}),children:"Clear"}),(0,b.jsxs)("span",{children:[(0,b.jsx)(n.c,{type:"button",onClick:ee,children:"Cancel"}),(0,b.jsx)(n.c,{type:"submit",variant:"contained",children:"Submit"})]})]})]})]})]})}},2728:(e,s,a)=>{var r=a(22411);s.c=void 0;var t=r(a(90864)),n=a(82496);s.c=(0,t.default)((0,n.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4z"}),"AddBox")},11192:(e,s,a)=>{var r=a(22411);s.c=void 0;var t=r(a(90864)),n=a(82496);s.c=(0,t.default)((0,n.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check")},45180:(e,s,a)=>{a.d(s,{c:()=>n});var r=a(27664),t=a(82496);const n=(0,r.c)((0,t.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},86e3:(e,s,a)=>{a.d(s,{c:()=>n});var r=a(27664),t=a(82496);const n=(0,r.c)((0,t.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},90864:(e,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=a(27492)},84436:(e,s,a)=>{a.d(s,{c:()=>x});var r=a(45072),t=a(95656),n=a(69060),c=a(79736),l=a(21412),o=a(12556),d=a(49836),i=a(10099),u=a(33448);function m(e){return(0,u.cp)("MuiCardContent",e)}(0,i.c)("MuiCardContent",["root"]);var p=a(82496);const h=["className","component"],v=(0,o.cp)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,s)=>s.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),x=n.forwardRef((function(e,s){const a=(0,d.C)({props:e,name:"MuiCardContent"}),{className:n,component:o="div"}=a,i=(0,t.c)(a,h),u=(0,r.c)({},a,{component:o}),x=(e=>{const{classes:s}=e;return(0,l.c)({root:["root"]},m,s)})(u);return(0,p.jsx)(v,(0,r.c)({as:o,className:(0,c.c)(x.root,n),ownerState:u,ref:s},i))}))},43692:(e,s,a)=>{a.d(s,{c:()=>j});var r=a(45072),t=a(95656),n=a(69060),c=a(79736),l=a(21412),o=a(12556),d=a(49836),i=a(85624),u=a(10099),m=a(33448);function p(e){return(0,m.cp)("MuiCard",e)}(0,u.c)("MuiCard",["root"]);var h=a(82496);const v=["className","raised"],x=(0,o.cp)(i.c,{name:"MuiCard",slot:"Root",overridesResolver:(e,s)=>s.root})((()=>({overflow:"hidden"}))),j=n.forwardRef((function(e,s){const a=(0,d.C)({props:e,name:"MuiCard"}),{className:n,raised:o=!1}=a,i=(0,t.c)(a,v),u=(0,r.c)({},a,{raised:o}),m=(e=>{const{classes:s}=e;return(0,l.c)({root:["root"]},p,s)})(u);return(0,h.jsx)(x,(0,r.c)({className:(0,c.c)(m.root,n),elevation:o?8:void 0,ref:s,ownerState:u},i))}))},90280:(e,s,a)=>{a.d(s,{c:()=>r});const r=a(91200).c},72144:(e,s,a)=>{a.d(s,{c:()=>r});const r=a(46576).c},27492:(e,s,a)=>{a.r(s),a.d(s,{capitalize:()=>t.c,createChainedFunction:()=>n.c,createSvgIcon:()=>c.c,debounce:()=>l.c,deprecatedPropType:()=>o,isMuiElement:()=>d.c,ownerDocument:()=>i.c,ownerWindow:()=>u.c,requirePropFactory:()=>m,setRef:()=>p,unstable_ClassNameGenerator:()=>N,unstable_useEnhancedEffect:()=>h.c,unstable_useId:()=>v.c,unsupportedProp:()=>x,useControlled:()=>j.c,useEventCallback:()=>f.c,useForkRef:()=>C.c,useIsFocusVisible:()=>y.c});var r=a(31152),t=a(55832),n=a(90280),c=a(27664),l=a(72144);const o=function(e,s){return()=>null};var d=a(28276),i=a(93976),u=a(31328);a(45072);const m=function(e,s){return()=>null};const p=a(30472).c;var h=a(87188),v=a(18144);const x=function(e,s,a,r,t){return null};var j=a(61124),f=a(17908),C=a(56268),y=a(24724);const N={configure:e=>{r.c.configure(e)}}},28276:(e,s,a)=>{a.d(s,{c:()=>t});var r=a(69060);const t=function(e,s){var a,t;return r.isValidElement(e)&&-1!==s.indexOf(null!=(a=e.type.muiName)?a:null==(t=e.type)||null==(t=t._payload)||null==(t=t.value)?void 0:t.muiName)}},93976:(e,s,a)=>{a.d(s,{c:()=>r});const r=a(6848).c},31328:(e,s,a)=>{a.d(s,{c:()=>r});const r=a(7608).c},87188:(e,s,a)=>{a.d(s,{c:()=>r});const r=a(92576).c},46576:(e,s,a)=>{function r(e){let s,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];clearTimeout(s),s=setTimeout((()=>{e.apply(this,t)}),a)}return r.clear=()=>{clearTimeout(s)},r}a.d(s,{c:()=>r})},16344:(e,s,a)=>{a.d(s,{cV:()=>c,cp:()=>o});var r=a(69060),t=a(82496);const n=["as","disabled"];function c(e){let{tagName:s,disabled:a,href:r,target:t,rel:n,role:c,onClick:l,tabIndex:o=0,type:d}=e;s||(s=null!=r||null!=t||null!=n?"a":"button");const i={tagName:s};if("button"===s)return[{type:d||"button",disabled:a},i];const u=e=>{(a||"a"===s&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),a?e.stopPropagation():null==l||l(e)};return"a"===s&&(r||(r="#"),a&&(r=void 0)),[{role:null!=c?c:"button",disabled:void 0,tabIndex:a?void 0:o,href:r,target:"a"===s?t:void 0,"aria-disabled":a||void 0,rel:"a"===s?n:void 0,onClick:u,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),u(e))}},i]}const l=r.forwardRef(((e,s)=>{let{as:a,disabled:r}=e,l=function(e,s){if(null==e)return{};var a,r,t={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],s.indexOf(a)>=0||(t[a]=e[a]);return t}(e,n);const[o,{tagName:d}]=c(Object.assign({tagName:a,disabled:r},l));return(0,t.jsx)(d,Object.assign({},l,o,{ref:s}))}));l.displayName="Button";const o=l},42136:(e,s,a)=>{a.d(s,{c:()=>p});var r=a(30800),t=a(31024),n=a(264),c=a.n(n),l=a(69060),o=a(16344),d=a(83576),i=a(82496);const u=["as","bsPrefix","variant","size","active","disabled","className"],m=l.forwardRef(((e,s)=>{let{as:a,bsPrefix:n,variant:l="primary",size:m,active:p=!1,disabled:h=!1,className:v}=e,x=(0,t.c)(e,u);const j=(0,d.Ky)(n,"btn"),[f,{tagName:C}]=(0,o.cV)((0,r.c)({tagName:a,disabled:h},x)),y=C;return(0,i.jsx)(y,(0,r.c)((0,r.c)((0,r.c)({},f),x),{},{ref:s,disabled:h,className:c()(v,j,p&&"active",l&&"".concat(j,"-").concat(l),m&&"".concat(j,"-").concat(m),x.href&&h&&"disabled")}))}));m.displayName="Button";const p=m}}]);
//# sourceMappingURL=7048.f5bef2ec.chunk.js.map