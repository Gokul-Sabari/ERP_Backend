"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[6960],{26960:(e,l,a)=>{a.r(l),a.d(l,{default:()=>k});var t=a(30800),r=a(69060),s=a(1908),o=a(43692),d=a(78092),n=a(89e3),i=a(84436),c=a(5548),u=a(82656),v=a(26773),m=a(4488),_=a(40656),h=a(62344),p=a(45180),x=a(96064),I=a(39308),N=a(13724),j=a(64568),g=a(56480),y=a(51560),b=a(128);const f=localStorage.getItem("user"),C=(0,I.sT)(f)?JSON.parse(f):{},S={PIN_Id:"",Po_Inv_No:"",Branch_Id:"",Voucher_Type:0,Ref_Po_Inv_No:"",Po_Inv_Date:(0,I.Q7)(),Po_Entry_Date:(0,I.Q7)(),Retailer_Id:"",Retailer_Name:"",GST_Inclusive:2,IS_IGST:0,Narration:"",isConverted:"",CSGT_Total:0,SGST_Total:0,IGST_Total:0,Round_off:0,Total_Before_Tax:0,Total_Tax:0,Total_Invoice_value:0,Cancel_status:0,Stock_Item_Ledger_Name:"",Created_by:C.UserId,Altered_by:C.UserId,Created_on:"",Alterd_on:"",Trans_Type:"",Alter_Id:"",Approved_By:"",Approve_Status:""},T={Trip_Id:"",Trip_Item_SNo:"",POI_St_Id:"",DeliveryId:"",OrderId:"",PIN_Id:"",Po_Inv_Date:"",S_No:"",Location_Id:"",Item_Id:"",Item_Name:"",Bill_Qty:0,Act_Qty:0,Item_Rate:0,Bill_Alt_Qty:0,Free_Qty:0,Unit_Id:"",Unit_Name:"",Batch_No:"",Taxable_Rate:0,Amount:0,Total_Qty:0,Taxble:0,HSN_Code:"",Taxable_Amount:0,Tax_Rate:0,Cgst:0,Cgst_Amo:0,Sgst:0,Sgst_Amo:0,Igst:0,Igst_Amo:0,Final_Amo:0,Created_on:""},A={Id:"",PIN_Id:"",Involved_Emp_Id:"",Involved_Emp_Name:"select",Cost_Center_Type_Id:""};var Q=a(664),R=a(82496);const P=function(){var e;let l=arguments.length>1?arguments[1]:void 0;return null!==(e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find((e=>(0,I.Qr)(e.Product_Id,l))))&&void 0!==e?e:{}},w={addProductDialog:!1,selectArrivalDialog:!1},k=e=>{var l,a,f,C;let{loadingOn:k,loadingOff:E}=e;const D=(0,y.IT)(),O=(0,y.i6)(),B=D.state,[G,q]=(0,r.useState)(S),[L,V]=(0,r.useState)([]),[U,F]=(0,r.useState)([]),[H,M]=(0,r.useState)([]),[W,$]=(0,r.useState)(null),Y="border fa-14 vctr",X="cus-inpt p-2",z=(0,I.Qr)(null===G||void 0===G?void 0:G.GST_Inclusive,1),J=(0,I.Qr)(null===G||void 0===G?void 0:G.GST_Inclusive,2),K=(0,I.Qr)(null===G||void 0===G?void 0:G.IS_IGST,1),[Z,ee]=(0,r.useState)(w),[le,ae]=(0,r.useState)(!1),[te,re]=(0,r.useState)({retailers:[],branch:[],uom:[],products:[],voucherType:[],stockItemLedgerName:[],godown:[],staff:[],staffType:[],brand:[]}),se=(0,r.useMemo)((()=>L.reduce(((e,l)=>{const a=(0,I.kR)(null===l||void 0===l?void 0:l.Amount);if(J)return(0,I.Q5)(e,a);const t=P(te.products,l.Item_Id),r=K?t.Igst_P:t.Gst_P;return z?(0,I.Q5)(e,(0,b.O)(a,r,"remove").with_tax):(0,I.Q5)(e,(0,b.O)(a,r,"add").with_tax)}),0)),[L,J,te.products,K,z]),oe=(0,r.useMemo)((()=>{if(!L||0===L.length)return{};let e=0,l=0;L.forEach((a=>{const t=(0,I.kR)((null===a||void 0===a?void 0:a.Amount)||0);if(J)return void(e=(0,I.Q5)(e,t));const r=P(te.products,a.Item_Id),s=(0,I.Qr)(K,1)?r.Igst_P:r.Gst_P,o=(0,b.O)(t,s,z?"remove":"add");e=(0,I.Q5)(e,parseFloat(o.without_tax)),l=(0,I.Q5)(l,parseFloat(o.tax_amount))}));const a=(0,I.Q5)(e,l),t=Math.round(a),r=(0,I.kR)(t-a),s=(0,I.Qr)(K,1)?0:(0,I.kR)(l/2),o=(0,I.Qr)(K,1)?0:(0,I.kR)(l/2),d=(0,I.Qr)(K,1)?(0,I.kR)(l):0;return{totalTaxable:(0,I.kR)(e),totalTax:(0,I.kR)(l),cgst:s,sgst:o,igst:d,roundOff:r,invoiceTotal:t}}),[L,te.products,K,J,z]);(0,r.useEffect)((()=>{(async()=>{try{k&&k();const[e,l,a,r,o,d,n,i,c]=await Promise.all([(0,s.q)({address:"masters/retailers/dropDown"}),(0,s.q)({address:"masters/branch/dropDown"}),(0,s.q)({address:"masters/uom"}),(0,s.q)({address:"masters/products"}),(0,s.q)({address:"purchase/voucherType"}),(0,s.q)({address:"purchase/stockItemLedgerName?type=PURCHASE"}),(0,s.q)({address:"dataEntry/godownLocationMaster"}),(0,s.q)({address:"dataEntry/costCenter"}),(0,s.q)({address:"dataEntry/costCenter/category"})]),u=(e.success?e.data:[]).sort(((e,l)=>String(null===e||void 0===e?void 0:e.Retailer_Name).localeCompare(null===l||void 0===l?void 0:l.Retailer_Name))),v=(l.success?l.data:[]).sort(((e,l)=>String(null===e||void 0===e?void 0:e.BranchName).localeCompare(null===l||void 0===l?void 0:l.BranchName))),m=(a.success?a.data:[]).sort(((e,l)=>String(e.Units).localeCompare(l.Units))),_=(r.success?r.data:[]).sort(((e,l)=>String(null===e||void 0===e?void 0:e.Product_Name).localeCompare(null===l||void 0===l?void 0:l.Product_Name))),h=(o.success?o.data:[]).sort(((e,l)=>String(null===e||void 0===e?void 0:e.Voucher_Type).localeCompare(null===l||void 0===l?void 0:l.Voucher_Type))),p=(d.success?d.data:[]).sort(((e,l)=>String(null===e||void 0===e?void 0:e.Stock_Item_Ledger_Name).localeCompare(null===l||void 0===l?void 0:l.Stock_Item_Ledger_Name))),x=(n.success?n.data:[]).sort(((e,l)=>String(null===e||void 0===e?void 0:e.Godown_Name).localeCompare(null===l||void 0===l?void 0:l.Godown_Name))),N=(i.success?i.data:[]).sort(((e,l)=>String(null===e||void 0===e?void 0:e.Cost_Center_Name).localeCompare(null===l||void 0===l?void 0:l.Cost_Center_Name))),j=(c.success?c.data:[]).sort(((e,l)=>String(null===e||void 0===e?void 0:e.Cost_Category).localeCompare(null===l||void 0===l?void 0:l.Cost_Category)));re((e=>(0,t.c)((0,t.c)({},e),{},{retailers:u,branch:v,uom:m,products:_,voucherType:h,stockItemLedgerName:p,godown:x,staff:N,staffType:j,brand:(0,I.Un)(_,"Brand",["Brand_Name"])})))}catch(e){console.error("Error fetching data:",e)}finally{E&&E()}})()}),[]),(0,r.useEffect)((()=>{if((0,I.CY)(B)&&Array.isArray(null===B||void 0===B?void 0:B.orderInfo)&&Array.isArray(null===B||void 0===B?void 0:B.staffInfo)&&(0,I.CY)(null===B||void 0===B?void 0:B.invoiceInfo)){const{invoiceInfo:e,orderInfo:l,staffInfo:a}=B;de(e.Retailer_Id),q(Object.fromEntries(Object.entries(S).map((l=>{var a;let[t,r]=l;return"Po_Inv_Date"===t||"Po_Entry_Date"===t?[t,e[t]?(0,I.Q7)(e[t]):r]:[t,null!==(a=e[t])&&void 0!==a?a:r]})))),V(l.map((e=>Object.fromEntries(Object.entries(T).map((l=>{var a;let[t,r]=l;return"Item_Name"===t?[t,e.Product_Name||r]:[t,null!==(a=e[t])&&void 0!==a?a:r]})))))),F(a.map((e=>Object.fromEntries(Object.entries(A).map((l=>{var a;let[t,r]=l;return[t,null!==(a=e[t])&&void 0!==a?a:r]})))))),ae(e.isFromPurchaseOrder)}}),[B]);const de=e=>{(0,I.Q$)(e)&&(k&&k(),M([]),(0,s.q)({address:"dataEntry/purchaseOrderEntry/delivery/partyBased?VendorId=".concat(e)}).then((e=>{e.success&&M(e.data)})).catch((e=>console.error(e))).finally((()=>{E&&E()})))},ne=(e,l)=>{V((a=>{const t=a.filter((l=>!((0,I.Qr)(null===l||void 0===l?void 0:l.OrderId,null===e||void 0===e?void 0:e.OrderId)&&(0,I.Qr)(null===l||void 0===l?void 0:l.Item_Id,null===e||void 0===e?void 0:e.ItemId)&&(0,I.Qr)(null===l||void 0===l?void 0:l.DeliveryId,null===e||void 0===e?void 0:e.Trip_Item_SNo))));if(l)return t;{const l=H.filter((l=>(0,I.Qr)(l.OrderId,e.OrderId)&&(0,I.Qr)(null===e||void 0===e?void 0:e.ItemId,null===l||void 0===l?void 0:l.ItemId)&&(0,I.Qr)(null===e||void 0===e?void 0:e.Trip_Item_SNo,null===l||void 0===l?void 0:l.Trip_Item_SNo))),a=[...new Map(l.flatMap((e=>e.EmployeesInvolved)).filter((e=>!U.some((l=>(0,I.Qr)(l.Involved_Emp_Id,e.EmployeeId))))).map((e=>[e.EmployeeId,e]))).values()];a.length>0&&F((e=>[...e,...a.map((e=>Object.fromEntries(Object.entries(A).map((l=>{let[a,t]=l;switch(a){case"Involved_Emp_Id":return[a,null===e||void 0===e?void 0:e.EmployeeId];case"Involved_Emp_Name":return[a,null===e||void 0===e?void 0:e.EmployeeName];case"Cost_Center_Type_Id":return[a,null===e||void 0===e?void 0:e.CostType];default:return[a,t]}})))))]));const r=l.map((e=>{var l,a;const t=P(te.products,e.ItemId),r=K?t.Igst_P:t.Gst_P,s=r>0,o=null!==(l=parseFloat(e.Weight))&&void 0!==l?l:0,d=null!==(a=(0,I.kR)(e.BilledRate))&&void 0!==a?a:0,n=(0,I.eX)(o,d),i=J?"zerotax":z?"remove":"add",c=(0,b.O)(d,r,i),u=(0,b.O)(n,r,i),v=K?0:u.cgst_per,m=K?u.igst_per:0,_=K?0:u.cgst_amount,h=K?u.igst_amount:0;return Object.fromEntries(Object.entries(T).map((l=>{var a;let[i,p]=l;switch(i){case"DeliveryId":return[i,Number(null===e||void 0===e?void 0:e.Trip_Item_SNo)];case"OrderId":return[i,Number(null===e||void 0===e?void 0:e.OrderId)];case"Po_Inv_Date":return[i,null===G||void 0===G?void 0:G.Po_Inv_Date];case"Location_Id":return[i,null!==(a=Number(null===e||void 0===e?void 0:e.LocationId))&&void 0!==a?a:""];case"Item_Id":return[i,Number(null===e||void 0===e?void 0:e.ItemId)];case"Item_Name":return[i,Number(null===t||void 0===t?void 0:t.Product_Name)];case"Bill_Qty":return[i,null===e||void 0===e?void 0:e.pendingInvoiceWeight];case"Act_Qty":case"Total_Qty":return[i,o];case"Item_Rate":return[i,d];case"Bill_Alt_Qty":return[i,Number(null===e||void 0===e?void 0:e.Quantity)];case"Batch_No":return[i,null===e||void 0===e?void 0:e.BatchLocation];case"Amount":return[i,n];case"Taxable_Rate":return[i,c.base_amount];case"Taxble":return[i,s?1:0];case"HSN_Code":return[i,t.HSN_Code];case"Taxable_Amount":return[i,u.base_amount];case"Tax_Rate":return[i,r];case"Cgst":case"Sgst":return[i,null!==v&&void 0!==v?v:0];case"Cgst_Amo":case"Sgst_Amo":return[i,J?0:_];case"Igst":return[i,null!==m&&void 0!==m?m:0];case"Igst_Amo":return[i,J?0:h];case"Final_Amo":return[i,u.with_tax];default:return[i,p]}})))}));return t.concat(r)}}))},ie=()=>{ee(w)},ce=(e,l,a)=>{V((r=>r.map((r=>{if(r.DeliveryId===e.DeliveryId)switch(l){case"Bill_Qty":{const e=parseFloat(a||0),l=(0,t.c)((0,t.c)({},r),{},{Bill_Qty:e});return r.Item_Rate?l.Amount=(0,I.eX)(r.Item_Rate,e):r.Amount&&(l.Item_Rate=(0,I.yy)(r.Amount,e)),l}case"Item_Rate":{const e=parseFloat(a||0),l=(0,t.c)((0,t.c)({},r),{},{Item_Rate:e});return r.Bill_Qty&&(l.Amount=(0,I.eX)(e,r.Bill_Qty)),l}case"Amount":{const e=parseFloat(a||0),l=(0,t.c)((0,t.c)({},r),{},{Amount:e});return r.Bill_Qty&&(l.Item_Rate=(0,I.yy)(e,r.Bill_Qty)),l}default:return(0,t.c)((0,t.c)({},r),{},{[l]:a})}return r}))))};return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(Q.c,{orderProducts:L,setOrderProducts:V,open:Z.addProductDialog,onClose:()=>{ee((e=>(0,t.c)((0,t.c)({},e),{},{addProductDialog:!1}))),$(null)},products:te.products,brands:te.brand,uom:te.uom,godowns:te.godown,GST_Inclusive:z,IS_IGST:K,editValues:W,initialValue:T,stockInGodown:[]}),(0,R.jsx)("form",{onSubmit:e=>{e.preventDefault(),k&&k(),(0,s.q)({address:"purchase/purchaseOrder",method:(0,I.Q$)(null===G||void 0===G?void 0:G.PIN_Id)?"PUT":"POST",bodyData:(0,t.c)({Product_Array:L,StaffArray:U},G)}).then((e=>{e.success?(g.m4.success((null===e||void 0===e?void 0:e.message)||"Saved"),V([]),q(S),M([]),F([]),(Array.isArray(null===B||void 0===B?void 0:B.orderInfo)||(0,I.CY)(null===B||void 0===B?void 0:B.invoiceInfo))&&window.history.length>1?O(-1):O(D.pathname,{replace:!0,state:null})):g.m4.error((null===e||void 0===e?void 0:e.message)||"Request Failed")})).catch((e=>console.error(e))).finally((()=>{E&&E()}))},children:(0,R.jsxs)(o.c,{children:[(0,R.jsxs)("div",{className:"d-flex flex-wrap align-items-center border-bottom py-2 px-3",children:[(0,R.jsx)("span",{className:"flex-grow-1 fa-16 fw-bold",children:"Purchase Invoice Creation"}),(0,R.jsxs)("span",{children:[(0,R.jsx)("label",{htmlFor:"",children:"Manual Invoice"}),(0,R.jsx)(d.c,{checked:le,onChange:e=>{ae(e.target.checked),V([])}}),(0,R.jsx)(n.c,{type:"button",onClick:()=>{(Array.isArray(null===B||void 0===B?void 0:B.orderInfo)||(0,I.CY)(null===B||void 0===B?void 0:B.invoiceInfo))&&window.history.length>1?O(-1):O("/erp/purchase/invoice")},children:"Cancel"}),(0,R.jsx)(n.c,{type:"submit",variant:"contained",children:"submit"})]})]}),(0,R.jsxs)(i.c,{children:[(0,R.jsxs)("div",{className:"row",children:[(0,R.jsx)("div",{className:"col-xxl-3 col-lg-4 col-md-5 p-2",children:(0,R.jsxs)("div",{className:"border p-2",style:{minHeight:"30vh",height:"100%"},children:[(0,R.jsxs)("div",{className:"d-flex align-items-center flex-wrap mb-2 border-bottom pb-2",children:[(0,R.jsx)("h6",{className:"flex-grow-1 m-0",children:"Staff Involved"}),(0,R.jsx)(n.c,{variant:"outlined",color:"primary",type:"button",onClick:()=>F([...U,(0,t.c)({},A)]),children:"Add"})]}),(0,R.jsxs)("table",{className:"table table-bordered",children:[(0,R.jsx)("thead",{children:(0,R.jsxs)("tr",{children:[(0,R.jsx)("th",{className:"fa-13",children:"Sno"}),(0,R.jsx)("th",{className:"fa-13",children:"Staff Name"}),(0,R.jsx)("th",{className:"fa-13",children:"Category"}),(0,R.jsx)("th",{className:"fa-13",children:"#"})]})}),(0,R.jsx)("tbody",{children:U.map(((e,l)=>(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"fa-13 vctr text-center",children:l+1}),(0,R.jsx)("td",{className:"fa-13 w-100 p-0",children:(0,R.jsx)(_.cp,{value:{value:null===e||void 0===e?void 0:e.Involved_Emp_Id,label:null===e||void 0===e?void 0:e.Involved_Emp_Name},onChange:e=>F((a=>a.map(((a,r)=>{if((0,I.Qr)(r,l)){const l=te.staff.find((l=>(0,I.Qr)(l.Cost_Center_Id,e.value)));return(0,t.c)((0,t.c)({},a),{},{Cost_Center_Type_Id:(0,I.Q$)(a.Cost_Center_Type_Id)?Number(a.Cost_Center_Type_Id):(0,I.Q$)(l.User_Type)?Number(l.User_Type):0,Involved_Emp_Id:Number(e.value),Involved_Emp_Name:e.label})}return a})))),options:[...te.staff.filter((e=>!U.some((l=>(0,I.Qr)(l.Involved_Emp_Id,e.Cost_Center_Id)))))].map((e=>({value:e.Cost_Center_Id,label:e.Cost_Center_Name}))),styles:h.cF,isSearchable:!0,placeholder:"Select Staff"})}),(0,R.jsx)("td",{className:"fa-13 vctr p-0",style:{maxWidth:"130px",minWidth:"100px"},children:(0,R.jsxs)("select",{value:null===e||void 0===e?void 0:e.Cost_Center_Type_Id,onChange:e=>F((a=>a.map(((a,r)=>(0,I.Qr)(r,l)?(0,t.c)((0,t.c)({},a),{},{Cost_Center_Type_Id:e.target.value}):a)))),className:"cus-inpt p-2 border-0",children:[(0,R.jsx)("option",{value:"",children:"Select"}),te.staffType.map(((e,l)=>(0,R.jsx)("option",{value:null===e||void 0===e?void 0:e.Cost_Category_Id,children:null===e||void 0===e?void 0:e.Cost_Category},l)))]})}),(0,R.jsx)("td",{className:"fa-13 vctr p-0",children:(0,R.jsx)(c.c,{onClick:()=>{F((e=>e.filter(((e,a)=>l!==a))))},size:"small",children:(0,R.jsx)(p.c,{color:"error"})})})]},l)))})]})]})}),(0,R.jsx)("div",{className:"col-xxl-9 col-lg-8 col-md-7 py-2 px-0",children:(0,R.jsxs)("div",{className:"border px-3 py-1",style:{minHeight:"30vh",height:"100%"},children:[(0,R.jsxs)("div",{className:"row",children:[(0,R.jsxs)("div",{className:"col-sm-8 p-2",children:[(0,R.jsx)("label",{className:"fa-13",children:"Vendor"}),(0,R.jsx)(_.cp,{value:{value:null===G||void 0===G?void 0:G.Retailer_Id,label:null===G||void 0===G?void 0:G.Retailer_Name},onChange:e=>{q((l=>(0,t.c)((0,t.c)({},l),{},{Retailer_Id:e.value,Retailer_Name:e.label}))),V([]),de(e.value)},options:[{value:"",label:"Search",isDisabled:!0},...te.retailers.map((e=>({value:null===e||void 0===e?void 0:e.Retailer_Id,label:null===e||void 0===e?void 0:e.Retailer_Name})))],styles:h.cF,isSearchable:!0,placeholder:"Select Vendor",maxMenuHeight:300})]}),(0,R.jsxs)("div",{className:"col-sm-4 p-2",children:[(0,R.jsx)("label",{className:"fa-13",children:"Voucher Type"}),(0,R.jsx)(_.cp,{value:{value:G.Voucher_Type,label:null===(l=te.voucherType.find((e=>(0,I.Qr)(e.Vocher_Type_Id,G.Voucher_Type))))||void 0===l?void 0:l.Voucher_Type},onChange:e=>q((l=>(0,t.c)((0,t.c)({},l),{},{Voucher_Type:e.value}))),options:[{value:"",label:"Search",isDisabled:!0},...te.voucherType.filter((e=>(0,I.MP)(e.Type)===(0,I.MP)("PURCHASE"))).map((e=>({value:null===e||void 0===e?void 0:e.Vocher_Type_Id,label:null===e||void 0===e?void 0:e.Voucher_Type})))],styles:h.cF,isSearchable:!0,required:!0,placeholder:"Select Voucher Type",maxMenuHeight:300})]}),(0,R.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,R.jsxs)("label",{className:"fa-13",children:["Branch ",(0,R.jsx)(j.c,{})]}),(0,R.jsxs)("select",{className:X,value:null===G||void 0===G?void 0:G.Branch_Id,required:!0,onChange:e=>q((l=>(0,t.c)((0,t.c)({},l),{},{Branch_Id:e.target.value}))),children:[(0,R.jsx)("option",{value:"",children:"select"}),te.branch.map(((e,l)=>(0,R.jsx)("option",{value:null===e||void 0===e?void 0:e.BranchId,children:null===e||void 0===e?void 0:e.BranchName},l)))]})]}),(0,R.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,R.jsxs)("label",{className:"fa-13",children:["Entry Date ",(0,R.jsx)(j.c,{})]}),(0,R.jsx)("input",{value:null===G||void 0===G?void 0:G.Po_Entry_Date,type:"date",required:!0,className:X,onChange:e=>q((l=>(0,t.c)((0,t.c)({},l),{},{Po_Entry_Date:e.target.value})))})]}),(0,R.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,R.jsxs)("label",{className:"fa-13",children:["Bill Date ",(0,R.jsx)(j.c,{})]}),(0,R.jsx)("input",{value:null===G||void 0===G?void 0:G.Po_Inv_Date,type:"date",required:!0,className:X,onChange:e=>q((l=>(0,t.c)((0,t.c)({},l),{},{Po_Inv_Date:e.target.value})))})]}),(0,R.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,R.jsx)("label",{className:"fa-13",children:"Ref Number"}),(0,R.jsx)("input",{value:null===G||void 0===G?void 0:G.Ref_Po_Inv_No,className:X,onChange:e=>q((l=>(0,t.c)((0,t.c)({},l),{},{Ref_Po_Inv_No:e.target.value})))})]}),(0,R.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,R.jsxs)("label",{className:"fa-13",children:["GST Type ",(0,R.jsx)(j.c,{})]}),(0,R.jsxs)("select",{className:X,onChange:e=>q((l=>(0,t.c)((0,t.c)({},l),{},{GST_Inclusive:Number(e.target.value)}))),value:G.GST_Inclusive,required:!0,children:[(0,R.jsx)("option",{value:1,children:"Inclusive Tax"}),(0,R.jsx)("option",{value:0,children:"Exclusive Tax"}),(0,R.jsx)("option",{value:2,children:"Not Taxable"})]})]}),(0,R.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,R.jsx)("label",{className:"fa-13",children:"Tax Type"}),(0,R.jsxs)("select",{className:X,onChange:e=>q((l=>(0,t.c)((0,t.c)({},l),{},{IS_IGST:Number(e.target.value)}))),value:G.IS_IGST,children:[(0,R.jsx)("option",{value:"0",children:"GST"}),(0,R.jsx)("option",{value:"1",children:"IGST"})]})]}),(0,R.jsxs)("div",{className:"col-sm-6 p-2",children:[(0,R.jsx)("label",{className:"fa-13",children:"Stock Item Ledger Name"}),(0,R.jsx)(_.cp,{value:{value:G.Stock_Item_Ledger_Name,label:G.Stock_Item_Ledger_Name},onChange:e=>q((l=>(0,t.c)((0,t.c)({},l),{},{Stock_Item_Ledger_Name:e.label}))),options:[{value:"",label:"Search",isDisabled:!0},...te.stockItemLedgerName.map((e=>({value:null===e||void 0===e?void 0:e.Stock_Item_Ledger_Name,label:null===e||void 0===e?void 0:e.Stock_Item_Ledger_Name})))],styles:h.cF,required:!0,isSearchable:!0,placeholder:"Select",maxMenuHeight:300})]})]}),(0,R.jsx)("label",{className:"fa-13",children:"Narration"}),(0,R.jsx)("textarea",{className:"cus-inpt fa-14",rows:2,value:G.Narration,onChange:e=>q((l=>(0,t.c)((0,t.c)({},l),{},{Narration:e.target.value})))})]})})]}),(0,R.jsxs)("div",{className:"table-responsive",children:[(0,R.jsxs)("div",{className:"d-flex p-2 justify-content-end",children:[(0,R.jsx)(n.c,{type:"button",onClick:()=>V([]),children:"clear selected"}),le?(0,R.jsx)(n.c,{onClick:()=>{$(null),ee((e=>(0,t.c)((0,t.c)({},e),{},{addProductDialog:!0})))},sx:{ml:1},variant:"outlined",type:"button",startIcon:(0,R.jsx)(x.c,{}),disabled:!(0,I.Q$)(G.Retailer_Id),children:"Add Product"}):(0,R.jsx)(n.c,{variant:"outlined",className:"ms-2",type:"button",onClick:()=>ee((e=>(0,t.c)((0,t.c)({},e),{},{selectArrivalDialog:!0}))),startIcon:(0,R.jsx)(x.c,{}),disabled:!(0,I.Q$)(G.Retailer_Id),children:"Add Products"})]}),(0,R.jsxs)("table",{className:"table",children:[(0,R.jsx)("thead",{children:(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:Y,children:"SNo"}),(0,R.jsx)("td",{className:Y,children:"Item"}),(0,R.jsx)("td",{className:Y,children:"Rate"}),(0,R.jsx)("td",{className:Y,children:"Bill Quantity"}),(0,R.jsx)("td",{className:Y,children:"Acl Quantity"}),(0,R.jsx)("td",{className:Y,children:"Unit"}),(0,R.jsx)("td",{className:Y,children:"Amount"}),(0,R.jsx)("td",{className:Y,children:"Godown Location"}),(0,R.jsx)("td",{className:Y,children:"Batch"})]})}),(0,R.jsx)("tbody",{children:L.map(((e,l)=>{var a,t;return(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:Y,children:l+1}),(0,R.jsx)("td",{className:Y,children:null!==(a=e.Item_Name)&&void 0!==a?a:"Not found"}),(0,R.jsx)("td",{className:Y,children:(0,R.jsx)("input",{value:null!==e&&void 0!==e&&e.Item_Rate?null===e||void 0===e?void 0:e.Item_Rate:"",type:"number",className:X,onChange:l=>ce(e,"Item_Rate",l.target.value),required:!0})}),(0,R.jsx)("td",{className:Y,children:(0,R.jsx)("input",{value:null!==e&&void 0!==e&&e.Bill_Qty?null===e||void 0===e?void 0:e.Bill_Qty:"",type:"number",className:X,onChange:l=>ce(e,"Bill_Qty",l.target.value),required:!0})}),(0,R.jsx)("td",{className:Y,children:(0,R.jsx)("input",{value:null!==(t=null===e||void 0===e?void 0:e.Act_Qty)&&void 0!==t?t:"",type:"number",className:X,onChange:l=>ce(e,"Act_Qty",l.target.value),required:!0})}),(0,R.jsx)("td",{className:Y,children:(0,R.jsxs)("select",{value:null===e||void 0===e?void 0:e.Unit_Id,className:X,onChange:l=>{const a=l.target.selectedIndex,t=l.target.options[a].text,r=l.target.value;ce(e,"Unit_Id",r),ce(e,"Unit_Name",t)},required:!0,children:[(0,R.jsx)("option",{value:"",children:"select"}),te.uom.map(((e,l)=>(0,R.jsx)("option",{value:e.Unit_Id,children:e.Units},l)))]})}),(0,R.jsx)("td",{className:Y,children:(0,R.jsx)("input",{value:null!==e&&void 0!==e&&e.Amount?null===e||void 0===e?void 0:e.Amount:"",type:"number",className:X,onChange:l=>ce(e,"Amount",l.target.value),required:!0})}),(0,R.jsx)("td",{className:Y,children:(0,R.jsxs)("select",{value:null===e||void 0===e?void 0:e.Location_Id,className:X,onChange:l=>ce(e,"Location_Id",l.target.value),children:[(0,R.jsx)("option",{value:"",children:"select"}),te.godown.map(((e,l)=>(0,R.jsx)("option",{value:null===e||void 0===e?void 0:e.Godown_Id,children:null===e||void 0===e?void 0:e.Godown_Name},l)))]})}),(0,R.jsx)("td",{className:Y,children:(0,R.jsx)("input",{value:null===e||void 0===e?void 0:e.Batch_No,className:X,onChange:l=>ce(e,"Batch_No",l.target.value)})})]},l)}))})]}),(0,R.jsx)("table",{className:"table",children:(0,R.jsxs)("tbody",{children:[(0,R.jsxs)("tr",{children:[(0,R.jsxs)("td",{className:"border p-2",rowSpan:(0,I.Qr)(G.IS_IGST,1)?4:5,children:["Total in words: ",(0,I.m4)(parseInt(se))]}),(0,R.jsx)("td",{className:"border p-2",children:"Total Taxable Amount"}),(0,R.jsx)("td",{className:"border p-2",children:oe.totalTaxable})]}),K?(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border p-2",children:"IGST"}),(0,R.jsx)("td",{className:"border p-2",children:oe.igst})]}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border p-2",children:"CGST"}),(0,R.jsx)("td",{className:"border p-2",children:oe.cgst})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border p-2",children:"SGST"}),(0,R.jsx)("td",{className:"border p-2",children:oe.sgst})]})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border p-2",children:"Round Off"}),(0,R.jsx)("td",{className:"border p-2",children:(0,R.jsx)("input",{value:G.Round_off,defaultValue:oe.roundOff,style:{minWidth:"200px",maxWidth:"350px"},className:"cus-inpt p-2",onInput:I.mE,onChange:e=>q((l=>(0,t.c)((0,t.c)({},l),{},{Round_off:e.target.value})))})})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border p-2",children:"Total"}),(0,R.jsx)("td",{className:"border p-2",children:(0,I.SA)(Math.round(se))})]})]})})]})]})]})}),(0,R.jsxs)(u.c,{open:Z.selectArrivalDialog,onClose:ie,fullScreen:!0,children:[(0,R.jsxs)(v.c,{className:"d-flex flex-wrap align-items-center ",children:[(0,R.jsx)("span",{className:"flex-grow-1",children:"Select Purchase Order"}),(0,R.jsx)("span",{children:(0,R.jsx)(n.c,{onClick:ie,type:"button",className:"me-2",children:"close"})})]}),(0,R.jsx)(m.c,{children:(0,R.jsx)(N.cp,{dataArray:H,columns:[{isVisible:1,ColumnHeader:"#",isCustomCell:!0,Cell:e=>{let{row:l}=e;return(0,R.jsx)("div",{children:(0,R.jsx)("input",{className:"form-check-input shadow-none pointer",style:{padding:"0.7em"},type:"checkbox",checked:-1!==L.findIndex((e=>(0,I.Qr)(null===e||void 0===e?void 0:e.DeliveryId,null===l||void 0===l?void 0:l.Trip_Item_SNo))),onChange:()=>{-1!==L.findIndex((e=>(0,I.Qr)(null===e||void 0===e?void 0:e.DeliveryId,null===l||void 0===l?void 0:l.Trip_Item_SNo)))?ne(l,!0):ne(l)}})})}},(0,N.A5)("ArrivalDate","date"),(0,N.A5)("ItemName","string"),(0,N.A5)("BilledRate","string"),{isVisible:1,ColumnHeader:"Weight",isCustomCell:!0,Cell:e=>{var l;let{row:a}=e;return(null!==(l=null===a||void 0===a?void 0:a.Weight)&&void 0!==l?l:0)+" "+(null===a||void 0===a?void 0:a.Units)}},(0,N.A5)("pendingInvoiceWeight","number","Pending Tonnage"),(0,N.A5)("Quantity","number"),(0,N.A5)("PO_ID","string"),(0,N.A5)("Location","string")],EnableSerialNumber:!0,disablePagination:!0,title:"Arrival Details of ".concat(null!==(a=null===(f=te.retailers)||void 0===f||null===(C=f.find((e=>(0,I.Qr)(null===e||void 0===e?void 0:e.Retailer_Id,null===G||void 0===G?void 0:G.Retailer_Id))))||void 0===C?void 0:C.Retailer_Name)&&void 0!==a?a:"Not available"),maxHeightOption:!0})})]})]})}}}]);
//# sourceMappingURL=6960.6f455466.chunk.js.map