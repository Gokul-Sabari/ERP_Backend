"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[1024],{91024:(e,s,t)=>{t.r(s),t.d(s,{default:()=>y});var c=t(30800),a=t(69060),l=t(1908),r=t(39308),n=t(13724),o=t(43692),i=t(89e3),d=t(56480),h=t(87016),u=t(71412),g=t(82496);const y=e=>{let{loadingOn:s,loadingOff:t}=e;const[y,S]=(0,a.useState)([]),[m,p]=(0,a.useState)([]),x=(0,r.gV)().user,[v,j]=(0,a.useState)({refresh:!1,viewNotSynced:!1,searchERPLos:"",searchTallyLos:"",searchNotSynced:""});(0,a.useEffect)((()=>{s&&s(),(0,l.q)({address:"masters/tallyMaster/items",headers:{Db:null===x||void 0===x?void 0:x.Company_id}}).then((e=>{if(e.success){var s,t;const c=Array.isArray(null===e||void 0===e||null===(s=e.others)||void 0===s?void 0:s.tallyResult)?null===e||void 0===e||null===(t=e.others)||void 0===t?void 0:t.tallyResult:[];S(e.data),p(c)}})).catch((e=>console.error(e))).finally((()=>{t&&t()}))}),[v.refresh]);const f=(0,a.useMemo)((()=>m.filter((e=>!y.some((s=>(0,r.Qr)(e.Stock_Tally_Id,s.Stock_Tally_Id)))))),[y.length,m.length]),A=(0,a.useMemo)((()=>v.searchERPLos?y.filter((e=>(0,r.MP)(Object.values(e).join(" ")).includes((0,r.MP)(v.searchERPLos)))):y),[v.searchERPLos,y.length]),N=(0,a.useMemo)((()=>v.searchTallyLos?m.filter((e=>(0,r.MP)(Object.values(e).join(" ")).includes((0,r.MP)(v.searchTallyLos)))):m),[v.searchTallyLos,m.length]),P=(0,a.useMemo)((()=>v.searchNotSynced?f.filter((e=>(0,r.MP)(Object.values(e).join(" ")).includes((0,r.MP)(v.searchNotSynced)))):f),[f.length,v.searchNotSynced]);return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(o.c,{children:[(0,g.jsxs)("div",{className:"px-3 py-2 fa-14",children:[(0,g.jsxs)("div",{className:"d-flex flex-wrap align-items-center",children:[(0,g.jsxs)("h5",{className:"flex-grow-1",children:["LOS SYNC (Differents: ",f.length,")"]}),(0,g.jsx)(i.c,{size:"small",onClick:()=>{s&&s(),(0,l.q)({address:"masters/products/losSync",method:"POST"}).then((e=>{e.success?(d.m4.success(e.message),j((e=>(0,c.c)((0,c.c)({},e),{},{refresh:!e.refresh})))):d.m4.error(e.message)})).catch((e=>console.error(e))).finally((()=>{t&&t()}))},startIcon:(0,g.jsx)(h.c,{}),children:"Sync now"}),(0,g.jsx)(i.c,{size:"small",onClick:()=>j((e=>(0,c.c)((0,c.c)({},e),{},{viewNotSynced:!e.viewNotSynced}))),startIcon:(0,g.jsx)(u.c,{}),children:"View Not Synced"})]}),(0,g.jsx)("div",{className:"d-flex flex-wrap align-items-center"})]}),v.viewNotSynced?(0,g.jsx)(n.cp,{title:"Not synced list ",bodyFontSizePx:11,headerFontSizePx:11,dataArray:P,columns:[(0,n.A5)("Stock_Tally_Id","string","Tally ID"),(0,n.A5)("Stock_Item","string"),(0,n.A5)("Brand","string","MobileNo"),(0,n.A5)("Group_ST","string"),(0,n.A5)("Bag","string"),(0,n.A5)("Stock_Group","string")],ButtonArea:(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("input",{type:"search",className:"cus-inpt p-1 w-auto",value:v.searchNotSynced,onChange:e=>j((s=>(0,c.c)((0,c.c)({},s),{},{searchNotSynced:e.target.value}))),placeholder:"Search.."})})}):(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)("div",{className:"col-lg-6 p-1",children:(0,g.jsx)(n.cp,{title:"ERP - "+y.length,bodyFontSizePx:11,headerFontSizePx:11,dataArray:A,columns:[(0,n.A5)("Stock_Tally_Id","string","Tally ID"),(0,n.A5)("Stock_Item","string"),(0,n.A5)("Brand","string","MobileNo"),(0,n.A5)("Group_ST","string"),(0,n.A5)("Bag","string"),(0,n.A5)("Stock_Group","string")],ButtonArea:(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("input",{type:"search",className:"cus-inpt p-1 w-auto",value:v.searchERPLos,onChange:e=>j((s=>(0,c.c)((0,c.c)({},s),{},{searchERPLos:e.target.value}))),placeholder:"Search.."})})})}),(0,g.jsx)("div",{className:"col-lg-6 p-1",children:(0,g.jsx)(n.cp,{title:"Tally - "+m.length,bodyFontSizePx:11,headerFontSizePx:11,dataArray:N,columns:[(0,n.A5)("Stock_Tally_Id","string","Tally ID"),(0,n.A5)("Stock_Item","string"),(0,n.A5)("Brand","string","MobileNo"),(0,n.A5)("Group_ST","string"),(0,n.A5)("Bag","string"),(0,n.A5)("Stock_Group","string")],ButtonArea:(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("input",{type:"search",className:"cus-inpt p-1 w-auto",value:v.searchTallyLos,onChange:e=>j((s=>(0,c.c)((0,c.c)({},s),{},{searchTallyLol:e.target.value}))),placeholder:"Search.."})})})})]})})]})})}},87016:(e,s,t)=>{t.d(s,{c:()=>l});var c=t(27664),a=t(82496);const l=(0,c.c)((0,a.jsx)("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8m0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4z"}),"Sync")},71412:(e,s,t)=>{t.d(s,{c:()=>l});var c=t(27664),a=t(82496);const l=(0,c.c)((0,a.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")}}]);
//# sourceMappingURL=1024.4b38ad04.chunk.js.map