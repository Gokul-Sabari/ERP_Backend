"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[3560,3692,1312],{3560:(e,t,o)=>{o.r(t),o.d(t,{default:()=>v});var l=o(30800),n=o(69060),r=o(50952),i=o(96064),s=o(43692),a=o(84436),d=o(39308),c=o(1908),u=o(82496);const x=(e,t)=>{let o=0;return Array.isArray(e)&&e.forEach((e=>{o+=Number(e[t])})),o},v=()=>{const e=JSON.parse(localStorage.getItem("user")),[t,o]=(0,n.useState)([]),[v,p]=(0,n.useState)({Report_Type:2,Fromdate:(0,d.Ir)(),Todate:(0,d.Q7)(),Report:"PENDING PURCHASE ORDER"});(0,n.useEffect)((()=>{o([]),null!==e&&void 0!==e&&e.Company_id&&(0,c.q)({address:"reports/PurchaseOrderReportCard?Report_Type=".concat(v.Report_Type,"&Fromdate=").concat(v.Fromdate,"&Todate=").concat(v.Todate),headers:{Db:null===e||void 0===e?void 0:e.Company_id}}).then((e=>{e.success&&(e.data.sort(((e,t)=>new Date(t.po_date)-new Date(e.po_date))),o(e.data))})).catch((e=>console.error(e)))}),[v.Report_Type,v.Fromdate,v.Todate]);const h=e=>{var t,o,l,s;let{rowData:a}=e;const[d,c]=(0,n.useState)(!1),x=null===a||void 0===a||null===(t=a.product_details)||void 0===t?void 0:t.reduce(((e,t)=>{var o;return e+(null===t||void 0===t||null===(o=t.product_details_1)||void 0===o?void 0:o.reduce(((e,t)=>e+(null===t||void 0===t?void 0:t.bill_qty)),0))}),0),v=null===a||void 0===a||null===(o=a.product_details)||void 0===o?void 0:o.reduce(((e,t)=>{var o;return e+(null===t||void 0===t||null===(o=t.product_details_1)||void 0===o?void 0:o.reduce(((e,t)=>e+(null===t||void 0===t?void 0:t.amount)),0))}),0);return(null===a||void 0===a||null===(l=a.product_details)||void 0===l?void 0:l.length)>0&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{className:"fa-12",children:(0,u.jsx)("button",{onClick:()=>c(!d),className:"icon-btn",children:d?(0,u.jsx)(r.c,{sx:{fontSize:"inherit"}}):(0,u.jsx)(i.c,{sx:{fontSize:"inherit"}})})}),(0,u.jsx)("td",{className:"text-success fa-12 fw-bold bg-light",children:null===a||void 0===a?void 0:a.Stock_Group}),(0,u.jsx)("td",{className:"text-success fa-12",children:"-"}),(0,u.jsx)("td",{className:"text-success fa-12 bg-light fw-bold",children:null===(s=x/1e3)||void 0===s?void 0:s.toLocaleString("en-IN",{maximumFractionDigits:2})}),(0,u.jsx)("td",{className:"text-success fa-12 fw-bold",children:(v/x).toLocaleString("en-IN",{maximumFractionDigits:2})}),(0,u.jsx)("td",{className:"text-success fa-12 bg-light fw-bold",children:null===v||void 0===v?void 0:v.toLocaleString("en-IN")})]}),d&&a.product_details.map(((e,t)=>(0,u.jsx)(m,{subRowData:e},t)))]})},m=e=>{var t,o;let{subRowData:l}=e;const[s,a]=(0,n.useState)(!1),d=x(null===l||void 0===l?void 0:l.product_details_1,"bill_qty"),c=x(null===l||void 0===l?void 0:l.product_details_1,"amount");return(null===l||void 0===l||null===(t=l.product_details_1)||void 0===t?void 0:t.length)>0&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{style:{fontSize:"12px"},className:"text-primary"}),(0,u.jsx)("td",{style:{fontSize:"12px"},className:"text-primary bg-light",children:(0,u.jsx)("button",{onClick:()=>a(!s),className:"icon-btn",children:s?(0,u.jsx)(r.c,{sx:{fontSize:"inherit"}}):(0,u.jsx)(i.c,{sx:{fontSize:"inherit"}})})}),(0,u.jsxs)("td",{style:{fontSize:"12px"},className:"text-primary",children:[null===l||void 0===l?void 0:l.Item_Name_Modified," (Sum)"]}),(0,u.jsx)("td",{style:{fontSize:"12px"},className:"text-primary bg-light fw-bold",children:(d/1e3).toLocaleString("en-IN",{maximumFractionDigits:2})}),(0,u.jsx)("td",{style:{fontSize:"12px"},className:"text-primary fw-bold",children:(Number(c)/Number(d)).toLocaleString("en-IN",{maximumFractionDigits:2})}),(0,u.jsx)("td",{style:{fontSize:"12px"},className:"text-primary bg-light fw-bold",children:c.toLocaleString("en-IN",{maximumFractionDigits:2})})]}),s&&(null===l||void 0===l||null===(o=l.product_details_1)||void 0===o?void 0:o.map(((e,t)=>(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{style:{fontSize:"12px"},children:null===e||void 0===e?void 0:e.po_no}),(0,u.jsx)("td",{style:{fontSize:"12px"},className:"bg-light",children:new Date(null===e||void 0===e?void 0:e.po_date).toLocaleDateString("en-IN")}),(0,u.jsx)("td",{style:{fontSize:"12px"},children:null===e||void 0===e?void 0:e.ledger_name}),(0,u.jsx)("td",{style:{fontSize:"12px"},className:"bg-light fw-bold",children:(null===e||void 0===e?void 0:e.bill_qty.toLocaleString("en-IN"))+" "+(null===e||void 0===e?void 0:e.bill_unit)}),(0,u.jsx)("td",{style:{fontSize:"12px"},className:" fw-bold",children:null===e||void 0===e?void 0:e.item_rate.toLocaleString("en-IN")}),(0,u.jsx)("td",{style:{fontSize:"12px"},className:"bg-light fw-bold",children:null===e||void 0===e?void 0:e.amount.toLocaleString("en-IN")})]},t))))]})},j=e=>{var t,o;let{row:l}=e;const[s,a]=(0,n.useState)(!1);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:(0,u.jsx)("button",{onClick:()=>a(!s),className:"icon-btn",children:s?(0,u.jsx)(r.c,{sx:{fontSize:"inherit"}}):(0,u.jsx)(i.c,{sx:{fontSize:"inherit"}})})}),(0,u.jsx)("td",{style:{fontSize:"12px"},children:null===l||void 0===l?void 0:l.ledger_name}),(0,u.jsx)("td",{style:{fontSize:"12px"},children:null===l||void 0===l||null===(t=l.Order_details)||void 0===t?void 0:t.length}),(0,u.jsx)("td",{style:{fontSize:"12px"},className:"text-primary fw-bold",children:x(null===l||void 0===l?void 0:l.Order_details,"total_invoice_value").toLocaleString("en-IN")})]}),s&&(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:4,className:"overflow-scroll",children:(0,u.jsxs)("table",{className:"table",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{style:{fontSize:"14px"},children:"PO No"}),(0,u.jsx)("th",{style:{fontSize:"14px"},children:"Date"}),(0,u.jsx)("th",{style:{fontSize:"14px"},children:"Order Value"})]})}),(0,u.jsx)("tbody",{children:null===l||void 0===l||null===(o=l.Order_details)||void 0===o?void 0:o.map(((e,t)=>{var o;return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{style:{fontSize:"12px"},children:null===e||void 0===e?void 0:e.po_no}),(0,u.jsx)("td",{style:{fontSize:"12px"},children:(null===e||void 0===e?void 0:e.po_date)&&new Date(e.po_date).toLocaleDateString("en-IN")}),(0,u.jsx)("td",{style:{fontSize:"12px"},children:null===e||void 0===e||null===(o=e.total_invoice_value)||void 0===o?void 0:o.toLocaleString("en-IN")})]},t)}))})]})})})]})},f=()=>{let e=0,o=0;return t.forEach((t=>{var l;null===t||void 0===t||null===(l=t.product_details)||void 0===l||l.forEach((t=>{null===t||void 0===t||t.product_details_1.forEach((t=>{e+=Number(t.bill_qty),o+=Number(t.amount)}))}))})),{amount:parseInt(o).toLocaleString("en-IN"),tonage:parseInt(e).toLocaleString("en-IN")}};return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(s.c,{children:[(0,u.jsxs)("div",{className:"d-flex justify-content-between align-items-center px-3 py-2",style:{backgroundColor:"#eae0cc"},children:[(0,u.jsxs)("div",{className:"d-flex flex-column justify-content-center fw-bold text-dark",children:[e.Company_Name,(0,u.jsxs)("span",{style:{fontSize:"11px"},children:["( ",v.Report," )"]})]}),(0,u.jsxs)("select",{className:"cus-inpt w-auto rounded-5 border-0",onChange:e=>{const t=e.target.selectedIndex,o=e.target.options[t].text;p((0,l.c)((0,l.c)({},v),{},{Report_Type:Number(e.target.value),Report:o}))},value:v.Report_Type,children:[(0,u.jsx)("option",{value:2,children:"PENDING PURCHASE ORDER"}),(0,u.jsx)("option",{value:0,children:"PURCHASE ORDER"}),(0,u.jsx)("option",{value:1,children:"PURCHASE"}),(0,u.jsx)("option",{value:3,children:"ORDER VALUE"})]})]}),(0,u.jsxs)("div",{className:"px-3 py-2 d-flex justify-content-between align-items-center",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("input",{type:"date",className:"cus-inpt py-1 w-auto rounded-5",value:v.Fromdate,onChange:e=>{p((0,l.c)((0,l.c)({},v),{},{Fromdate:e.target.value}))}}),(0,u.jsx)("input",{type:"date",className:"cus-inpt py-1 w-auto rounded-5",value:v.Todate,onChange:e=>{p((0,l.c)((0,l.c)({},v),{},{Todate:e.target.value}))}})]}),(0,u.jsx)("p",{className:"text-primary fw-bold fa-14 mb-0",children:3!==Number(v.Report_Type)?" ( "+f().tonage+" ) - ( "+f().amount+" )":" "+(()=>{let e=0;return t.forEach((t=>{var o;null===t||void 0===t||null===(o=t.Order_details)||void 0===o||o.forEach((t=>{e+=Number(null===t||void 0===t?void 0:t.total_invoice_value)}))})),parseInt(e).toLocaleString("en-IN")})()})]}),(0,u.jsx)(a.c,{style:{maxHeight:"75vh"},className:"overflow-auto pt-0",children:3!==Number(v.Report_Type)?(0,u.jsxs)("table",{className:"table",children:[(0,u.jsx)("thead",{children:(0,u.jsx)("tr",{children:["-","Stock Group","Item","Tonnage","Rate","Value (\u20b9)"].map(((e,t)=>(0,u.jsx)("th",{className:"tble-hed-stick fa-13 border",children:e},t)))})}),(0,u.jsx)("tbody",{children:t.map(((e,t)=>(0,u.jsx)(h,{rowData:e},t)))})]}):(0,u.jsxs)("table",{className:"table",children:[(0,u.jsx)("thead",{children:(0,u.jsx)("tr",{children:["SNo","Ledger","Order(s)","Amount"].map(((e,t)=>(0,u.jsx)("th",{className:"tble-hed-stick fa-14 border",children:e},t)))})}),(0,u.jsx)("tbody",{children:t.map(((e,t)=>(0,u.jsx)(j,{row:e},t)))})]})})]})})}},96064:(e,t,o)=>{o.d(t,{c:()=>r});var l=o(27664),n=o(82496);const r=(0,l.c)((0,n.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},50952:(e,t,o)=>{o.d(t,{c:()=>r});var l=o(27664),n=o(82496);const r=(0,l.c)((0,n.jsx)("path",{d:"M19 13H5v-2h14z"}),"Remove")},84436:(e,t,o)=>{o.d(t,{c:()=>m});var l=o(45072),n=o(95656),r=o(69060),i=o(79736),s=o(21412),a=o(12556),d=o(49836),c=o(10099),u=o(33448);function x(e){return(0,u.cp)("MuiCardContent",e)}(0,c.c)("MuiCardContent",["root"]);var v=o(82496);const p=["className","component"],h=(0,a.cp)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),m=r.forwardRef((function(e,t){const o=(0,d.C)({props:e,name:"MuiCardContent"}),{className:r,component:a="div"}=o,c=(0,n.c)(o,p),u=(0,l.c)({},o,{component:a}),m=(e=>{const{classes:t}=e;return(0,s.c)({root:["root"]},x,t)})(u);return(0,v.jsx)(h,(0,l.c)({as:a,className:(0,i.c)(m.root,r),ownerState:u,ref:t},c))}))},43692:(e,t,o)=>{o.d(t,{c:()=>j});var l=o(45072),n=o(95656),r=o(69060),i=o(79736),s=o(21412),a=o(12556),d=o(49836),c=o(85624),u=o(10099),x=o(33448);function v(e){return(0,x.cp)("MuiCard",e)}(0,u.c)("MuiCard",["root"]);var p=o(82496);const h=["className","raised"],m=(0,a.cp)(c.c,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),j=r.forwardRef((function(e,t){const o=(0,d.C)({props:e,name:"MuiCard"}),{className:r,raised:a=!1}=o,c=(0,n.c)(o,h),u=(0,l.c)({},o,{raised:a}),x=(e=>{const{classes:t}=e;return(0,s.c)({root:["root"]},v,t)})(u);return(0,p.jsx)(m,(0,l.c)({className:(0,i.c)(x.root,r),elevation:a?8:void 0,ref:t,ownerState:u},c))}))}}]);
//# sourceMappingURL=3560.e59bf476.chunk.js.map