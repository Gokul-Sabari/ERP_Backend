"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[8117],{15660:(e,l,s)=>{s.r(l),s.d(l,{default:()=>H});var a=s(69060),t=s(43692),r=s(89e3),o=s(84436),d=s(5548),n=s(99852),i=s(62344),c=s(56480),u=s(39308),v=s(27664),m=s(82496);const _=(0,v.c)((0,m.jsx)("path",{d:"m14 7-5 5 5 5z"}),"ArrowLeft");var h=s(80156),x=s(96064),p=s(49608),j=s(86e3),I=s(45180),C=s(36992),f=s(1908),S=s(13724),b=s(128),g=s(51560);const N=(0,u.gV)().user,T={So_Id:"",So_Inv_No:"",So_Year:"",So_Branch_Inv_Id:"",So_Date:(0,u.Q7)(),Retailer_Id:"",Retailer_Name:"",Sales_Person_Id:"",Branch_Id:"",VoucherType:"",GST_Inclusive:2,IS_IGST:0,Narration:"",isConverted:"",Cancel_status:"",CSGT_Total:0,SGST_Total:0,IGST_Total:0,Round_off:0,Total_Before_Tax:0,Total_Tax:0,Total_Invoice_value:0,Created_by:null===N||void 0===N?void 0:N.UserId,Altered_by:null===N||void 0===N?void 0:N.UserId,Approved_By:"",Approve_Status:"",Created_on:"",Alterd_on:"",Trans_Type:"",Alter_Id:""},y={BrandID:"",Brand:"",GroupID:"",Group:"",SO_St_Id:"",So_Date:"",Sales_Order_Id:"",S_No:"",Pre_Id:"",Item_Id:"",Item_Rate:0,Bill_Qty:0,Amount:0,HSN_Code:"",Unit_Id:"",Unit_Name:"",Free_Qty:0,Total_Qty:0,Taxble:0,Taxable_Rate:0,Taxable_Amount:0,Tax_Rate:0,Cgst:0,Cgst_Amo:0,Sgst:0,Sgst_Amo:0,Igst:0,Igst_Amo:0,Final_Amo:0,Created_on:""},A={Id:"",So_Id:"",Involved_Emp_Id:"",EmpName:"",Cost_Center_Type_Id:"",EmpType:""};var P=s(82656),Q=s(26773),R=s(4488),w=s(42376);const O=e=>{let{loadingOn:l,loadingOff:s,open:t,onClose:o,retailer:n,children:i,selectedItems:c,setSelectedItems:v,products:_=[],GST_Inclusive:h,IS_IGST:x}=e;const p=(0,u.Qr)(h,1),j=(0,u.Qr)(h,2),[I,C]=(0,a.useState)([]),[S,g]=(0,a.useState)({Fromdate:(0,u.Q7)(),Todate:(0,u.Q7)(),search:!1});(0,a.useEffect)((()=>{if((0,u.Q$)(n)&&t){const{Fromdate:e,Todate:a}=S;l&&l(),(0,f.q)({address:`sales/saleOrder/importPosOrders?Fromdate=${e}&Todate=${a}&Retailer_Id=${n}`}).then((e=>{e.success?C(e.data):C([])})).catch((e=>console.error(e))).finally((()=>{s&&s()}))}}),[S.search]);const N=function(e){let l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];v((s=>{const a=s.filter((l=>!(0,u.Qr)(null===l||void 0===l?void 0:l.Pre_Id,e.Pre_Id)));let t;if(l)t=a;else{const l=I.filter((l=>(0,u.Qr)(l.Pre_Id,e.Pre_Id))).map((e=>Object.fromEntries(Object.entries(y).map((l=>{var s,a,t,r,o;let[d,n]=l;const i=(e=>{var l;return null!==(l=null===_||void 0===_?void 0:_.find((l=>(0,u.Qr)(null===l||void 0===l?void 0:l.Product_Id,e))))&&void 0!==l?l:{}})(e.Item_Id),c=x?i.Igst_P:i.Gst_P,v=c>0,{Item_Rate:m,Bill_Qty:h,Tonnage:I,PackValue:C}=e,f=(0,u.eX)(m,(0,u.eX)(h,C)),S=j?"zerotax":p?"remove":"add",g=(0,b.O)(m,c,S),N=(0,b.O)(f,c,S),T=x?0:N.cgst_per,y=x?N.igst_per:0,A=x?0:N.cgst_amount,P=x?N.igst_amount:0;switch(d){case"Pre_Id":return[d,null!==(s=e.Pre_Id)&&void 0!==s?s:n];case"Item_Id":return[d,null!==(a=e.Item_Id)&&void 0!==a?a:n];case"Item_Rate":return[d,(0,u.gH)(m)];case"Bill_Qty":case"Total_Qty":return[d,(0,u.gH)(I)];case"Amount":return[d,f];case"Unit_Id":return[d,null!==(t=e.Unit_Id)&&void 0!==t?t:n];case"Unit_Name":return[d,null!==(r=e.Units)&&void 0!==r?r:n];case"HSN_Code":return[d,null!==(o=i.HSN_Code)&&void 0!==o?o:n];case"Taxable_Rate":return[d,g.base_amount];case"Taxble":return[d,v?1:0];case"Taxable_Amount":return[d,N.base_amount];case"Tax_Rate":return[d,c];case"Cgst":case"Sgst":return[d,null!==T&&void 0!==T?T:0];case"Cgst_Amo":case"Sgst_Amo":return[d,j?0:A];case"Igst":return[d,null!==y&&void 0!==y?y:0];case"Igst_Amo":return[d,j?0:P];case"Final_Amo":return[d,N.with_tax];default:return[d,n]}})))));t=[...a,...l]}return t}))},T=()=>{o&&o(),C([])};return(0,m.jsxs)(m.Fragment,{children:[i,(0,m.jsxs)(P.c,{open:t,onClose:T,fullScreen:!0,children:[(0,m.jsx)(Q.c,{children:(0,m.jsxs)("div",{className:"d-flex flex-wrap align-items-center ",children:[(0,m.jsx)("span",{className:"flex-grow-1",children:"Import from POS"}),(0,m.jsx)(d.c,{onClick:T,color:"success",children:(0,m.jsx)(w.c,{className:"fa-20"})})]})}),(0,m.jsxs)(R.c,{children:[(0,m.jsx)("form",{onSubmit:e=>{e.preventDefault(),g((e=>({...e,search:!e.search})))},children:(0,m.jsxs)("div",{className:"d-flex flex-wrap align-items-end",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"d-block ms-2",children:"From Date"}),(0,m.jsx)("input",{className:"cus-inpt p-2 w-auto",type:"date",value:null===S||void 0===S?void 0:S.Fromdate,onChange:e=>g((l=>({...l,Fromdate:e.target.value}))),required:!0})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"d-block ms-2",children:"To Date"}),(0,m.jsx)("input",{className:"cus-inpt p-2 w-auto ms-2",type:"date",min:S.Fromdate,value:null===S||void 0===S?void 0:S.Todate,onChange:e=>g((l=>({...l,Todate:e.target.value}))),required:!0})]}),(0,m.jsx)(r.c,{variant:"outlined",className:"ms-2",type:"submit",children:"search"})]})}),(0,m.jsx)("div",{className:"table-responsive mt-3",children:(0,m.jsxs)("table",{className:"table table-bordered fa-13",children:[(0,m.jsx)("thead",{children:(0,m.jsx)("tr",{children:["Sno","#","Item","Qty","Pack","Rate","Amount","Order ID","Date","Invoice Value"].map(((e,l)=>(0,m.jsx)("th",{children:e},l)))})}),(0,m.jsx)("tbody",{children:I.filter((e=>(0,u.Qr)(e.Custome_Id,n))).map(((e,l)=>(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:l+1}),(0,m.jsx)("td",{children:(()=>{const l=-1!==c.findIndex((l=>(0,u.Qr)(null===l||void 0===l?void 0:l.Pre_Id,e.Pre_Id)));return(0,m.jsx)("div",{children:(0,m.jsx)("input",{className:"form-check-input shadow-none pointer",style:{padding:"0.7em"},type:"checkbox",checked:l,onChange:()=>{l?N(e,!0):N(e)}})})})()}),(0,m.jsx)("td",{children:null===e||void 0===e?void 0:e.Product_Name}),(0,m.jsx)("td",{children:null===e||void 0===e?void 0:e.Bill_Qty}),(0,m.jsx)("td",{children:null===e||void 0===e?void 0:e.Tonnage}),(0,m.jsx)("td",{children:null===e||void 0===e?void 0:e.Item_Rate}),(0,m.jsx)("td",{children:null===e||void 0===e?void 0:e.Amount}),(0,m.jsx)("td",{children:null===e||void 0===e?void 0:e.Pre_Id}),(0,m.jsx)("td",{children:(0,u.uy)(null===e||void 0===e?void 0:e.Pre_Date)}),(0,m.jsx)("td",{children:null===e||void 0===e?void 0:e.Total_Invoice_value})]},l)))})]})})]})]})]})};var G=s(664);const V=e=>{let{StaffArray:l=[],setStaffArray:s,costCenter:a=[],costCategory:t=[]}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"d-flex align-items-center flex-wrap mb-2 border-bottom pb-2",children:[(0,m.jsx)("h6",{className:"flex-grow-1 m-0",children:"Staff Involved"}),(0,m.jsx)(r.c,{variant:"outlined",color:"primary",type:"button",onClick:()=>s((e=>[...e,{...A}])),children:"Add"})]}),(0,m.jsxs)("table",{className:"table table-bordered",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{className:"fa-13",children:"Sno"}),(0,m.jsx)("th",{className:"fa-13",children:"Staff Name"}),(0,m.jsx)("th",{className:"fa-13",children:"Category"}),(0,m.jsx)("th",{className:"fa-13",children:"#"})]})}),(0,m.jsx)("tbody",{children:(0,u.dq)(l).map(((e,r)=>(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"fa-13 vctr text-center",children:r+1}),(0,m.jsx)("td",{className:"fa-13 w-100 p-0",children:(0,m.jsx)(n.cp,{value:{value:null===e||void 0===e?void 0:e.Involved_Emp_Id,label:null===e||void 0===e?void 0:e.EmpName},onChange:e=>s((l=>l.map(((l,s)=>{if((0,u.Qr)(s,r)){const s=(0,u.dq)(a).find((l=>(0,u.Qr)(null===l||void 0===l?void 0:l.Cost_Center_Id,e.value)));return{...l,Cost_Center_Type_Id:(0,u.Q$)(null===l||void 0===l?void 0:l.Cost_Center_Type_Id)?Number(null===l||void 0===l?void 0:l.Cost_Center_Type_Id):(0,u.Q$)(s.User_Type)?Number(s.User_Type):0,Involved_Emp_Id:Number(e.value),EmpName:e.label}}return l})))),options:[...(0,u.dq)(a).filter((e=>!l.some((l=>(0,u.Qr)(l.Emp_Id,e.Cost_Center_Id)))))].map((e=>({value:e.Cost_Center_Id,label:e.Cost_Center_Name}))),styles:i.cF,isSearchable:!0,placeholder:"Select Staff"})}),(0,m.jsx)("td",{className:"fa-13 vctr p-0",style:{maxWidth:"130px",minWidth:"100px"},children:(0,m.jsxs)("select",{value:null===e||void 0===e?void 0:e.Cost_Center_Type_Id,onChange:e=>s((l=>l.map(((l,s)=>(0,u.Qr)(s,r)?{...l,Cost_Center_Type_Id:e.target.value}:l)))),className:"cus-inpt p-2 border-0",children:[(0,m.jsx)("option",{value:"",children:"Select"}),(0,u.dq)(t).map(((e,l)=>(0,m.jsx)("option",{value:null===e||void 0===e?void 0:e.Cost_Category_Id,children:null===e||void 0===e?void 0:e.Cost_Category},l)))]})}),(0,m.jsx)("td",{className:"fa-13 vctr p-0",children:(0,m.jsx)(d.c,{onClick:()=>{s((e=>e.filter(((e,l)=>r!==l))))},size:"small",children:(0,m.jsx)(I.c,{color:"error"})})})]},r)))})]})]})};var B=s(64568);const k=(0,u.gV)().user,E=function(){var e;let l=arguments.length>1?arguments[1]:void 0;return null!==(e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find((e=>(0,u.Qr)(e.Product_Id,l))))&&void 0!==e?e:{}},H=e=>{var l,s;let{loadingOn:v,loadingOff:N}=e;const P=(0,g.i6)(),Q=(0,g.IT)().state,[R,w]=(0,a.useState)({products:[],branch:[],retailers:[],voucherType:[],uom:[],staff:[],staffType:[],salesPerson:[],brand:[]}),[H,D]=(0,a.useState)(T),[z,F]=(0,a.useState)([]),[M,q]=(0,a.useState)([]),[U,$]=(0,a.useState)(null),[L,W]=(0,a.useState)(!1),[X,Y]=(0,a.useState)(!1),J=(0,u.Qr)(H.GST_Inclusive,1),K=(0,u.Qr)(H.GST_Inclusive,2),Z=(0,u.Qr)(H.IS_IGST,1),ee=K?"zerotax":J?"remove":"add";(0,a.useEffect)((()=>{if((0,u.CY)(Q)&&Array.isArray(null===Q||void 0===Q?void 0:Q.Products_List)&&Array.isArray(null===Q||void 0===Q?void 0:Q.Staff_Involved_List)){const{Products_List:e,Staff_Involved_List:l}=Q;D(Object.fromEntries(Object.entries(T).map((e=>{var l;let[s,a]=e;return"So_Date"===s?[s,Q[s]?(0,u.Q7)(Q[s]):a]:[s,null!==(l=Q[s])&&void 0!==l?l:a]})))),F(e.map((e=>Object.fromEntries(Object.entries(y).map((l=>{var s;let[a,t]=l;return[a,null!==(s=e[a])&&void 0!==s?s:t]})))))),q(l.map((e=>Object.fromEntries(Object.entries(A).map((l=>{var s;let[a,t]=l;return[a,null!==(s=e[a])&&void 0!==s?s:t]}))))))}}),[Q]),(0,a.useEffect)((()=>{(async()=>{try{v&&v();const[e,l,s,a,t,r,o,d]=await Promise.all([(0,f.q)({address:"masters/branch/dropDown"}),(0,f.q)({address:"masters/products"}),(0,f.q)({address:`masters/retailers/dropDown?Company_Id=${null===k||void 0===k?void 0:k.Company_id}`}),(0,f.q)({address:"purchase/voucherType"}),(0,f.q)({address:"masters/uom"}),(0,f.q)({address:"dataEntry/costCenter"}),(0,f.q)({address:"dataEntry/costCenter/category"}),(0,f.q)({address:"masters/users/salesPerson/dropDown"})]),n=(e.success?e.data:[]).sort(((e,l)=>String(null===e||void 0===e?void 0:e.BranchName).localeCompare(null===l||void 0===l?void 0:l.BranchName))),i=(l.success?l.data:[]).sort(((e,l)=>String(null===e||void 0===e?void 0:e.Product_Name).localeCompare(null===l||void 0===l?void 0:l.Product_Name))),c=(s.success?s.data:[]).sort(((e,l)=>String(null===e||void 0===e?void 0:e.Retailer_Name).localeCompare(null===l||void 0===l?void 0:l.Retailer_Name))),m=(a.success?a.data:[]).sort(((e,l)=>String(null===e||void 0===e?void 0:e.Voucher_Type).localeCompare(null===l||void 0===l?void 0:l.Voucher_Type))),_=(t.success?t.data:[]).sort(((e,l)=>String(e.Units).localeCompare(l.Units))),h=(r.success?r.data:[]).sort(((e,l)=>String(null===e||void 0===e?void 0:e.Cost_Center_Name).localeCompare(null===l||void 0===l?void 0:l.Cost_Center_Name))),x=(o.success?o.data:[]).sort(((e,l)=>String(null===e||void 0===e?void 0:e.Cost_Category).localeCompare(null===l||void 0===l?void 0:l.Cost_Category))),p=(d.success?d.data:[]).sort(((e,l)=>String(null===e||void 0===e?void 0:e.Name).localeCompare(null===l||void 0===l?void 0:l.Name)));w((e=>({...e,products:i,branch:n,retailers:c,voucherType:m,uom:_,staff:h,staffType:x,salesPerson:p,brand:(0,u.Un)(i,"Brand",["Brand_Name"])})))}catch(e){console.error("Error fetching data:",e)}finally{N&&N()}})()}),[null===k||void 0===k?void 0:k.Company_id]);const le=()=>{D(T),F([]),q([])},se=(0,a.useMemo)((()=>z.reduce(((e,l)=>{const s=(0,u.kR)(null===l||void 0===l?void 0:l.Amount);if(K)return(0,u.Q5)(e,s);const a=E(R.products,l.Item_Id),t=(0,u.Qr)(Z,1)?a.Igst_P:a.Gst_P;return J?(0,u.Q5)(e,(0,b.O)(s,t,"remove").with_tax):(0,u.Q5)(e,(0,b.O)(s,t,"add").with_tax)}),0)),[z,K,R.products,Z,J]),ae=(0,a.useMemo)((()=>z.reduce(((e,l)=>{const s=(0,u.kR)(null===l||void 0===l?void 0:l.Amount);if(K)return{TotalValue:(0,u.Q5)(e.TotalValue,s),TotalTax:0};const a=E(R.products,l.Item_Id),t=(0,u.Qr)(Z,1)?a.Igst_P:a.Gst_P,r=(0,b.O)(s,t,J?"remove":"add");return{TotalValue:(0,u.Q5)(e.TotalValue,r.without_tax),TotalTax:(0,u.Q5)(e.TotalTax,r.tax_amount)}}),{TotalValue:0,TotalTax:0})),[z,K,R.products,Z,J]);return(0,a.useEffect)((()=>{F((e=>[...e].map((e=>Object.fromEntries(Object.entries(y).map((l=>{let[s,a]=l;const t=E(R.products,null===e||void 0===e?void 0:e.Item_Id),r=Z?t.Igst_P:t.Gst_P,o=r>0,{Bill_Qty:d,Item_Rate:n,Amount:i}=e,c=(0,b.O)(n,r,ee),u=(0,b.O)(i,r,ee),v=Z?0:u.cgst_per,m=Z?u.igst_per:0,_=Z?0:u.cgst_amount,h=Z?u.igst_amount:0;switch(s){case"Taxable_Rate":return[s,c.base_amount];case"Total_Qty":return[s,d];case"Taxble":return[s,o?1:0];case"Taxable_Amount":return[s,u.base_amount];case"Tax_Rate":return[s,r];case"Cgst":case"Sgst":return[s,null!==v&&void 0!==v?v:0];case"Cgst_Amo":case"Sgst_Amo":return[s,K?0:_];case"Igst":return[s,null!==m&&void 0!==m?m:0];case"Igst_Amo":return[s,K?0:h];case"Final_Amo":return[s,u.with_tax];default:return[s,e[s]||a]}})))))))}),[y,R.products,Z,ee]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(G.c,{orderProducts:z,setOrderProducts:F,open:L,onClose:()=>{W(!1),$(null)},products:R.products,brands:R.brand,uom:R.uom,GST_Inclusive:H.GST_Inclusive,IS_IGST:Z,editValues:U,initialValue:y}),(0,m.jsxs)(t.c,{children:[(0,m.jsxs)("div",{className:"d-flex align-items-center flex-wrap p-2",children:[(0,m.jsx)("h5",{className:"flex-grow-1 ps-2",children:"Sale Order Creation"}),(0,m.jsx)(r.c,{variant:"outlined",sx:{ml:1},startIcon:(0,m.jsx)(_,{}),onClick:()=>P("/erp/sales/saleOrder"),children:"Back"}),(0,m.jsx)(r.c,{variant:"outlined",sx:{ml:1},startIcon:(0,m.jsx)(h.c,{}),onClick:le,children:"Clear"})]}),(0,m.jsxs)(o.c,{children:[(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"col-xxl-3 col-lg-4 col-md-5 p-2",children:(0,m.jsx)("div",{className:"border p-2",style:{minHeight:"30vh",height:"100%"},children:(0,m.jsx)(V,{StaffArray:M,setStaffArray:q,costCenter:R.staff,costCategory:R.staffType})})}),(0,m.jsx)("div",{className:"col-xxl-9 col-lg-8 col-md-7 py-2 px-0",children:(0,m.jsx)("div",{className:"border px-3 py-1",style:{minHeight:"30vh",height:"100%"},children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-sm-8 p-2",children:[(0,m.jsxs)("label",{className:"fa-13",children:["Retailer Name ",(0,m.jsx)(B.c,{})]}),(0,m.jsx)(n.cp,{value:{value:null===H||void 0===H?void 0:H.Retailer_Id,label:null===H||void 0===H?void 0:H.Retailer_Name},onChange:e=>{D({...H,Retailer_Id:e.value,Retailer_Name:e.label}),F([])},options:[{value:"",label:"select",isDisabled:!0},...R.retailers.map((e=>({value:null===e||void 0===e?void 0:e.Retailer_Id,label:null===e||void 0===e?void 0:e.Retailer_Name})))],styles:i.cF,isSearchable:!0,placeholder:"Retailer Name",maxMenuHeight:200})]}),(0,m.jsxs)("div",{className:"col-sm-4 p-2",children:[(0,m.jsxs)("label",{className:"fa-13",children:["Voucher Type ",(0,m.jsx)(B.c,{})]}),(0,m.jsxs)("select",{className:"cus-inpt p-2",onChange:e=>D({...H,VoucherType:Number(e.target.value)}),value:H.VoucherType,children:[(0,m.jsx)("option",{value:"",disabled:!0,children:"select voucher"}),null===(l=R.voucherType)||void 0===l?void 0:l.filter((e=>"SALES"===e.Type)).map(((e,l)=>(0,m.jsx)("option",{value:e.Vocher_Type_Id,children:e.Voucher_Type},l)))]})]}),(0,m.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,m.jsxs)("label",{className:"fa-13",children:["Date ",(0,m.jsx)(B.c,{})]}),(0,m.jsx)("input",{type:"date",value:null!==H&&void 0!==H&&H.So_Date?(0,u.Q7)(null===H||void 0===H?void 0:H.So_Date):"",onChange:e=>D({...H,So_Date:e.target.value}),className:"cus-inpt p-2"})]}),(0,m.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,m.jsxs)("label",{className:"fa-13",children:["Invoice Type ",(0,m.jsx)(B.c,{})]}),(0,m.jsxs)("select",{className:"cus-inpt p-2",onChange:e=>D({...H,GST_Inclusive:Number(e.target.value)}),value:H.GST_Inclusive,children:[(0,m.jsx)("option",{value:1,children:"Inclusive Tax"}),(0,m.jsx)("option",{value:0,children:"Exclusive Tax"}),(0,m.jsx)("option",{value:2,children:"Not Taxable"})]})]}),(0,m.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,m.jsxs)("label",{className:"fa-13",children:["Tax Type ",(0,m.jsx)(B.c,{})]}),(0,m.jsxs)("select",{className:"cus-inpt p-2",onChange:e=>D({...H,IS_IGST:Number(e.target.value)}),value:H.IS_IGST,children:[(0,m.jsx)("option",{value:"0",children:"GST"}),(0,m.jsx)("option",{value:"1",children:"IGST"})]})]}),(0,m.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,m.jsxs)("label",{className:"fa-13",children:["Sales Person ",(0,m.jsx)(B.c,{})]}),(0,m.jsxs)("select",{className:"cus-inpt p-2",onChange:e=>D({...H,Sales_Person_Id:Number(e.target.value)}),value:H.Sales_Person_Id,children:[(0,m.jsx)("option",{value:"",disabled:!0,children:"select sales person"}),(0,m.jsx)("option",{value:null===k||void 0===k?void 0:k.UserId,children:null===k||void 0===k?void 0:k.Name}),null===(s=R.salesPerson)||void 0===s?void 0:s.map(((e,l)=>(0,m.jsx)("option",{value:e.UserId,children:e.Name},l)))]})]}),(0,m.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,m.jsxs)("label",{className:"fa-13",children:["Branch ",(0,m.jsx)(B.c,{})]}),(0,m.jsxs)("select",{className:"cus-inpt p-2",onChange:e=>D({...H,Branch_Id:Number(e.target.value)}),value:H.Branch_Id,children:[(0,m.jsx)("option",{value:"",disabled:!0,children:"select Branch"}),R.branch.map(((e,l)=>(0,m.jsx)("option",{value:e.BranchId,children:e.BranchName},l)))]})]}),(0,m.jsxs)("div",{className:"col-12 p-2",children:[(0,m.jsx)("label",{className:"fa-13",children:"Narration"}),(0,m.jsx)("textarea",{className:"cus-inpt ",value:H.Narration,onChange:e=>D((l=>({...l,Narration:e.target.value})))})]})]})})})]}),(0,m.jsx)(S.cp,{title:"Products",ButtonArea:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(r.c,{onClick:()=>{$(null),W(!0)},sx:{ml:1},variant:"outlined",startIcon:(0,m.jsx)(x.c,{}),disabled:!(0,u.Q$)(H.Retailer_Id)||z.length>0&&z.some((e=>(0,u.Q$)(e.Pre_Id))),children:"Add Product"}),(0,m.jsx)(O,{loadingOn:v,loadingOff:N,open:X,onClose:()=>Y(!1),retailer:null===H||void 0===H?void 0:H.Retailer_Id,selectedItems:z,setSelectedItems:F,products:R.products,GST_Inclusive:H.GST_Inclusive,IS_IGST:Z,children:(0,m.jsx)(r.c,{onClick:()=>Y(!0),disabled:!(0,u.Q$)(H.Retailer_Id)||z.length>0&&z.some((e=>!(0,u.Q$)(e.Pre_Id))),sx:{ml:1},variant:"outlined",startIcon:(0,m.jsx)(p.c,{}),children:"Import pos"})})]}),dataArray:z,columns:[{isCustomCell:!0,Cell:e=>{let{row:l}=e;return E(R.products,null===l||void 0===l?void 0:l.Item_Id).Product_Name},ColumnHeader:"Product",isVisible:1},{isCustomCell:!0,Cell:e=>{var l;let{row:s}=e;return null===(l=E(R.products,null===s||void 0===s?void 0:s.Item_Id).Product_Name)||void 0===l?void 0:l.HSN_Code},ColumnHeader:"HSN Code",isVisible:1},{isCustomCell:!0,Cell:e=>{var l;let{row:s}=e;return(null===s||void 0===s?void 0:s.Bill_Qty)+" "+(null!==(l=null===s||void 0===s?void 0:s.Units)&&void 0!==l?l:"")},ColumnHeader:"Quantity",isVisible:1,align:"center"},(0,S.A5)("Item_Rate","number","Rate","right"),(0,S.A5)("Taxable_Amount","number","Taxable Amount","right"),{isCustomCell:!0,Cell:e=>{var l;let{row:s}=e;const a=null===(l=E(R.products,null===s||void 0===s?void 0:s.Item_Id))||void 0===l?void 0:l.Gst_P,t=(0,u.gH)(null===s||void 0===s?void 0:s.Amount),r=(0,b.O)(t,a,ee);return(0,u.SA)(r.tax_amount)+" ("+r.tax_per+"%)"},ColumnHeader:"Tax",isVisible:1,align:"right"},{ColumnHeader:"Amount",isCustomCell:!0,Cell:e=>{var l,s;let{row:a}=e;const t=null===(l=E(R.products,null===a||void 0===a?void 0:a.Item_Id))||void 0===l?void 0:l.Gst_P,r=null!==(s=a.Amount)&&void 0!==s?s:0,o=(0,b.O)(r,t,ee).tax_amount;return(0,u.SA)((0,u.Qr)(H.GST_Inclusive,1)?r:(0,u.Q5)(r,o))},isVisible:1,align:"right"},{isCustomCell:!0,Cell:e=>{let{row:l}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(d.c,{onClick:()=>{$(l),W(!0)},size:"small",children:(0,m.jsx)(j.c,{})}),(0,m.jsx)(d.c,{size:"small",onClick:()=>{(0,u.Q$)(null===l||void 0===l?void 0:l.Pre_Id)?F((e=>e.filter((e=>!(0,u.Qr)(null===e||void 0===e?void 0:e.Pre_Id,null===l||void 0===l?void 0:l.Pre_Id))))):F((e=>e.filter((e=>!(0,u.Qr)(e.Item_Id,l.Item_Id)))))},color:"error",children:(0,m.jsx)(I.c,{})})]})},ColumnHeader:"Action",isVisible:1}],EnableSerialNumber:!0,CellSize:"small",disablePagination:!0}),z.length>0&&(0,m.jsx)("div",{className:"d-flex justify-content-end py-2",children:(0,m.jsx)("table",{className:"table",children:(0,m.jsxs)("tbody",{children:[(0,m.jsxs)("tr",{children:[(0,m.jsxs)("td",{className:"border p-2",rowSpan:(0,u.Qr)(H.IS_IGST,1)?4:5,children:["Total in words: ",(0,u.m4)(parseInt(se))]}),(0,m.jsx)("td",{className:"border p-2",children:"Total Taxable Amount"}),(0,m.jsx)("td",{className:"border p-2",children:(0,u.SA)(ae.TotalValue)})]}),(0,u.Qr)(H.IS_IGST,1)?(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"border p-2",children:"IGST"}),(0,m.jsx)("td",{className:"border p-2",children:(0,u.SA)(ae.TotalTax)})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"border p-2",children:"CGST"}),(0,m.jsx)("td",{className:"border p-2",children:(0,u.SA)(ae.TotalTax/2)})]}),(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"border p-2",children:"SGST"}),(0,m.jsx)("td",{className:"border p-2",children:(0,u.SA)(ae.TotalTax/2)})]})]}),(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"border p-2",children:"Round Off"}),(0,m.jsx)("td",{className:"border p-2",children:(0,u.kR)(Math.round(se)-se)})]}),(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"border p-2",children:"Total"}),(0,m.jsx)("td",{className:"border p-2",children:(0,u.SA)(Math.round(se))})]})]})})}),(0,m.jsx)("div",{className:"d-flex justify-content-end",children:(0,m.jsx)(r.c,{onClick:()=>{if((null===z||void 0===z?void 0:z.length)>0&&null!==H&&void 0!==H&&H.Retailer_Id)v(),(0,f.q)({address:"sales/saleOrder",method:(0,u.Q$)(null===H||void 0===H?void 0:H.So_Id)?"PUT":"POST",bodyData:{...H,Product_Array:z.filter((e=>(0,u.QT)(null===e||void 0===e?void 0:e.Bill_Qty,0))),Staff_Involved_List:M}}).then((e=>{e.success?(c.m4.success(null===e||void 0===e?void 0:e.message),le()):c.m4.error(null===e||void 0===e?void 0:e.message)})).catch((e=>console.error(e))).finally((()=>N()));else{if(z.length<=0)return c.m4.error("Enter any one product quantity");if(null===H||void 0===H||!H.Retailer_Id)return c.m4.error("Select Retailer")}},sx:{ml:1},variant:"outlined",color:"success",startIcon:(0,m.jsx)(C.c,{}),disabled:0===(null===z||void 0===z?void 0:z.length)||!(null!==H&&void 0!==H&&H.Retailer_Id),children:"Save"})})]})]})]})}},96064:(e,l,s)=>{s.d(l,{c:()=>r});var a=s(27664),t=s(82496);const r=(0,a.c)((0,t.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},80156:(e,l,s)=>{s.d(l,{c:()=>r});var a=s(27664),t=s(82496);const r=(0,a.c)((0,t.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear")},56084:(e,l,s)=>{s.d(l,{c:()=>r});var a=s(27664),t=s(82496);const r=(0,a.c)((0,t.jsx)("path",{d:"M5 13h14v-2H5zm-2 4h14v-2H3zM7 7v2h14V7z"}),"ClearAll")},45180:(e,l,s)=>{s.d(l,{c:()=>r});var a=s(27664),t=s(82496);const r=(0,a.c)((0,t.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},42376:(e,l,s)=>{s.d(l,{c:()=>r});var a=s(27664),t=s(82496);const r=(0,a.c)((0,t.jsx)("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"}),"Done")},86e3:(e,l,s)=>{s.d(l,{c:()=>r});var a=s(27664),t=s(82496);const r=(0,a.c)((0,t.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},36992:(e,l,s)=>{s.d(l,{c:()=>r});var a=s(27664),t=s(82496);const r=(0,a.c)((0,t.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save")},84436:(e,l,s)=>{s.d(l,{c:()=>x});var a=s(45072),t=s(95656),r=s(69060),o=s(79736),d=s(21412),n=s(12556),i=s(49836),c=s(10099),u=s(33448);function v(e){return(0,u.cp)("MuiCardContent",e)}(0,c.c)("MuiCardContent",["root"]);var m=s(82496);const _=["className","component"],h=(0,n.cp)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,l)=>l.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),x=r.forwardRef((function(e,l){const s=(0,i.C)({props:e,name:"MuiCardContent"}),{className:r,component:n="div"}=s,c=(0,t.c)(s,_),u=(0,a.c)({},s,{component:n}),x=(e=>{const{classes:l}=e;return(0,d.c)({root:["root"]},v,l)})(u);return(0,m.jsx)(h,(0,a.c)({as:n,className:(0,o.c)(x.root,r),ownerState:u,ref:l},c))}))}}]);
//# sourceMappingURL=8117.3cf15aa2.chunk.js.map