"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[1684],{62344:(e,t,a)=>{a.d(t,{o$:()=>r,o5:()=>c,cF:()=>s,iI:()=>o});var l=a(30800);const n=a.p+"static/media/smt.aa4d4f940bbebff07a57.png",o={table:{style:{width:"auto",backgroundColor:"transparent"}},rows:{style:{backgroundColor:"transparent"}},headCells:{style:{backgroundColor:"#6b9080f8",color:"white",fontSize:"14px"}}},s={menu:(e,t)=>(0,l.c)((0,l.c)({},e),{},{zIndex:9999}),menuPortal:e=>(0,l.c)((0,l.c)({},e),{},{zIndex:9999}),groupHeading:e=>(0,l.c)((0,l.c)({},e),{},{backgroundColor:"#f5f5f5",color:"#333",fontWeight:"bold",fontSize:"14px",padding:"8px 12px",borderBottom:"1px solid #ddd",textTransform:"uppercase"}),option:(e,t)=>(0,l.c)((0,l.c)({},e),{},{backgroundColor:t.isSelected?"#2684FF":t.isFocused?"#E2ECF9":"white",color:t.isSelected?"white":"#333",padding:"10px 12px"})},r=[{id:1,headname:"Menu ID",variant:"head",align:"left",width:100},{id:2,headname:"MenuName"},{id:3,headname:"Read Rights"},{id:4,headname:"Add Rights"},{id:5,headname:"Edit Rights"},{id:6,headname:"Delete Rights"},{id:7,headname:"Print Rights"},{id:8,headname:"Action"}],c=[{dataBase:1,name:"SHANKAR TRADERS",business:"Wholesale Merchant in Dhall",address:"32, Chitrakara Street, Madurai - 01 <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:n,gstin:"33AADFS6973R1ZD",phone:"984-313-1353, 984-335-5166",fssai:"12418012000818",bankAccount:"0021 5032 0885 122",ifsc:"TMBL0000002"},{dataBase:2,name:"SMT AGRO PRODUCTS",business:"",address:"H.O: 153, Chitrakara Street, 2nd Floor, Madurai -01 <br /> G.O: 746 Puliyur, Sayanapuram, Svga <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:n,gstin:"33ACMFS3420Q1ZQ",phone:"0452-4371625",fssai:"12418012000818",bankAccount:"0025 3031 0875 947",ifsc:"TMBL0000002"},{dataBase:3,name:"BHAVANI TRADERS",business:"",address:"H.O: 152-A, Chitrakara Street, Madurai -01 <br /> G.O: 30/1-Rajman Nagar, Chintamani Main Road, Mdu-01 <br /> Tax Invoice",logo:n,gstin:"33AAEFB6728J1ZG",phone:"958-559-7641, 958-559-7614",fssai:"12418012000670",bankAccount:"0021 5005 0800 309",ifsc:"TMBL0000002"}]},27112:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var l=a(30800),n=a(69060),o=a(5548),s=a(82656),r=a(26773),c=a(4488),d=a(90048),i=a(40656),m=a(62344),p=a(39308),u=a(57704),h=a(31664),x=a(1908),y=a(13724),v=a(77536),g=a(51560),b=a(27532),f=a(89e3),D=a(71448),j=a(44380),A=a(43692),C=a(84436),T=a(56480),N=a(35832),E=a(82496);const S=e=>{var t,a;let{loadingOn:S,loadingOff:I}=e;const w=JSON.parse(localStorage.getItem("user")),F=(0,g.i6)(),L=(0,g.IT)(),M=L.state,[k,_]=(0,n.useState)(!1),P=()=>{const e=new Date,t=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0");return"".concat(t,"-").concat(a)},O={From:P(),To:P(),EmpId:"0",Name:"ALL"},U=new URLSearchParams((0,g.IT)().search),R={From:P(),To:P()},[z,B]=(0,n.useState)([]),[W,H]=(0,n.useState)("default"),[$,J]=(0,n.useState)([]),[q,V]=(0,n.useState)([]),[Y,Q]=(0,n.useState)(!1),[G,Z]=(0,n.useState)([]),[K,X]=(0,n.useState)(!0),[ee,te]=(0,n.useState)(!1),[ae,le]=(0,n.useState)([]),[ne,oe]=(0,n.useState)(null),se=null===w||void 0===w?void 0:w.UserTypeId,re=w,{contextObj:ce}=(0,n.useContext)(v.a),[de,ie]=(0,n.useState)("ALL"),[me,pe]=(0,n.useState)(O),[ue,he]=(0,n.useState)(me);(0,n.useEffect)((()=>{const e=setTimeout((()=>{he(me)}),500);return()=>clearTimeout(e)}),[me]),(0,n.useEffect)((()=>{const{From:e,EmpId:t}=ue;e&&(t||0===t)&&(Me(e,t),Le())}),[ue]);const xe=e=>{if(!e)return 0;const[t,a]=e.split("-");return new Date(t,a,0).getDate()},[ye,ve]=(0,n.useState)({FromDate:(new Date).toISOString().split("T")[0],ToDate:(new Date).toISOString().split("T")[0],Cancel_status:0}),[ge,be]=(0,n.useState)([]),[fe,De]=(0,n.useState)(null),[je,Ae]=(0,n.useState)([]),Ce=null===ce||void 0===ce?void 0:ce.Add_Rights;(0,n.useEffect)((()=>{S&&S();const e=(new Date).toISOString().split("T")[0],t=ye.FromDate||e,a=ye.ToDate||e;(0,x.q)({address:"empAttendance/departmentwise?FromDate=".concat(t,"&ToDate=").concat(a)}).then((e=>{e.success&&B(null===e||void 0===e?void 0:e.data)})).catch((e=>console.error(e))).finally((()=>{I&&I()}))}),[Y]);const Te=e=>{const t=e.target.value,[a,l]=t.split("-"),n="".concat(a,"-").concat(l,"-01"),o=(e=>{if(!e)return 0;const[t,a]=e.split("-");return new Date(t,a,0).getDate()})("".concat(a,"-").concat(l)),s="".concat(a,"-").concat(l,"-").concat(o);pe({From:n,To:s,EmpId:me.EmpId||0,Name:null===me||void 0===me?void 0:me.Name})},Ne=async()=>{try{const e=me.From,[t,a]=e.split("-"),l="".concat(t,"-").concat(a,"-01"),n=xe("".concat(t,"-").concat(a)),o="".concat(t,"-").concat(a,"-").concat(n),s=await(0,x.q)({address:"userModule/employeActivity/employeeAttendanceModuledownload?FromDate=".concat(l,"&ToDate=").concat(o)});if(s.success){const e=s.data,n=(e,t)=>{const a=[],l=new Date(e),n=new Date(t);let o=0;for(;l<=n;){const e=new Date(l).toISOString().split("T")[0];a.push(e),0===l.getDay()&&o++,l.setDate(l.getDate()+1)}return 0===a.length&&a.push("No days in this range"),{days:a,sundayCount:o,totalDays:a.length}},{days:r,sundayCount:c,totalDays:d}=n(l,o);let i=0,m=0;const p=e.map((e=>{const l=e.AttendanceDetails?JSON.parse(e.AttendanceDetails):[];let n=0,o=0;return r.forEach((e=>{if(Array.isArray(l)){const t=l.find((t=>t.Date===e));if(0===new Date(e).getDay())return;t?"P"===t.AttendanceStatus?n++:"A"===t.AttendanceStatus&&o++:o++}})),i+=n,m+=o,{EmployeeName:e.Name,EmployeeID:e.EmployeeID,Month:"".concat(a,"-").concat(t),Branch:e.Branch,NumberOfSundays:c,NumberOfDaysInMonth:d,TotalWorkingDays:n,TotalLeaveDays:o}})).map((e=>({EmployeeName:e.EmployeeName,EmployeeID:e.EmployeeID,Month:e.Month,Branch:e.Branch,NumberOfSundays:e.NumberOfSundays,NumberOfDaysInMonth:e.NumberOfDaysInMonth,TotalWorkingDays:e.TotalWorkingDays,TotalLeaveDays:e.TotalLeaveDays}))),u=N.c$.json_to_sheet(p),h=["EmployeeName","EmployeeID","Month","Branch","NumberOfSundays","NumberOfDaysInMonth","TotalWorkingDays","TotalLeaveDays"];N.c$.sheet_add_aoa(u,[h],{origin:"A1"});const x=N.c$.book_new();N.c$.book_append_sheet(x,u,"Attendance Summary Report"),N.a8(x,"Attendance_Summary_Report.xlsx")}}catch(e){console.error("Error downloading overall report:",e)}},Ee=()=>{const e=G.map((e=>{const t=e.AttendanceDetails?e.AttendanceDetails.split(",").map((e=>e.trim())):[],a={};let n=!0;for(let l=0;l<6;l++){const e=t[l]||"--";a["Punch ".concat(l+1)]=e,"--"!==e&&(n=!1)}const o=n?"A":"P";return(0,l.c)({Employee:e.username,"Log Date":Ie(e.LogDate),"Attendance Status":o},a)})),t=["Employee","Log Date","Attendance Status",...Array.from({length:6},((e,t)=>"Punch ".concat(t+1)))],a=e.map((e=>t.reduce(((t,a)=>(t[a]=e[a]||"--",t)),{}))),n=N.c$.json_to_sheet(a),o=N.c$.book_new();N.c$.book_append_sheet(o,n,"Attendance Report"),N.a8(o,"Attendance_Report.xlsx")},Se=Array.from({length:6},((e,t)=>({isCustomCell:!0,ColumnHeader:"Punch ".concat(t+1),isVisible:1,width:"13%",CellProps:{sx:{display:"flex",justifyContent:"center",alignItems:"center",padding:"10px"}},Cell:e=>{let{row:a}=e;const l=((a.AttendanceDetails?a.AttendanceDetails.split(",").map((e=>e.trim())).filter((e=>""!==e)):[])[t]||"--").split(" (")[0];return"--"!==l?(0,E.jsx)(b.c,{label:l,variant:"outlined",size:"small",sx:{color:"green",margin:"2px"}}):(0,E.jsx)("div",{style:{color:"gray"},children:"--"})}}))),Ie=e=>{if(!e)return"--";const[t]=e.split("T");return"".concat(t," ")},we=async()=>{try{const e=me.From,[t,a]=e.split("-"),n="".concat(t,"-").concat(a,"-01"),o=xe("".concat(t,"-").concat(a)),s="".concat(t,"-").concat(a,"-").concat(o),r=await(0,x.q)({address:"userModule/employeActivity/employeeAttendanceModuledownload?FromDate=".concat(n,"&ToDate=").concat(s)});if(r.success){const e=r.data,t=(e,t)=>{const a=[],l=new Date(e),n=new Date(t);for(;l<=n;)a.push(new Date(l).toISOString().split("T")[0]),l.setDate(l.getDate()+1);return{days:a,count:a.length}},{days:a}=t(n,s),o=e.map((e=>{let t=[];try{t=e.AttendanceDetails?JSON.parse(e.AttendanceDetails):[]}catch(s){console.error("Error parsing AttendanceDetails for employee:",e.username,s),t=[]}const n={};let o=0;return a.forEach(((e,a)=>{if(0===new Date(e).getDay())n["Day ".concat(a+1)]="H";else if(Array.isArray(t)){const l=t.find((t=>t.Date===e));n["Day ".concat(a+1)]=l?l.AttendanceStatus:"A",l&&"P"===l.AttendanceStatus&&o++}else n["Day ".concat(a+1)]="A"})),(0,l.c)({EmployeeName:e.username||e.Name,TotalPresent:o},n)})),c=["EmployeeName","TotalPresent",...a.map(((e,t)=>"Day ".concat(t+1)))],d=N.c$.json_to_sheet(o);N.c$.sheet_add_aoa(d,[c],{origin:"A1"});const i=N.c$.book_new();N.c$.book_append_sheet(i,d,"Overall Attendance Report"),N.a8(i,"Overall_Attendance_Report.xlsx")}}catch(e){console.error("Error downloading overall report:",e)}},Fe=()=>{var e;const t=G.filter((e=>je.some((t=>Number(t.UserId)===Number(e.User_Mgt_Id)||"ALL"===t.UserId)))),a=t.reduce(((e,t)=>{const a=t.username;return e[a]||(e[a]=[]),e[a].push(t),e}),{});if(0===Object.keys(a).length)return void T.m4.error("No attendance data found");const n=N.c$.book_new(),o=null===(e=t[0])||void 0===e?void 0:e.LogDate;if(!o)return void console.error("No log date found in the filtered attendance data.");const s=new Date(o),r=s.getFullYear(),c=s.toLocaleString("default",{month:"long"});Object.entries(a).forEach((e=>{let[t,a]=e;const o=a.map((e=>{const t=e.AttendanceDetails?e.AttendanceDetails.split(",").map((e=>e.trim())):[],a={};let n=!0;for(let l=0;l<6;l++){const e=t[l]||"--";a["Punch ".concat(l+1)]=e,"--"!==e&&(n=!1)}const o=n?"A":"P";return(0,l.c)({Employee:e.username,"Log Date":Ie(e.LogDate),"Attendance Status":o},a)})),s=["Employee","Log Date","Attendance Status",...Array.from({length:6},((e,t)=>"Punch ".concat(t+1)))],r=o.map((e=>s.reduce(((t,a)=>(t[a]=e[a]||"--",t)),{}))),c=t.slice(0,31),d=N.c$.json_to_sheet(r);N.c$.book_append_sheet(n,d,c)}));const d="Attendance_Report_".concat(c,"_").concat(r,".xlsx");N.a8(n,d)},Le=async()=>{X(!0);try{const e=await(0,x.q)({address:"masters/Employeedetails/dropDown?Company_id=".concat(re.Company_id)});e.success&&V(e.data)}catch(e){console.error(e),T.m4.error("Failed to fetch employees for dropdown")}finally{X(!1)}};(0,n.useEffect)((()=>{const e=null===w||void 0===w?void 0:w.UserTypeId,t=null===w||void 0===w?void 0:w.UserId,a=null===w||void 0===w?void 0:w.Company_id;(0,x.q)({address:"masters/users/employee/dropDown?Company_id=".concat(a),headers:{Authorization:"Bearer ".concat(localStorage.getItem("Autheticate_Id"))}}).then((a=>{if(a.success){let n=[];1===Number(e)||0===Number(e)||1===Number(Ce)?(n=a.data,pe((e=>(0,l.c)((0,l.c)({},e),{},{EmpId:0,Name:"ALL"}))),te(!1),ie("ALL")):(n=a.data.filter((e=>e.UserId===t)),pe((e=>(0,l.c)((0,l.c)({},e),{},{EmpId:t,Name:null===w||void 0===w?void 0:w.Name}))),te(!0),ie(null===w||void 0===w?void 0:w.Name)),le(n)}})).catch((e=>console.error("Error fetching employees:",e)))}),[null===w||void 0===w?void 0:w.UserTypeId,null===w||void 0===w?void 0:w.UserId,null===w||void 0===w?void 0:w.Company_id,null===w||void 0===w?void 0:w.Name,Y]);const Me=async(e,t)=>{try{const a=null===w||void 0===w?void 0:w.UserTypeId,[l,n]=e.split("-"),o="".concat(l,"-").concat(n,"-01"),s=xe("".concat(l,"-").concat(n)),r="".concat(l,"-").concat(n,"-").concat(s),c=await(0,x.q)({address:"userModule/employeActivity/trackActivitylogAttendance?FromDate=".concat(o,"&ToDate=").concat(r,"&UserTypeId=").concat(a,"&UserId=").concat(t),headers:{Authorization:"Bearer ".concat(localStorage.getItem("Autheticate_Id"))}});c.success&&Z(c.data)}catch(a){console.error("Error fetching attendance data:",a)}};(0,n.useEffect)((()=>{const e={FromDate:U.get("FromDate")&&(0,p.e8)(U.get("FromDate"))?U.get("FromDate"):R.Fromdate,ToDate:U.get("ToDate")&&(0,p.e8)(U.get("ToDate"))?U.get("ToDate"):R.Todate};ve((t=>(0,l.c)((0,l.c)({},t),{},{FromDate:e.FromDate,ToDate:e.ToDate})))}),[L.search]),(0,n.useEffect)((()=>{const e=null!==M&&void 0!==M&&M.FromDate&&(0,p.e8)(null===M||void 0===M?void 0:M.FromDate)?(0,p.Q7)(null===M||void 0===M?void 0:M.FromDate):null,t=null!==M&&void 0!==M&&M.ToDate&&(0,p.e8)(null===M||void 0===M?void 0:M.ToDate)?(0,p.Q7)(null===M||void 0===M?void 0:M.ToDate):null;e&&t&&(ke({FromDate:e,ToDate:t}),ve((e=>(0,l.c)((0,l.c)({},e),{},{FromDate:(0,p.Q7)(M.FromDate),ToDate:M.ToDate}))),Q((e=>!e)))}),[M]);const ke=e=>{const t=new URLSearchParams(e);F("?".concat(t.toString()),{replace:!0})},_e=()=>{_(!1)},Pe=()=>H("employee"),Oe=()=>H("department"),Ue=()=>{ve((e=>(0,l.c)((0,l.c)({},e),{},{FromDate:e.FromDate||(new Date).toISOString().split("T")[0],ToDate:e.ToDate||(new Date).toISOString().split("T")[0]}))),H("default")},Re=()=>{window.location.reload()},ze=e=>{let{row:t}=e,a=[],l=[];try{a="string"===typeof t.Employees?JSON.parse(t.Employees):t.Employees||[],l="string"===typeof t.MonthlyAverageAttendance?JSON.parse(t.MonthlyAverageAttendance):t.MonthlyAverageAttendance||[]}catch(s){a=[],l=[]}const n=(new Date).getFullYear(),o=new Map;return l.forEach((e=>{var t;const a="".concat(e.MonthNumber,"-").concat(e.YearNumber);o.set(a,null!==(t=e.UniqueEmployeeDays)&&void 0!==t?t:0)})),(0,E.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:(0,E.jsxs)("div",{style:{display:"flex",gap:"20px"},children:[(0,E.jsxs)("table",{style:{width:"60%",borderCollapse:"collapse",border:"1px solid #ccc"},children:[(0,E.jsx)("thead",{children:(0,E.jsxs)("tr",{style:{backgroundColor:"#f0f0f0"},children:[(0,E.jsx)("th",{style:{border:"1px solid #ccc",padding:"5px",textAlign:"left"},children:"Emp_Name"}),(0,E.jsx)("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"Sex"})]})}),(0,E.jsx)("tbody",{children:a&&a.length>0?a.map(((e,t)=>(0,E.jsxs)("tr",{children:[(0,E.jsx)("td",{style:{border:"1px solid #ccc",padding:"8px"},children:(null===e||void 0===e?void 0:e.Emp_Name)||"-"}),(0,E.jsx)("td",{style:{border:"1px solid #ccc",padding:"8px"},children:(null===e||void 0===e?void 0:e.Sex)||"-"})]},t))):(0,E.jsx)("tr",{children:(0,E.jsx)("td",{colSpan:"2",style:{padding:"8px"},children:"No Employees Available"})})})]}),(0,E.jsxs)("div",{style:{flex:"1",border:"1px solid #ddd",borderRadius:"5px",padding:"10px",overflowX:"auto",whiteSpace:"nowrap"},children:[(0,E.jsx)("h3",{style:{textAlign:"center"},children:"Months & Attendance"}),(0,E.jsx)("div",{style:{display:"flex",gap:"10px"},children:[{name:"January",number:1},{name:"February",number:2},{name:"March",number:3},{name:"April",number:4},{name:"May",number:5},{name:"June",number:6},{name:"July",number:7},{name:"August",number:8},{name:"September",number:9},{name:"October",number:10},{name:"November",number:11},{name:"December",number:12}].map((e=>{var t;const a="".concat(e.number,"-").concat(n),l=null!==(t=o.get(a))&&void 0!==t?t:0;return(0,E.jsxs)("div",{style:{minWidth:"100px",padding:"8px",backgroundColor:"#f0f0f0",color:"black",borderRadius:"4px",textAlign:"center",userSelect:"none"},children:[(0,E.jsxs)("div",{style:{fontWeight:"bold"},children:[e.name," ",n]}),(0,E.jsx)("div",{style:{marginTop:"6px",fontSize:"14px",color:"#555"},children:l})]},e.number)}))})]})]})})};(0,n.useEffect)((()=>{const e=null===w||void 0===w?void 0:w.UserTypeId,t=null===w||void 0===w?void 0:w.UserId,a=null===w||void 0===w?void 0:w.Company_id;(0,x.q)({address:"masters/users/employee/dropDown?Company_id=".concat(a),headers:{Authorization:"Bearer ".concat(localStorage.getItem("Autheticate_Id"))}}).then((a=>{if(a.success){let n=[];1===Number(e)||0===Number(e)||1===Number(Ce)?(n=a.data,pe((e=>(0,l.c)((0,l.c)({},e),{},{EmpId:0,Name:"ALL"}))),te(!1),ie("ALL")):(n=a.data.filter((e=>e.UserId===t)),pe((e=>(0,l.c)((0,l.c)({},e),{},{EmpId:t,Name:null===w||void 0===w?void 0:w.Name}))),te(!0),ie(null===w||void 0===w?void 0:w.Name)),le(n)}})).catch((e=>console.error("Error fetching employees:",e)))}),[null===w||void 0===w?void 0:w.UserTypeId,null===w||void 0===w?void 0:w.UserId,null===w||void 0===w?void 0:w.Company_id,null===w||void 0===w?void 0:w.Name]),(0,n.useEffect)((()=>{const e=null===w||void 0===w?void 0:w.Company_id;(0,x.q)({address:"empAttendance/department?Company_id=".concat(e),headers:{Authorization:"Bearer ".concat(localStorage.getItem("Autheticate_Id"))}}).then((e=>{if(e.success&&e.others&&e.others.department){const t=e.others.department.map((e=>({value:e.value,label:e.label})));be(t)}})).catch((e=>console.error("Error fetching departments:",e)))}),[null===w||void 0===w?void 0:w.Company_id,Y]);const Be=e=>{De(e),le([]),oe(null),e?(0,x.q)({address:"empAttendance/employeesByDepartment",method:"POST",bodyData:{department:e.value}}).then((e=>{var t;if(e.success&&null!==(t=e.others)&&void 0!==t&&t.employees){const t=e.others.employees.map((e=>({value:e.id||e.value||e.Emp_Id,label:e.name||e.label||e.Emp_Name})));le(t)}else le([])})).catch((e=>{console.error("Error fetching employees:",e),le([])})):le([])},We=n.useMemo((()=>{var e;if(null===z||void 0===z||null===(e=z[0])||void 0===e||!e.DepartmentWiseCounts)return[];try{const e=JSON.parse(z[0].DepartmentWiseCounts);return Array.isArray(e)?e:[]}catch(t){return console.error("Failed to parse DepartmentWiseCounts JSON:",t),[]}}),[z]),He=n.useMemo((()=>{if(!We.length)return[];return We.filter((e=>!fe||e.Department===fe.label)).map((e=>{const t=ne?e.Employees.filter((e=>!!e.Emp_Name&&e.Emp_Name.trim().toLowerCase()===ne.label.trim().toLowerCase())):e.Employees;return(0,l.c)((0,l.c)({},e),{},{Employees:t})}))}),[We,fe,ne]);return(0,E.jsx)(E.Fragment,{children:0===Number(se)||1===Number(se)?(0,E.jsxs)(E.Fragment,{children:["default"===W&&(0,E.jsx)(y.cp,{title:(0,E.jsxs)("div",{className:"d-flex align-items-center",children:[(0,E.jsx)(f.c,{size:"small mx-2",variant:"outlined",disabled:!0,onClick:()=>Ue(),children:"Dashboard"}),(0,E.jsx)(f.c,{size:"small mx-2",variant:"outlined",onClick:()=>Pe(),children:"Employee"}),(0,E.jsx)(f.c,{size:"small mx-2",variant:"outlined",onClick:()=>Oe(),children:"Department"}),(0,E.jsxs)("div",{className:"d-flex align-items-center justify-content-start gap-3",children:[(0,E.jsx)("label",{children:"From Date"}),(0,E.jsx)("input",{type:"date",onChange:e=>ve((0,l.c)((0,l.c)({},ye),{},{FromDate:e.target.value})),value:null===ye||void 0===ye?void 0:ye.FromDate,className:"cus-inpt w-auto p-1"})]}),(0,E.jsxs)("div",{className:"d-flex align-items-center justify-content-start gap-3",children:[(0,E.jsx)("label",{children:"To Date"}),(0,E.jsx)("input",{type:"date",onChange:e=>ve((0,l.c)((0,l.c)({},ye),{},{ToDate:e.target.value})),value:null===ye||void 0===ye?void 0:ye.ToDate,className:"cus-inpt w-auto p-1"})]}),(0,E.jsx)("div",{className:"p-1",children:(0,E.jsx)(o.c,{onClick:()=>Q(!Y),variant:"outlined",size:"small",children:(0,E.jsx)(u.c,{})})})]}),dataArray:z,EnableSerialNumber:!0,columns:[(0,y.A5)("TotalDepartments","string","Department"),(0,y.A5)("TotalMaleEmployees","number","Total Male Employees"),(0,y.A5)("TotalFemaleEmployees","number","Total Female Employees"),(0,y.A5)("TotalEmployees","number","Total Employees"),(0,y.A5)("TotalMalePresentToday","number","Total Male Present Today"),(0,y.A5)("TotalFemalePresentToday","number","Total Female Present Today"),(0,y.A5)("TotalPresentToday","number","Total Present Today")],isExpendable:!0,tableMaxHeight:550,expandableComp:e=>{let{row:t}=e;const a="string"===typeof t.DepartmentWiseCounts?JSON.parse(t.DepartmentWiseCounts):t.DepartmentWiseCounts;return(0,E.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"10px"},children:[(0,E.jsx)("thead",{children:(0,E.jsxs)("tr",{style:{backgroundColor:"#f0f0f0"},children:[(0,E.jsx)("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"Department Name"}),(0,E.jsx)("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"TotalMaleEmployees"}),(0,E.jsx)("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"TotalFemaleEmployees"}),(0,E.jsx)("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"Total Employees"}),(0,E.jsx)("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"TotalMalePresentToday"}),(0,E.jsx)("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"TotalFemalePresentToday"}),(0,E.jsx)("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"TotalPresentToday"})]})}),(0,E.jsx)("tbody",{children:a&&a.length>0?a.map(((e,t)=>(0,E.jsx)(n.Fragment,{children:(0,E.jsxs)("tr",{onClick:()=>{return t=e.Department,void J($===t?null:t);var t},children:[(0,E.jsx)("td",{style:{border:"1px solid #ccc",padding:"8px"},children:(null===e||void 0===e?void 0:e.Department)||"-"}),(0,E.jsx)("td",{style:{border:"1px solid #ccc",padding:"8px"},children:(null===e||void 0===e?void 0:e.TotalMaleEmployees)||"-"}),(0,E.jsx)("td",{style:{border:"1px solid #ccc",padding:"8px"},children:(null===e||void 0===e?void 0:e.TotalFemaleEmployees)||"-"}),(0,E.jsx)("td",{style:{border:"1px solid #ccc",padding:"8px"},children:(null===e||void 0===e?void 0:e.TotalEmployees)||"-"}),(0,E.jsx)("td",{style:{border:"1px solid #ccc",padding:"8px"},children:(null===e||void 0===e?void 0:e.TotalMalePresentToday)||"-"}),(0,E.jsx)("td",{style:{border:"1px solid #ccc",padding:"8px"},children:(null===e||void 0===e?void 0:e.TotalFemalePresentToday)||"-"}),(0,E.jsx)("td",{style:{border:"1px solid #ccc",padding:"8px"},children:(null===e||void 0===e?void 0:e.TotalPresentToday)||"-"})]})},t))):(0,E.jsx)("tr",{children:(0,E.jsx)("td",{colSpan:"7",style:{padding:"8px"},children:"No Departments Available"})})})]})}}),"employee"===W&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(s.c,{open:k,maxWidth:"md",PaperProps:{style:{width:"500px",height:"500px"}},children:[(0,E.jsx)(r.c,{children:"Add Employee"}),(0,E.jsx)(c.c,{children:(0,E.jsx)(D.c,{multiple:!0,options:[{UserId:"all",Name:"ALL"},...q],getOptionLabel:e=>e.Name,isOptionEqualToValue:(e,t)=>e.UserId===t.UserId,onChange:(e,t)=>{if(t.some((e=>"all"===e.UserId)))Ae(q);else{const e=t.filter(((e,t,a)=>t===a.findIndex((t=>t.UserId===e.UserId))));Ae(e)}},value:je.some((e=>"all"===e.UserId))?[{UserId:"all",Name:"ALL"}]:je,renderInput:e=>(0,E.jsx)(j.c,(0,l.c)((0,l.c)({},e),{},{placeholder:"Employees"}))})}),(0,E.jsxs)(d.c,{className:"d-flex justify-content-between flex-wrap",children:[(0,E.jsx)(f.c,{type:"button",variant:"outlined",onClick:()=>Ae([]),children:"Clear"}),(0,E.jsxs)("span",{children:[(0,E.jsx)(f.c,{onClick:_e,children:"Cancel"}),(0,E.jsx)(f.c,{onClick:Fe,children:"Download"})]})]})]}),(0,E.jsx)(A.c,{children:(0,E.jsxs)(C.c,{sx:{minHeight:"50vh"},children:[(0,E.jsxs)("div",{className:"ps-3 pb-2 pt-0 d-flex align-items-center justify-content-between border-bottom mb-3",children:[(0,E.jsxs)("h6",{className:"fa-18",children:[(0,E.jsx)(f.c,{size:"small mx-2",variant:"outlined",onClick:()=>Ue(),children:"Dashboard"}),(0,E.jsx)(f.c,{size:"small mx-2",variant:"outlined",disabled:!0,onClick:()=>Pe(),children:"EMPLOYEE"}),(0,E.jsx)(f.c,{size:"small mx-2",variant:"outlined",onClick:()=>Oe(),children:"Department"})]}),(0,E.jsxs)("div",{className:"d-flex align-items-center justify-content-start gap-3",children:[(0,E.jsx)(f.c,{onClick:Ee,variant:"contained",disabled:0===(null===me||void 0===me?void 0:me.EmpId)||"ALL"===(null===me||void 0===me?void 0:me.Name),children:"Individual Report"}),(0,E.jsx)(f.c,{onClick:()=>{we(null===me||void 0===me||me.From,null===me||void 0===me||me.To)},children:"Monthly Report"}),(0,E.jsx)(f.c,{onClick:()=>{_(!0)},children:"Cummulative Monthly Report"}),(0,E.jsx)(f.c,{onClick:Ne,children:"Summary"})]})]}),(0,E.jsxs)("div",{className:"px-2 row mb-4",children:[(0,E.jsxs)("div",{className:"col-xl-2 col-lg-3 col-md-4 col-sm-6 p-2",children:[(0,E.jsx)("label",{children:"Employee"}),(0,E.jsx)(i.cp,{value:{value:null===me||void 0===me?void 0:me.EmpId,label:null===me||void 0===me?void 0:me.Name},onChange:e=>pe((0,l.c)((0,l.c)({},me),{},{EmpId:e.value,Name:e.label})),options:[{value:0,label:"ALL"},...ae.map((e=>({value:null===e||void 0===e?void 0:e.UserId,label:null===e||void 0===e?void 0:e.Name})))],styles:m.cF,isSearchable:!0,placeholder:de})]}),(0,E.jsxs)("div",{className:"col-xl-2 col-lg-3 col-md-4 col-sm-6 p-2",children:[(0,E.jsx)("label",{children:"From"}),(0,E.jsx)("input",{type:"month",className:"cus-inpt",value:null===me||void 0===me||null===(t=me.From)||void 0===t?void 0:t.slice(0,7),onChange:Te})]}),(0,E.jsx)("div",{className:"col-auto p-2 d-flex align-items-center",children:(0,E.jsx)("button",{className:"btn btn-link ms-2 p-0 mt-3",onClick:()=>{S&&S();const e=null===w||void 0===w?void 0:w.UserTypeId,t=null===w||void 0===w?void 0:w.UserId,a=null===w||void 0===w?void 0:w.Company_id;(0,x.q)({address:"masters/users/employee/dropDown?Company_id=".concat(a),headers:{Authorization:"Bearer ".concat(localStorage.getItem("Autheticate_Id"))}}).then((a=>{if(a.success){let n=[];1===Number(e)||0===Number(e)||1===Number(Ce)?(n=a.data,pe((e=>(0,l.c)((0,l.c)({},e),{},{EmpId:0,Name:"ALL"}))),te(!1),ie("ALL")):(n=a.data.filter((e=>e.UserId===t)),pe((e=>(0,l.c)((0,l.c)({},e),{},{EmpId:t,Name:null===w||void 0===w?void 0:w.Name}))),te(!0),ie(null===w||void 0===w?void 0:w.Name)),le(n)}})).catch((e=>console.error("Error fetching employees:",e))).finally((()=>{I&&I(),Q((e=>!e))}))},title:"Refresh Departments & Employees",children:(0,E.jsx)(h.c,{fontSize:"medium"})})})]}),(0,E.jsx)(y.cp,{dataArray:G,columns:[{isCustomCell:!0,Cell:e=>{let{row:t}=e;return t.username},ColumnHeader:"Employee",isVisible:1,width:"20%",CellProps:{sx:{padding:"10px",textAlign:"left",fontWeight:"bold"}}},{isCustomCell:!0,Cell:e=>{let{row:t}=e;return Ie(t.LogDate||"--")},ColumnHeader:"Log Date",isVisible:1,width:"20%",CellProps:{sx:{padding:"10px",textAlign:"center",color:"gray"}}},...Se],EnableSerialNumber:!0,CellSize:"small",disablePagination:!1})]})})]}),"department"===W&&(0,E.jsx)(E.Fragment,{children:(e=>{let t=[];const a=null===z||void 0===z||null===(e=z[0])||void 0===e?void 0:e.DepartmentWiseCounts;if(a)try{const e=JSON.parse(a);t=Array.isArray(e)?e:[]}catch(l){console.error("Failed to parse DepartmentWiseCounts JSON:",l)}return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(y.cp,{title:(0,E.jsxs)("div",{className:"d-flex flex-column",children:[(0,E.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[(0,E.jsx)(f.c,{size:"small mx-2",variant:"outlined",onClick:()=>Ue(),children:"Dashboard"}),(0,E.jsx)(f.c,{size:"small mx-2",variant:"outlined",onClick:()=>Pe(),children:"Employee"}),(0,E.jsx)(f.c,{size:"small mx-2",variant:"outlined",disabled:!0,onClick:()=>Oe(),children:"Department"})]}),(0,E.jsxs)("div",{className:"row align-items-end",children:[(0,E.jsxs)("div",{className:"col-xl-2 col-lg-3 col-md-4 col-sm-6 p-2",children:[(0,E.jsx)("label",{children:"Department"}),(0,E.jsx)(i.cp,{options:ge,isSearchable:!0,placeholder:"ALL",value:fe,styles:m.cF,onChange:Be})]}),(0,E.jsxs)("div",{className:"col-xl-2 col-lg-3 col-md-4 col-sm-6 p-2",children:[(0,E.jsx)("label",{children:"Employee"}),(0,E.jsx)(i.cp,{options:ae,isSearchable:!0,placeholder:"ALL",value:ne,styles:m.cF,onChange:oe,isDisabled:!fe})]}),(0,E.jsx)("div",{className:"col-auto p-2 d-flex align-items-center",children:(0,E.jsx)("button",{className:"btn btn-link ms-2 p-0 mb-2",onClick:Re,style:{minWidth:"24px"},title:"Refresh Departments & Employees",children:(0,E.jsx)(h.c,{fontSize:"small"})})})]})]}),dataArray:He,EnableSerialNumber:!0,columns:[(0,y.A5)("Department","string","Department"),(0,y.A5)("TotalMaleEmployees","number","Total Male Employees"),(0,y.A5)("TotalFemaleEmployees","number","Total Female Employees"),(0,y.A5)("TotalEmployees","number","Total Employees"),(0,y.A5)("TotalMalePresentToday","number","Total Male Present Today"),(0,y.A5)("TotalFemalePresentToday","number","Total Female Present Today"),(0,y.A5)("TotalPresentToday","number","Total Present Today")],isExpendable:!0,tableMaxHeight:550,expandableComp:ze})})})()})]}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(s.c,{open:k,maxWidth:"md",PaperProps:{style:{width:"500px",height:"500px"}},children:[(0,E.jsx)(r.c,{children:"Add Employee"}),(0,E.jsx)(c.c,{children:(0,E.jsx)(D.c,{multiple:!0,options:[{UserId:"all",Name:"ALL"},...q],getOptionLabel:e=>e.Name,isOptionEqualToValue:(e,t)=>e.UserId===t.UserId,value:je.some((e=>"all"===e.UserId))?[{UserId:"all",Name:"ALL"}]:je,onChange:(e,t)=>{if(t.some((e=>"all"===e.UserId)))Ae(q);else{const e=t.filter(((e,t,a)=>t===a.findIndex((t=>t.UserId===e.UserId))));Ae(e)}},renderInput:e=>(0,E.jsx)(j.c,(0,l.c)((0,l.c)({},e),{},{placeholder:"Employees"}))})}),(0,E.jsxs)(d.c,{className:"d-flex justify-content-between flex-wrap",children:[(0,E.jsx)(f.c,{variant:"outlined",onClick:()=>Ae([]),children:"Clear"}),(0,E.jsxs)("span",{children:[(0,E.jsx)(f.c,{onClick:_e,children:"Cancel"}),(0,E.jsx)(f.c,{onClick:Fe,children:"Download"})]})]})]}),(0,E.jsx)(A.c,{children:(0,E.jsxs)(C.c,{sx:{minHeight:"50vh"},children:[(0,E.jsxs)("div",{className:"ps-3 pb-2 pt-0 d-flex align-items-center justify-content-between border-bottom mb-3",children:[(0,E.jsx)("h6",{className:"fa-18",children:(0,E.jsx)(f.c,{size:"small",variant:"outlined",className:"mx-2",children:"EMPLOYEE"})}),(1===se||0===se)&&(0,E.jsxs)("div",{className:"d-flex align-items-center justify-content-start gap-3",children:[(0,E.jsx)(f.c,{onClick:Ee,variant:"contained",disabled:0===(null===me||void 0===me?void 0:me.EmpId)||"ALL"===(null===me||void 0===me?void 0:me.Name),children:"Individual Report"}),(0,E.jsx)(f.c,{onClick:()=>we(null===me||void 0===me||me.From,null===me||void 0===me||me.To),children:"Monthly Report"}),(0,E.jsx)(f.c,{onClick:()=>_(!0),children:"Cumulative Monthly Report"}),(0,E.jsx)(f.c,{onClick:Ne,children:"Summary"})]})]}),(0,E.jsxs)("div",{className:"px-2 row mb-4",children:[(0,E.jsxs)("div",{className:"col-xl-2 col-lg-3 col-md-4 col-sm-6 p-2",children:[(0,E.jsx)("label",{children:"Employee"}),(0,E.jsx)(i.cp,{value:{value:null===me||void 0===me?void 0:me.EmpId,label:null===me||void 0===me?void 0:me.Name},onChange:e=>pe((0,l.c)((0,l.c)({},me),{},{EmpId:e.value,Name:e.label})),options:[{value:0,label:"ALL"},...ae.map((e=>({value:e.UserId,label:e.Name})))],styles:m.cF,isSearchable:!0,placeholder:de,isDisabled:ee})]}),(0,E.jsxs)("div",{className:"col-xl-2 col-lg-3 col-md-4 col-sm-6 p-2",children:[(0,E.jsx)("label",{children:"From"}),(0,E.jsx)("input",{type:"month",className:"cus-inpt",value:null===me||void 0===me||null===(a=me.From)||void 0===a?void 0:a.slice(0,7),onChange:Te})]})]}),(0,E.jsx)(y.cp,{dataArray:G,columns:[{isCustomCell:!0,Cell:e=>{let{row:t}=e;return t.username},ColumnHeader:"Employee",isVisible:1,width:"20%",CellProps:{sx:{padding:"10px",textAlign:"left",fontWeight:"bold"}}},{isCustomCell:!0,Cell:e=>{let{row:t}=e;return Ie(t.LogDate||"--")},ColumnHeader:"Log Date",isVisible:1,width:"20%",CellProps:{sx:{padding:"10px",textAlign:"center",color:"gray"}}},...Se],EnableSerialNumber:!0,CellSize:"small",disablePagination:!1})]})})]})})}},31664:(e,t,a)=>{a.d(t,{c:()=>o});var l=a(27664),n=a(82496);const o=(0,l.c)((0,n.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh")},57704:(e,t,a)=>{a.d(t,{c:()=>o});var l=a(27664),n=a(82496);const o=(0,l.c)((0,n.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},84436:(e,t,a)=>{a.d(t,{c:()=>y});var l=a(45072),n=a(95656),o=a(69060),s=a(79736),r=a(21412),c=a(12556),d=a(49836),i=a(10099),m=a(33448);function p(e){return(0,m.cp)("MuiCardContent",e)}(0,i.c)("MuiCardContent",["root"]);var u=a(82496);const h=["className","component"],x=(0,c.cp)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),y=o.forwardRef((function(e,t){const a=(0,d.C)({props:e,name:"MuiCardContent"}),{className:o,component:c="div"}=a,i=(0,n.c)(a,h),m=(0,l.c)({},a,{component:c}),y=(e=>{const{classes:t}=e;return(0,r.c)({root:["root"]},p,t)})(m);return(0,u.jsx)(x,(0,l.c)({as:c,className:(0,s.c)(y.root,o),ownerState:m,ref:t},i))}))}}]);
//# sourceMappingURL=1684.de9e873e.chunk.js.map