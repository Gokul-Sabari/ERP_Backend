"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[1620],{62344:(e,t,a)=>{a.d(t,{o$:()=>r,o5:()=>c,cF:()=>s,iI:()=>o,_8:()=>i});var n=a(30800);const l=a.p+"static/media/smt.aa4d4f940bbebff07a57.png",o={table:{style:{width:"auto",backgroundColor:"transparent"}},rows:{style:{backgroundColor:"transparent"}},headCells:{style:{backgroundColor:"#6b9080f8",color:"white",fontSize:"14px"}}},s={menu:(e,t)=>(0,n.c)((0,n.c)({},e),{},{zIndex:9999}),menuPortal:e=>(0,n.c)((0,n.c)({},e),{},{zIndex:9999}),groupHeading:e=>(0,n.c)((0,n.c)({},e),{},{backgroundColor:"#f5f5f5",color:"#333",fontWeight:"bold",fontSize:"14px",padding:"8px 12px",borderBottom:"1px solid #ddd",textTransform:"uppercase"}),option:(e,t)=>(0,n.c)((0,n.c)({},e),{},{backgroundColor:t.isSelected?"#2684FF":t.isFocused?"#E2ECF9":"white",color:t.isSelected?"white":"#333",padding:"10px 12px"})},r=[{id:1,headname:"Menu ID",variant:"head",align:"left",width:100},{id:2,headname:"MenuName"},{id:3,headname:"Read Rights"},{id:4,headname:"Add Rights"},{id:5,headname:"Edit Rights"},{id:6,headname:"Delete Rights"},{id:7,headname:"Print Rights"},{id:8,headname:"Action"}],c=[{dataBase:1,name:"SHANKAR TRADERS",business:"Wholesale Merchant in Dhall",address:"32, Chitrakara Street, Madurai - 01 <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:l,gstin:"33AADFS6973R1ZD",phone:"984-313-1353, 984-335-5166",fssai:"12418012000818",bankAccount:"0021 5032 0885 122",ifsc:"TMBL0000002"},{dataBase:2,name:"SMT AGRO PRODUCTS",business:"",address:"H.O: 153, Chitrakara Street, 2nd Floor, Madurai -01 <br /> G.O: 746 Puliyur, Sayanapuram, Svga <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:l,gstin:"33ACMFS3420Q1ZQ",phone:"0452-4371625",fssai:"12418012000818",bankAccount:"0025 3031 0875 947",ifsc:"TMBL0000002"},{dataBase:3,name:"BHAVANI TRADERS",business:"",address:"H.O: 152-A, Chitrakara Street, Madurai -01 <br /> G.O: 30/1-Rajman Nagar, Chintamani Main Road, Mdu-01 <br /> Tax Invoice",logo:l,gstin:"33AAEFB6728J1ZG",phone:"958-559-7641, 958-559-7614",fssai:"12418012000670",bankAccount:"0021 5005 0800 309",ifsc:"TMBL0000002"}],i=[{name:"PURCHASE ORDER"},{name:"PURCHASE INVOICE"},{name:"SALE ORDER"},{name:"SALE INVOICE"},{name:"JOURNAL"},{name:"STOCK JOURNAL"},{name:"PAYMENT"},{name:"RECEIPT"},{name:"CONTRA"}]},57124:(e,t,a)=>{a.r(t),a.d(t,{default:()=>M});var n=a(30800),l=a(69060),o=a(5548),s=a(82656),r=a(26773),c=a(4488),i=a(90048),d=a(40656),m=a(62344),u=a(39308),p=a(57704),h=a(31664),v=a(1908),x=a(13724),g=a(77536),y=a(51560),f=a(27532),D=a(89e3),b=a(71448),j=a(44380),S=a(43692),C=a(84436),A=a(56480),N=a(35832),T=a(11782),E=a(6444),w=a(60336),I=a(11040),F=a(99016),L=a(7824),_=(a(73380),a(82496));const P=e=>{let{currentView:t,onViewChange:a}=e;const[d,m]=(0,l.useState)([]),[u,p]=(0,l.useState)([]),[h,x]=(0,l.useState)({FromDate:(new Date).toISOString().split("T")[0],Description:"",display:2,Created_By:""}),[g,y]=(0,l.useState)(""),[f,b]=(0,l.useState)(!1),[j,N]=(0,l.useState)(null),[P,M]=(0,l.useState)(new Date),[k,U]=(0,l.useState)(!1),[O,R]=(0,l.useState)(null),z=e=>{const t=new Date(e),a=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),l=t.getFullYear();return"".concat(a,"-").concat(n,"-").concat(l)},H=localStorage.getItem("user"),W=JSON.parse(H),B=async()=>{try{const e=await(0,v.q)({address:"masters/defaultLeave"});if(e.success){m(e.data);const t=P.getMonth(),a=P.getFullYear(),n=e.data.filter((e=>{const n=new Date(e.Date);return n.getMonth()===t&&n.getFullYear()===a}));p(n)}}catch(e){console.error(e)}};(0,l.useEffect)((()=>{B()}),[]);const q=()=>{b(!1),x({}),y(""),U(!1),R(null)};return(0,_.jsxs)("div",{className:"d-flex flex-column",children:[(0,_.jsx)(S.c,{children:(0,_.jsxs)(C.c,{sx:{minHeight:"50vh"},children:[(0,_.jsx)("div",{className:"d-flex align-items-center mb-3",children:["default","employee","department","defaultLeave"].map((e=>(0,_.jsx)(D.c,{size:"small mx-2",variant:"outlined",onClick:()=>a(e),disabled:t===e,children:"defaultLeave"===e?"Defined Leave":e.charAt(0).toUpperCase()+e.slice(1)},e)))}),(0,_.jsxs)("div",{className:"ps-3 pb-2 pt-0 d-flex align-items-center justify-content-between border-bottom mb-3",children:[(0,_.jsx)("h6",{className:"fa-18",children:"Leave Details"}),(0,_.jsx)("div",{children:(0,_.jsx)("select",{className:"cus-inpt w-auto",value:null===h||void 0===h?void 0:h.display,disabled:!0,onChange:e=>x((t=>(0,n.c)((0,n.c)({},t),{},{display:Number(e.target.value)}))),children:(0,_.jsx)("option",{disabled:!0,value:2,children:"Calendar"})})})]}),(0,_.jsxs)("div",{className:"row",children:[(0,_.jsx)("div",{className:"col-lg-4 col-md-5 mb-3",children:(0,_.jsxs)("div",{className:"card shadow-sm",children:[(0,_.jsx)("div",{className:"card-header",children:(0,_.jsx)("h6",{className:"mb-0",children:"Month Leave List"})}),(0,_.jsx)("div",{className:"card-body",style:{maxHeight:"800px",overflowY:"auto"},children:0===u.length?(0,_.jsx)("p",{children:"No data"}):u.map(((e,t)=>(0,_.jsxs)("div",{className:"mb-2 border-bottom pb-2 position-relative",children:[(0,_.jsx)("small",{children:e.Description}),(0,_.jsx)("br",{}),(0,_.jsxs)("small",{children:["Date: ",z(e.Date)]})]},t)))})]})}),(0,_.jsx)("div",{className:"col-lg-8 col-md-7",children:(0,_.jsx)(T.c,{plugins:[w.c,I.c,E.c,F.cp],initialView:"dayGridMonth",initialDate:new Date,events:d.map((e=>({title:" ".concat(null===e||void 0===e?void 0:e.Description),start:new Date(null===e||void 0===e?void 0:e.Date).toISOString().split("T")[0],objectData:e}))),headerToolbar:{left:"prev next",center:"title",right:"dayGridMonth"},showNonCurrentDates:!1,editable:!1,selectable:!0,selectMirror:!0,height:800,eventClick:e=>{const t=e.event.extendedProps.objectData,a=null===t||void 0===t?void 0:t.Date,n=d.findIndex((e=>e.Date===a&&e.Description===t.Description));U(!0),R(n),x({FromDate:a}),y(t.Description),b(!0)},dateClick:e=>{N(e.dateStr),x((0,n.c)((0,n.c)({},h),{},{FromDate:e.dateStr})),b(!0)},datesSet:e=>{const t=new Date(e.start);M(t);const a=t.getMonth(),n=t.getFullYear(),l=d.filter((e=>{const t=new Date(e.Date);return t.getMonth()===a&&t.getFullYear()===n}));p(l)}})})]})]})}),(0,_.jsxs)(s.c,{open:f,onClose:q,fullWidth:!0,maxWidth:"sm",children:[(0,_.jsxs)(r.c,{className:"d-flex justify-content-between",children:[(0,_.jsxs)("span",{children:[" ",k?"UPDATE":"ADD"]}),(0,_.jsx)(o.c,{onClick:q,children:(0,_.jsx)(L.c,{sx:{color:"black"}})})]}),(0,_.jsx)(c.c,{children:(0,_.jsx)("div",{className:"table-responsive pb-4",children:(0,_.jsx)("table",{className:"table",children:(0,_.jsxs)("tbody",{children:[(0,_.jsxs)("tr",{children:[(0,_.jsx)("td",{children:"From"}),(0,_.jsx)("td",{children:(0,_.jsx)("input",{type:"date",className:"cus-inpt",value:(e=>{const t=new Date(e),a=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),l=String(t.getDate()).padStart(2,"0");return"".concat(a,"-").concat(n,"-").concat(l)})((null===h||void 0===h?void 0:h.FromDate)||""),onChange:e=>x((0,n.c)((0,n.c)({},h),{},{FromDate:e.target.value}))})})]}),(0,_.jsxs)("tr",{children:[(0,_.jsx)("td",{children:"Description"}),(0,_.jsx)("td",{children:(0,_.jsx)("input",{type:"text",className:"cus-inpt",value:g,onChange:e=>y(e.target.value)})})]})]})})})}),(0,_.jsxs)(i.c,{children:[(0,_.jsx)(D.c,{onClick:q,children:"Cancel"}),(0,_.jsx)(D.c,{onClick:()=>{if(k){const e=d[O],t=null===e||void 0===e?void 0:e.SNo,a=null===W||void 0===W?void 0:W.UserId;(async e=>{let{index:t,filter:a,description:l,id:o,Modified_By:s}=e;const r=[...d],c=Number(null===W||void 0===W?void 0:W.UserId),i={Id:o,FromDate:null===a||void 0===a?void 0:a.FromDate,Description:l,Modified_By:c||s};try{const e=await(0,v.q)({address:"masters/defaultLeave",method:"PUT",bodyData:i});if(e.success){r[t]=(0,n.c)((0,n.c)({},r[t]),{},{Date:a.FromDate,Description:l}),m(r);const e=P.getMonth(),o=P.getFullYear(),s=r.filter((t=>{const a=new Date(t.Date);return a.getMonth()===e&&a.getFullYear()===o}));p(s),q(),A.m4.success("Leave updated successfully")}else A.m4.error(e.message||"Failed to update")}catch(u){console.error("Error updating leave:",u),A.m4.error("Update failed: "+u.message)}})({index:O,filter:h,description:g,id:t,User_Id:a})}else(e=>{let{filter:t,description:a}=e;const n=null===W||void 0===W?void 0:W.UserId,l={FromDate:null===t||void 0===t?void 0:t.FromDate,Description:a,Created_By:n};(0,v.q)({address:"masters/addLeave",method:"POST",bodyData:l}).then((e=>{e.success?(A.m4.success("Leave added successfully"),b(!1),x({FromDate:(new Date).toISOString().split("T")[0],Description:"",display:2,Created_By:1}),y(""),B()):A.m4.error(e.message)})).catch((e=>console.error(e)))})({filter:h,description:g})},children:k?"UPDATE":"ADD"})]})]})]})},M=e=>{var t,a;let{loadingOn:T,loadingOff:E}=e;const w=JSON.parse(localStorage.getItem("user")),I=(0,y.i6)(),F=(0,y.IT)(),L=F.state,[M,k]=(0,l.useState)(!1),U=()=>{const e=new Date,t=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0");return"".concat(t,"-").concat(a)},O={From:U(),To:U(),EmpId:"0",Name:"ALL"},R=new URLSearchParams((0,y.IT)().search),z={From:U(),To:U()},[H,W]=(0,l.useState)([]),[B,q]=(0,l.useState)("default"),[V,Y]=(0,l.useState)([]),[J,$]=(0,l.useState)([]),[G,Q]=(0,l.useState)(!1),[Z,K]=(0,l.useState)([]),[X,ee]=(0,l.useState)(!0),[te,ae]=(0,l.useState)(!1),[ne,le]=(0,l.useState)([]),[oe,se]=(0,l.useState)(null),re=null===w||void 0===w?void 0:w.UserTypeId,ce=w,{contextObj:ie}=(0,l.useContext)(g.a),[de,me]=(0,l.useState)("ALL"),[ue,pe]=(0,l.useState)(O),[he,ve]=(0,l.useState)(ue);(0,l.useEffect)((()=>{const e=setTimeout((()=>{ve(ue)}),500);return()=>clearTimeout(e)}),[ue]),(0,l.useEffect)((()=>{const{From:e,EmpId:t}=he;e&&(t||0===t)&&(Pe(e,t),_e())}),[he]);const xe=e=>{if(!e)return 0;const[t,a]=e.split("-");return new Date(t,a,0).getDate()},[ge,ye]=(0,l.useState)({FromDate:(new Date).toISOString().split("T")[0],ToDate:(new Date).toISOString().split("T")[0],Cancel_status:0}),[fe,De]=(0,l.useState)([]),[be,je]=(0,l.useState)(null),[Se,Ce]=(0,l.useState)([]),Ae=null===ie||void 0===ie?void 0:ie.Add_Rights;(0,l.useEffect)((()=>{T&&T();const e=(new Date).toISOString().split("T")[0],t=ge.FromDate||e,a=ge.ToDate||e;(0,v.q)({address:"empAttendance/departmentwise?FromDate=".concat(t,"&ToDate=").concat(a)}).then((e=>{e.success&&W(null===e||void 0===e?void 0:e.data)})).catch((e=>console.error(e))).finally((()=>{E&&E()}))}),[G]);const Ne=e=>{const t=e.target.value,[a,n]=t.split("-"),l="".concat(a,"-").concat(n,"-01"),o=(e=>{if(!e)return 0;const[t,a]=e.split("-");return new Date(t,a,0).getDate()})("".concat(a,"-").concat(n)),s="".concat(a,"-").concat(n,"-").concat(o);pe({From:l,To:s,EmpId:ue.EmpId||0,Name:null===ue||void 0===ue?void 0:ue.Name})},Te=async()=>{try{const e=ue.From,[t,a]=e.split("-"),n="".concat(t,"-").concat(a,"-01"),l=xe("".concat(t,"-").concat(a)),o="".concat(t,"-").concat(a,"-").concat(l),s=await(0,v.q)({address:"userModule/employeeActivity/summary?FromDate=".concat(n,"&ToDate=").concat(o)});if(s.success){const e=s.data,l=(e,t)=>{const a=[],n=new Date(e),l=new Date(t);let o=0;for(;n<=l;){const e=n.toISOString().split("T")[0];a.push(e),0===n.getDay()&&o++,n.setDate(n.getDate()+1)}return{days:a,sundayCount:o,totalDays:a.length}},{days:r,sundayCount:c,totalDays:i}=l(n,o),d=e.map((e=>{const t=Array.isArray(e.AttendanceDetails)?e.AttendanceDetails:e.AttendanceDetails?JSON.parse(e.AttendanceDetails):[];let a=0,n=0;const l=r.filter((e=>0!==new Date(e).getDay()));l.forEach((e=>{const l=t.find((t=>t.Date.startsWith(e)));l&&("P"===l.AttendanceStatus?a++:"H"===l.AttendanceStatus&&n++)}));const o=e.ApprovedLeave||0,s=e.PendingLeave||0,i=l.length-(a+o+n);return{Name:e.Name,TotalPresent:a,ApprovedLeave:o,PendingLeave:s,CompanyHoliday:n,TotalAbsent:i<0?0:i,NumberOfSundays:c}})),m=N.c$.json_to_sheet(d),u=["Name","TotalPresent","ApprovedLeave","PendingLeave","CompanyHoliday","TotalAbsent","NumberOfSundays"];N.c$.sheet_add_aoa(m,[u],{origin:"A1"});const p=N.c$.book_new();N.c$.book_append_sheet(p,m,"Attendance Summary"),N.a8(p,"Attendance_Summary_".concat(a,"_").concat(t,".xlsx"))}}catch(e){console.error("Error downloading attendance summary:",e),A.m4.error("Failed to generate summary report")}},Ee=()=>{const e=Z.map((e=>{const t=e.AttendanceDetails?e.AttendanceDetails.split(",").filter((e=>""!==e.trim())):[];let a=e.AttendanceStatus;a||(a=0===t.length?"A":"P");const l={};for(let n=0;n<4;n++)l["Punch".concat(n+1)]=t[n]?t[n].trim():"--";return(0,n.c)({Employee:e.username||e.Employee,"Log Date":Ie(e.LogDate),"Attendance Status":a},l)})),t=["Employee","Log Date","Attendance Status","Punch1","Punch2","Punch3","Punch4","Punch5","Punch6"],a=e.map((e=>t.reduce(((t,a)=>(t[a]=e[a]||"--",t)),{}))),l=N.c$.json_to_sheet(a),o=N.c$.book_new();N.c$.book_append_sheet(o,l,"Attendance Report"),N.a8(o,"Attendance_Report.xlsx")};const we=Array.from({length:6},((e,t)=>({isCustomCell:!0,ColumnHeader:"Punch ".concat(t+1),isVisible:1,width:"13%",CellProps:{sx:{display:"flex",justifyContent:"center",alignItems:"center",padding:"10px"}},Cell:e=>{let{row:a}=e;const n=(a.AttendanceDetails?a.AttendanceDetails.split(",").map((e=>e.trim())).filter((e=>""!==e)):[])[t]||"--",l=n.split(":in(")[0],o="--"!==n?function(e){if(!e)return"--";const[t,a]=e.split(":");if(!t||!a)return"--";let n=parseInt(t,10);const l=a,o=n>=12?"PM":"AM";return n=n%12||12,"".concat(n.toString().padStart(2,"0"),":").concat(l," ").concat(o)}(l):"--";return"--"!==o?(0,_.jsx)(f.c,{label:o,variant:"outlined",size:"small",sx:{color:"green",margin:"2px"}}):(0,_.jsx)("div",{style:{color:"gray"},children:"--"})}}))),Ie=e=>{if(!e)return"--";const[t]=e.split("T");return"".concat(t," ")},Fe=async()=>{try{const e=ue.From,[t,a]=e.split("-"),l="".concat(t,"-").concat(a,"-01"),o=xe("".concat(t,"-").concat(a)),s="".concat(t,"-").concat(a,"-").concat(o),[r,c,i]=await Promise.all([(0,v.q)({address:"userModule/employeActivity/employeeAttendanceModuledownload?FromDate=".concat(l,"&ToDate=").concat(s)}),(0,v.q)({address:"masters/leave?FromDate=".concat(l,"&ToDate=").concat(s)}),(0,v.q)({address:"masters/defaultLeave?FromDate=".concat(l,"&ToDate=").concat(s)})]);if(!r.success)throw new Error("Attendance data failed");const d={},m=new Set;((null===c||void 0===c?void 0:c.data)||[]).forEach((e=>{var t;if("APPROVED"!==(null===(t=e.Status)||void 0===t?void 0:t.toUpperCase()))return;const a=e.User_Id;if(!a)return;let n=new Date(e.FromDate);const l=new Date(e.ToDate);for(;n<=l;){const e=n.toISOString().split("T")[0];d[a]||(d[a]={}),d[a][e]=!0,n.setDate(n.getDate()+1)}})),((null===i||void 0===i?void 0:i.data)||[]).forEach((e=>{const t=new Date(e.Date).toISOString().split("T")[0];m.add(t)}));const{days:u}=function(e,t){const a=[],n=new Date(e),l=new Date(t);for(;n<=l;)a.push(n.toISOString().split("T")[0]),n.setDate(n.getDate()+1);return{days:a,count:a.length}}(l,s),p=r.data.map((e=>{const t=function(e){try{return e?JSON.parse(e):[]}catch(t){return[]}}(e.AttendanceDetails)||[],a={};let l=0;const o={};return t.forEach((e=>{const t=new Date(e.Date).toISOString().split("T")[0];o[t]={status:e.AttendanceStatus,hasPunch:"[]"!==e.Punch1}})),u.forEach(((t,n)=>{var s;const r="Day ".concat(n+1),c=e.User_Mgt_Id,i=new Date(t).toISOString().split("T")[0],u=0===new Date(t).getDay(),p=o[i],h=null===p||void 0===p?void 0:p.status,v=null===p||void 0===p?void 0:p.hasPunch;m.has(i)?"P"===h&&v?(a[r]="P",l++):a[r]="DL":u?a[r]="H":null!==(s=d[c])&&void 0!==s&&s[i]||"L"===h?a[r]="L":"P"===h?(a[r]=v?"P":"A",v&&l++):a[r]="H"===h?"H":"A"})),(0,n.c)({EmployeeName:e.username||e.Name,TotalPresent:l},a)})),h=["EmployeeName","TotalPresent",...u.map(((e,t)=>"Day ".concat(t+1)))],x=N.c$.json_to_sheet(p);N.c$.sheet_add_aoa(x,[h],{origin:"A1"});const g=N.c$.book_new();N.c$.book_append_sheet(g,x,"Attendance Report"),N.a8(g,"Attendance_Report_".concat(a,"_").concat(t,".xlsx"))}catch(e){console.error("Download failed:",e),A.m4.error("Failed to generate report")}};const Le=async()=>{try{var e;const t=6,a=null===(e=Z[0])||void 0===e?void 0:e.LogDate;if(!a)return void A.m4.error("No attendance data found");const l=new Date(a),o=l.getFullYear(),s=l.getMonth()+1,r="".concat(o,"-").concat(s.toString().padStart(2,"0"),"-01"),c=new Date(o,s,0).toISOString().split("T")[0],i=await(0,v.q)({address:"masters/defaultLeave?FromDate=".concat(r,"&ToDate=").concat(c)}),d=null!==i&&void 0!==i&&i.success?i.data:[],m=new Set(d.map((e=>e.Date?e.Date.split("T")[0]:null)).filter((e=>null!==e))),u=(await(0,v.q)({address:"masters/leave?FromDate=".concat(r,"&ToDate=").concat(c)})).data||[],p={};u.forEach((e=>{var t;if("approved"!==(null===(t=e.Status)||void 0===t?void 0:t.toLowerCase()))return;const a=String(e.User_Id);if(!a)return;const n=e=>{const t=e.split(/[-/]/)||[];return 3===t.length&&4===t[2].length?2===t[0].length?new Date("".concat(t[2],"-").concat(t[1],"-").concat(t[0])):new Date("".concat(t[2],"-").concat(t[0],"-").concat(t[1])):new Date(e)},l=n(e.FromDate),o=n(e.ToDate);let s=new Date(l);for(;s<=o;){const e=s.toISOString().split("T")[0];p[a]||(p[a]={}),0!==s.getDay()&&(p[a][e]=!0),s.setDate(s.getDate()+1)}}));const h=Z.filter((e=>Se.some((t=>String(t.UserId)===String(e.User_Mgt_Id)||"ALL"===t.UserId)))).reduce(((e,t)=>(e[t.username]=e[t.username]||[],e[t.username].push(t),e)),{});if(0===Object.keys(h).length)return void A.m4.error("No attendance data found");const x=N.c$.book_new();Object.entries(h).forEach((e=>{let[a,l]=e;const o=l.map((e=>{var l,o;const s=new Date(e.LogDate),r=s.toISOString().split("T")[0],c=0===s.getDay(),i=String(e.User_Mgt_Id);let d;if(m.has(r))d="DL";else if(null!==(l=p[i])&&void 0!==l&&l[r])d="L";else if(c)d="H";else{var u;d=((null===(u=e.AttendanceDetails)||void 0===u?void 0:u.split(",").map((e=>e.trim())))||[]).some((e=>e&&"--"!==e))?"P":"A"}const h={},v=(null===(o=e.AttendanceDetails)||void 0===o?void 0:o.split(",").map((e=>e.trim())))||[];for(let a=0;a<t;a++)h["Punch ".concat(a+1)]=v[a]||"--";return(0,n.c)({Employee:a,"Log Date":Ie(e.LogDate),"Attendance Status":d},h)})),s=["Employee","Log Date","Attendance Status",...Array.from({length:t},((e,t)=>"Punch ".concat(t+1)))],r=o.map((e=>s.reduce(((t,a)=>(t[a]=e[a]||"--",t)),{})));N.c$.book_append_sheet(x,N.c$.json_to_sheet(r),a.slice(0,31))}));const g="Attendance_Report_".concat((new Date).toLocaleString("default",{month:"long"}),"_").concat(o,".xlsx");N.a8(x,g)}catch(t){console.error("Error generating report:",t),A.m4.error("Failed to generate report")}},_e=async()=>{ee(!0);try{const e=await(0,v.q)({address:"masters/Employeedetails/dropDown?Company_id=".concat(ce.Company_id)});e.success&&$(e.data)}catch(e){console.error(e),A.m4.error("Failed to fetch employees for dropdown")}finally{ee(!1)}};(0,l.useEffect)((()=>{const e=null===w||void 0===w?void 0:w.UserTypeId,t=null===w||void 0===w?void 0:w.UserId,a=null===w||void 0===w?void 0:w.Company_id;(0,v.q)({address:"masters/users/employee/dropDown?Company_id=".concat(a),headers:{Authorization:"Bearer ".concat(localStorage.getItem("Autheticate_Id"))}}).then((a=>{if(a.success){let l=[];1===Number(e)||0===Number(e)||1===Number(Ae)?(l=a.data,pe((e=>(0,n.c)((0,n.c)({},e),{},{EmpId:0,Name:"ALL"}))),ae(!1),me("ALL")):(l=a.data.filter((e=>e.UserId===t)),pe((e=>(0,n.c)((0,n.c)({},e),{},{EmpId:t,Name:null===w||void 0===w?void 0:w.Name}))),ae(!0),me(null===w||void 0===w?void 0:w.Name)),le(l)}})).catch((e=>console.error("Error fetching employees:",e)))}),[null===w||void 0===w?void 0:w.UserTypeId,null===w||void 0===w?void 0:w.UserId,null===w||void 0===w?void 0:w.Company_id,null===w||void 0===w?void 0:w.Name,G]);const Pe=async(e,t)=>{try{const a=null===w||void 0===w?void 0:w.UserTypeId,[n,l]=e.split("-"),o="".concat(n,"-").concat(l,"-01"),s=xe("".concat(n,"-").concat(l)),r="".concat(n,"-").concat(l,"-").concat(s),c=await(0,v.q)({address:"userModule/employeActivity/trackActivitylogAttendance?FromDate=".concat(o,"&ToDate=").concat(r,"&UserTypeId=").concat(a,"&UserId=").concat(t),headers:{Authorization:"Bearer ".concat(localStorage.getItem("Autheticate_Id"))}});c.success&&K(c.data)}catch(a){console.error("Error fetching attendance data:",a)}};(0,l.useEffect)((()=>{const e={FromDate:R.get("FromDate")&&(0,u.e8)(R.get("FromDate"))?R.get("FromDate"):z.Fromdate,ToDate:R.get("ToDate")&&(0,u.e8)(R.get("ToDate"))?R.get("ToDate"):z.Todate};ye((t=>(0,n.c)((0,n.c)({},t),{},{FromDate:e.FromDate,ToDate:e.ToDate})))}),[F.search]),(0,l.useEffect)((()=>{const e=null!==L&&void 0!==L&&L.FromDate&&(0,u.e8)(null===L||void 0===L?void 0:L.FromDate)?(0,u.Q7)(null===L||void 0===L?void 0:L.FromDate):null,t=null!==L&&void 0!==L&&L.ToDate&&(0,u.e8)(null===L||void 0===L?void 0:L.ToDate)?(0,u.Q7)(null===L||void 0===L?void 0:L.ToDate):null;e&&t&&(Me({FromDate:e,ToDate:t}),ye((e=>(0,n.c)((0,n.c)({},e),{},{FromDate:(0,u.Q7)(L.FromDate),ToDate:L.ToDate}))),Q((e=>!e)))}),[L]);const Me=e=>{const t=new URLSearchParams(e);I("?".concat(t.toString()),{replace:!0})},ke=()=>{k(!1)},Ue=()=>q("employee"),Oe=()=>q("department"),Re=()=>q("defaultLeave"),ze=()=>{ye((e=>(0,n.c)((0,n.c)({},e),{},{FromDate:e.FromDate||(new Date).toISOString().split("T")[0],ToDate:e.ToDate||(new Date).toISOString().split("T")[0]}))),q("default")},He=()=>{window.location.reload()};(0,l.useEffect)((()=>{const e=null===w||void 0===w?void 0:w.UserTypeId,t=null===w||void 0===w?void 0:w.UserId,a=null===w||void 0===w?void 0:w.Company_id;(0,v.q)({address:"masters/users/employee/dropDown?Company_id=".concat(a),headers:{Authorization:"Bearer ".concat(localStorage.getItem("Autheticate_Id"))}}).then((a=>{if(a.success){let l=[];1===Number(e)||0===Number(e)||1===Number(Ae)?(l=a.data,pe((e=>(0,n.c)((0,n.c)({},e),{},{EmpId:0,Name:"ALL"}))),ae(!1),me("ALL")):(l=a.data.filter((e=>e.UserId===t)),pe((e=>(0,n.c)((0,n.c)({},e),{},{EmpId:t,Name:null===w||void 0===w?void 0:w.Name}))),ae(!0),me(null===w||void 0===w?void 0:w.Name)),le(l)}})).catch((e=>console.error("Error fetching employees:",e)))}),[null===w||void 0===w?void 0:w.UserTypeId,null===w||void 0===w?void 0:w.UserId,null===w||void 0===w?void 0:w.Company_id,null===w||void 0===w?void 0:w.Name]),(0,l.useEffect)((()=>{const e=null===w||void 0===w?void 0:w.Company_id;(0,v.q)({address:"empAttendance/department?Company_id=".concat(e),headers:{Authorization:"Bearer ".concat(localStorage.getItem("Autheticate_Id"))}}).then((e=>{if(e.success&&e.others&&e.others.department){const t=e.others.department.map((e=>({value:e.value,label:e.label})));De(t)}})).catch((e=>console.error("Error fetching departments:",e)))}),[null===w||void 0===w?void 0:w.Company_id,G]);const We=e=>{je(e),le([]),se(null),e?(0,v.q)({address:"empAttendance/employeesByDepartment",method:"POST",bodyData:{department:e.value}}).then((e=>{var t;if(e.success&&null!==(t=e.others)&&void 0!==t&&t.employees){const t=e.others.employees.map((e=>({value:e.id||e.value||e.Emp_Id,label:e.name||e.label||e.Emp_Name})));le(t)}else le([])})).catch((e=>{console.error("Error fetching employees:",e),le([])})):le([])},Be=l.useMemo((()=>{var e;if(null===H||void 0===H||null===(e=H[0])||void 0===e||!e.DepartmentWiseCounts)return[];try{const e=JSON.parse(H[0].DepartmentWiseCounts);return Array.isArray(e)?e:[]}catch(t){return console.error("Failed to parse DepartmentWiseCounts JSON:",t),[]}}),[H]),qe=l.useMemo((()=>{if(!Be||!Be.length)return[];return Be.filter((e=>!be||e.Department===be.label)).map((e=>{const t=e.employees||e.Employees||[],a=oe?t.filter((e=>!!e.Emp_Name&&e.Emp_Name.trim().toLowerCase()===oe.label.trim().toLowerCase())):t;return(0,n.c)((0,n.c)({},e),{},{Employees:a})}))}),[Be,be,oe]);return(0,_.jsx)(_.Fragment,{children:0===Number(re)||1===Number(re)?(0,_.jsxs)(_.Fragment,{children:["default"===B&&(0,_.jsx)(x.cp,{title:(0,_.jsxs)("div",{className:"d-flex align-items-center",children:[(0,_.jsx)(D.c,{size:"small mx-2",variant:"outlined",disabled:!0,onClick:()=>ze(),children:"Dashboard"}),(0,_.jsx)(D.c,{size:"small mx-2",variant:"outlined",onClick:()=>Ue(),children:"Employee"}),(0,_.jsx)(D.c,{size:"small mx-2",variant:"outlined",onClick:()=>Oe(),children:"Department"}),(0,_.jsx)(D.c,{size:"small mx-2",variant:"outlined",onClick:()=>Re(),children:"Defined Leave"}),(0,_.jsxs)("div",{className:"d-flex align-items-center justify-content-start gap-3",children:[(0,_.jsx)("label",{children:"From Date"}),(0,_.jsx)("input",{type:"date",onChange:e=>ye((0,n.c)((0,n.c)({},ge),{},{FromDate:e.target.value})),value:null===ge||void 0===ge?void 0:ge.FromDate,className:"cus-inpt w-auto p-1"})]}),(0,_.jsxs)("div",{className:"d-flex align-items-center justify-content-start gap-3",children:[(0,_.jsx)("label",{children:"To Date"}),(0,_.jsx)("input",{type:"date",onChange:e=>ye((0,n.c)((0,n.c)({},ge),{},{ToDate:e.target.value})),value:null===ge||void 0===ge?void 0:ge.ToDate,className:"cus-inpt w-auto p-1"})]}),(0,_.jsx)("div",{className:"p-1",children:(0,_.jsx)(o.c,{onClick:()=>Q(!G),variant:"outlined",size:"small",children:(0,_.jsx)(p.c,{})})})]}),dataArray:H,EnableSerialNumber:!0,columns:[{isVisible:1,ColumnHeader:"Tot.Emp",isCustomCell:!0,Cell:e=>{var t,a,n;let{row:l}=e;const o=null!==(t=null===l||void 0===l?void 0:l.TotalEmployees)&&void 0!==t?t:0,s=null!==(a=null===l||void 0===l?void 0:l.TotalMaleEmployees)&&void 0!==a?a:0,r=null!==(n=null===l||void 0===l?void 0:l.TotalFemaleEmployees)&&void 0!==n?n:0;return(0,_.jsxs)("div",{style:{fontSize:"1.25rem",fontWeight:"bold"},children:[(0,_.jsx)("div",{children:o}),(0,_.jsxs)("div",{style:{fontSize:"1rem",fontWeight:"normal"},children:["Male / Female: ",s," / ",r]})]})}},{isVisible:1,ColumnHeader:"Tot.Pre.Today",isCustomCell:!0,Cell:e=>{var t,a,n;let{row:l}=e;const o=null!==(t=null===l||void 0===l?void 0:l.TotalPresentToday)&&void 0!==t?t:0,s=null!==(a=null===l||void 0===l?void 0:l.TotalMalePresentToday)&&void 0!==a?a:0,r=null!==(n=null===l||void 0===l?void 0:l.TotalFemalePresentToday)&&void 0!==n?n:0;return(0,_.jsxs)("div",{style:{fontSize:"1.25rem",fontWeight:"bold"},children:[(0,_.jsx)("div",{children:o}),(0,_.jsxs)("div",{style:{fontSize:"1rem",fontWeight:"normal"},children:["Male / Female: ",s," / ",r]})]})}}],isExpendable:!0,tableMaxHeight:550,expandableComp:e=>{let{row:t}=e;const a="string"===typeof t.DepartmentWiseCounts?JSON.parse(t.DepartmentWiseCounts):t.DepartmentWiseCounts;return(0,_.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"10px"},children:[(0,_.jsx)("thead",{children:(0,_.jsxs)("tr",{style:{backgroundColor:"#f0f0f0"},children:[(0,_.jsx)("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"Department Name"}),(0,_.jsx)("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"Total Employees"}),(0,_.jsx)("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"Present Today"})]})}),(0,_.jsx)("tbody",{children:a&&a.length>0?a.map(((e,t)=>(0,_.jsxs)("tr",{onClick:()=>{return t=e.Department,void Y(V===t?null:t);var t},children:[(0,_.jsx)("td",{style:{border:"1px solid #ccc",padding:"8px"},children:(null===e||void 0===e?void 0:e.Department)||"-"}),(0,_.jsx)("td",{style:{border:"1px solid #ccc",padding:"8px"},children:(0,_.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,_.jsx)("span",{style:{fontSize:"1.25rem",fontWeight:"bold",marginRight:"100px",minWidth:"60px"},children:(null===e||void 0===e?void 0:e.TotalEmployees)||"-"}),(0,_.jsxs)("span",{style:{fontSize:"1rem"},children:["Male / Female: ",(null===e||void 0===e?void 0:e.TotalMaleEmployees)||"0"," /"," ",(null===e||void 0===e?void 0:e.TotalFemaleEmployees)||"0"]})]})}),(0,_.jsx)("td",{style:{border:"1px solid #ccc",padding:"8px"},children:(0,_.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,_.jsx)("span",{style:{fontSize:"1.25rem",fontWeight:"bold",marginRight:"100px",minWidth:"60px"},children:(null===e||void 0===e?void 0:e.TotalPresentToday)||"-"}),(0,_.jsxs)("span",{style:{fontSize:"1rem"},children:["Male / Female: ",(null===e||void 0===e?void 0:e.TotalMalePresentToday)||"0"," /"," ",(null===e||void 0===e?void 0:e.TotalFemalePresentToday)||"0"]})]})})]},t))):(0,_.jsx)("tr",{children:(0,_.jsx)("td",{colSpan:"3",style:{padding:"8px"},children:"No Departments Available"})})})]})}}),"employee"===B&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(s.c,{open:M,maxWidth:"md",PaperProps:{style:{width:"500px",height:"500px"}},children:[(0,_.jsx)(r.c,{children:"Add Employee"}),(0,_.jsx)(c.c,{children:(0,_.jsx)(b.c,{multiple:!0,options:[{UserId:"all",Name:"ALL"},...J],getOptionLabel:e=>e.Name,isOptionEqualToValue:(e,t)=>e.UserId===t.UserId,onChange:(e,t)=>{if(t.some((e=>"all"===e.UserId)))Ce(J);else{const e=t.filter(((e,t,a)=>t===a.findIndex((t=>t.UserId===e.UserId))));Ce(e)}},value:Se.some((e=>"all"===e.UserId))?[{UserId:"all",Name:"ALL"}]:Se,renderInput:e=>(0,_.jsx)(j.c,(0,n.c)((0,n.c)({},e),{},{placeholder:"Employees"}))})}),(0,_.jsxs)(i.c,{className:"d-flex justify-content-between flex-wrap",children:[(0,_.jsx)(D.c,{type:"button",variant:"outlined",onClick:()=>Ce([]),children:"Clear"}),(0,_.jsxs)("span",{children:[(0,_.jsx)(D.c,{onClick:ke,children:"Cancel"}),(0,_.jsx)(D.c,{onClick:Le,children:"Download"})]})]})]}),(0,_.jsx)(S.c,{children:(0,_.jsxs)(C.c,{sx:{minHeight:"50vh"},children:[(0,_.jsxs)("div",{className:"ps-3 pb-2 pt-0 d-flex align-items-center justify-content-between border-bottom mb-3",children:[(0,_.jsxs)("h6",{className:"fa-18",children:[(0,_.jsx)(D.c,{size:"small mx-2",variant:"outlined",onClick:()=>ze(),children:"Dashboard"}),(0,_.jsx)(D.c,{size:"small mx-2",variant:"outlined",disabled:!0,onClick:()=>Ue(),children:"EMPLOYEE"}),(0,_.jsx)(D.c,{size:"small mx-2",variant:"outlined",onClick:()=>Oe(),children:"Department"}),(0,_.jsx)(D.c,{size:"small mx-2",variant:"outlined",onClick:()=>Re(),children:"Defined Leave"})]}),(0,_.jsxs)("div",{className:"d-flex align-items-center justify-content-start gap-3",children:[(0,_.jsx)(D.c,{onClick:Ee,variant:"contained",disabled:0===(null===ue||void 0===ue?void 0:ue.EmpId)||"ALL"===(null===ue||void 0===ue?void 0:ue.Name),children:"Individual Report"}),(0,_.jsx)(D.c,{onClick:()=>{Fe(null===ue||void 0===ue||ue.From,null===ue||void 0===ue||ue.To)},children:"Monthly Report"}),(0,_.jsx)(D.c,{onClick:()=>{k(!0)},children:"Cummulative Report"}),(0,_.jsx)(D.c,{onClick:Te,children:"Summary"})]})]}),(0,_.jsxs)("div",{className:"px-2 row mb-4",children:[(0,_.jsxs)("div",{className:"col-xl-2 col-lg-3 col-md-4 col-sm-6 p-2",children:[(0,_.jsx)("label",{children:"Employee"}),(0,_.jsx)(d.cp,{value:{value:null===ue||void 0===ue?void 0:ue.EmpId,label:null===ue||void 0===ue?void 0:ue.Name},onChange:e=>pe((0,n.c)((0,n.c)({},ue),{},{EmpId:e.value,Name:e.label})),options:[{value:0,label:"ALL"},...ne.map((e=>({value:null===e||void 0===e?void 0:e.UserId,label:null===e||void 0===e?void 0:e.Name})))],styles:m.cF,isSearchable:!0,placeholder:de})]}),(0,_.jsxs)("div",{className:"col-xl-2 col-lg-3 col-md-4 col-sm-6 p-2",children:[(0,_.jsx)("label",{children:"From"}),(0,_.jsx)("input",{type:"month",className:"cus-inpt",value:null===ue||void 0===ue||null===(t=ue.From)||void 0===t?void 0:t.slice(0,7),onChange:Ne})]}),(0,_.jsx)("div",{className:"col-auto p-2 d-flex align-items-center",children:(0,_.jsx)("button",{className:"btn btn-link ms-2 p-0 mt-3",onClick:()=>{T&&T();const e=null===w||void 0===w?void 0:w.UserTypeId,t=null===w||void 0===w?void 0:w.UserId,a=null===w||void 0===w?void 0:w.Company_id;(0,v.q)({address:"masters/users/employee/dropDown?Company_id=".concat(a),headers:{Authorization:"Bearer ".concat(localStorage.getItem("Autheticate_Id"))}}).then((a=>{if(a.success){let l=[];1===Number(e)||0===Number(e)||1===Number(Ae)?(l=a.data,pe((e=>(0,n.c)((0,n.c)({},e),{},{EmpId:0,Name:"ALL"}))),ae(!1),me("ALL")):(l=a.data.filter((e=>e.UserId===t)),pe((e=>(0,n.c)((0,n.c)({},e),{},{EmpId:t,Name:null===w||void 0===w?void 0:w.Name}))),ae(!0),me(null===w||void 0===w?void 0:w.Name)),le(l)}})).catch((e=>console.error("Error fetching employees:",e))).finally((()=>{E&&E(),Q((e=>!e))}))},title:"Refresh Departments & Employees",children:(0,_.jsx)(h.c,{fontSize:"medium"})})})]}),(0,_.jsx)(x.cp,{dataArray:Z,columns:[{isCustomCell:!0,Cell:e=>{let{row:t}=e;return t.username},ColumnHeader:"Employee",isVisible:1,width:"20%",CellProps:{sx:{padding:"10px",textAlign:"left",fontWeight:"bold"}}},{isCustomCell:!0,Cell:e=>{let{row:t}=e;return Ie(t.LogDate||"--")},ColumnHeader:"Log Date",isVisible:1,width:"20%",CellProps:{sx:{padding:"10px",textAlign:"center",color:"gray"}}},...we],EnableSerialNumber:!0,CellSize:"small",disablePagination:!1})]})})]}),"department"===B&&(0,_.jsx)(x.cp,{title:(0,_.jsxs)("div",{className:"d-flex flex-column",children:[(0,_.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[(0,_.jsx)(D.c,{size:"small mx-2",variant:"outlined",onClick:()=>ze(),children:"Dashboard"}),(0,_.jsx)(D.c,{size:"small mx-2",variant:"outlined",onClick:()=>Ue(),children:"Employee"}),(0,_.jsx)(D.c,{size:"small mx-2",variant:"outlined",disabled:!0,onClick:()=>Oe(),children:"Department"}),(0,_.jsx)(D.c,{size:"small mx-2",variant:"outlined",onClick:()=>Re(),children:"Defined Leave"})]}),(0,_.jsxs)("div",{className:"row align-items-end",children:[(0,_.jsxs)("div",{className:"col-xl-2 col-lg-3 col-md-4 col-sm-6 p-2",children:[(0,_.jsx)("label",{children:"Department"}),(0,_.jsx)(d.cp,{options:fe,isSearchable:!0,placeholder:"ALL",value:be,styles:m.cF,onChange:We})]}),(0,_.jsxs)("div",{className:"col-xl-2 col-lg-3 col-md-4 col-sm-6 p-2",children:[(0,_.jsx)("label",{children:"Employee"}),(0,_.jsx)(d.cp,{options:ne,isSearchable:!0,placeholder:"ALL",value:oe,styles:m.cF,onChange:se,isDisabled:!be})]}),(0,_.jsx)("div",{className:"col-auto p-2 d-flex align-items-center",children:(0,_.jsx)("button",{className:"btn btn-link ms-2 p-0 mb-2",onClick:He,style:{minWidth:"24px"},title:"Refresh Departments & Employees",children:(0,_.jsx)(h.c,{fontSize:"small"})})})]})]}),dataArray:qe,EnableSerialNumber:!0,columns:[(0,x.A5)("Department","string","Department"),(0,x.A5)("TotalMaleEmployees","number","Total Male Employees"),(0,x.A5)("TotalFemaleEmployees","number","Total Female Employees"),(0,x.A5)("TotalEmployees","number","Total Employees"),(0,x.A5)("TotalMalePresentToday","number","Total Male Present Today"),(0,x.A5)("TotalFemalePresentToday","number","Total Female Present Today"),(0,x.A5)("TotalPresentToday","number","Total Present Today")],isExpendable:!0,tableMaxHeight:550,expandableComp:e=>{let{row:t}=e,a=[],n=[];try{a="string"===typeof t.Employees?JSON.parse(t.Employees):t.Employees||[],n="string"===typeof t.MonthlyAverageAttendance?JSON.parse(t.MonthlyAverageAttendance):t.MonthlyAverageAttendance||[]}catch(s){a=[],n=[]}const l=(new Date).getFullYear(),o=new Map;return n.forEach((e=>{var t;const a="".concat(e.MonthNumber,"-").concat(e.YearNumber);o.set(a,null!==(t=e.UniqueEmployeeDays)&&void 0!==t?t:0)})),(0,_.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:(0,_.jsxs)("div",{style:{display:"flex",gap:"20px"},children:[(0,_.jsxs)("table",{style:{width:"20%",borderCollapse:"collapse",border:"1px solid #ccc",height:"10px"},children:[(0,_.jsx)("thead",{children:(0,_.jsxs)("tr",{style:{backgroundColor:"#f0f0f0"},children:[(0,_.jsx)("th",{style:{border:"1px solid #ccc",padding:"2px",textAlign:"left"},children:"Emp_Name"}),(0,_.jsx)("th",{style:{border:"1px solid #ccc",padding:"2px",textAlign:"left"},children:"Sex"})]})}),(0,_.jsx)("tbody",{children:a&&a.length>0?a.map(((e,t)=>(0,_.jsxs)("tr",{children:[(0,_.jsx)("td",{style:{border:"1px solid #ccc",padding:"8px"},children:(null===e||void 0===e?void 0:e.Emp_Name)||"-"}),(0,_.jsx)("td",{style:{border:"1px solid #ccc",padding:"8px"},children:(null===e||void 0===e?void 0:e.Sex)||"-"})]},t))):(0,_.jsx)("tr",{children:(0,_.jsx)("td",{colSpan:"2",style:{padding:"8px"},children:"No Employees Available"})})})]}),(0,_.jsxs)("div",{style:{flex:"1",border:"1px solid #ddd",borderRadius:"5px",padding:"10px",overflowX:"auto",whiteSpace:"nowrap"},children:[(0,_.jsx)("h3",{style:{textAlign:"center"},children:"Months & Attendance"}),(0,_.jsx)("div",{style:{display:"flex",gap:"10px"},children:[{name:"January",number:1},{name:"February",number:2},{name:"March",number:3},{name:"April",number:4},{name:"May",number:5},{name:"June",number:6},{name:"July",number:7},{name:"August",number:8},{name:"September",number:9},{name:"October",number:10},{name:"November",number:11},{name:"December",number:12}].map((e=>{var t;const a="".concat(e.number,"-").concat(l),n=null!==(t=o.get(a))&&void 0!==t?t:0;return(0,_.jsxs)("div",{style:{minWidth:"100px",padding:"8px",backgroundColor:"#f0f0f0",color:"black",borderRadius:"4px",textAlign:"center",userSelect:"none"},children:[(0,_.jsxs)("div",{style:{fontWeight:"bold"},children:[e.name," ",l]}),(0,_.jsx)("div",{style:{marginTop:"6px",fontSize:"14px",color:"#555"},children:n})]},e.number)}))})]})]})})}}),"defaultLeave"===B&&(0,_.jsx)(P,{currentView:B,onViewChange:e=>{q(e)},departments:fe,selectedDepartment:be,handleDepartmentChange:We,employees:ne,selectedEmployee:oe,setSelectedEmployee:se,handleRefreshData:He})]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(s.c,{open:M,maxWidth:"md",PaperProps:{style:{width:"500px",height:"500px"}},children:[(0,_.jsx)(r.c,{children:"Add Employee"}),(0,_.jsx)(c.c,{children:(0,_.jsx)(b.c,{multiple:!0,options:[{UserId:"all",Name:"ALL"},...J],getOptionLabel:e=>e.Name,isOptionEqualToValue:(e,t)=>e.UserId===t.UserId,value:Se.some((e=>"all"===e.UserId))?[{UserId:"all",Name:"ALL"}]:Se,onChange:(e,t)=>{if(t.some((e=>"all"===e.UserId)))Ce(J);else{const e=t.filter(((e,t,a)=>t===a.findIndex((t=>t.UserId===e.UserId))));Ce(e)}},renderInput:e=>(0,_.jsx)(j.c,(0,n.c)((0,n.c)({},e),{},{placeholder:"Employees"}))})}),(0,_.jsxs)(i.c,{className:"d-flex justify-content-between flex-wrap",children:[(0,_.jsx)(D.c,{variant:"outlined",onClick:()=>Ce([]),children:"Clear"}),(0,_.jsxs)("span",{children:[(0,_.jsx)(D.c,{onClick:ke,children:"Cancel"}),(0,_.jsx)(D.c,{onClick:Le,children:"Download"})]})]})]}),(0,_.jsx)(S.c,{children:(0,_.jsxs)(C.c,{sx:{minHeight:"50vh"},children:[(0,_.jsxs)("div",{className:"ps-3 pb-2 pt-0 d-flex align-items-center justify-content-between border-bottom mb-3",children:[(0,_.jsx)("h6",{className:"fa-18",children:(0,_.jsx)(D.c,{size:"small",variant:"outlined",className:"mx-2",children:"EMPLOYEE"})}),(1===re||0===re)&&(0,_.jsxs)("div",{className:"d-flex align-items-center justify-content-start gap-3",children:[(0,_.jsx)(D.c,{onClick:Ee,variant:"contained",disabled:0===(null===ue||void 0===ue?void 0:ue.EmpId)||"ALL"===(null===ue||void 0===ue?void 0:ue.Name),children:"Individual Report"}),(0,_.jsx)(D.c,{onClick:()=>Fe(null===ue||void 0===ue||ue.From,null===ue||void 0===ue||ue.To),children:"Monthly Report"}),(0,_.jsx)(D.c,{onClick:()=>k(!0),children:"Cumulative Monthly Report"}),(0,_.jsx)(D.c,{onClick:Te,children:"Summary"})]})]}),(0,_.jsxs)("div",{className:"px-2 row mb-4",children:[(0,_.jsxs)("div",{className:"col-xl-2 col-lg-3 col-md-4 col-sm-6 p-2",children:[(0,_.jsx)("label",{children:"Employee"}),(0,_.jsx)(d.cp,{value:{value:null===ue||void 0===ue?void 0:ue.EmpId,label:null===ue||void 0===ue?void 0:ue.Name},onChange:e=>pe((0,n.c)((0,n.c)({},ue),{},{EmpId:e.value,Name:e.label})),options:[{value:0,label:"ALL"},...ne.map((e=>({value:e.UserId,label:e.Name})))],styles:m.cF,isSearchable:!0,placeholder:de,isDisabled:te})]}),(0,_.jsxs)("div",{className:"col-xl-2 col-lg-3 col-md-4 col-sm-6 p-2",children:[(0,_.jsx)("label",{children:"From"}),(0,_.jsx)("input",{type:"month",className:"cus-inpt",value:null===ue||void 0===ue||null===(a=ue.From)||void 0===a?void 0:a.slice(0,7),onChange:Ne})]})]}),(0,_.jsx)(x.cp,{dataArray:Z,columns:[{isCustomCell:!0,Cell:e=>{let{row:t}=e;return t.username},ColumnHeader:"Employee",isVisible:1,width:"20%",CellProps:{sx:{padding:"10px",textAlign:"left",fontWeight:"bold"}}},{isCustomCell:!0,Cell:e=>{let{row:t}=e;return Ie(t.LogDate||"--")},ColumnHeader:"Log Date",isVisible:1,width:"20%",CellProps:{sx:{padding:"10px",textAlign:"center",color:"gray"}}},...we],EnableSerialNumber:!0,CellSize:"small",disablePagination:!1})]})})]})})}},7824:(e,t,a)=>{var n=a(22411);t.c=void 0;var l=n(a(90864)),o=a(82496);t.c=(0,l.default)((0,o.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},31664:(e,t,a)=>{a.d(t,{c:()=>o});var n=a(27664),l=a(82496);const o=(0,n.c)((0,l.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh")},90864:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=a(27492)},84436:(e,t,a)=>{a.d(t,{c:()=>x});var n=a(45072),l=a(95656),o=a(69060),s=a(79736),r=a(21412),c=a(12556),i=a(49836),d=a(10099),m=a(33448);function u(e){return(0,m.cp)("MuiCardContent",e)}(0,d.c)("MuiCardContent",["root"]);var p=a(82496);const h=["className","component"],v=(0,c.cp)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),x=o.forwardRef((function(e,t){const a=(0,i.C)({props:e,name:"MuiCardContent"}),{className:o,component:c="div"}=a,d=(0,l.c)(a,h),m=(0,n.c)({},a,{component:c}),x=(e=>{const{classes:t}=e;return(0,r.c)({root:["root"]},u,t)})(m);return(0,p.jsx)(v,(0,n.c)({as:c,className:(0,s.c)(x.root,o),ownerState:m,ref:t},d))}))},90280:(e,t,a)=>{a.d(t,{c:()=>n});const n=a(91200).c},27492:(e,t,a)=>{a.r(t),a.d(t,{capitalize:()=>l.c,createChainedFunction:()=>o.c,createSvgIcon:()=>s.c,debounce:()=>r.c,deprecatedPropType:()=>c,isMuiElement:()=>i.c,ownerDocument:()=>d.c,ownerWindow:()=>m.c,requirePropFactory:()=>u,setRef:()=>p,unstable_ClassNameGenerator:()=>b,unstable_useEnhancedEffect:()=>h.c,unstable_useId:()=>v.c,unsupportedProp:()=>x,useControlled:()=>g.c,useEventCallback:()=>y.c,useForkRef:()=>f.c,useIsFocusVisible:()=>D.c});var n=a(31152),l=a(55832),o=a(90280),s=a(27664),r=a(72144);const c=function(e,t){return()=>null};var i=a(28276),d=a(93976),m=a(31328);a(45072);const u=function(e,t){return()=>null};const p=a(30472).c;var h=a(87188),v=a(18144);const x=function(e,t,a,n,l){return null};var g=a(61124),y=a(17908),f=a(56268),D=a(24724);const b={configure:e=>{n.c.configure(e)}}}}]);
//# sourceMappingURL=1620.f0f4acb6.chunk.js.map