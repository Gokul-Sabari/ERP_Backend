"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[7072],{17072:(e,l,t)=>{t.r(l),t.d(l,{default:()=>T});var a=t(30800),o=t(18256),n=t(29720),r=t(61584),s=t(5548),i=t(12572),c=t(15786),d=t(69060),u=t(39308),v=t(57704),m=t(1908),h=t(13724);const x={"Invoice No":["invoice_no","Do_Inv_No"],"Invoice Date":["invoice_date","Do_Date"],"Tally ID":["tally_id","Tally_Id"],"Alter ID":["alter_id","Alter_Id"],"Sales Ledger / Retailer":["sales_party_ledger_id","Retailer_Id"],"Before Tax":["invoice_value_before_tax","Total_Before_Tax"],"After Tax":["invoice_value_after_tax","Total_Invoice_value"],"Round Off":["round_off","Round_off"],Narration:["narration","Narration"],"Cancel Status":["cancel_status","Cancel_status"],"Created By":["created_by","Created_by"],"Altered By":["altered_by","Altered_by"],"Created On":["created_on_date","Created_on"],"Altered On":["alterd_date","Alterd_on"]};var p=t(82656),f=t(26773),j=t(4488),g=t(90048),y=t(71412),b=t(14499),_=t(82496);const S=e=>{let{loadingOn:l,loadingOff:t,Fromdate:o,Todate:n}=e;const[r,i]=(0,d.useState)([]),[c,v]=(0,d.useState)([]),[S,C]=(0,d.useState)({erpStatus:"",tallyStatus:"",comparisonDialog:!1,erpRow:{},tallyRow:{},reload:!1});(0,d.useEffect)((()=>{(0,m.q)({address:"reports/dataComparison/salesInvoice/alterBased?Fromdate=".concat(o,"&Todate=").concat(n),loadingOn:l,loadingOff:t}).then((e=>{if(e.success){var l,t;const o=(0,u.dq)(null===e||void 0===e||null===(l=e.others)||void 0===l?void 0:l.ERPDifference),n=(0,u.dq)(null===e||void 0===e||null===(t=e.others)||void 0===t?void 0:t.TallyDifference);i(o.map((e=>{const l=n.find((l=>(0,u.Qr)(null===l||void 0===l?void 0:l.tally_id,null===e||void 0===e?void 0:e.Tally_Id)));return(0,a.c)((0,a.c)({},e),{},{RowStatus:l?"Modified":"ONLY IN ERP",statusCode:l?3:1})}))),v(n.map((e=>{const l=o.find((l=>(0,u.Qr)(null===l||void 0===l?void 0:l.Tally_Id,null===e||void 0===e?void 0:e.tally_id)));return(0,a.c)((0,a.c)({},e),{},{RowStatus:l?"Modified":"ONLY IN Tally",statusCode:l?3:2})})))}else i([]),v([])})).catch((e=>console.error(e)))}),[o,n]);const T=()=>{C((e=>(0,a.c)((0,a.c)({},e),{},{comparisonDialog:!1,erpRow:{},tallyRow:{}})))},N=(0,d.useMemo)((()=>function(e,l,t){const a=[];for(const[r,[s,i]]of Object.entries(t)){var o,n;const t=null!==(o=e[s])&&void 0!==o?o:"",c=null!==(n=l[i])&&void 0!==n?n:"",d=String(t)===String(c)?"Match":"Different";a.push({label:r,tallyValue:String(t),erpValue:String(c),status:d})}return a}(S.tallyRow,S.erpRow,x)),[S.erpRow,S.tallyRow,x]);return console.log(r,c),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:"row p-2",children:[(0,_.jsx)("div",{className:"col-lg-6 p-2",children:(0,_.jsx)(h.cp,{title:"ERP Miss-Matched",headerFontSizePx:12,bodyFontSizePx:12,EnableSerialNumber:!0,ButtonArea:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("select",{className:"cus-inpt p-2 w-auto",value:S.erpStatus,onChange:e=>C((l=>(0,a.c)((0,a.c)({},l),{},{erpStatus:e.target.value}))),children:[(0,_.jsx)("option",{value:"",children:"All Type"}),(0,_.jsx)("option",{value:"1",children:"ERP only"}),(0,_.jsx)("option",{value:"3",children:"Modified"}),(0,_.jsx)("option",{value:"4",children:"Child"})]}),(0,_.jsx)("label",{className:"me-1",children:"Error Type:"})]}),dataArray:((0,u.Q$)(S.erpStatus)?r.filter((e=>(0,u.Qr)(e.statusCode,S.erpStatus))):r).sort(((e,l)=>String((null===e||void 0===e?void 0:e.Do_Inv_No)||"").localeCompare(String((null===l||void 0===l?void 0:l.Do_Inv_No)||"")))),columns:[(0,h.A5)("Do_Inv_No","string","Voucher Number"),(0,h.A5)("Do_Date","date","Date"),(0,h.A5)("Total_Invoice_value","number","Invoice Value"),(0,h.A5)("RowStatus","string","Reason"),{isVisible:1,ColumnHeader:"Preview Invoice",isCustomCell:!0,Cell:e=>{let{row:l}=e;const t=c.find((e=>(0,u.Qr)(null===e||void 0===e?void 0:e.tally_id,null===l||void 0===l?void 0:l.Tally_Id)));return(0,_.jsx)(s.c,{size:"small",onClick:()=>C((e=>(0,a.c)((0,a.c)({},e),{},{comparisonDialog:!0,erpRow:l,tallyRow:t||{}}))),children:(0,_.jsx)(y.c,{})})}}]})}),(0,_.jsx)("div",{className:"col-lg-6 p-2",children:(0,_.jsx)(h.cp,{title:"Tally Miss-Matched",headerFontSizePx:12,bodyFontSizePx:12,EnableSerialNumber:!0,ButtonArea:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("select",{className:"cus-inpt p-2 w-auto",value:S.tallyStatus,onChange:e=>C((l=>(0,a.c)((0,a.c)({},l),{},{tallyStatus:e.target.value}))),children:[(0,_.jsx)("option",{value:"",children:"All Type"}),(0,_.jsx)("option",{value:"2",children:"Tally only"}),(0,_.jsx)("option",{value:"3",children:"Modified"}),(0,_.jsx)("option",{value:"4",children:"Child"})]}),(0,_.jsx)("label",{className:"me-1",children:"Error Type:"})]}),dataArray:((0,u.Q$)(S.tallyStatus)?c.filter((e=>(0,u.Qr)(e.statusCode,S.tallyStatus))):c).sort(((e,l)=>String((null===e||void 0===e?void 0:e.invoice_no)||"").localeCompare(String((null===l||void 0===l?void 0:l.invoice_no)||"")))),columns:[(0,h.A5)("invoice_no","string","Voucher Number"),(0,h.A5)("invoice_date","date","Date"),(0,h.A5)("total_invoice_value","number","Invoice Value"),(0,h.A5)("RowStatus","string","Reason"),{isVisible:1,ColumnHeader:"Preview Invoice",isCustomCell:!0,Cell:e=>{let{row:l}=e;const t=r.find((e=>(0,u.Qr)(null===e||void 0===e?void 0:e.Tally_Id,null===l||void 0===l?void 0:l.tally_id)));return(0,_.jsx)(s.c,{size:"small",onClick:()=>C((e=>(0,a.c)((0,a.c)({},e),{},{comparisonDialog:!0,tallyRow:l,erpRow:t}))),children:(0,_.jsx)(y.c,{})})}}]})})]}),(0,_.jsxs)(p.c,{open:S.comparisonDialog,onClose:T,fullWidth:!0,maxWidth:"md",children:[(0,_.jsxs)(f.c,{className:"d-flex justify-content-between align-items-center",children:[(0,_.jsx)("span",{children:"Invoice Difference"}),(0,_.jsx)(s.c,{size:"small",onClick:T,children:(0,_.jsx)(b.c,{color:"error"})})]}),(0,_.jsx)(j.c,{children:(0,_.jsxs)("div",{className:"table-responsive ",children:[(0,_.jsx)("h2",{className:"text-xl font-bold mb-4",children:"ERP vs Tally Comparison"}),(0,_.jsxs)("table",{className:"table table-bordered border-gray-300",children:[(0,_.jsx)("thead",{children:(0,_.jsxs)("tr",{className:"bg-gray-100 text-left",children:[(0,_.jsx)("th",{children:"Field"}),(0,_.jsx)("th",{children:"Tally DB"}),(0,_.jsx)("th",{children:"ERP DB"}),(0,_.jsx)("th",{children:"Status"})]})}),(0,_.jsx)("tbody",{children:N.map(((e,l)=>{let{label:t,tallyValue:a,erpValue:o,status:n}=e;return(0,_.jsxs)("tr",{className:"Different"===n?"bg-red-100":"bg-white",children:[(0,_.jsx)("td",{className:" font-medium",children:t}),(0,_.jsx)("td",{children:a}),(0,_.jsx)("td",{children:o}),(0,_.jsx)("td",{className:"p-2 border font-semibold ".concat("Different"===n?"text-red-600":"text-green-600"),children:n})]},l)}))})]})]})}),(0,_.jsx)(g.c,{})]})]})},C=e=>{let{loadingOn:l,loadingOff:t,Fromdate:o,Todate:n}=e;const[r,s]=(0,d.useState)([]),[i,c]=(0,d.useState)({comparisonDialog:!1,excluedeSyced:1});return(0,d.useEffect)((()=>{(0,m.q)({address:"\n                reports/dataComparison/salesInvoice/invoiceBased?\n                Fromdate=".concat(o,"&\n                Todate=").concat(n,"&\n                excluedeSyced=").concat(i.excluedeSyced),loadingOn:l,loadingOff:t}).then((e=>{if(e.success){const l=(0,u.dq)(null===e||void 0===e?void 0:e.data);s(l)}else s([])})).catch((e=>console.error(e)))}),[o,n,i.excluedeSyced]),(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(h.cp,{title:"Sales unsynced list",headerFontSizePx:12,bodyFontSizePx:12,EnableSerialNumber:!0,ButtonArea:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("select",{className:"cus-inpt p-2 w-auto",value:i.excluedeSyced,onChange:e=>c((l=>(0,a.c)((0,a.c)({},l),{},{excluedeSyced:e.target.value}))),children:[(0,_.jsx)("option",{value:"0",children:"Show Synced"}),(0,_.jsx)("option",{value:"1",children:"Exclude Synced"})]}),(0,_.jsx)("label",{className:"me-1",children:"Error Type:"})]}),dataArray:r,columns:[(0,h.A5)("Do_Date","date","Date"),(0,h.A5)("Do_Inv_No","string","Voucher Number"),(0,h.A5)("Retailer_Name","string","Ledger"),(0,h.A5)("Total_Invoice_value","number","Invoice Value"),(0,h.A5)("erpChildCount","number","ERP-Products"),(0,h.A5)("tallyChildCount","number","Tally-Products"),(0,h.A5)("RowStatus","string","Reason")]})})},T=e=>{let{loadingOn:l,loadingOff:t}=e;const[m,h]=(0,d.useState)(1),[x,p]=(0,d.useState)({Fromdate:(0,u.SO)(10),Todate:(0,u.Q7)(),FilterFromDate:(0,u.SO)(10),FilterTodate:(0,u.Q7)()}),f=[{name:"AlterId based",component:(0,_.jsx)(S,{loadingOn:l,loadingOff:t,Fromdate:x.Fromdate,Todate:x.Todate})},{name:"InvoiceId based",component:(0,_.jsx)(C,{loadingOn:l,loadingOff:t,Fromdate:x.Fromdate,Todate:x.Todate})}];return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:"d-flex align-items-center flex-wrap mb-3",children:[(0,_.jsx)("label",{htmlFor:"from",className:"me-1 fw-bold ",children:"Fromdate: "}),(0,_.jsx)("input",{type:"date",id:"from",className:"cus-inpt p-2 w-auto me-2",value:x.FilterFromDate,onChange:e=>p((l=>(0,a.c)((0,a.c)({},l),{},{FilterFromDate:e.target.value})))}),(0,_.jsx)("label",{htmlFor:"to",className:"me-1 fw-bold ",children:"Todate: "}),(0,_.jsx)("input",{type:"date",id:"to",className:"cus-inpt p-2 w-auto",value:x.FilterTodate,onChange:e=>p((l=>(0,a.c)((0,a.c)({},l),{},{FilterTodate:e.target.value})))}),(0,_.jsx)(s.c,{size:"small",onClick:()=>p((e=>(0,a.c)((0,a.c)({},e),{},{Fromdate:e.FilterFromDate?e.FilterFromDate:e.Fromdate,Todate:e.FilterTodate?e.FilterTodate:e.Todate}))),children:(0,_.jsx)(v.c,{})})]}),(0,_.jsxs)(o.cp,{value:m,children:[(0,_.jsx)(i.c,{sx:{borderBottom:1,borderColor:"divider"},children:(0,_.jsx)(n.c,{indicatorColor:"transparant",onChange:(e,l)=>h(l),variant:"scrollable",scrollButtons:"auto",children:f.map(((e,l)=>(0,_.jsx)(c.c,{sx:m===l+1?{backgroundColor:"#c6d7eb"}:{},label:e.name,value:l+1},l)))})}),f.map(((e,l)=>(0,_.jsx)(r.c,{value:l+1,sx:{p:0,pt:2},children:e.component},l)))]})]})}},14499:(e,l,t)=>{t.d(l,{c:()=>n});var a=t(27664),o=t(82496);const n=(0,a.c)((0,o.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},57704:(e,l,t)=>{t.d(l,{c:()=>n});var a=t(27664),o=t(82496);const n=(0,a.c)((0,o.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},71412:(e,l,t)=>{t.d(l,{c:()=>n});var a=t(27664),o=t(82496);const n=(0,a.c)((0,o.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},18256:(e,l,t)=>{t.d(l,{Ed:()=>c,cp:()=>r,oF:()=>s,qM:()=>i});var a=t(69060),o=t(82496);const n=a.createContext(null);function r(e){const{children:l,value:t}=e,r=function(){const[e,l]=a.useState(null);return a.useEffect((()=>{l("mui-p-".concat(Math.round(1e5*Math.random())))}),[]),e}(),s=a.useMemo((()=>({idPrefix:r,value:t})),[r,t]);return(0,o.jsx)(n.Provider,{value:s,children:l})}function s(){return a.useContext(n)}function i(e,l){const{idPrefix:t}=e;return null===t?null:"".concat(e.idPrefix,"-P-").concat(l)}function c(e,l){const{idPrefix:t}=e;return null===t?null:"".concat(e.idPrefix,"-T-").concat(l)}},29720:(e,l,t)=>{t.d(l,{c:()=>d});var a=t(45072),o=t(95656),n=t(69060),r=t(77828),s=t(18256),i=t(82496);const c=["children"],d=n.forwardRef((function(e,l){const{children:t}=e,d=(0,o.c)(e,c),u=(0,s.oF)();if(null===u)throw new TypeError("No TabContext provided");const v=n.Children.map(t,(e=>n.isValidElement(e)?n.cloneElement(e,{"aria-controls":(0,s.qM)(u,e.props.value),id:(0,s.Ed)(u,e.props.value)}):null));return(0,i.jsx)(r.c,(0,a.c)({},d,{ref:l,value:u.value,children:v}))}))},61584:(e,l,t)=>{t.d(l,{c:()=>p});var a=t(45072),o=t(95656),n=t(69060),r=t(79736),s=t(12556),i=t(23456),c=t(21412),d=t(33448);function u(e){return(0,d.cp)("MuiTabPanel",e)}(0,t(10099).c)("MuiTabPanel",["root"]);var v=t(18256),m=t(82496);const h=["children","className","value"],x=(0,s.cp)("div",{name:"MuiTabPanel",slot:"Root",overridesResolver:(e,l)=>l.root})((e=>{let{theme:l}=e;return{padding:l.spacing(3)}})),p=n.forwardRef((function(e,l){const t=(0,i.c)({props:e,name:"MuiTabPanel"}),{children:n,className:s,value:d}=t,p=(0,o.c)(t,h),f=(0,a.c)({},t),j=(e=>{const{classes:l}=e;return(0,c.c)({root:["root"]},u,l)})(f),g=(0,v.oF)();if(null===g)throw new TypeError("No TabContext provided");const y=(0,v.qM)(g,d),b=(0,v.Ed)(g,d);return(0,m.jsx)(x,(0,a.c)({"aria-labelledby":b,className:(0,r.c)(j.root,s),hidden:d!==g.value,id:y,ref:l,role:"tabpanel",ownerState:f},p,{children:d===g.value&&n}))}))},12572:(e,l,t)=>{t.d(l,{c:()=>c});var a=t(0),o=t(31152),n=t(46712),r=t(83068);const s=(0,t(10099).c)("MuiBox",["root"]),i=(0,n.c)(),c=(0,a.c)({themeId:r.c,defaultTheme:i,defaultClassName:s.root,generateClassName:o.c.generate})}}]);
//# sourceMappingURL=7072.b861fdae.chunk.js.map