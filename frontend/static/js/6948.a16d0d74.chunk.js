"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[6948],{62344:(e,l,t)=>{t.d(l,{o$:()=>s,o5:()=>n,cF:()=>i,iI:()=>a,_8:()=>o});const r=t.p+"static/media/smt.aa4d4f940bbebff07a57.png",a={table:{style:{width:"auto",backgroundColor:"transparent"}},rows:{style:{backgroundColor:"transparent"}},headCells:{style:{backgroundColor:"#6b9080f8",color:"white",fontSize:"14px"}}},i={menu:(e,l)=>({...e,zIndex:9999}),menuPortal:e=>({...e,zIndex:9999}),groupHeading:e=>({...e,backgroundColor:"#f5f5f5",color:"#333",fontWeight:"bold",fontSize:"14px",padding:"8px 12px",borderBottom:"1px solid #ddd",textTransform:"uppercase"}),option:(e,l)=>({...e,backgroundColor:l.isSelected?"#2684FF":l.isFocused?"#E2ECF9":"white",color:l.isSelected?"white":"#333",padding:"10px 12px"})},s=[{id:1,headname:"Menu ID",variant:"head",align:"left",width:100},{id:2,headname:"MenuName"},{id:3,headname:"Read Rights"},{id:4,headname:"Add Rights"},{id:5,headname:"Edit Rights"},{id:6,headname:"Delete Rights"},{id:7,headname:"Print Rights"},{id:8,headname:"Action"}],n=[{dataBase:1,name:"SHANKAR TRADERS",business:"Wholesale Merchant in Dhall",address:"32, Chitrakara Street, Madurai - 01 <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:r,gstin:"33AADFS6973R1ZD",phone:"984-313-1353, 984-335-5166",fssai:"12418012000818",bankAccount:"0021 5032 0885 122",ifsc:"TMBL0000002"},{dataBase:2,name:"SMT AGRO PRODUCTS",business:"",address:"H.O: 153, Chitrakara Street, 2nd Floor, Madurai -01 <br /> G.O: 746 Puliyur, Sayanapuram, Svga <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:r,gstin:"33ACMFS3420Q1ZQ",phone:"0452-4371625",fssai:"12418012000818",bankAccount:"0025 3031 0875 947",ifsc:"TMBL0000002"},{dataBase:3,name:"BHAVANI TRADERS",business:"",address:"H.O: 152-A, Chitrakara Street, Madurai -01 <br /> G.O: 30/1-Rajman Nagar, Chintamani Main Road, Mdu-01 <br /> Tax Invoice",logo:r,gstin:"33AAEFB6728J1ZG",phone:"958-559-7641, 958-559-7614",fssai:"12418012000670",bankAccount:"0021 5005 0800 309",ifsc:"TMBL0000002"}],o=[{name:"PURCHASE ORDER"},{name:"PURCHASE INVOICE"},{name:"SALE ORDER"},{name:"SALE INVOICE"},{name:"JOURNAL"},{name:"STOCK JOURNAL"},{name:"PAYMENT"},{name:"RECEIPT"},{name:"CONTRA"}]},24316:(e,l,t)=>{t.r(l),t.d(l,{default:()=>M});var r=t(69060),a=t(1908),i=t(39308),s=t(12572),n=t(85624),o=t(67828),c=t(56880),d=t(89e3),h=t(77828),x=t(15786),g=t(44380),u=t(99904),j=t(33856),m=t(58612),p=t(27454),b=t(96464),f=t(29504),v=t(5930),k=t(5548),y=t(3358),A=t(60476),S=t(82656),N=t(4488),w=t(90048),C=t(61988),P=t(36992),I=t(41459),D=t(46864),_=t(74912),T=t(99852),B=t(62344),F=t(56480),R=t(35372),L=t(26773),V=t(14499),W=t(49608),E=t(33452),O=t(82496);const $=e=>{let{open:l,onClose:t,brokerData:a}=e;const s=(0,r.useRef)(null),n=(0,E.useReactToPrint)({content:()=>s.current}),o=(null===a||void 0===a?void 0:a.Items)||[],c=o.reduce(((e,l)=>e+parseFloat(l.Brok_Amt||0)),0),h=o.reduce(((e,l)=>e+parseFloat(l.Coolie_Amt||0)),0),x=parseFloat((null===a||void 0===a?void 0:a.Total_Amount)||0),g=parseFloat((null===a||void 0===a?void 0:a.VilaiVasi)||0),u=x-c+h-g,j=Math.round(u),m=j-u,p=(()=>{const e=o.reduce(((e,l)=>{const t=Math.round(parseFloat(l.KGS)/parseFloat(l.QTY));return isNaN(t)||(e[t]=(e[t]||0)+parseFloat(l.QTY)),e}),{});return e?Object.entries(e).sort(((e,l)=>{let[t]=e,[r]=l;return t-r})).map((e=>{let[l,t]=e;return`${l}kg - ${t}`})).join(" & "):null})();return(0,O.jsxs)(S.c,{open:l,onClose:t,fullWidth:!0,maxWidth:"lg",children:[(0,O.jsxs)(L.c,{children:["Broker Report: ",null===a||void 0===a?void 0:a.Broker_Name,(0,O.jsx)(k.c,{"aria-label":"close",onClick:t,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,O.jsx)(V.c,{})})]}),(0,O.jsxs)(N.c,{ref:s,children:[(0,O.jsxs)("div",{className:"text-center mb-3",children:[(0,O.jsx)("h4",{children:"Broker Report Page"}),(0,O.jsxs)("p",{className:"mb-0",children:["Date: ",(new Date).toLocaleDateString("en-IN")]}),(0,O.jsxs)("p",{className:"mb-0",children:["Broker: ",null===a||void 0===a?void 0:a.Broker_Name]}),p&&(0,O.jsxs)("p",{className:"mb-0",children:["Pack Sizes: ",p]})]}),(0,O.jsxs)("table",{className:"table table-bordered",style:{fontSize:"12px"},children:[(0,O.jsx)("thead",{children:(0,O.jsxs)("tr",{children:[(0,O.jsx)("th",{children:"PARTY NAME"}),(0,O.jsx)("th",{children:"ALIAS NAME"}),(0,O.jsx)("th",{className:"text-end",children:"BILL RATE"}),(0,O.jsx)("th",{className:"text-end",children:"BROKER EXP"}),(0,O.jsx)("th",{className:"text-end",children:"QTY"}),(0,O.jsx)("th",{className:"text-end",children:"KGS"}),(0,O.jsx)("th",{className:"text-end",children:"AMOUNT"}),(0,O.jsx)("th",{className:"text-end",children:"VILAIVAASI"})]})}),(0,O.jsxs)("tbody",{children:[o.map(((e,l)=>(0,O.jsxs)("tr",{children:[(0,O.jsx)("td",{children:e.Retailer_Name||e.Ledger_Name}),(0,O.jsx)("td",{children:e.Short_Name}),(0,O.jsx)("td",{className:"text-end",children:e.Item_Rate}),(0,O.jsx)("td",{className:"text-end",children:(0,i.SA)(e.Brok_Amt||0)}),(0,O.jsx)("td",{className:"text-end",children:e.QTY}),(0,O.jsx)("td",{className:"text-end",children:e.KGS}),(0,O.jsx)("td",{className:"text-end",children:(0,i.SA)(e.Amount)}),(0,O.jsx)("td",{className:"text-end",children:(0,i.SA)(e.Vilaivasi_Rate)})]},l))),(0,O.jsxs)("tr",{children:[(0,O.jsx)("td",{colSpan:"4",className:"text-end fw-bold",children:"TOTAL"}),(0,O.jsx)("td",{className:"text-end fw-bold",children:(null===a||void 0===a?void 0:a.Total_Qty)||0}),(0,O.jsx)("td",{className:"text-end fw-bold",children:(null===a||void 0===a?void 0:a.Total_KGS)||0}),(0,O.jsx)("td",{className:"text-end fw-bold",children:(0,i.SA)((null===a||void 0===a?void 0:a.Total_Amount)||0)}),(0,O.jsx)("td",{className:"text-end fw-bold",children:(0,i.SA)((null===a||void 0===a?void 0:a.VilaiVasi)||0)})]}),(0,O.jsx)("tr",{children:(0,O.jsx)("td",{className:"text-end fw-bold",children:p})})]})]}),(0,O.jsx)("div",{className:"row mt-3",children:(0,O.jsx)("div",{className:"col-6 offset-6",children:(0,O.jsx)("table",{className:"table table-bordered",style:{fontSize:"12px"},children:(0,O.jsxs)("tbody",{children:[(0,O.jsxs)("tr",{children:[(0,O.jsx)("td",{className:"fw-bold",children:"COOLIE"}),(0,O.jsx)("td",{className:"text-end fw-bold",children:(0,i.SA)(h)})]}),(0,O.jsxs)("tr",{children:[(0,O.jsx)("td",{className:"fw-bold",children:"BROKERAGE"}),(0,O.jsxs)("td",{className:"text-end fw-bold",children:["- ",(0,i.SA)(c)]})]}),(0,O.jsxs)("tr",{children:[(0,O.jsx)("td",{className:"fw-bold",children:"VILAIVAASI"}),(0,O.jsxs)("td",{className:"text-end fw-bold",children:["- ",(0,i.SA)(g)]})]}),(0,O.jsxs)("tr",{children:[(0,O.jsx)("td",{className:"fw-bold",children:"ROUNDOFF"}),(0,O.jsx)("td",{className:"text-end fw-bold",children:function(e){const l=Number(e)||0;return`${l>=0?"+":""}${(0,i.SA)(l)}`}(m)})]}),(0,O.jsxs)("tr",{className:"bg-light",children:[(0,O.jsx)("td",{className:"fw-bold",children:"NET TOTAL"}),(0,O.jsx)("td",{className:"text-end fw-bold",children:(0,i.SA)(j)})]})]})})})}),(0,O.jsx)("div",{className:"text-center mt-3 small",children:(0,O.jsx)("p",{children:"This is a computer generated report"})})]}),(0,O.jsxs)(w.c,{children:[(0,O.jsx)(d.c,{startIcon:(0,O.jsx)(V.c,{}),variant:"outlined",color:"error",onClick:t,children:"Close"}),(0,O.jsx)(d.c,{startIcon:(0,O.jsx)(W.c,{}),variant:"contained",color:"primary",onClick:n,children:"Download"})]})]})},M=e=>{let{loadingOn:l,loadingOff:t}=e;const[L,V]=(0,r.useState)({page:0,rowsPerPage:10}),[W,E]=(0,r.useState)({page:0,rowsPerPage:10}),[M,Q]=(0,r.useState)(0),[z,G]=(0,r.useState)({broker:[]}),[K,Z]=(0,r.useState)({FromDate:(new Date).toISOString().split("T")[0],ToDate:(new Date).toISOString().split("T")[0],Broker:{value:"",label:"ALL Brokers"},Ledger:{value:"",label:"All Ledger"},Item:{value:"",label:"All Item"},refresh:!1,filterDialog:!1}),[U,Y]=(0,r.useState)([]),[q,H]=(0,r.useState)({}),[J,X]=(0,r.useState)({FromDate:(new Date).toISOString().split("T")[0],ToDate:(new Date).toISOString().split("T")[0],Broker:{value:"",label:"ALL Brokers"},Ledger:{value:"",label:"All Ledger"},Item:{value:"",label:"All Item"},VilaiVasiZero:{value:"",label:"All"},refresh:!1,filterDialog:!1}),[ee,le]=(0,r.useState)([]),[te,re]=(0,r.useState)({ledgers:[],items:[]}),[ae,ie]=(0,r.useState)({}),[se,ne]=(0,r.useState)(!1),oe=JSON.parse(localStorage.getItem("user")),[ce,de]=(0,r.useState)(!1),[he,xe]=(0,r.useState)(null),[ge,ue]=(0,r.useState)("");(0,r.useEffect)((()=>{(0,a.q)({address:"reports/brokerageReport/getInvolvedBroker"}).then((e=>{e.success&&G((l=>({...l,broker:(0,i.dq)(e.data)})))})).catch(console.error)}),[]),(0,r.useEffect)((()=>{(async()=>{try{l();const e=await(0,a.q)({address:`reports/brokerageNakalReport/sales?FromDate=${K.FromDate}&ToDate=${K.ToDate}&broker=${K.Broker.value}`});if(e.success){const l=(0,i.dq)(e.data);Y(l);const t={};l.forEach((e=>{const l=`${e.Do_Id}-${e.Product_Id}`;t[l]=e.brokerage||""})),H(t)}else Y([]),H({})}catch(e){Y([]),H({})}finally{t()}})()}),[K.refresh]),(0,r.useEffect)((()=>{(async()=>{try{l();let e=`reports/brokerageNagal/list?FromDate=${J.FromDate}&ToDate=${J.ToDate}`;J.Broker.value&&(e+=`&broker=${J.Broker.value}`),J.Ledger.value&&(e+=`&ledger=${J.Ledger.value}`),J.Item.value&&(e+=`&item=${J.Item.value}`),J.VilaiVasiZero.value&&(e+=`&vilaivasiFilter=${J.VilaiVasiZero.value}`);const t=await(0,a.q)({address:e});if(t.success){const e=(0,i.dq)(t.data);le(e);const l=e.flatMap((e=>e.Items||[])),r=Array.from(new Map(l.map((e=>[e.Ledger_Tally_Id,{value:e.Ledger_Tally_Id,label:e.Ledger_Name}]))).values()),a=Array.from(new Map(l.map((e=>[e.Product_Id,{value:e.Product_Id,label:e.Product_Name}]))).values());re({ledgers:r,items:a})}}catch(e){}finally{t()}})()}),[J.refresh]);const je=()=>Z((e=>({...e,filterDialog:!1}))),me=()=>X((e=>({...e,filterDialog:!1}))),pe=(0,r.useMemo)((()=>U.reduce(((e,l)=>(0,i.Q5)(e,l.displayQuantity||l.Qty||0)),0)),[U]),be=(0,r.useMemo)((()=>ee.reduce(((e,l)=>(0,i.Q5)(e,l.Total_Bags||0)),0)),[ee]),fe=(e,l,t)=>{const r=[...U];r[e][l]=parseFloat(t)||0,Y(r)},ve=(0,r.useMemo)((()=>ee&&0!==ee.length?ee.reduce(((e,l)=>{const t=l.Broker_Name||"Unknown Broker";return e[t]||(e[t]=[]),e[t].push(l),e}),{}):{}),[ee]),ke=(0,r.useMemo)((()=>Object.keys(ve)),[ve]);return(0,O.jsxs)(s.c,{children:[(0,O.jsxs)(n.c,{sx:{p:3,mb:3},children:[(0,O.jsxs)(o.cp,{container:!0,justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,O.jsx)(c.c,{variant:"h5",component:"h2",children:"Brokerage Nagal Report"}),(0,O.jsxs)(s.c,{children:[(0,O.jsx)(d.c,{variant:"outlined",startIcon:(0,O.jsx)(C.c,{}),onClick:()=>0===M?Z((e=>({...e,filterDialog:!0}))):X((e=>({...e,filterDialog:!0}))),sx:{mr:2},children:"Filters"}),(0,O.jsxs)(c.c,{component:"span",variant:"body1",children:["Total Bags: ",(0,O.jsx)("strong",{children:0===M?pe:be})]})]})]}),(0,O.jsxs)(h.c,{value:M,onChange:(e,l)=>Q(l),sx:{mb:3},children:[(0,O.jsx)(x.c,{label:"Data Entry"}),(0,O.jsx)(x.c,{label:"Listing"})]}),0===M&&(0,O.jsxs)(s.c,{mb:1,sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:2},children:[(0,O.jsx)(c.c,{sx:{fontWeight:"bold"},children:"VilaiVasi (All):"}),(0,O.jsx)(g.c,{type:"number",size:"small",value:ge,inputProps:{step:"1"},onChange:e=>{ue(e.target.value),H((l=>{const t={...l};return U.forEach((l=>{const r=`${l.Do_Id}-${l.Product_Id}`;t[r]=e.target.value})),t}))},placeholder:"Set VilaiVasi for all",sx:{"& .MuiInputBase-input":{height:40,boxSizing:"border-box"}}}),(0,O.jsx)(d.c,{variant:"outlined",size:"small",onClick:()=>{ue(""),H((e=>{const l={...e};return U.forEach((e=>{const t=`${e.Do_Id}-${e.Product_Id}`;l[t]=""})),l}))},children:"Clear All"})]}),0===M?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(u.c,{component:n.c,children:[(0,O.jsxs)(j.c,{size:"small",children:[(0,O.jsx)(m.c,{children:(0,O.jsxs)(p.c,{sx:{backgroundColor:"primary.main"},children:[(0,O.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Date"}),(0,O.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},children:"Do No"}),(0,O.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},children:"Product"}),(0,O.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},children:"Ledger_Name"}),(0,O.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},children:"Broker"}),(0,O.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Bill_Qty"}),(0,O.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Qty"}),(0,O.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Rate"}),(0,O.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Pack"}),(0,O.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Amount"}),(0,O.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Brok.Rate"}),(0,O.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Brokerage"}),(0,O.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Coolie.Rate"}),(0,O.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Coolie.Amt"}),(0,O.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Vilaivasi"}),(0,O.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Narration"}),(0,O.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Vilaivasi Amt"})]})}),(0,O.jsx)(f.c,{children:U.slice(L.page*L.rowsPerPage,L.page*L.rowsPerPage+L.rowsPerPage).map(((e,l)=>{const t=q[`${e.Do_Id}-${e.Product_Id}`]||"",r=(a=t,i=e.Bill_Qty,(parseFloat(a)||0)/100*(parseFloat(i)||0));var a,i,s,n;return(0,O.jsxs)(p.c,{hover:!0,children:[(0,O.jsx)(b.c,{align:"left",children:e.Date.split("T")[0]}),(0,O.jsx)(b.c,{children:e.Do_No||e.Do_Inv_No}),(0,O.jsx)(b.c,{children:e.Product_Name}),(0,O.jsx)(b.c,{children:e.Retailer_Name}),(0,O.jsx)(b.c,{children:e.CostCenterGet}),(0,O.jsx)(b.c,{align:"right",children:e.Bill_Qty}),(0,O.jsx)(b.c,{align:"right",children:null===e||void 0===e?void 0:e.displayQuantity}),(0,O.jsx)(b.c,{align:"right",children:e.Rate||e.Item_Rate}),(0,O.jsx)(b.c,{align:"right",children:e.Pack}),(0,O.jsx)(b.c,{align:"right",children:e.Amount}),(0,O.jsx)(b.c,{align:"right",children:(0,O.jsx)(g.c,{size:"small",type:"number",value:e.Brokerage,onChange:e=>fe(l,"Brokerage",e.target.value),sx:{width:"80px"},inputProps:{step:"0.01"}})}),(0,O.jsx)(b.c,{align:"right",children:e.Brokerage*e.displayQuantity}),(0,O.jsx)(b.c,{align:"right",children:(0,O.jsx)(g.c,{size:"small",type:"number",value:e.Coolie,onChange:e=>fe(l,"Coolie",e.target.value),sx:{width:"80px"},inputProps:{step:"0.01"}})}),(0,O.jsx)(b.c,{align:"right",children:e.Coolie*e.displayQuantity}),(0,O.jsx)(b.c,{align:"right",children:(0,O.jsx)(g.c,{size:"small",type:"number",value:t,onChange:(s=e.Do_Id,n=e.Product_Id,e=>{const l=e.target.value,t=`${s}-${n}`;H((e=>({...e,[t]:l})))}),sx:{width:"120px"},inputProps:{step:"0.01"}})}),(0,O.jsx)(b.c,{align:"right",children:e.Narration}),(0,O.jsx)(b.c,{align:"right",children:r.toFixed(2)})]},l)}))})]}),(0,O.jsx)(v.c,{rowsPerPageOptions:[10,25,50,100],component:"div",count:U.length,rowsPerPage:L.rowsPerPage,page:L.page,onPageChange:(e,l)=>V({...L,page:l}),onRowsPerPageChange:e=>V({page:0,rowsPerPage:parseInt(e.target.value,10)})})]}),(0,O.jsx)(s.c,{sx:{mt:3,display:"flex",justifyContent:"flex-end"},children:(0,O.jsx)(d.c,{variant:"contained",color:"primary",startIcon:(0,O.jsx)(P.c,{}),onClick:async()=>{l();try{ne(!0);const e=U.map((e=>{const l=q[`${e.Do_Id}-${e.Product_Id}`];return{...e,brokerage:parseFloat(l)||0,Vilai_Vasi:parseFloat(l)||0,Vilaivasi_Rate:(parseFloat(l)||0)/100*(parseFloat(e.Bill_Qty)||0),Brok_Rate:null===e||void 0===e?void 0:e.Brokerage,Brok_Amt:(null===e||void 0===e?void 0:e.Brokerage)*(null===e||void 0===e?void 0:e.displayQuantity),Coolie_Rate:null===e||void 0===e?void 0:e.Coolie,Coolie_Amt:(null===e||void 0===e?void 0:e.Coolie)*(null===e||void 0===e?void 0:e.displayQuantity),Amount:null===e||void 0===e?void 0:e.Amount,Created_By:null===oe||void 0===oe?void 0:oe.UserId}})),l=await(0,a.q)({address:"reports/brokerageNagal/create",method:"POST",bodyData:e,headers:{"Content-Type":"application/json"}});l.success?(F.m4.success("Nakal Created successfully!"),Z((e=>({...e,refresh:!e.refresh})))):F.m4.error(l.message)}catch(e){F.m4.error("Save failed")}finally{ne(!1),t()}},disabled:se,size:"large",children:se?"Saving...":"Save Brokerage"})})]}):(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)(u.c,{component:n.c,children:[(0,O.jsxs)(j.c,{size:"small",children:[(0,O.jsx)(m.c,{children:(0,O.jsxs)(p.c,{sx:{backgroundColor:"primary.main"},children:[(0,O.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},children:"Broker"}),(0,O.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Total KGS"}),(0,O.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Total Bill Qty"}),(0,O.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Total_Amount"}),(0,O.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Total_Broker_Exp"}),(0,O.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Total_VilaiVasi"}),(0,O.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Total_Bags"}),(0,O.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Actions"})]})}),(0,O.jsx)(f.c,{children:ke.length>0?ke.slice(W.page*W.rowsPerPage,W.page*W.rowsPerPage+W.rowsPerPage).map(((e,l)=>{var t;const a=ee.find((l=>l.Broker_Name===e));return(0,O.jsxs)(r.Fragment,{children:[(0,O.jsxs)(p.c,{hover:!0,children:[(0,O.jsxs)(b.c,{children:[(0,O.jsx)(k.c,{size:"small",onClick:()=>(e=>ie((l=>({...l,[e]:!l[e]}))))(e),children:ae[e]?(0,O.jsx)(I.c,{}):(0,O.jsx)(D.c,{})}),e]}),(0,O.jsx)(b.c,{align:"right",children:(null===a||void 0===a?void 0:a.Total_Qty)||"0.00"}),(0,O.jsx)(b.c,{align:"right",children:(null===a||void 0===a?void 0:a.Total_KGS)||"0.00"}),(0,O.jsx)(b.c,{align:"right",children:(null===a||void 0===a?void 0:a.Total_Amount)||"0.00"}),(0,O.jsx)(b.c,{align:"right",children:(null===a||void 0===a?void 0:a.Broker_Exp)||"0.00"}),(0,O.jsx)(b.c,{align:"right",children:(null===a||void 0===a?void 0:a.VilaiVasi)||"0.00"}),(0,O.jsx)(b.c,{align:"right",children:(null===a||void 0===a?void 0:a.Total_Bags)||0}),(0,O.jsx)(b.c,{align:"right",children:(0,O.jsx)(y.c,{title:"Preview PDF",children:(0,O.jsx)(k.c,{color:"primary",onClick:()=>{xe(a),de(!0)},children:(0,O.jsx)(R.c,{})})})}),(0,O.jsx)($,{open:ce,onClose:()=>de(!1),brokerData:he})]}),(0,O.jsx)(p.c,{children:(0,O.jsx)(b.c,{style:{padding:0},colSpan:7,children:(0,O.jsx)(A.c,{in:ae[e],timeout:"auto",unmountOnExit:!0,children:(0,O.jsxs)(s.c,{margin:1,children:[(0,O.jsxs)(c.c,{variant:"h6",gutterBottom:!0,component:"div",children:["Details for ",e]}),(0,O.jsxs)(j.c,{size:"small",children:[(0,O.jsx)(m.c,{children:(0,O.jsxs)(p.c,{children:[(0,O.jsx)(b.c,{children:"Date"}),(0,O.jsx)(b.c,{children:"Invoice No"}),(0,O.jsx)(b.c,{children:"Retailer"}),(0,O.jsx)(b.c,{children:"Alias"}),(0,O.jsx)(b.c,{children:"Product"}),(0,O.jsx)(b.c,{children:"Short Name"}),(0,O.jsx)(b.c,{align:"right",children:"QTY"}),(0,O.jsx)(b.c,{align:"right",children:"KGS"}),(0,O.jsx)(b.c,{align:"right",children:"Amount"}),(0,O.jsx)(b.c,{align:"right",children:"Vilai Vasi"}),(0,O.jsx)(b.c,{align:"right",children:"Vilai Amt"})]})}),(0,O.jsx)(f.c,{children:null===a||void 0===a||null===(t=a.Items)||void 0===t?void 0:t.map(((e,l)=>{var t;return(0,O.jsxs)(p.c,{children:[(0,O.jsx)(b.c,{children:e.Date}),(0,O.jsx)(b.c,{children:e.Do_Inv_No}),(0,O.jsx)(b.c,{children:e.Retailer_Name}),(0,O.jsx)(b.c,{children:e.Ledger_Alias}),(0,O.jsx)(b.c,{children:e.Product_Name}),(0,O.jsx)(b.c,{children:e.Short_Name}),(0,O.jsx)(b.c,{align:"right",children:e.QTY}),(0,O.jsx)(b.c,{align:"right",children:e.KGS}),(0,O.jsx)(b.c,{align:"right",children:null===(t=e.Amount)||void 0===t?void 0:t.toFixed(2)}),(0,O.jsx)(b.c,{align:"right",children:e.Vilai_Vasi}),(0,O.jsx)(b.c,{align:"right",children:e.Vilai_Vasi})]},l)}))})]})]})})})})]},l)})):(0,O.jsx)(p.c,{children:(0,O.jsx)(b.c,{colSpan:7,align:"center",children:"No data found"})})})]}),(0,O.jsx)(v.c,{rowsPerPageOptions:[10,25,50,100],component:"div",count:ke.length,rowsPerPage:W.rowsPerPage,page:W.page,onPageChange:(e,l)=>E({...W,page:l}),onRowsPerPageChange:e=>E({page:0,rowsPerPage:parseInt(e.target.value,10)})})]})})]}),(0,O.jsxs)(S.c,{open:K.filterDialog&&0===M,onClose:je,maxWidth:"sm",fullWidth:!0,children:[(0,O.jsxs)(N.c,{children:[(0,O.jsxs)(s.c,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,O.jsx)(c.c,{variant:"h6",children:"Data Entry Filters"}),(0,O.jsx)(k.c,{onClick:je,children:(0,O.jsx)(_.c,{})})]}),(0,O.jsxs)(o.cp,{container:!0,spacing:2,children:[(0,O.jsx)(o.cp,{item:!0,xs:12,children:(0,O.jsx)(g.c,{fullWidth:!0,type:"date",label:"From Date",value:K.FromDate,onChange:e=>Z((l=>({...l,FromDate:e.target.value}))),InputLabelProps:{shrink:!0}})}),(0,O.jsx)(o.cp,{item:!0,xs:12,children:(0,O.jsx)(g.c,{fullWidth:!0,type:"date",label:"To Date",value:K.ToDate,onChange:e=>Z((l=>({...l,ToDate:e.target.value}))),InputLabelProps:{shrink:!0}})}),(0,O.jsx)(o.cp,{item:!0,xs:2,style:{display:"flex",alignItems:"flex-end"}}),(0,O.jsx)(o.cp,{item:!0,xs:12,children:(0,O.jsx)(T.cp,{fullWidth:!0,label:"Brokers",value:K.Broker,onChange:e=>Z((l=>({...l,Broker:e}))),options:[{value:"",label:"ALL Brokers"},...z.broker],styles:B.cF,menuPortalTarget:document.body,isSearchable:!0,placeholder:"Select Broker"})})]})]}),(0,O.jsxs)(w.c,{children:[(0,O.jsx)(d.c,{onClick:je,children:"Cancel"}),(0,O.jsx)(d.c,{variant:"contained",onClick:()=>{ue(""),H((e=>{const l={...e};return U.forEach((e=>{const t=`${e.Do_Id}-${e.Product_Id}`;l[t]=""})),l})),Z((e=>({...e,refresh:!e.refresh,filterDialog:!1})))},children:"Apply Filters"})]})]}),(0,O.jsxs)(S.c,{open:J.filterDialog&&1===M,onClose:me,maxWidth:"sm",fullWidth:!0,children:[(0,O.jsxs)(N.c,{children:[(0,O.jsxs)(s.c,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,O.jsx)(c.c,{variant:"h6",children:"Listing Filters"}),(0,O.jsx)(k.c,{onClick:me,children:(0,O.jsx)(_.c,{})})]}),(0,O.jsxs)(o.cp,{container:!0,spacing:2,children:[(0,O.jsx)(o.cp,{item:!0,xs:5,children:(0,O.jsx)(g.c,{fullWidth:!0,type:"date",label:"From Date",value:J.FromDate,onChange:e=>X((l=>({...l,FromDate:e.target.value}))),InputLabelProps:{shrink:!0}})}),(0,O.jsx)(o.cp,{item:!0,xs:5,children:(0,O.jsx)(g.c,{fullWidth:!0,type:"date",label:"To Date",value:J.ToDate,onChange:e=>X((l=>({...l,ToDate:e.target.value}))),InputLabelProps:{shrink:!0}})}),(0,O.jsx)(o.cp,{item:!0,xs:2,style:{display:"flex",alignItems:"flex-end"},children:(0,O.jsx)(d.c,{variant:"contained",color:"primary",onClick:()=>{X((e=>({...e,refresh:!e.refresh})))},style:{height:"30px",width:"100%"},children:"Search"})}),(0,O.jsx)(o.cp,{item:!0,xs:12,children:(0,O.jsx)(T.cp,{fullWidth:!0,value:J.VilaiVasiZero,onChange:e=>X((l=>({...l,VilaiVasiZero:e}))),options:[{value:"",label:"All"},{value:"zero",label:"VilaiVasi Zero"},{value:"nonzero",label:"VilaiVasi Non-Zero"}],styles:B.cF,menuPortalTarget:document.body,placeholder:"VilaiVasi Zero/Non-Zero"})}),(0,O.jsx)(o.cp,{item:!0,xs:12,children:(0,O.jsx)(T.cp,{fullWidth:!0,label:"Brokers",value:J.Broker,onChange:e=>X((l=>({...l,Broker:e}))),options:[{value:"",label:"ALL Brokers"},...z.broker],styles:B.cF,menuPortalTarget:document.body,isSearchable:!0,placeholder:"Select Broker"})}),(0,O.jsx)(o.cp,{item:!0,xs:12,children:(0,O.jsx)(T.cp,{fullWidth:!0,label:"Ledger",value:J.Ledger,onChange:e=>X((l=>({...l,Ledger:e}))),options:[{value:"",label:"ALL Ledger"},...te.ledgers],styles:B.cF,menuPortalTarget:document.body,isSearchable:!0,placeholder:"Select Ledger"})}),(0,O.jsx)(o.cp,{item:!0,xs:12,children:(0,O.jsx)(T.cp,{fullWidth:!0,label:"Item",value:J.Item,onChange:e=>X((l=>({...l,Item:e}))),options:[{value:"",label:"ALL Item"},...te.items],styles:B.cF,menuPortalTarget:document.body,isSearchable:!0,placeholder:"Select Item"})})]})]}),(0,O.jsxs)(w.c,{children:[(0,O.jsx)(d.c,{onClick:me,children:"Cancel"}),(0,O.jsx)(d.c,{variant:"contained",onClick:()=>{X((e=>({...e,refresh:!e.refresh,filterDialog:!1})))},children:"Apply Filters"})]})]})]})}}}]);
//# sourceMappingURL=6948.a16d0d74.chunk.js.map