"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[4924],{14924:(e,l,s)=>{s.r(l),s.d(l,{default:()=>m});var r=s(30800),a=s(69060),t=s(1908),c=s(39308),n=s(13724),i=s(43692),o=s(5548),d=s(56480),h=s(87016),u=s(71412),y=s(82496);const g=e=>{try{const[l]=e.split(" "),[s,r,a]=l?null===l||void 0===l?void 0:l.split("-"):[],t=new Date(a,r-1,s);return t?(0,c.uy)(t):""}catch(l){return console.error("Failed when parse date: ",l),""}},m=e=>{let{loadingOn:l,loadingOff:s}=e;const[m,v]=(0,a.useState)([]),[p,x]=(0,a.useState)([]),_=(0,c.gV)().user,[j,A]=(0,a.useState)({refresh:!1,viewNotSynced:!1,searchERPLol:"",searchTallyLol:"",searchNotSynced:""});(0,a.useEffect)((()=>{l&&l(),(0,t.q)({address:"masters/tallyMaster/ledger",headers:{Db:null===_||void 0===_?void 0:_.Company_id}}).then((e=>{if(e.success){var l,s;const r=Array.isArray(null===e||void 0===e||null===(l=e.others)||void 0===l?void 0:l.tallyResult)?null===e||void 0===e||null===(s=e.others)||void 0===s?void 0:s.tallyResult:[];v(e.data),x(r)}})).catch((e=>console.error(e))).finally((()=>{s&&s()}))}),[j.refresh]);const P=(0,a.useMemo)((()=>p.filter((e=>!m.some((l=>(0,c.Qr)(e.Ledger_Tally_Id,l.Ledger_Tally_Id)))))),[m.length,p.length]),N=(0,a.useMemo)((()=>j.searchERPLol?m.filter((e=>(0,c.MP)(Object.values(e).join(" ")).includes((0,c.MP)(j.searchERPLol)))):m),[j.searchERPLol,m.length]),C=(0,a.useMemo)((()=>j.searchTallyLol?p.filter((e=>(0,c.MP)(Object.values(e).join(" ")).includes((0,c.MP)(j.searchTallyLol)))):p),[j.searchTallyLol,p.length]),f=(0,a.useMemo)((()=>j.searchNotSynced?P.filter((e=>(0,c.MP)(Object.values(e).join(" ")).includes((0,c.MP)(j.searchNotSynced)))):P),[P.length,j.searchNotSynced]);return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(i.c,{children:[(0,y.jsxs)("div",{className:"px-3 py-2 fa-14",children:[(0,y.jsxs)("div",{className:"d-flex flex-wrap align-items-center",children:[(0,y.jsxs)("h5",{className:"flex-grow-1",children:["LOL SYNC (Differents: ",P.length,")"]}),(0,y.jsx)(o.c,{size:"small",onClick:()=>{l&&l(),(0,t.q)({address:"masters/retailers/lolSync",method:"POST"}).then((e=>{e.success?(d.m4.success(e.message),A((e=>(0,r.c)((0,r.c)({},e),{},{refresh:!e.refresh})))):d.m4.error(e.message)})).catch((e=>console.error(e))).finally((()=>{s&&s()}))},children:(0,y.jsx)(h.c,{})}),(0,y.jsx)(o.c,{size:"small",onClick:()=>A((e=>(0,r.c)((0,r.c)({},e),{},{viewNotSynced:!e.viewNotSynced}))),children:(0,y.jsx)(u.c,{})})]}),(0,y.jsx)("div",{className:"d-flex flex-wrap align-items-center"})]}),j.viewNotSynced?(0,y.jsx)(n.cp,{title:"Not synced list ",bodyFontSizePx:11,headerFontSizePx:11,dataArray:f,columns:[(0,n.A5)("Ledger_Tally_Id","string","Tally ID"),(0,n.A5)("Ledger_Name","string"),(0,n.A5)("Party_Mobile_1","string","MobileNo"),{isVisible:1,ColumnHeader:"Created Date",isCustomCell:!0,Cell:e=>{let{row:l}=e;return null!==l&&void 0!==l&&l.Date_Added?g(null===l||void 0===l?void 0:l.Date_Added):""}},(0,n.A5)("Party_District","string"),(0,n.A5)("Party_Group","string")],ButtonArea:(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("input",{type:"search",className:"cus-inpt p-1 w-auto",value:j.searchNotSynced,onChange:e=>A((l=>(0,r.c)((0,r.c)({},l),{},{searchNotSynced:e.target.value}))),placeholder:"Search.."})})}):(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{className:"row",children:[(0,y.jsx)("div",{className:"col-lg-6 p-1",children:(0,y.jsx)(n.cp,{title:"ERP - "+m.length,bodyFontSizePx:11,headerFontSizePx:11,dataArray:N,columns:[(0,n.A5)("Ledger_Tally_Id","string","Tally ID"),(0,n.A5)("Ledger_Name","string"),(0,n.A5)("Party_Mobile_1","string","MobileNo"),{isVisible:1,ColumnHeader:"Created Date",isCustomCell:!0,Cell:e=>{let{row:l}=e;return null!==l&&void 0!==l&&l.Date_Added?g(null===l||void 0===l?void 0:l.Date_Added):""}},(0,n.A5)("Party_District","string"),(0,n.A5)("Party_Group","string")],ButtonArea:(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("input",{type:"search",className:"cus-inpt p-1 w-auto",value:j.searchERPLol,onChange:e=>A((l=>(0,r.c)((0,r.c)({},l),{},{searchERPLol:e.target.value}))),placeholder:"Search.."})})})}),(0,y.jsx)("div",{className:"col-lg-6 p-1",children:(0,y.jsx)(n.cp,{title:"Tally - "+p.length,bodyFontSizePx:11,headerFontSizePx:11,dataArray:C,columns:[(0,n.A5)("Ledger_Tally_Id","string","Tally ID"),(0,n.A5)("Ledger_Name","string"),(0,n.A5)("Party_Mobile_1","string","MobileNo"),{isVisible:1,ColumnHeader:"Created Date",isCustomCell:!0,Cell:e=>{let{row:l}=e;return null!==l&&void 0!==l&&l.Date_Added?g(null===l||void 0===l?void 0:l.Date_Added):""}},(0,n.A5)("Party_District","string"),(0,n.A5)("Party_Group","string")],ButtonArea:(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("input",{type:"search",className:"cus-inpt p-1 w-auto",value:j.searchTallyLol,onChange:e=>A((l=>(0,r.c)((0,r.c)({},l),{},{searchTallyLol:e.target.value}))),placeholder:"Search.."})})})})]})})]})})}},87016:(e,l,s)=>{s.d(l,{c:()=>t});var r=s(27664),a=s(82496);const t=(0,r.c)((0,a.jsx)("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8m0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4z"}),"Sync")},71412:(e,l,s)=>{s.d(l,{c:()=>t});var r=s(27664),a=s(82496);const t=(0,r.c)((0,a.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")}}]);
//# sourceMappingURL=4924.1a4598b6.chunk.js.map