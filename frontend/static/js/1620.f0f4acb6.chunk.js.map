{"version":3,"file":"static/js/1620.f0f4acb6.chunk.js","mappings":"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","sources":["Components/tablecolumn.js","Pages/Attendance/defaultLeave.jsx","Pages/Attendance/fingerPrintAttendance.jsx","../node_modules/@mui/icons-material/Close.js","../node_modules/@mui/icons-material/esm/Refresh.js","../node_modules/@mui/icons-material/utils/createSvgIcon.js","../node_modules/@mui/material/CardContent/cardContentClasses.js","../node_modules/@mui/material/CardContent/CardContent.js","../node_modules/@mui/material/utils/createChainedFunction.js","../node_modules/@mui/material/utils/deprecatedPropType.js","../node_modules/@mui/utils/deprecatedPropType/deprecatedPropType.js","../node_modules/@mui/material/utils/requirePropFactory.js","../node_modules/@mui/utils/requirePropFactory/requirePropFactory.js","../node_modules/@mui/material/utils/setRef.js","../node_modules/@mui/material/utils/unsupportedProp.js","../node_modules/@mui/utils/unsupportedProp/unsupportedProp.js","../node_modules/@mui/material/utils/index.js"],"sourcesContent":["\r\nimport SMT_LOGO from './smt.png';\r\n\r\nexport const customTableStyles = {\r\n    table: {\r\n        style: {\r\n            width: 'auto',\r\n            backgroundColor: 'transparent',\r\n            // borderRadius: '5px',\r\n        }\r\n    },\r\n    rows: {\r\n        style: {\r\n            backgroundColor: 'transparent',\r\n        },\r\n    },\r\n    headCells: {\r\n        style: {\r\n            backgroundColor: '#6b9080f8',\r\n            color: 'white',\r\n            fontSize: '14px',\r\n            // borderRadius: '5px',\r\n        },\r\n    },\r\n};\r\n\r\nexport const customSelectStyles = {\r\n    // control: (provided, state) => ({\r\n    //     ...provided,\r\n    //     height: '45px',\r\n    //     background: 'rgba(255, 255, 255, 0.322)'\r\n    // }),\r\n    menu: (provided, state) => ({\r\n        ...provided,\r\n        zIndex: 9999,\r\n    }),\r\n    menuPortal: base => ({ ...base, zIndex: 9999 }),\r\n    groupHeading: (base) => ({\r\n        ...base,\r\n        backgroundColor: '#f5f5f5',\r\n        color: '#333',\r\n        fontWeight: 'bold',\r\n        fontSize: '14px',\r\n        padding: '8px 12px',\r\n        borderBottom: '1px solid #ddd',\r\n        textTransform: 'uppercase',\r\n    }),\r\n    option: (base, state) => ({\r\n        ...base,\r\n        backgroundColor: state.isSelected\r\n            ? '#2684FF'\r\n            : state.isFocused\r\n                ? '#E2ECF9'\r\n                : 'white',\r\n        color: state.isSelected ? 'white' : '#333',\r\n        padding: '10px 12px',\r\n    }),\r\n};\r\n\r\nexport const customSelectStyles2 = {\r\n    control: (provided, state) => ({\r\n        ...provided,\r\n        background: 'transparent',\r\n        border: 'none',\r\n        color: 'rgba(255, 255, 255, 0.322)',\r\n        // minWidth: '160px'\r\n    }),\r\n    menu: (provided, state) => ({\r\n        ...provided,\r\n        color: 'black',\r\n        zIndex: 9999,\r\n    }),\r\n};\r\n\r\nexport const MainMenu = [\r\n    {\r\n        id: 1,\r\n        headname: 'Menu ID',\r\n        variant: 'head',\r\n        align: 'left',\r\n        width: 100\r\n    },\r\n    {\r\n        id: 2,\r\n        headname: 'MenuName',\r\n    },\r\n    {\r\n        id: 3,\r\n        headname: 'Read Rights'\r\n    },\r\n    {\r\n        id: 4,\r\n        headname: 'Add Rights'\r\n    },\r\n    {\r\n        id: 5,\r\n        headname: 'Edit Rights'\r\n    },\r\n    {\r\n        id: 6,\r\n        headname: 'Delete Rights'\r\n    },\r\n    {\r\n        id: 7,\r\n        headname: 'Print Rights'\r\n    },\r\n    {\r\n        id: 8,\r\n        headname: 'Action'\r\n    }\r\n];\r\n\r\nexport const companyDetails = [\r\n    {\r\n        dataBase: 1,\r\n        name: 'SHANKAR TRADERS',\r\n        business: 'Wholesale Merchant in Dhall',\r\n        address: '32, Chitrakara Street, Madurai - 01 <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped',\r\n        logo: SMT_LOGO,\r\n        gstin: '33AADFS6973R1ZD',\r\n        phone: '984-313-1353, 984-335-5166',\r\n        fssai: '12418012000818',\r\n        bankAccount: '0021 5032 0885 122',\r\n        ifsc: 'TMBL0000002'\r\n    },\r\n    {\r\n        dataBase: 2,\r\n        name: 'SMT AGRO PRODUCTS',\r\n        business: '',\r\n        address: 'H.O: 153, Chitrakara Street, 2nd Floor, Madurai -01 <br /> G.O: 746 Puliyur, Sayanapuram, Svga <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped',\r\n        logo: SMT_LOGO,\r\n        gstin: '33ACMFS3420Q1ZQ',\r\n        phone: '0452-4371625',\r\n        fssai: '12418012000818',\r\n        bankAccount: '0025 3031 0875 947',\r\n        ifsc: 'TMBL0000002'\r\n    },\r\n    {\r\n        dataBase: 3,\r\n        name: 'BHAVANI TRADERS',\r\n        business: '',\r\n        address: 'H.O: 152-A, Chitrakara Street, Madurai -01 <br /> G.O: 30/1-Rajman Nagar, Chintamani Main Road, Mdu-01 <br /> Tax Invoice',\r\n        logo: SMT_LOGO,\r\n        gstin: '33AAEFB6728J1ZG',\r\n        phone: '958-559-7641, 958-559-7614',\r\n        fssai: '12418012000670',\r\n        bankAccount: '0021 5005 0800 309',\r\n        ifsc: 'TMBL0000002'\r\n    },\r\n]\r\n\r\nexport const erpModules = [\r\n    { name: 'PURCHASE ORDER' },\r\n    { name: 'PURCHASE INVOICE' },\r\n    { name: 'SALE ORDER' },\r\n    { name: 'SALE INVOICE' },\r\n    { name: 'JOURNAL' },\r\n    { name: 'STOCK JOURNAL' },\r\n    { name: 'PAYMENT' },\r\n    { name: 'RECEIPT' },\r\n    { name: 'CONTRA' },\r\n]","import React, { useState, useEffect } from \"react\";\r\nimport FullCalendar from \"@fullcalendar/react\";\r\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\r\nimport timeGridPlugin from \"@fullcalendar/timegrid\";\r\nimport listPlugin from \"@fullcalendar/list\";\r\nimport interactionPlugin from \"@fullcalendar/interaction\";\r\nimport {\r\n  Button,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  IconButton,\r\n  Card,\r\n  CardContent,\r\n} from \"@mui/material\";\r\nimport Close from \"@mui/icons-material/Close\";\r\nimport { toast } from \"react-toastify\";\r\nimport { fetchLink } from \"../../Components/fetchComponent\";\r\nimport { moment } from \"moment\";\r\nimport { Edit } from \"@mui/icons-material\";\r\nconst LeaveCalendar = ({\r\n  currentView,\r\n  onViewChange\r\n}) => {\r\n  const [attendanceData, setAttendanceData] = useState([]);\r\n  const [monthlyLeaves, setMonthlyLeaves] = useState([]);\r\n  const [filter, setFilter] = useState({\r\n    FromDate: new Date().toISOString().split(\"T\")[0],\r\n    Description: \"\",\r\n    display: 2,\r\n    Created_By: \"\",\r\n  });\r\n  const [description, setDesctiption] = useState(\"\");\r\n  const [addDialog, setAddDialog] = useState(false);\r\n  const [selectedDate, setSelectedDate] = useState(null);\r\n  const [calendarViewDate, setCalendarViewDate] = useState(new Date());\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [editIndex, setEditIndex] = useState(null);\r\n  const formatDate = (dateStr) => {\r\n    const d = new Date(dateStr);\r\n    const day = String(d.getDate()).padStart(2, \"0\");\r\n    const month = String(d.getMonth() + 1).padStart(2, \"0\");\r\n    const year = d.getFullYear();\r\n    return `${day}-${month}-${year}`;\r\n  };\r\n  const localData = localStorage.getItem(\"user\");\r\n  const parseData = JSON.parse(localData);\r\n  const fetchLeaves = async () => {\r\n    try {\r\n      const res = await fetchLink({ address: `masters/defaultLeave` });\r\n      if (res.success) {\r\n        setAttendanceData(res.data);\r\n\r\n        const currentMonth = calendarViewDate.getMonth();\r\n        const currentYear = calendarViewDate.getFullYear();\r\n\r\n        const filtered = res.data.filter((item) => {\r\n          const itemDate = new Date(item.Date);\r\n          return (\r\n            itemDate.getMonth() === currentMonth &&\r\n            itemDate.getFullYear() === currentYear\r\n          );\r\n        });\r\n\r\n        setMonthlyLeaves(filtered);\r\n      }\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchLeaves();\r\n  }, []);\r\n  const closeDialg = () => {\r\n    setAddDialog(false);\r\n    setFilter({});\r\n    setDesctiption(\"\");\r\n    setEditMode(false);\r\n    setEditIndex(null);\r\n  };\r\n\r\n  const onsubmit = ({ filter, description }) => {\r\n    const User_Id = parseData?.UserId;\r\n    const bodyData = {\r\n      FromDate: filter?.FromDate,\r\n      Description: description,\r\n      Created_By: User_Id,\r\n    };\r\n\r\n    fetchLink({\r\n      address: `masters/addLeave`,\r\n      method: \"POST\",\r\n      bodyData,\r\n    })\r\n      .then((data) => {\r\n        if (!data.success) {\r\n          toast.error(data.message);\r\n        } else {\r\n          toast.success(\"Leave added successfully\");\r\n          setAddDialog(false);\r\n          setFilter({\r\n            FromDate: new Date().toISOString().split(\"T\")[0],\r\n            Description: \"\",\r\n            display: 2,\r\n            Created_By: 1,\r\n          });\r\n          setDesctiption(\"\");\r\n          fetchLeaves();\r\n        }\r\n      })\r\n      .catch((e) => console.error(e));\r\n  };\r\n\r\n  const onUpdate = async ({ index, filter, description, id, Modified_By }) => {\r\n    const updatedList = [...attendanceData];\r\n    const User_Id = Number(parseData?.UserId);\r\n\r\n    const bodyData = {\r\n      Id: id,\r\n      FromDate: filter?.FromDate,\r\n      Description: description,\r\n      Modified_By: User_Id || Modified_By,\r\n    };\r\n\r\n    try {\r\n      const data = await fetchLink({\r\n        address: \"masters/defaultLeave\",\r\n        method: \"PUT\",\r\n        bodyData: bodyData,\r\n      });\r\n\r\n      if (data.success) {\r\n        updatedList[index] = {\r\n          ...updatedList[index],\r\n          Date: filter.FromDate,\r\n          Description: description,\r\n        };\r\n\r\n        setAttendanceData(updatedList);\r\n\r\n        const currentMonth = calendarViewDate.getMonth();\r\n        const currentYear = calendarViewDate.getFullYear();\r\n\r\n        const filtered = updatedList.filter((item) => {\r\n          const itemDate = new Date(item.Date);\r\n          return (\r\n            itemDate.getMonth() === currentMonth &&\r\n            itemDate.getFullYear() === currentYear\r\n          );\r\n        });\r\n\r\n        setMonthlyLeaves(filtered);\r\n        closeDialg();\r\n        toast.success(\"Leave updated successfully\");\r\n      } else {\r\n        toast.error(data.message || \"Failed to update\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error updating leave:\", error);\r\n      toast.error(\"Update failed: \" + error.message);\r\n    }\r\n  };\r\n\r\n  const formatForInputDate = (dateString) => {\r\n    const d = new Date(dateString);\r\n    const year = d.getFullYear();\r\n    const month = String(d.getMonth() + 1).padStart(2, \"0\");\r\n    const day = String(d.getDate()).padStart(2, \"0\");\r\n    return `${year}-${month}-${day}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"d-flex flex-column\">\r\n      <Card>\r\n        <CardContent sx={{ minHeight: \"50vh\" }}>\r\n          <div className=\"d-flex align-items-center mb-3\">\r\n            {[\"default\", \"employee\", \"department\", \"defaultLeave\"].map(\r\n              (view) => (\r\n                <Button\r\n                  key={view}\r\n                  size=\"small mx-2\"\r\n                  variant=\"outlined\"\r\n                  onClick={() => onViewChange(view)}\r\n                  disabled={currentView === view}\r\n                >\r\n                  {view === \"defaultLeave\"\r\n                    ? \"Defined Leave\"\r\n                    : view.charAt(0).toUpperCase() + view.slice(1)}\r\n                </Button>\r\n              )\r\n            )}\r\n          </div>\r\n          <div className=\"ps-3 pb-2 pt-0 d-flex align-items-center justify-content-between border-bottom mb-3\">\r\n            <h6 className=\"fa-18\">Leave Details</h6>\r\n            <div>\r\n              <select\r\n                className=\"cus-inpt w-auto\"\r\n                value={filter?.display}\r\n                disabled\r\n                onChange={(e) =>\r\n                  setFilter((pre) => ({\r\n                    ...pre,\r\n                    display: Number(e.target.value),\r\n                  }))\r\n                }\r\n              >\r\n                <option disabled value={2}>\r\n                  Calendar\r\n                </option>\r\n                {/* <option value={1}>Table</option> */}\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"row\">\r\n            <div className=\"col-lg-4 col-md-5 mb-3\">\r\n              <div className=\"card shadow-sm\">\r\n                <div className=\"card-header\">\r\n                  <h6 className=\"mb-0\">Month Leave List</h6>\r\n                </div>\r\n                <div\r\n                  className=\"card-body\"\r\n                  style={{ maxHeight: \"800px\", overflowY: \"auto\" }}\r\n                >\r\n                  {monthlyLeaves.length === 0 ? (\r\n                    <p>No data</p>\r\n                  ) : (\r\n                    monthlyLeaves.map((item, index) => (\r\n                      <div\r\n                        key={index}\r\n                        className=\"mb-2 border-bottom pb-2 position-relative\"\r\n                      >\r\n                        <small>{item.Description}</small>\r\n                        <br />\r\n                        <small>Date: {formatDate(item.Date)}</small>\r\n                      </div>\r\n                    ))\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"col-lg-8 col-md-7\">\r\n              <FullCalendar\r\n                plugins={[\r\n                  timeGridPlugin,\r\n                  listPlugin,\r\n                  dayGridPlugin,\r\n                  interactionPlugin,\r\n                ]}\r\n                initialView=\"dayGridMonth\"\r\n                initialDate={new Date()}\r\n                events={attendanceData.map((o) => ({\r\n                  title: ` ${o?.Description}`,\r\n                start: new Date(o?.Date).toISOString().split(\"T\")[0],\r\n                  objectData: o,\r\n                }))}\r\n                headerToolbar={{\r\n                  left: \"prev next\",\r\n                  center: \"title\",\r\n                  right: \"dayGridMonth\",\r\n                }}\r\n                // slotDuration={\"00:30:00\"}\r\n                // slotMinTime={\"08:00:00\"}\r\n                // slotMaxTime={\"22:00:00\"}\r\n                showNonCurrentDates={false}\r\n                editable={false}\r\n                selectable\r\n                selectMirror\r\n                height={800}\r\n                eventClick={(eventInfo) => {\r\n                  const leave = eventInfo.event.extendedProps.objectData;\r\n                  const date = leave?.Date;\r\n\r\n                  const index = attendanceData.findIndex(\r\n                    (item) =>\r\n                      item.Date === date &&\r\n                      item.Description === leave.Description\r\n                  );\r\n\r\n                  setEditMode(true);\r\n                  setEditIndex(index);\r\n                  setFilter({ FromDate: date });\r\n                  setDesctiption(leave.Description);\r\n                  setAddDialog(true);\r\n                }}\r\n                dateClick={(info) => {\r\n                  setSelectedDate(info.dateStr);\r\n                  setFilter({ ...filter, FromDate: info.dateStr });\r\n                  setAddDialog(true);\r\n                }}\r\n                datesSet={(date) => {\r\n                  const viewDate = new Date(date.start);\r\n                  setCalendarViewDate(viewDate);\r\n\r\n                  const currentMonth = viewDate.getMonth();\r\n                  const currentYear = viewDate.getFullYear();\r\n\r\n                  const filtered = attendanceData.filter((item) => {\r\n                    const itemDate = new Date(item.Date);\r\n                    \r\n                    return (\r\n                      itemDate.getMonth() === currentMonth &&\r\n                      itemDate.getFullYear() === currentYear\r\n                    );\r\n                  });\r\n\r\n                  setMonthlyLeaves(filtered);\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <Dialog open={addDialog} onClose={closeDialg} fullWidth maxWidth=\"sm\">\r\n        <DialogTitle className=\"d-flex justify-content-between\">\r\n          <span> {editMode ? \"UPDATE\" : \"ADD\"}</span>\r\n          <IconButton onClick={closeDialg}>\r\n            <Close sx={{ color: \"black\" }} />\r\n          </IconButton>\r\n        </DialogTitle>\r\n\r\n        <DialogContent>\r\n          <div className=\"table-responsive pb-4\">\r\n            <table className=\"table\">\r\n              <tbody>\r\n                <tr>\r\n                  <td>From</td>\r\n                  <td>\r\n                    <input\r\n                      type=\"date\"\r\n                      className=\"cus-inpt\"\r\n                      value={formatForInputDate(filter?.FromDate || \"\")}\r\n                      onChange={(e) =>\r\n                        setFilter({ ...filter, FromDate: e.target.value })\r\n                      }\r\n                    />\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td>Description</td>\r\n                  <td>\r\n                    <input\r\n                      type=\"text\"\r\n                      className=\"cus-inpt\"\r\n                      value={description}\r\n                      onChange={(e) => setDesctiption(e.target.value)}\r\n                    />\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </DialogContent>\r\n\r\n        <DialogActions>\r\n          <Button onClick={closeDialg}>Cancel</Button>\r\n\r\n          <Button\r\n            onClick={() => {\r\n              if (editMode) {\r\n            \r\n                const currentRow = attendanceData[editIndex];\r\n                const id = currentRow?.SNo;\r\n                const User_Id = parseData?.UserId;\r\n                onUpdate({\r\n                  index: editIndex,\r\n                  filter,\r\n                  description,\r\n                  id,\r\n                  User_Id,\r\n                });\r\n              } else {\r\n                onsubmit({ filter, description });\r\n              }\r\n            }}\r\n          >\r\n            {editMode ? \"UPDATE\" : \"ADD\"}\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LeaveCalendar;\r\n","// import React, { useState, useEffect } from \"react\";\r\n// import {\r\n//     Dialog,\r\n//     IconButton,\r\n//     DialogTitle,\r\n//     DialogContent,\r\n//     DialogActions,\r\n// } from \"@mui/material\";\r\n// import Select from \"react-select\";\r\n// import { customSelectStyles } from \"../../Components/tablecolumn\";\r\n// import { ISOString, isValidDate } from \"../../Components/functions\";\r\n// // import InvoiceBillTemplate from \"../SalesReportComponent/newInvoiceTemplate\";\r\n// import { Search, Refresh } from \"@mui/icons-material\";\r\n// // import { convertedStatus } from \"../convertedStatus\";\r\n// import { fetchLink } from \"../../Components/fetchComponent\";\r\n// import FilterableTable, { createCol } from \"../../Components/filterableTable2\";\r\n// import { MyContext } from \"../../Components/context/contextProvider\";\r\n// import { useNavigate, useLocation } from \"react-router-dom\";\r\n// import {\r\n//     Card,\r\n//     CardContent,\r\n//     Button,\r\n//     Chip,\r\n//     Autocomplete,\r\n//     TextField,\r\n// } from \"@mui/material\";\r\n// import { useContext } from \"react\";\r\n// import { toast } from \"react-toastify\";\r\n// import * as XLSX from \"xlsx\";\r\n// const useQuery = () => new URLSearchParams(useLocation().search);\r\n\r\n// const AttendanceNewScreen = ({ loadingOn, loadingOff }) => {\r\n//     const storage = JSON.parse(localStorage.getItem(\"user\"));\r\n//     const navigate = useNavigate();\r\n//     const location = useLocation();\r\n//     const stateDetails = location.state;\r\n\r\n//     const [addEmployeeDialogOpen, setAddEmployeeDialogOpen] = useState(false);\r\n\r\n//     const getCurrentMonthYear = () => {\r\n//         const date = new Date();\r\n//         const year = date.getFullYear();\r\n//         const month = (date.getMonth() + 1).toString().padStart(2, \"0\");\r\n//         return `${year}-${month}`;\r\n//     };\r\n\r\n//     const initialValue = {\r\n//         From: getCurrentMonthYear(),\r\n//         To: getCurrentMonthYear(),\r\n//         EmpId: \"0\",\r\n//         Name: \"ALL\",\r\n//     };\r\n//     const query = useQuery();\r\n\r\n//     const defaultFilters = {\r\n//         From: getCurrentMonthYear(),\r\n//         To: getCurrentMonthYear(),\r\n//     };\r\n\r\n//     const [saleOrders, setSaleOrders] = useState([]);\r\n//     const [viewMode, setViewMode] = useState(\"default\");\r\n//     const [expandedDepartment, setExpandedDepartment] = useState([]);\r\n\r\n//     const [dropdownEmployees, setDropdownEmployees] = useState([]);\r\n//     const [reload, setReload] = useState(false);\r\n//     const [attendanceData, setAttendanceData] = useState([]);\r\n//     const [loading, setLoading] = useState(true);\r\n\r\n//     const [isDropdownDisabled, setIsDropdownDisabled] = useState(false);\r\n//     const [employees, setEmployees] = useState([]);\r\n//     const [selectedEmployee, setSelectedEmployee] = useState(null);\r\n//     const userTypeId = storage?.UserTypeId;\r\n//     const parseData = storage;\r\n//     const { contextObj } = useContext(MyContext);\r\n\r\n//     const [dropdownPlaceholder, setDropdownPlaceholder] = useState(\"ALL\");\r\n//     const [filter, setFilter] = useState(initialValue);\r\n//     const [debouncedFilter, setDebouncedFilter] = useState(filter);\r\n\r\n//     useEffect(() => {\r\n//         const timer = setTimeout(() => {\r\n//             setDebouncedFilter(filter);\r\n//         }, 500);\r\n\r\n//         return () => clearTimeout(timer);\r\n//     }, [filter]);\r\n\r\n//     useEffect(() => {\r\n//         const { From, EmpId } = debouncedFilter;\r\n//         if (From && (EmpId || EmpId === 0)) {\r\n//             fetchAttendanceData(From, EmpId);\r\n//             fetchDropdownEmployees();\r\n//         }\r\n//     }, [debouncedFilter]);\r\n\r\n//     const getDaysInMonth = (monthYear) => {\r\n//         if (!monthYear) return 0;\r\n\r\n//         const [year, month] = monthYear.split(\"-\");\r\n\r\n//         return new Date(year, month, 0).getDate();\r\n//     };\r\n\r\n//     const [filters, setFilters] = useState({\r\n//         FromDate: new Date().toISOString().split(\"T\")[0],\r\n//         ToDate: new Date().toISOString().split(\"T\")[0],\r\n//         Cancel_status: 0,\r\n//     });\r\n\r\n//     const toggleExpand = (department) => {\r\n//         if (expandedDepartment === department) {\r\n//             setExpandedDepartment(null);\r\n//         } else {\r\n//             setExpandedDepartment(department);\r\n//         }\r\n//     };\r\n//     const [departments, setDepartments] = useState([]);\r\n//     const [selectedDepartment, setSelectedDepartment] = useState(null);\r\n\r\n//     const [selectedEmployees, setSelectedEmployees] = useState([]);\r\n//     const Add_Rights = contextObj?.Add_Rights;\r\n\r\n//     useEffect(() => {\r\n//         if (loadingOn) loadingOn();\r\n\r\n//         const today = new Date().toISOString().split(\"T\")[0];\r\n//         const fromDate = filters.FromDate || today;\r\n//         const toDate = filters.ToDate || today;\r\n\r\n//         fetchLink({\r\n//             address: `empAttendance/departmentwise?FromDate=${fromDate}&ToDate=${toDate}`,\r\n//         })\r\n//             .then((data) => {\r\n//                 if (data.success) {\r\n//                     setSaleOrders(data?.data);\r\n//                 }\r\n//             })\r\n//             .catch((e) => console.error(e))\r\n//             .finally(() => {\r\n//                 if (loadingOff) loadingOff();\r\n//             });\r\n//     }, [reload]);\r\n\r\n//     const handleFromChange = (e) => {\r\n//         const getDaysInMonth = (monthYear) => {\r\n//             if (!monthYear) return 0;\r\n\r\n//             const [year, month] = monthYear.split(\"-\");\r\n\r\n//             return new Date(year, month, 0).getDate();\r\n//         };\r\n//         const selectedMonth = e.target.value;\r\n//         const [year, month] = selectedMonth.split(\"-\");\r\n//         const startDate = `${year}-${month}-01`;\r\n//         const dayCount = getDaysInMonth(`${year}-${month}`);\r\n//         const endDate = `${year}-${month}-${dayCount}`;\r\n\r\n//         setFilter({\r\n//             From: startDate,\r\n//             To: endDate,\r\n//             EmpId: filter.EmpId || 0,\r\n//             Name: filter?.Name,\r\n//         });\r\n//     };\r\n\r\n//     const handleSummaryDownload = async () => {\r\n//         try {\r\n//             const fromDate = filter.From;\r\n//             const [year, month] = fromDate.split(\"-\");\r\n//             const startDate = `${year}-${month}-01`;\r\n//             const dayCount = getDaysInMonth(`${year}-${month}`);\r\n//             const endDate = `${year}-${month}-${dayCount}`;\r\n\r\n//             const response = await fetchLink({\r\n//                 address: `userModule/employeActivity/employeeAttendanceModuledownload?FromDate=${startDate}&ToDate=${endDate}`,\r\n//             });\r\n\r\n//             if (response.success) {\r\n//                 const overallData = response.data;\r\n//                 const getWorkingDays = (fromDate, endDate) => {\r\n//                     const allDays = [];\r\n//                     const currentDate = new Date(fromDate);\r\n//                     const endDateObj = new Date(endDate);\r\n//                     let sundayCount = 0;\r\n\r\n//                     while (currentDate <= endDateObj) {\r\n//                         const dateStr = new Date(currentDate).toISOString().split(\"T\")[0];\r\n//                         allDays.push(dateStr);\r\n\r\n//                         if (currentDate.getDay() === 0) {\r\n//                             sundayCount++;\r\n//                         }\r\n\r\n//                         currentDate.setDate(currentDate.getDate() + 1);\r\n//                     }\r\n\r\n//                     if (allDays.length === 0) {\r\n//                         allDays.push(\"No days in this range\");\r\n//                     }\r\n\r\n//                     return {\r\n//                         days: allDays,\r\n//                         sundayCount,\r\n//                         totalDays: allDays.length,\r\n//                     };\r\n//                 };\r\n\r\n//                 const {\r\n//                     days: dateRange,\r\n//                     sundayCount,\r\n//                     totalDays,\r\n//                 } = getWorkingDays(startDate, endDate);\r\n\r\n//                 let totalWorkingDaysSummary = 0;\r\n//                 let totalLeaveDaysSummary = 0;\r\n\r\n//                 const summaryData = overallData.map((row) => {\r\n//                     const punchDetails = row.AttendanceDetails\r\n//                         ? JSON.parse(row.AttendanceDetails)\r\n//                         : [];\r\n//                     let totalWorkingDays = 0;\r\n//                     let totalLeaveDays = 0;\r\n\r\n//                     dateRange.forEach((date) => {\r\n//                         if (Array.isArray(punchDetails)) {\r\n//                             const detail = punchDetails.find(\r\n//                                 (detail) => detail.Date === date\r\n//                             );\r\n\r\n//                             const isSunday = new Date(date).getDay() === 0;\r\n\r\n//                             if (isSunday) {\r\n//                                 return;\r\n//                             }\r\n\r\n//                             if (detail) {\r\n//                                 if (detail.AttendanceStatus === \"P\") {\r\n//                                     totalWorkingDays++;\r\n//                                 } else if (\r\n//                                     detail.AttendanceStatus === \"A\" ||\r\n//                                     detail.AttendanceStatus === \"H\"\r\n//                                 ) {\r\n//                                     totalLeaveDays++;\r\n//                                 }\r\n//                             } else {\r\n//                                 totalLeaveDays++;\r\n//                             }\r\n//                         }\r\n//                     });\r\n\r\n//                     totalWorkingDaysSummary += totalWorkingDays;\r\n//                     totalLeaveDaysSummary += totalLeaveDays;\r\n\r\n//                     return {\r\n//                         EmployeeName: row.Name,\r\n//                         EmployeeID: row.EmployeeID,\r\n//                         Month: `${month}-${year}`,\r\n//                         Branch: row.Branch,\r\n//                         NumberOfSundays: sundayCount,\r\n//                         NumberOfDaysInMonth: totalDays,\r\n//                         TotalWorkingDays: totalWorkingDays,\r\n//                         TotalLeaveDays: totalLeaveDays,\r\n//                     };\r\n//                 });\r\n\r\n//                 const exportData = summaryData.map((item) => ({\r\n//                     EmployeeName: item.EmployeeName,\r\n//                     EmployeeID: item.EmployeeID,\r\n//                     Month: item.Month,\r\n//                     Branch: item.Branch,\r\n//                     NumberOfSundays: item.NumberOfSundays,\r\n//                     NumberOfDaysInMonth: item.NumberOfDaysInMonth,\r\n//                     TotalWorkingDays: item.TotalWorkingDays,\r\n//                     TotalLeaveDays: item.TotalLeaveDays,\r\n//                 }));\r\n\r\n//                 const ws = XLSX.utils.json_to_sheet(exportData);\r\n\r\n//                 const headers = [\r\n//                     \"EmployeeName\",\r\n//                     \"EmployeeID\",\r\n//                     \"Month\",\r\n//                     \"Branch\",\r\n//                     \"NumberOfSundays\",\r\n//                     \"NumberOfDaysInMonth\",\r\n//                     \"TotalWorkingDays\",\r\n//                     \"TotalLeaveDays\",\r\n//                 ];\r\n\r\n//                 XLSX.utils.sheet_add_aoa(ws, [headers], { origin: \"A1\" });\r\n\r\n//                 const wb = XLSX.utils.book_new();\r\n//                 XLSX.utils.book_append_sheet(wb, ws, \"Attendance Summary Report\");\r\n\r\n//                 XLSX.writeFile(wb, \"Attendance_Summary_Report.xlsx\");\r\n//             }\r\n//         } catch (error) {\r\n//             console.error(\"Error downloading overall report:\", error);\r\n//         }\r\n//     };\r\n//     const handleDownload = () => {\r\n//         const maxPunches = 4;\r\n\r\n//         const exportData = attendanceData.map((row) => {\r\n//             const punchDetails = row.AttendanceDetails\r\n//                 ? row.AttendanceDetails.split(\",\").filter((p) => p.trim() !== \"\")\r\n//                 : [];\r\n\r\n//             let attendanceStatus = row.AttendanceStatus;\r\n\r\n//             if (!attendanceStatus) {\r\n//                 attendanceStatus = punchDetails.length === 0 ? \"A\" : \"P\";\r\n//             }\r\n\r\n//             const punchColumns = {};\r\n//             for (let i = 0; i < maxPunches; i++) {\r\n//                 punchColumns[`Punch${i + 1}`] = punchDetails[i]\r\n//                     ? punchDetails[i].trim()\r\n//                     : \"--\";\r\n//             }\r\n\r\n//             return {\r\n//                 Employee: row.username || row.Employee,\r\n//                 \"Log Date\": formatAttendanceDate(row.LogDate),\r\n//                 \"Attendance Status\": attendanceStatus,\r\n//                 ...punchColumns,\r\n//             };\r\n//         });\r\n\r\n//         const columnsOrder = [\r\n//             \"Employee\",\r\n//             \"Log Date\",\r\n//             \"Attendance Status\",\r\n//             \"Punch1\",\r\n//             \"Punch2\",\r\n//             \"Punch3\",\r\n//             \"Punch4\",\r\n//         ];\r\n\r\n//         const reorderedData = exportData.map((row) =>\r\n//             columnsOrder.reduce((acc, col) => {\r\n//                 acc[col] = row[col] || \"--\";\r\n//                 return acc;\r\n//             }, {})\r\n//         );\r\n\r\n//         const ws = XLSX.utils.json_to_sheet(reorderedData);\r\n//         const wb = XLSX.utils.book_new();\r\n//         XLSX.utils.book_append_sheet(wb, ws, \"Attendance Report\");\r\n\r\n//         XLSX.writeFile(wb, \"Attendance_Report.xlsx\");\r\n//     };\r\n\r\n//     const MAX_PUNCHES = 6;\r\n\r\n//     function formatToAmPm(timeString) {\r\n//         if (!timeString) return \"--\";\r\n//         const [hourStr, minuteStr] = timeString.split(\":\");\r\n//         if (!hourStr || !minuteStr) return \"--\";\r\n\r\n//         let hour = parseInt(hourStr, 10);\r\n//         const minute = minuteStr;\r\n//         const ampm = hour >= 12 ? \"PM\" : \"AM\";\r\n\r\n//         hour = hour % 12 || 12;\r\n\r\n//         return `${hour.toString().padStart(2, \"0\")}:${minute} ${ampm}`;\r\n//     }\r\n\r\n//     const punchColumns = Array.from({ length: MAX_PUNCHES }, (_, index) => ({\r\n//         isCustomCell: true,\r\n//         ColumnHeader: `Punch ${index + 1}`,\r\n//         isVisible: 1,\r\n//         width: \"13%\",\r\n//         CellProps: {\r\n//             sx: {\r\n//                 display: \"flex\",\r\n//                 justifyContent: \"center\",\r\n//                 alignItems: \"center\",\r\n//                 padding: \"10px\",\r\n//             },\r\n//         },\r\n//         Cell: ({ row }) => {\r\n//             const punches = row.AttendanceDetails\r\n//                 ? row.AttendanceDetails.split(\",\")\r\n//                     .map((p) => p.trim())\r\n//                     .filter((p) => p !== \"\")\r\n//                 : [];\r\n\r\n//             const punch = punches[index] || \"--\";\r\n//             const rawTime = punch.split(\":in(\")[0];\r\n//             const formattedTime = punch !== \"--\" ? formatToAmPm(rawTime) : \"--\";\r\n\r\n//             return formattedTime !== \"--\" ? (\r\n//                 <Chip\r\n//                     label={formattedTime}\r\n//                     variant=\"outlined\"\r\n//                     size=\"small\"\r\n//                     sx={{ color: \"green\", margin: \"2px\" }}\r\n//                 />\r\n//             ) : (\r\n//                 <div style={{ color: \"gray\" }}>--</div>\r\n//             );\r\n//         },\r\n//     }));\r\n\r\n//     const formatAttendanceDate = (logDateTime) => {\r\n//         if (!logDateTime) return \"--\";\r\n//         const [date] = logDateTime.split(\"T\");\r\n//         return `${date} `;\r\n//     };\r\n\r\n//     const handleOverallDownload = async () => {\r\n//         try {\r\n//             const fromDate = filter.From;\r\n//             const [year, month] = fromDate.split(\"-\");\r\n//             const startDate = `${year}-${month}-01`;\r\n//             const dayCount = getDaysInMonth(`${year}-${month}`);\r\n//             const endDate = `${year}-${month}-${dayCount}`;\r\n\r\n//             const [attendanceRes, leaveRes] = await Promise.all([\r\n//                 fetchLink({\r\n//                     address: `userModule/employeActivity/employeeAttendanceModuledownload?FromDate=${startDate}&ToDate=${endDate}`,\r\n//                 }),\r\n//                 fetchLink({\r\n//                     address: `masters/leave?FromDate=${startDate}&ToDate=${endDate}`,\r\n//                 }),\r\n//             ]);\r\n\r\n//             if (!attendanceRes.success) throw new Error(\"Attendance data failed\");\r\n\r\n//             const leaveMap = {};\r\n//             (leaveRes?.data || []).forEach((leave) => {\r\n//                 if (leave.Status?.toUpperCase() !== \"APPROVED\") return;\r\n\r\n//                 const userId = leave.User_Id;\r\n//                 if (!userId) return;\r\n\r\n//                 const parseDate = (dateStr) => {\r\n//                     try {\r\n//                         return new Date(\r\n//                             dateStr.includes(\"T\") ? dateStr.split(\"T\")[0] : dateStr\r\n//                         );\r\n//                     } catch {\r\n//                         return null;\r\n//                     }\r\n//                 };\r\n\r\n//                 const leaveStart = parseDate(leave.FromDate);\r\n//                 const leaveEnd = parseDate(leave.ToDate);\r\n//                 if (!leaveStart || !leaveEnd) return;\r\n\r\n//                 let current = new Date(leaveStart);\r\n//                 while (current <= leaveEnd) {\r\n//                     const dateStr = current.toISOString().split(\"T\")[0];\r\n//                     if (!leaveMap[userId]) leaveMap[userId] = {};\r\n//                     leaveMap[userId][dateStr] = true;\r\n//                     current.setDate(current.getDate() + 1);\r\n//                 }\r\n//             });\r\n\r\n//             const { days: dateRange } = getDateRange(startDate, endDate);\r\n//             const exportData = attendanceRes.data.map((emp) => {\r\n//                 const attendanceDetails = tryParseJSON(emp.AttendanceDetails) || [];\r\n//                 const dailyStatus = {};\r\n//                 let presentCount = 0;\r\n\r\n//                 const attendanceLookup = {};\r\n//                 attendanceDetails.forEach((record) => {\r\n//                     if (record?.Date) {\r\n//                         attendanceLookup[record.Date] = {\r\n//                             status: record.AttendanceStatus,\r\n//                             hasPunch: record.Punch1 !== \"[]\",\r\n//                         };\r\n//                     }\r\n//                 });\r\n\r\n//                 dateRange.forEach((date, index) => {\r\n//                     const dayNum = index + 1;\r\n//                     const dayKey = `Day ${dayNum}`;\r\n//                     const isSunday = new Date(date).getDay() === 0;\r\n//                     const userId = emp.User_Mgt_Id;\r\n//                     const attendanceRecord = attendanceLookup[date];\r\n//                     const attendanceStatus = attendanceRecord?.status;\r\n//                     const hasPunch = attendanceRecord?.hasPunch;\r\n\r\n//                     if (isSunday) {\r\n//                         dailyStatus[dayKey] = \"H\";\r\n//                     } else if (userId && leaveMap[userId]?.[date]) {\r\n//                         dailyStatus[dayKey] = \"L\";\r\n//                     } else if (attendanceStatus === \"L\") {\r\n//                         dailyStatus[dayKey] = \"L\";\r\n//                     } else if (attendanceStatus === \"P\") {\r\n//                         dailyStatus[dayKey] = hasPunch ? \"P\" : \"A\";\r\n//                         if (hasPunch) presentCount++;\r\n//                     } else if (attendanceStatus === \"H\") {\r\n//                         dailyStatus[dayKey] = \"H\";\r\n//                     } else {\r\n//                         dailyStatus[dayKey] = \"A\";\r\n//                     }\r\n//                 });\r\n\r\n//                 return {\r\n//                     EmployeeName: emp.username || emp.Name,\r\n//                     TotalPresent: presentCount,\r\n//                     ...dailyStatus,\r\n//                 };\r\n//             });\r\n\r\n//             const headers = [\r\n//                 \"EmployeeName\",\r\n//                 \"TotalPresent\",\r\n//                 ...dateRange.map((_, i) => `Day ${i + 1}`),\r\n//             ];\r\n//             const ws = XLSX.utils.json_to_sheet(exportData);\r\n//             XLSX.utils.sheet_add_aoa(ws, [headers], { origin: \"A1\" });\r\n\r\n//             const wb = XLSX.utils.book_new();\r\n//             XLSX.utils.book_append_sheet(wb, ws, \"Attendance Report\");\r\n//             XLSX.writeFile(wb, `Attendance_Report_${month}_${year}.xlsx`);\r\n//         } catch (error) {\r\n//             console.error(\"Download failed:\", error);\r\n//             toast.error(\"Failed to generate report\");\r\n//         }\r\n//     };\r\n\r\n//     function getDateRange(start, end) {\r\n//         const dates = [];\r\n//         const current = new Date(start);\r\n//         const endDate = new Date(end);\r\n\r\n//         while (current <= endDate) {\r\n//             dates.push(current.toISOString().split(\"T\")[0]);\r\n//             current.setDate(current.getDate() + 1);\r\n//         }\r\n\r\n//         return { days: dates, count: dates.length };\r\n//     }\r\n\r\n//     function tryParseJSON(jsonString) {\r\n//         try {\r\n//             return jsonString ? JSON.parse(jsonString) : [];\r\n//         } catch {\r\n//             return [];\r\n//         }\r\n//     }\r\n\r\n//     const handleOverallWithPunch = async () => {\r\n//         try {\r\n//             const maxPunches = 6;\r\n\r\n//             const firstLogDate = attendanceData[0]?.LogDate;\r\n//             if (!firstLogDate) {\r\n//                 toast.error(\"No attendance data found\");\r\n//                 return;\r\n//             }\r\n\r\n//             const dateObj = new Date(firstLogDate);\r\n//             const year = dateObj.getFullYear();\r\n//             const month = dateObj.getMonth() + 1;\r\n//             const startDate = `${year}-${month.toString().padStart(2, \"0\")}-01`;\r\n//             const endDate = new Date(year, month, 0).toISOString().split(\"T\")[0];\r\n\r\n//             const leaveResponse = await fetchLink({\r\n//                 address: `masters/leave?FromDate=${startDate}&ToDate=${endDate}`,\r\n//             });\r\n//             const leaveData = leaveResponse?.success ? leaveResponse.data : [];\r\n\r\n//             const leaveMap = {};\r\n//             leaveData.forEach((leave) => {\r\n//                 // Case-insensitive status check\r\n//                 if (leave.Status?.toLowerCase() !== \"approved\") return;\r\n\r\n//                 const userId = String(leave.User_Id);\r\n//                 if (!userId) return;\r\n\r\n//                 const parseDate = (dateStr) => {\r\n//                     const parts = dateStr.split(/[-/]/);\r\n//                     if (parts.length === 3) {\r\n//                         if (parts[2].length === 4) {\r\n//                             return parts[0].length === 2\r\n//                                 ? new Date(`${parts[2]}-${parts[1]}-${parts[0]}`)\r\n//                                 : new Date(`${parts[2]}-${parts[0]}-${parts[1]}`);\r\n//                         }\r\n\r\n//                         return new Date(dateStr);\r\n//                     }\r\n//                     return new Date(dateStr);\r\n//                 };\r\n\r\n//                 const leaveStart = parseDate(leave.FromDate);\r\n//                 const leaveEnd = parseDate(leave.ToDate);\r\n\r\n//                 let currentDate = new Date(leaveStart);\r\n\r\n//                 while (currentDate <= leaveEnd) {\r\n//                     const dateStr = currentDate.toISOString().split(\"T\")[0];\r\n//                     if (!leaveMap[userId]) leaveMap[userId] = {};\r\n\r\n//                     if (currentDate.getDay() !== 0) {\r\n//                         leaveMap[userId][dateStr] = \"L\";\r\n//                     }\r\n//                     currentDate.setDate(currentDate.getDate() + 1);\r\n//                 }\r\n//             });\r\n\r\n//             const filteredAttendanceData = attendanceData.filter((row) =>\r\n//                 selectedEmployees.some(\r\n//                     (user) =>\r\n//                         String(user.UserId) === String(row.User_Mgt_Id) ||\r\n//                         user.UserId === \"ALL\"\r\n//                 )\r\n//             );\r\n\r\n//             const groupedData = filteredAttendanceData.reduce((acc, row) => {\r\n//                 acc[row.username] = acc[row.username] || [];\r\n//                 acc[row.username].push(row);\r\n//                 return acc;\r\n//             }, {});\r\n\r\n//             if (Object.keys(groupedData).length === 0) {\r\n//                 toast.error(\"No attendance data found\");\r\n//                 return;\r\n//             }\r\n\r\n//             const wb = XLSX.utils.book_new();\r\n\r\n//             Object.entries(groupedData).forEach(([username, userAttendance]) => {\r\n//                 const exportData = userAttendance.map((row) => {\r\n//                     const logDate = new Date(row.LogDate);\r\n//                     const dateStr = logDate.toISOString().split(\"T\")[0];\r\n//                     const isSunday = logDate.getDay() === 0;\r\n\r\n//                     const userId = String(row.User_Mgt_Id);\r\n//                     const hasApprovedLeave = leaveMap[userId]?.[dateStr] === \"L\";\r\n\r\n//                     let attendanceStatus;\r\n//                     if (isSunday) {\r\n//                         attendanceStatus = \"H\";\r\n//                     } else if (hasApprovedLeave) {\r\n//                         attendanceStatus = \"L\";\r\n//                     } else {\r\n//                         const punches =\r\n//                             row.AttendanceDetails?.split(\",\").map((d) => d.trim()) || [];\r\n//                         attendanceStatus = punches.some((p) => p && p !== \"--\") ? \"P\" : \"A\";\r\n//                     }\r\n\r\n//                     const punchColumns = {};\r\n//                     const punches =\r\n//                         row.AttendanceDetails?.split(\",\").map((d) => d.trim()) || [];\r\n//                     for (let i = 0; i < maxPunches; i++) {\r\n//                         punchColumns[`Punch ${i + 1}`] = punches[i] || \"--\";\r\n//                     }\r\n\r\n//                     return {\r\n//                         Employee: username,\r\n//                         \"Log Date\": formatAttendanceDate(row.LogDate),\r\n//                         \"Attendance Status\": attendanceStatus,\r\n//                         ...punchColumns,\r\n//                     };\r\n//                 });\r\n\r\n//                 const columnsOrder = [\r\n//                     \"Employee\",\r\n//                     \"Log Date\",\r\n//                     \"Attendance Status\",\r\n//                     ...Array.from({ length: maxPunches }, (_, i) => `Punch ${i + 1}`),\r\n//                 ];\r\n\r\n//                 const reorderedData = exportData.map((row) =>\r\n//                     columnsOrder.reduce((acc, col) => {\r\n//                         acc[col] = row[col] || \"--\";\r\n//                         return acc;\r\n//                     }, {})\r\n//                 );\r\n\r\n//                 XLSX.utils.book_append_sheet(\r\n//                     wb,\r\n//                     XLSX.utils.json_to_sheet(reorderedData),\r\n//                     username.slice(0, 31)\r\n//                 );\r\n//             });\r\n\r\n//             const fileName = `Attendance_Report_${new Date().toLocaleString(\r\n//                 \"default\",\r\n//                 { month: \"long\" }\r\n//             )}_${year}.xlsx`;\r\n//             XLSX.writeFile(wb, fileName);\r\n//         } catch (error) {\r\n//             console.error(\"Error generating report:\", error);\r\n//             toast.error(\"Failed to generate report\");\r\n//         }\r\n//     };\r\n//     const fetchDropdownEmployees = async () => {\r\n//         setLoading(true);\r\n//         try {\r\n//             const data = await fetchLink({\r\n//                 address: `masters/Employeedetails/dropDown?Company_id=${parseData.Company_id}`,\r\n//             });\r\n//             if (data.success) {\r\n//                 setDropdownEmployees(data.data);\r\n//             }\r\n//         } catch (e) {\r\n//             console.error(e);\r\n//             toast.error(\"Failed to fetch employees for dropdown\");\r\n//         } finally {\r\n//             setLoading(false);\r\n//         }\r\n//     };\r\n\r\n//     useEffect(() => {\r\n//         const userTypeId = storage?.UserTypeId;\r\n//         const userId = storage?.UserId;\r\n//         const companyId = storage?.Company_id;\r\n\r\n//         fetchLink({\r\n//             address: `masters/users/employee/dropDown?Company_id=${companyId}`,\r\n//             headers: {\r\n//                 Authorization: `Bearer ${localStorage.getItem(\"Autheticate_Id\")}`,\r\n//             },\r\n//         })\r\n//             .then((data) => {\r\n//                 if (data.success) {\r\n//                     let filteredEmployees = [];\r\n\r\n//                     if (\r\n//                         Number(userTypeId) === 1 ||\r\n//                         Number(userTypeId) === 0 ||\r\n//                         Number(Add_Rights) === 1\r\n//                     ) {\r\n//                         filteredEmployees = data.data;\r\n//                         setFilter((prev) => ({ ...prev, EmpId: 0, Name: \"ALL\" }));\r\n//                         setIsDropdownDisabled(false);\r\n//                         setDropdownPlaceholder(\"ALL\");\r\n//                     } else {\r\n//                         filteredEmployees = data.data.filter(\r\n//                             (employee) => employee.UserId === userId\r\n//                         );\r\n//                         setFilter((prev) => ({\r\n//                             ...prev,\r\n//                             EmpId: userId,\r\n//                             Name: storage?.Name,\r\n//                         }));\r\n//                         setIsDropdownDisabled(true);\r\n//                         setDropdownPlaceholder(storage?.Name);\r\n//                     }\r\n\r\n//                     setEmployees(filteredEmployees);\r\n//                 }\r\n//             })\r\n//             .catch((e) => console.error(\"Error fetching employees:\", e));\r\n//     }, [\r\n//         storage?.UserTypeId,\r\n//         storage?.UserId,\r\n//         storage?.Company_id,\r\n//         storage?.Name,\r\n//         reload,\r\n//     ]);\r\n\r\n//     const fetchAttendanceData = async (From, EmpId) => {\r\n//         try {\r\n//             const userTypeId = storage?.UserTypeId;\r\n//             const [year, month] = From.split(\"-\");\r\n\r\n//             const startDate = `${year}-${month}-01`;\r\n\r\n//             const dayCount = getDaysInMonth(`${year}-${month}`);\r\n\r\n//             const endDate = `${year}-${month}-${dayCount}`;\r\n\r\n//             const response = await fetchLink({\r\n//                 address: `userModule/employeActivity/trackActivitylogAttendance?FromDate=${startDate}&ToDate=${endDate}&UserTypeId=${userTypeId}&UserId=${EmpId}`,\r\n//                 headers: {\r\n//                     Authorization: `Bearer ${localStorage.getItem(\"Autheticate_Id\")}`,\r\n//                 },\r\n//             });\r\n\r\n//             if (response.success) {\r\n//                 setAttendanceData(response.data);\r\n//             }\r\n//         } catch (e) {\r\n//             console.error(\"Error fetching attendance data:\", e);\r\n//         }\r\n//     };\r\n\r\n//     useEffect(() => {\r\n//         const queryFilters = {\r\n//             FromDate:\r\n//                 query.get(\"FromDate\") && isValidDate(query.get(\"FromDate\"))\r\n//                     ? query.get(\"FromDate\")\r\n//                     : defaultFilters.Fromdate,\r\n//             ToDate:\r\n//                 query.get(\"ToDate\") && isValidDate(query.get(\"ToDate\"))\r\n//                     ? query.get(\"ToDate\")\r\n//                     : defaultFilters.Todate,\r\n//         };\r\n//         setFilters((pre) => ({\r\n//             ...pre,\r\n//             FromDate: queryFilters.FromDate,\r\n//             ToDate: queryFilters.ToDate,\r\n//         }));\r\n//     }, [location.search]);\r\n\r\n//     useEffect(() => {\r\n//         const FromDate =\r\n//             stateDetails?.FromDate && isValidDate(stateDetails?.FromDate)\r\n//                 ? ISOString(stateDetails?.FromDate)\r\n//                 : null;\r\n//         const ToDate =\r\n//             stateDetails?.ToDate && isValidDate(stateDetails?.ToDate)\r\n//                 ? ISOString(stateDetails?.ToDate)\r\n//                 : null;\r\n//         if (FromDate && ToDate) {\r\n//             updateQueryString({ FromDate, ToDate });\r\n//             setFilters((pre) => ({\r\n//                 ...pre,\r\n//                 FromDate: ISOString(stateDetails.FromDate),\r\n//                 ToDate: stateDetails.ToDate,\r\n//             }));\r\n//             setReload((pre) => !pre);\r\n//         }\r\n//     }, [stateDetails]);\r\n\r\n//     const updateQueryString = (newFilters) => {\r\n//         const params = new URLSearchParams(newFilters);\r\n//         navigate(`?${params.toString()}`, { replace: true });\r\n//     };\r\n\r\n//     const handleAddEmployeeClose = () => {\r\n//         setAddEmployeeDialogOpen(false);\r\n//     };\r\n\r\n//     const data = () => setViewMode(\"employee\");\r\n//     const dataDepartment = () => setViewMode(\"department\");\r\n//     // const dashboard=()=>setViewMode('default')\r\n\r\n//     const dashboard = () => {\r\n//         setFilters((prev) => ({\r\n//             ...prev,\r\n//             FromDate: prev.FromDate || new Date().toISOString().split(\"T\")[0],\r\n//             ToDate: prev.ToDate || new Date().toISOString().split(\"T\")[0],\r\n//         }));\r\n//         setViewMode(\"default\");\r\n//     };\r\n\r\n//     const ExpendableComponent = ({ row }) => {\r\n//         const departments =\r\n//             typeof row.DepartmentWiseCounts === \"string\"\r\n//                 ? JSON.parse(row.DepartmentWiseCounts)\r\n//                 : row.DepartmentWiseCounts;\r\n\r\n//         return (\r\n//             <table\r\n//                 style={{\r\n//                     width: \"100%\",\r\n//                     borderCollapse: \"collapse\",\r\n//                     marginTop: \"10px\",\r\n//                 }}\r\n//             >\r\n//                 <thead>\r\n//                     <tr style={{ backgroundColor: \"#f0f0f0\" }}>\r\n//                         <th\r\n//                             style={{\r\n//                                 border: \"1px solid #ccc\",\r\n//                                 padding: \"8px\",\r\n//                                 textAlign: \"left\",\r\n//                             }}\r\n//                         >\r\n//                             Department Name\r\n//                         </th>\r\n//                         <th\r\n//                             style={{\r\n//                                 border: \"1px solid #ccc\",\r\n//                                 padding: \"8px\",\r\n//                                 textAlign: \"left\",\r\n//                             }}\r\n//                         >\r\n//                             Total Employees\r\n//                         </th>\r\n//                         <th\r\n//                             style={{\r\n//                                 border: \"1px solid #ccc\",\r\n//                                 padding: \"8px\",\r\n//                                 textAlign: \"left\",\r\n//                             }}\r\n//                         >\r\n//                             Present Today\r\n//                         </th>\r\n//                     </tr>\r\n//                 </thead>\r\n//                 <tbody>\r\n//                     {departments && departments.length > 0 ? (\r\n//                         departments.map((data, index) => (\r\n//                             <tr key={index} onClick={() => toggleExpand(data.Department)}>\r\n//                                 <td style={{ border: \"1px solid #ccc\", padding: \"8px\" }}>\r\n//                                     {data?.Department || \"-\"}\r\n//                                 </td>\r\n//                                 <td style={{ border: \"1px solid #ccc\", padding: \"8px\" }}>\r\n//                                     <div style={{ display: \"flex\", alignItems: \"center\" }}>\r\n//                                         <span\r\n//                                             style={{\r\n//                                                 fontSize: \"1.25rem\",\r\n//                                                 fontWeight: \"bold\",\r\n//                                                 marginRight: \"100px\", // Increased from 15px to 100px\r\n//                                                 minWidth: \"60px\", // Ensures consistent spacing\r\n//                                             }}\r\n//                                         >\r\n//                                             {data?.TotalEmployees || \"-\"}\r\n//                                         </span>\r\n//                                         <span style={{ fontSize: \"1rem\" }}>\r\n//                                             Male / Female: {data?.TotalMaleEmployees || \"0\"} /{\" \"}\r\n//                                             {data?.TotalFemaleEmployees || \"0\"}\r\n//                                         </span>\r\n//                                     </div>\r\n//                                 </td>\r\n//                                 <td style={{ border: \"1px solid #ccc\", padding: \"8px\" }}>\r\n//                                     <div style={{ display: \"flex\", alignItems: \"center\" }}>\r\n//                                         <span\r\n//                                             style={{\r\n//                                                 fontSize: \"1.25rem\",\r\n//                                                 fontWeight: \"bold\",\r\n//                                                 marginRight: \"100px\", // Increased from 15px to 100px\r\n//                                                 minWidth: \"60px\", // Ensures consistent spacing\r\n//                                             }}\r\n//                                         >\r\n//                                             {data?.TotalPresentToday || \"-\"}\r\n//                                         </span>\r\n//                                         <span style={{ fontSize: \"1rem\" }}>\r\n//                                             Male / Female: {data?.TotalMalePresentToday || \"0\"} /{\" \"}\r\n//                                             {data?.TotalFemalePresentToday || \"0\"}\r\n//                                         </span>\r\n//                                     </div>\r\n//                                 </td>\r\n//                             </tr>\r\n//                         ))\r\n//                     ) : (\r\n//                         <tr>\r\n//                             <td colSpan=\"3\" style={{ padding: \"8px\" }}>\r\n//                                 No Departments Available\r\n//                             </td>\r\n//                         </tr>\r\n//                     )}\r\n//                 </tbody>\r\n//             </table>\r\n//         );\r\n//     };\r\n\r\n//     const handleRefresh = () => {\r\n//         if (loadingOn) loadingOn();\r\n\r\n//         const userTypeId = storage?.UserTypeId;\r\n//         const userId = storage?.UserId;\r\n//         const companyId = storage?.Company_id;\r\n\r\n//         fetchLink({\r\n//             address: `masters/users/employee/dropDown?Company_id=${companyId}`,\r\n//             headers: {\r\n//                 Authorization: `Bearer ${localStorage.getItem(\"Autheticate_Id\")}`,\r\n//             },\r\n//         })\r\n//             .then((data) => {\r\n//                 if (data.success) {\r\n//                     let filteredEmployees = [];\r\n\r\n//                     if (\r\n//                         Number(userTypeId) === 1 ||\r\n//                         Number(userTypeId) === 0 ||\r\n//                         Number(Add_Rights) === 1\r\n//                     ) {\r\n//                         filteredEmployees = data.data;\r\n//                         setFilter((prev) => ({ ...prev, EmpId: 0, Name: \"ALL\" }));\r\n//                         setIsDropdownDisabled(false);\r\n//                         setDropdownPlaceholder(\"ALL\");\r\n//                     } else {\r\n//                         filteredEmployees = data.data.filter(\r\n//                             (employee) => employee.UserId === userId\r\n//                         );\r\n//                         setFilter((prev) => ({\r\n//                             ...prev,\r\n//                             EmpId: userId,\r\n//                             Name: storage?.Name,\r\n//                         }));\r\n//                         setIsDropdownDisabled(true);\r\n//                         setDropdownPlaceholder(storage?.Name);\r\n//                     }\r\n\r\n//                     setEmployees(filteredEmployees);\r\n//                 }\r\n//             })\r\n//             .catch((e) => console.error(\"Error fetching employees:\", e))\r\n//             .finally(() => {\r\n//                 if (loadingOff) loadingOff();\r\n//                 setReload((prev) => !prev);\r\n//             });\r\n//     };\r\n\r\n//     const handleRefreshData = () => {\r\n//         window.location.reload();\r\n//     };\r\n\r\n//     const ExpendableComponent1 = ({ row }) => {\r\n//         let departments = [];\r\n//         let monthlyAttendance = [];\r\n\r\n//         try {\r\n//             departments =\r\n//                 typeof row.Employees === \"string\"\r\n//                     ? JSON.parse(row.Employees)\r\n//                     : row.Employees || [];\r\n\r\n//             monthlyAttendance =\r\n//                 typeof row.MonthlyAverageAttendance === \"string\"\r\n//                     ? JSON.parse(row.MonthlyAverageAttendance)\r\n//                     : row.MonthlyAverageAttendance || [];\r\n//         } catch (err) {\r\n//             departments = [];\r\n//             monthlyAttendance = [];\r\n//         }\r\n\r\n//         const currentYear = new Date().getFullYear();\r\n\r\n//         const monthList = [\r\n//             { name: \"January\", number: 1 },\r\n//             { name: \"February\", number: 2 },\r\n//             { name: \"March\", number: 3 },\r\n//             { name: \"April\", number: 4 },\r\n//             { name: \"May\", number: 5 },\r\n//             { name: \"June\", number: 6 },\r\n//             { name: \"July\", number: 7 },\r\n//             { name: \"August\", number: 8 },\r\n//             { name: \"September\", number: 9 },\r\n//             { name: \"October\", number: 10 },\r\n//             { name: \"November\", number: 11 },\r\n//             { name: \"December\", number: 12 },\r\n//         ];\r\n\r\n//         const attendanceMap = new Map();\r\n//         monthlyAttendance.forEach((item) => {\r\n//             const key = `${item.MonthNumber}-${item.YearNumber}`;\r\n//             attendanceMap.set(key, item.UniqueEmployeeDays ?? 0);\r\n//         });\r\n\r\n//         return (\r\n//             <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"10px\" }}>\r\n//                 <div style={{ display: \"flex\", gap: \"20px\" }}>\r\n//                     <table\r\n//                         style={{\r\n//                             width: \"60%\",\r\n//                             borderCollapse: \"collapse\",\r\n//                             border: \"1px solid #ccc\",\r\n//                         }}\r\n//                     >\r\n//                         <thead>\r\n//                             <tr style={{ backgroundColor: \"#f0f0f0\" }}>\r\n//                                 <th\r\n//                                     style={{\r\n//                                         border: \"1px solid #ccc\",\r\n//                                         padding: \"5px\",\r\n//                                         textAlign: \"left\",\r\n//                                     }}\r\n//                                 >\r\n//                                     Emp_Name\r\n//                                 </th>\r\n//                                 <th\r\n//                                     style={{\r\n//                                         border: \"1px solid #ccc\",\r\n//                                         padding: \"8px\",\r\n//                                         textAlign: \"left\",\r\n//                                     }}\r\n//                                 >\r\n//                                     Sex\r\n//                                 </th>\r\n//                             </tr>\r\n//                         </thead>\r\n//                         <tbody>\r\n//                             {departments && departments.length > 0 ? (\r\n//                                 departments.map((data, index) => (\r\n//                                     <tr key={index}>\r\n//                                         <td style={{ border: \"1px solid #ccc\", padding: \"8px\" }}>\r\n//                                             {data?.Emp_Name || \"-\"}\r\n//                                         </td>\r\n//                                         <td style={{ border: \"1px solid #ccc\", padding: \"8px\" }}>\r\n//                                             {data?.Sex || \"-\"}\r\n//                                         </td>\r\n//                                     </tr>\r\n//                                 ))\r\n//                             ) : (\r\n//                                 <tr>\r\n//                                     <td colSpan=\"2\" style={{ padding: \"8px\" }}>\r\n//                                         No Employees Available\r\n//                                     </td>\r\n//                                 </tr>\r\n//                             )}\r\n//                         </tbody>\r\n//                     </table>\r\n\r\n//                     <div\r\n//                         style={{\r\n//                             flex: \"1\",\r\n//                             border: \"1px solid #ddd\",\r\n//                             borderRadius: \"5px\",\r\n//                             padding: \"10px\",\r\n//                             overflowX: \"auto\",\r\n//                             whiteSpace: \"nowrap\",\r\n//                         }}\r\n//                     >\r\n//                         <h3 style={{ textAlign: \"center\" }}>Months & Attendance</h3>\r\n//                         <div\r\n//                             style={{\r\n//                                 display: \"flex\",\r\n//                                 gap: \"10px\",\r\n//                             }}\r\n//                         >\r\n//                             {monthList.map((month) => {\r\n//                                 const key = `${month.number}-${currentYear}`;\r\n//                                 const uniqueEmployeeDays = attendanceMap.get(key) ?? 0;\r\n\r\n//                                 return (\r\n//                                     <div\r\n//                                         key={month.number}\r\n//                                         style={{\r\n//                                             minWidth: \"100px\",\r\n//                                             padding: \"8px\",\r\n//                                             backgroundColor: \"#f0f0f0\",\r\n//                                             color: \"black\",\r\n//                                             borderRadius: \"4px\",\r\n//                                             textAlign: \"center\",\r\n//                                             userSelect: \"none\",\r\n//                                         }}\r\n//                                     >\r\n//                                         <div style={{ fontWeight: \"bold\" }}>\r\n//                                             {month.name} {currentYear}\r\n//                                         </div>\r\n//                                         <div\r\n//                                             style={{\r\n//                                                 marginTop: \"6px\",\r\n//                                                 fontSize: \"14px\",\r\n//                                                 color: \"#555\",\r\n//                                             }}\r\n//                                         >\r\n//                                             {uniqueEmployeeDays}\r\n//                                         </div>\r\n//                                     </div>\r\n//                                 );\r\n//                             })}\r\n//                         </div>\r\n//                     </div>\r\n//                 </div>\r\n//             </div>\r\n//         );\r\n//     };\r\n\r\n//     useEffect(() => {\r\n//         const userTypeId = storage?.UserTypeId;\r\n//         const userId = storage?.UserId;\r\n//         const companyId = storage?.Company_id;\r\n\r\n//         fetchLink({\r\n//             address: `masters/users/employee/dropDown?Company_id=${companyId}`,\r\n//             headers: {\r\n//                 Authorization: `Bearer ${localStorage.getItem(\"Autheticate_Id\")}`,\r\n//             },\r\n//         })\r\n//             .then((data) => {\r\n//                 if (data.success) {\r\n//                     let filteredEmployees = [];\r\n\r\n//                     if (\r\n//                         Number(userTypeId) === 1 ||\r\n//                         Number(userTypeId) === 0 ||\r\n//                         Number(Add_Rights) === 1\r\n//                     ) {\r\n//                         filteredEmployees = data.data;\r\n//                         setFilter((prev) => ({ ...prev, EmpId: 0, Name: \"ALL\" }));\r\n//                         setIsDropdownDisabled(false);\r\n//                         setDropdownPlaceholder(\"ALL\");\r\n//                     } else {\r\n//                         filteredEmployees = data.data.filter(\r\n//                             (employee) => employee.UserId === userId\r\n//                         );\r\n//                         setFilter((prev) => ({\r\n//                             ...prev,\r\n//                             EmpId: userId,\r\n//                             Name: storage?.Name,\r\n//                         }));\r\n//                         setIsDropdownDisabled(true);\r\n//                         setDropdownPlaceholder(storage?.Name);\r\n//                     }\r\n\r\n//                     setEmployees(filteredEmployees);\r\n//                 }\r\n//             })\r\n//             .catch((e) => console.error(\"Error fetching employees:\", e));\r\n//     }, [\r\n//         storage?.UserTypeId,\r\n//         storage?.UserId,\r\n//         storage?.Company_id,\r\n//         storage?.Name,\r\n//     ]);\r\n\r\n//     useEffect(() => {\r\n//         const companyId = storage?.Company_id;\r\n\r\n//         fetchLink({\r\n//             address: `empAttendance/department?Company_id=${companyId}`,\r\n//             headers: {\r\n//                 Authorization: `Bearer ${localStorage.getItem(\"Autheticate_Id\")}`,\r\n//             },\r\n//         })\r\n//             .then((data) => {\r\n//                 if (data.success) {\r\n//                     if (data.others && data.others.department) {\r\n//                         const deptOptions = data.others.department.map((dept) => ({\r\n//                             value: dept.value,\r\n//                             label: dept.label,\r\n//                         }));\r\n//                         setDepartments(deptOptions);\r\n//                     }\r\n//                 }\r\n//             })\r\n//             .catch((e) => console.error(\"Error fetching departments:\", e));\r\n//     }, [storage?.Company_id, reload]);\r\n\r\n//     const handleDepartmentChange = (selected) => {\r\n//         setSelectedDepartment(selected);\r\n\r\n//         setEmployees([]);\r\n//         setSelectedEmployee(null);\r\n\r\n//         if (selected) {\r\n//             fetchLink({\r\n//                 address: `empAttendance/employeesByDepartment`,\r\n//                 method: \"POST\",\r\n//                 bodyData: { department: selected.value },\r\n//             })\r\n//                 .then((data) => {\r\n//                     if (data.success && data.others?.employees) {\r\n//                         const employeeOptions = data.others.employees.map((emp) => ({\r\n//                             value: emp.id || emp.value || emp.Emp_Id,\r\n//                             label: emp.name || emp.label || emp.Emp_Name,\r\n//                         }));\r\n\r\n//                         setEmployees(employeeOptions);\r\n//                     } else {\r\n//                         setEmployees([]);\r\n//                     }\r\n//                 })\r\n//                 .catch((e) => {\r\n//                     console.error(\"Error fetching employees:\", e);\r\n//                     setEmployees([]);\r\n//                 });\r\n//         } else {\r\n//             setEmployees([]);\r\n//         }\r\n//     };\r\n\r\n//     const departmentWiseCounts = React.useMemo(() => {\r\n//         if (!saleOrders?.[0]?.DepartmentWiseCounts) return [];\r\n//         try {\r\n//             const parsed = JSON.parse(saleOrders[0].DepartmentWiseCounts);\r\n//             return Array.isArray(parsed) ? parsed : [];\r\n//         } catch (err) {\r\n//             console.error(\"Failed to parse DepartmentWiseCounts JSON:\", err);\r\n//             return [];\r\n//         }\r\n//     }, [saleOrders]);\r\n\r\n//     const filteredData = React.useMemo(() => {\r\n//         if (!departmentWiseCounts || !departmentWiseCounts.length) return [];\r\n\r\n//         const filteredDepartments = departmentWiseCounts.filter((item) => {\r\n//             return selectedDepartment\r\n//                 ? item.Department === selectedDepartment.label\r\n//                 : true;\r\n//         });\r\n\r\n//         return filteredDepartments.map((dept) => {\r\n//             const employeeList = dept.employees || dept.Employees || [];\r\n\r\n//             const filteredEmployees = selectedEmployee\r\n//                 ? employeeList.filter((emp) => {\r\n//                     if (!emp.Emp_Name) return false;\r\n//                     return (\r\n//                         emp.Emp_Name.trim().toLowerCase() ===\r\n//                         selectedEmployee.label.trim().toLowerCase()\r\n//                     );\r\n//                 })\r\n//                 : employeeList;\r\n\r\n//             return {\r\n//                 ...dept,\r\n//                 Employees: filteredEmployees,\r\n//             };\r\n//         });\r\n//     }, [departmentWiseCounts, selectedDepartment, selectedEmployee]);\r\n\r\n//     return (\r\n//         <>\r\n//             {Number(userTypeId) === 0 || Number(userTypeId) === 1 ? (\r\n//                 <>\r\n//                     {viewMode === \"default\" && (\r\n//                         <FilterableTable\r\n//                             title={\r\n//                                 <div className=\"d-flex align-items-center\">\r\n//                                     <Button\r\n//                                         size=\"small mx-2\"\r\n//                                         variant=\"outlined\"\r\n//                                         disabled\r\n//                                         onClick={() => dashboard()}\r\n//                                     >\r\n//                                         Dashboard\r\n//                                     </Button>\r\n//                                     <Button\r\n//                                         size=\"small mx-2\"\r\n//                                         variant=\"outlined\"\r\n//                                         onClick={() => data()}\r\n//                                     >\r\n//                                         Employee\r\n//                                     </Button>\r\n//                                     <Button\r\n//                                         size=\"small mx-2\"\r\n//                                         variant=\"outlined\"\r\n//                                         onClick={() => dataDepartment()}\r\n//                                     >\r\n//                                         Department\r\n//                                     </Button>\r\n\r\n//                                     <div className=\"d-flex align-items-center justify-content-start gap-3\">\r\n//                                         <label>From Date</label>\r\n//                                         <input\r\n//                                             type=\"date\"\r\n//                                             onChange={(e) =>\r\n//                                                 setFilters({ ...filters, FromDate: e.target.value })\r\n//                                             }\r\n//                                             value={filters?.FromDate}\r\n//                                             className=\"cus-inpt w-auto p-1\"\r\n//                                         />\r\n//                                     </div>\r\n\r\n//                                     <div className=\"d-flex align-items-center justify-content-start gap-3\">\r\n//                                         <label>To Date</label>\r\n//                                         <input\r\n//                                             type=\"date\"\r\n//                                             onChange={(e) =>\r\n//                                                 setFilters({ ...filters, ToDate: e.target.value })\r\n//                                             }\r\n//                                             value={filters?.ToDate}\r\n//                                             className=\"cus-inpt w-auto p-1\"\r\n//                                         />\r\n//                                     </div>\r\n\r\n//                                     <div className=\"p-1\">\r\n//                                         <IconButton\r\n//                                             onClick={() => setReload(!reload)}\r\n//                                             variant=\"outlined\"\r\n//                                             size=\"small\"\r\n//                                         >\r\n//                                             <Search />\r\n//                                         </IconButton>\r\n//                                     </div>\r\n//                                 </div>\r\n//                             }\r\n//                             dataArray={saleOrders}\r\n//                             EnableSerialNumber\r\n//                             columns={[\r\n//                                 {\r\n//                                     isVisible: 1,\r\n//                                     ColumnHeader: \"Tot.Emp\",\r\n//                                     isCustomCell: true,\r\n//                                     Cell: ({ row }) => {\r\n//                                         const total = row?.TotalEmployees ?? 0;\r\n//                                         const male = row?.TotalMaleEmployees ?? 0;\r\n//                                         const female = row?.TotalFemaleEmployees ?? 0;\r\n//                                         return (\r\n//                                             <div style={{ fontSize: \"1.25rem\", fontWeight: \"bold\" }}>\r\n//                                                 <div>{total}</div>\r\n//                                                 <div style={{ fontSize: \"1rem\", fontWeight: \"normal\" }}>\r\n//                                                     Male / Female: {male} / {female}\r\n//                                                 </div>\r\n//                                             </div>\r\n//                                         );\r\n//                                     },\r\n//                                 },\r\n//                                 {\r\n//                                     isVisible: 1,\r\n//                                     ColumnHeader: \"Tot.Pre.Today\",\r\n//                                     isCustomCell: true,\r\n//                                     Cell: ({ row }) => {\r\n//                                         const total = row?.TotalPresentToday ?? 0;\r\n//                                         const male = row?.TotalMalePresentToday ?? 0;\r\n//                                         const female = row?.TotalFemalePresentToday ?? 0;\r\n//                                         return (\r\n//                                             <div style={{ fontSize: \"1.25rem\", fontWeight: \"bold\" }}>\r\n//                                                 <div>{total}</div>\r\n//                                                 <div style={{ fontSize: \"1rem\", fontWeight: \"normal\" }}>\r\n//                                                     Male / Female: {male} / {female}\r\n//                                                 </div>\r\n//                                             </div>\r\n//                                         );\r\n//                                     },\r\n//                                 },\r\n//                             ]}\r\n//                             isExpendable={true}\r\n//                             tableMaxHeight={550}\r\n//                             expandableComp={ExpendableComponent}\r\n//                         />\r\n//                     )}\r\n\r\n//                     {viewMode === \"employee\" && (\r\n//                         <>\r\n//                             <Dialog\r\n//                                 open={addEmployeeDialogOpen}\r\n//                                 maxWidth=\"md\"\r\n//                                 PaperProps={{\r\n//                                     style: { width: \"500px\", height: \"500px\" },\r\n//                                 }}\r\n//                             >\r\n//                                 <DialogTitle>Add Employee</DialogTitle>\r\n//                                 <DialogContent>\r\n//                                     <Autocomplete\r\n//                                         multiple\r\n//                                         options={[\r\n//                                             { UserId: \"all\", Name: \"ALL\" },\r\n//                                             ...dropdownEmployees,\r\n//                                         ]}\r\n//                                         getOptionLabel={(option) => option.Name}\r\n//                                         isOptionEqualToValue={(option, value) =>\r\n//                                             option.UserId === value.UserId\r\n//                                         }\r\n//                                         onChange={(event, value) => {\r\n//                                             if (value.some((selected) => selected.UserId === \"all\")) {\r\n//                                                 setSelectedEmployees(dropdownEmployees);\r\n//                                             } else {\r\n//                                                 const uniqueValues = value.filter(\r\n//                                                     (val, index, self) =>\r\n//                                                         index ===\r\n//                                                         self.findIndex((t) => t.UserId === val.UserId)\r\n//                                                 );\r\n//                                                 setSelectedEmployees(uniqueValues);\r\n//                                             }\r\n//                                         }}\r\n//                                         value={\r\n//                                             selectedEmployees.some((user) => user.UserId === \"all\")\r\n//                                                 ? [{ UserId: \"all\", Name: \"ALL\" }]\r\n//                                                 : selectedEmployees\r\n//                                         }\r\n//                                         renderInput={(params) => (\r\n//                                             <TextField {...params} placeholder=\"Employees\" />\r\n//                                         )}\r\n//                                     />\r\n//                                 </DialogContent>\r\n//                                 <DialogActions className=\"d-flex justify-content-between flex-wrap\">\r\n//                                     <Button\r\n//                                         type=\"button\"\r\n//                                         variant=\"outlined\"\r\n//                                         onClick={() => setSelectedEmployees([])}\r\n//                                     >\r\n//                                         Clear\r\n//                                     </Button>\r\n//                                     <span>\r\n//                                         <Button onClick={handleAddEmployeeClose}>Cancel</Button>\r\n//                                         <Button onClick={handleOverallWithPunch}>Download</Button>\r\n//                                     </span>\r\n//                                 </DialogActions>\r\n//                             </Dialog>\r\n//                             <Card>\r\n//                                 <CardContent sx={{ minHeight: \"50vh\" }}>\r\n//                                     <div className=\"ps-3 pb-2 pt-0 d-flex align-items-center justify-content-between border-bottom mb-3\">\r\n//                                         <h6 className=\"fa-18\">\r\n//                                             <Button\r\n//                                                 size=\"small mx-2\"\r\n//                                                 variant=\"outlined\"\r\n//                                                 onClick={() => dashboard()}\r\n//                                             >\r\n//                                                 Dashboard\r\n//                                             </Button>\r\n//                                             <Button\r\n//                                                 size=\"small mx-2\"\r\n//                                                 variant=\"outlined\"\r\n//                                                 disabled\r\n//                                                 onClick={() => data()}\r\n//                                             >\r\n//                                                 EMPLOYEE\r\n//                                             </Button>\r\n//                                             <Button\r\n//                                                 size=\"small mx-2\"\r\n//                                                 variant=\"outlined\"\r\n//                                                 onClick={() => dataDepartment()}\r\n//                                             >\r\n//                                                 Department\r\n//                                             </Button>\r\n//                                         </h6>\r\n\r\n//                                         <div className=\"d-flex align-items-center justify-content-start gap-3\">\r\n//                                             <Button\r\n//                                                 onClick={handleDownload}\r\n//                                                 variant=\"contained\"\r\n//                                                 disabled={filter?.EmpId === 0 || filter?.Name === \"ALL\"}\r\n//                                             >\r\n//                                                 Individual Report\r\n//                                             </Button>\r\n//                                             <Button\r\n//                                                 onClick={() => {\r\n//                                                     handleOverallDownload(filter?.From, filter?.To);\r\n//                                                 }}\r\n//                                             >\r\n//                                                 Monthly Report\r\n//                                             </Button>\r\n//                                             <Button\r\n//                                                 onClick={() => {\r\n//                                                     setAddEmployeeDialogOpen(true);\r\n//                                                 }}\r\n//                                             >\r\n//                                                 Cummulative Monthly Report\r\n//                                             </Button>\r\n//                                             <Button onClick={handleSummaryDownload}>Summary</Button>\r\n//                                         </div>\r\n//                                     </div>\r\n\r\n//                                     <div className=\"px-2 row mb-4\">\r\n//                                         <div className=\"col-xl-2 col-lg-3 col-md-4 col-sm-6 p-2\">\r\n//                                             <label>Employee</label>\r\n//                                             <Select\r\n//                                                 value={{ value: filter?.EmpId, label: filter?.Name }}\r\n//                                                 onChange={(e) =>\r\n//                                                     setFilter({\r\n//                                                         ...filter,\r\n//                                                         EmpId: e.value,\r\n//                                                         Name: e.label,\r\n//                                                     })\r\n//                                                 }\r\n//                                                 options={[\r\n//                                                     { value: 0, label: `ALL` },\r\n//                                                     ...employees.map((obj) => ({\r\n//                                                         value: obj?.UserId,\r\n//                                                         label: obj?.Name,\r\n//                                                     })),\r\n//                                                 ]}\r\n//                                                 styles={customSelectStyles}\r\n//                                                 isSearchable={true}\r\n//                                                 placeholder={dropdownPlaceholder}\r\n//                                             />\r\n//                                         </div>\r\n\r\n//                                         <div className=\"col-xl-2 col-lg-3 col-md-4 col-sm-6 p-2\">\r\n//                                             <label>From</label>\r\n//                                             <input\r\n//                                                 type=\"month\"\r\n//                                                 className=\"cus-inpt\"\r\n//                                                 value={filter?.From?.slice(0, 7)}\r\n//                                                 onChange={handleFromChange}\r\n//                                             />\r\n//                                         </div>\r\n//                                         <div className=\"col-auto p-2 d-flex align-items-center\">\r\n//                                             <button\r\n//                                                 className=\"btn btn-link ms-2 p-0 mt-3\"\r\n//                                                 onClick={handleRefresh}\r\n//                                                 title=\"Refresh Departments & Employees\"\r\n//                                             >\r\n//                                                 <Refresh fontSize=\"medium\" />\r\n//                                             </button>\r\n//                                         </div>\r\n//                                     </div>\r\n\r\n//                                     <FilterableTable\r\n//                                         dataArray={attendanceData}\r\n//                                         columns={[\r\n//                                             {\r\n//                                                 isCustomCell: true,\r\n//                                                 Cell: ({ row }) => row.username,\r\n//                                                 ColumnHeader: \"Employee\",\r\n//                                                 isVisible: 1,\r\n//                                                 width: \"20%\",\r\n//                                                 CellProps: {\r\n//                                                     sx: {\r\n//                                                         padding: \"10px\",\r\n//                                                         textAlign: \"left\",\r\n//                                                         fontWeight: \"bold\",\r\n//                                                     },\r\n//                                                 },\r\n//                                             },\r\n//                                             {\r\n//                                                 isCustomCell: true,\r\n//                                                 Cell: ({ row }) =>\r\n//                                                     formatAttendanceDate(row.LogDate || \"--\"),\r\n//                                                 ColumnHeader: \"Log Date\",\r\n//                                                 isVisible: 1,\r\n//                                                 width: \"20%\",\r\n//                                                 CellProps: {\r\n//                                                     sx: {\r\n//                                                         padding: \"10px\",\r\n//                                                         textAlign: \"center\",\r\n//                                                         color: \"gray\",\r\n//                                                     },\r\n//                                                 },\r\n//                                             },\r\n//                                             ...punchColumns,\r\n//                                         ]}\r\n//                                         EnableSerialNumber\r\n//                                         CellSize=\"small\"\r\n//                                         disablePagination={false}\r\n//                                     />\r\n//                                 </CardContent>\r\n//                             </Card>\r\n//                         </>\r\n//                     )}\r\n\r\n//                     {viewMode === \"department\" && (\r\n//                         <FilterableTable\r\n//                             title={\r\n//                                 <div className=\"d-flex flex-column\">\r\n//                                     <div className=\"d-flex align-items-center mb-3\">\r\n//                                         <Button\r\n//                                             size=\"small mx-2\"\r\n//                                             variant=\"outlined\"\r\n//                                             onClick={() => dashboard()}\r\n//                                         >\r\n//                                             Dashboard\r\n//                                         </Button>\r\n//                                         <Button\r\n//                                             size=\"small mx-2\"\r\n//                                             variant=\"outlined\"\r\n//                                             onClick={() => data()}\r\n//                                         >\r\n//                                             Employee\r\n//                                         </Button>\r\n//                                         <Button\r\n//                                             size=\"small mx-2\"\r\n//                                             variant=\"outlined\"\r\n//                                             disabled\r\n//                                             onClick={() => dataDepartment()}\r\n//                                         >\r\n//                                             Department\r\n//                                         </Button>\r\n//                                     </div>\r\n\r\n//                                     <div className=\"row align-items-end\">\r\n//                                         <div className=\"col-xl-2 col-lg-3 col-md-4 col-sm-6 p-2\">\r\n//                                             <label>Department</label>\r\n//                                             <Select\r\n//                                                 options={departments}\r\n//                                                 isSearchable\r\n//                                                 placeholder=\"ALL\"\r\n//                                                 value={selectedDepartment}\r\n//                                                 styles={customSelectStyles}\r\n//                                                 onChange={handleDepartmentChange}\r\n//                                             />\r\n//                                         </div>\r\n\r\n//                                         <div className=\"col-xl-2 col-lg-3 col-md-4 col-sm-6 p-2\">\r\n//                                             <label>Employee</label>\r\n//                                             <Select\r\n//                                                 options={employees}\r\n//                                                 isSearchable\r\n//                                                 placeholder=\"ALL\"\r\n//                                                 value={selectedEmployee}\r\n//                                                 styles={customSelectStyles}\r\n//                                                 onChange={setSelectedEmployee}\r\n//                                                 isDisabled={!selectedDepartment}\r\n//                                             />\r\n//                                         </div>\r\n//                                         <div className=\"col-auto p-2 d-flex align-items-center\">\r\n//                                             <button\r\n//                                                 className=\"btn btn-link ms-2 p-0 mb-2\"\r\n//                                                 onClick={handleRefreshData}\r\n//                                                 style={{ minWidth: \"24px\" }}\r\n//                                                 title=\"Refresh Departments & Employees\"\r\n//                                             >\r\n//                                                 <Refresh fontSize=\"small\" />\r\n//                                             </button>\r\n//                                         </div>\r\n//                                     </div>\r\n//                                 </div>\r\n//                             }\r\n//                             dataArray={filteredData}\r\n//                             EnableSerialNumber\r\n//                             columns={[\r\n//                                 createCol(\"Department\", \"string\", \"Department\"),\r\n//                                 createCol(\r\n//                                     \"TotalMaleEmployees\",\r\n//                                     \"number\",\r\n//                                     \"Total Male Employees\"\r\n//                                 ),\r\n//                                 createCol(\r\n//                                     \"TotalFemaleEmployees\",\r\n//                                     \"number\",\r\n//                                     \"Total Female Employees\"\r\n//                                 ),\r\n//                                 createCol(\"TotalEmployees\", \"number\", \"Total Employees\"),\r\n//                                 createCol(\r\n//                                     \"TotalMalePresentToday\",\r\n//                                     \"number\",\r\n//                                     \"Total Male Present Today\"\r\n//                                 ),\r\n//                                 createCol(\r\n//                                     \"TotalFemalePresentToday\",\r\n//                                     \"number\",\r\n//                                     \"Total Female Present Today\"\r\n//                                 ),\r\n//                                 createCol(\"TotalPresentToday\", \"number\", \"Total Present Today\"),\r\n//                             ]}\r\n//                             isExpendable={true}\r\n//                             tableMaxHeight={550}\r\n//                             expandableComp={ExpendableComponent1}\r\n//                         />\r\n//                     )}\r\n//                 </>\r\n//             ) : (\r\n//                 <>\r\n//                     <Dialog\r\n//                         open={addEmployeeDialogOpen}\r\n//                         maxWidth=\"md\"\r\n//                         PaperProps={{\r\n//                             style: { width: \"500px\", height: \"500px\" },\r\n//                         }}\r\n//                     >\r\n//                         <DialogTitle>Add Employee</DialogTitle>\r\n//                         <DialogContent>\r\n//                             <Autocomplete\r\n//                                 multiple\r\n//                                 options={[{ UserId: \"all\", Name: \"ALL\" }, ...dropdownEmployees]}\r\n//                                 getOptionLabel={(option) => option.Name}\r\n//                                 isOptionEqualToValue={(option, value) =>\r\n//                                     option.UserId === value.UserId\r\n//                                 }\r\n//                                 value={\r\n//                                     selectedEmployees.some((user) => user.UserId === \"all\")\r\n//                                         ? [{ UserId: \"all\", Name: \"ALL\" }]\r\n//                                         : selectedEmployees\r\n//                                 }\r\n//                                 onChange={(event, value) => {\r\n//                                     if (value.some((selected) => selected.UserId === \"all\")) {\r\n//                                         setSelectedEmployees(dropdownEmployees);\r\n//                                     } else {\r\n//                                         const uniqueValues = value.filter(\r\n//                                             (val, index, self) =>\r\n//                                                 index === self.findIndex((t) => t.UserId === val.UserId)\r\n//                                         );\r\n//                                         setSelectedEmployees(uniqueValues);\r\n//                                     }\r\n//                                 }}\r\n//                                 renderInput={(params) => (\r\n//                                     <TextField {...params} placeholder=\"Employees\" />\r\n//                                 )}\r\n//                             />\r\n//                         </DialogContent>\r\n//                         <DialogActions className=\"d-flex justify-content-between flex-wrap\">\r\n//                             <Button\r\n//                                 variant=\"outlined\"\r\n//                                 onClick={() => setSelectedEmployees([])}\r\n//                             >\r\n//                                 Clear\r\n//                             </Button>\r\n//                             <span>\r\n//                                 <Button onClick={handleAddEmployeeClose}>Cancel</Button>\r\n//                                 <Button onClick={handleOverallWithPunch}>Download</Button>\r\n//                             </span>\r\n//                         </DialogActions>\r\n//                     </Dialog>\r\n\r\n//                     <Card>\r\n//                         <CardContent sx={{ minHeight: \"50vh\" }}>\r\n//                             <div className=\"ps-3 pb-2 pt-0 d-flex align-items-center justify-content-between border-bottom mb-3\">\r\n//                                 <h6 className=\"fa-18\">\r\n//                                     <Button size=\"small\" variant=\"outlined\" className=\"mx-2\">\r\n//                                         EMPLOYEE\r\n//                                     </Button>\r\n//                                 </h6>\r\n\r\n//                                 {(userTypeId === 1 || userTypeId === 0) && (\r\n//                                     <div className=\"d-flex align-items-center justify-content-start gap-3\">\r\n//                                         <Button\r\n//                                             onClick={handleDownload}\r\n//                                             variant=\"contained\"\r\n//                                             disabled={filter?.EmpId === 0 || filter?.Name === \"ALL\"}\r\n//                                         >\r\n//                                             Individual Report\r\n//                                         </Button>\r\n//                                         <Button\r\n//                                             onClick={() =>\r\n//                                                 handleOverallDownload(filter?.From, filter?.To)\r\n//                                             }\r\n//                                         >\r\n//                                             Monthly Report\r\n//                                         </Button>\r\n//                                         <Button onClick={() => setAddEmployeeDialogOpen(true)}>\r\n//                                             Cumulative Monthly Report\r\n//                                         </Button>\r\n//                                         <Button onClick={handleSummaryDownload}>Summary</Button>\r\n//                                     </div>\r\n//                                 )}\r\n//                             </div>\r\n\r\n//                             <div className=\"px-2 row mb-4\">\r\n//                                 <div className=\"col-xl-2 col-lg-3 col-md-4 col-sm-6 p-2\">\r\n//                                     <label>Employee</label>\r\n//                                     <Select\r\n//                                         value={{ value: filter?.EmpId, label: filter?.Name }}\r\n//                                         onChange={(e) =>\r\n//                                             setFilter({ ...filter, EmpId: e.value, Name: e.label })\r\n//                                         }\r\n//                                         options={[\r\n//                                             { value: 0, label: \"ALL\" },\r\n//                                             ...employees.map((obj) => ({\r\n//                                                 value: obj.UserId,\r\n//                                                 label: obj.Name,\r\n//                                             })),\r\n//                                         ]}\r\n//                                         styles={customSelectStyles}\r\n//                                         isSearchable\r\n//                                         placeholder={dropdownPlaceholder}\r\n//                                         isDisabled={isDropdownDisabled}\r\n//                                     />\r\n//                                 </div>\r\n\r\n//                                 <div className=\"col-xl-2 col-lg-3 col-md-4 col-sm-6 p-2\">\r\n//                                     <label>From</label>\r\n//                                     <input\r\n//                                         type=\"month\"\r\n//                                         className=\"cus-inpt\"\r\n//                                         value={filter?.From?.slice(0, 7)}\r\n//                                         onChange={handleFromChange}\r\n//                                     />\r\n//                                 </div>\r\n//                             </div>\r\n\r\n//                             <FilterableTable\r\n//                                 dataArray={attendanceData}\r\n//                                 columns={[\r\n//                                     {\r\n//                                         isCustomCell: true,\r\n//                                         Cell: ({ row }) => row.username,\r\n//                                         ColumnHeader: \"Employee\",\r\n//                                         isVisible: 1,\r\n//                                         width: \"20%\",\r\n//                                         CellProps: {\r\n//                                             sx: {\r\n//                                                 padding: \"10px\",\r\n//                                                 textAlign: \"left\",\r\n//                                                 fontWeight: \"bold\",\r\n//                                             },\r\n//                                         },\r\n//                                     },\r\n//                                     {\r\n//                                         isCustomCell: true,\r\n//                                         Cell: ({ row }) =>\r\n//                                             formatAttendanceDate(row.LogDate || \"--\"),\r\n//                                         ColumnHeader: \"Log Date\",\r\n//                                         isVisible: 1,\r\n//                                         width: \"20%\",\r\n//                                         CellProps: {\r\n//                                             sx: {\r\n//                                                 padding: \"10px\",\r\n//                                                 textAlign: \"center\",\r\n//                                                 color: \"gray\",\r\n//                                             },\r\n//                                         },\r\n//                                     },\r\n//                                     ...punchColumns,\r\n//                                 ]}\r\n//                                 EnableSerialNumber\r\n//                                 CellSize=\"small\"\r\n//                                 disablePagination={false}\r\n//                             />\r\n//                         </CardContent>\r\n//                     </Card>\r\n//                 </>\r\n//             )}\r\n//         </>\r\n//     );\r\n// };\r\n// export default AttendanceNewScreen;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Dialog,\r\n  IconButton,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n} from \"@mui/material\";\r\nimport Select from \"react-select\";\r\nimport { customSelectStyles } from \"../../Components/tablecolumn\";\r\nimport { ISOString, isValidDate } from \"../../Components/functions\";\r\n// import InvoiceBillTemplate from \"../SalesReportComponent/newInvoiceTemplate\";\r\nimport { Search, Refresh } from \"@mui/icons-material\";\r\n// import { convertedStatus } from \"../convertedStatus\";\r\nimport { fetchLink } from \"../../Components/fetchComponent\";\r\nimport FilterableTable, { createCol } from \"../../Components/filterableTable2\";\r\nimport { MyContext } from \"../../Components/context/contextProvider\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  Button,\r\n  Chip,\r\n  Autocomplete,\r\n  TextField,\r\n} from \"@mui/material\";\r\nimport { useContext } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport * as XLSX from \"xlsx\";\r\nimport DefaultLeave from \"./defaultLeave\";\r\nconst useQuery = () => new URLSearchParams(useLocation().search);\r\n\r\nconst AttendanceNewScreen = ({ loadingOn, loadingOff }) => {\r\n  const storage = JSON.parse(localStorage.getItem(\"user\"));\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const stateDetails = location.state;\r\n\r\n  const [addEmployeeDialogOpen, setAddEmployeeDialogOpen] = useState(false);\r\n\r\n  const getCurrentMonthYear = () => {\r\n    const date = new Date();\r\n    const year = date.getFullYear();\r\n    const month = (date.getMonth() + 1).toString().padStart(2, \"0\");\r\n    return `${year}-${month}`;\r\n  };\r\n\r\n  const initialValue = {\r\n    From: getCurrentMonthYear(),\r\n    To: getCurrentMonthYear(),\r\n    EmpId: \"0\",\r\n    Name: \"ALL\",\r\n  };\r\n  const query = useQuery();\r\n\r\n  const defaultFilters = {\r\n    From: getCurrentMonthYear(),\r\n    To: getCurrentMonthYear(),\r\n  };\r\n\r\n  const [saleOrders, setSaleOrders] = useState([]);\r\n  const [viewMode, setViewMode] = useState(\"default\");\r\n  const [expandedDepartment, setExpandedDepartment] = useState([]);\r\n\r\n  const [dropdownEmployees, setDropdownEmployees] = useState([]);\r\n  const [reload, setReload] = useState(false);\r\n  const [attendanceData, setAttendanceData] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const [isDropdownDisabled, setIsDropdownDisabled] = useState(false);\r\n  const [employees, setEmployees] = useState([]);\r\n  const [selectedEmployee, setSelectedEmployee] = useState(null);\r\n  const userTypeId = storage?.UserTypeId;\r\n  const parseData = storage;\r\n  const { contextObj } = useContext(MyContext);\r\n\r\n  const [dropdownPlaceholder, setDropdownPlaceholder] = useState(\"ALL\");\r\n  const [filter, setFilter] = useState(initialValue);\r\n  const [debouncedFilter, setDebouncedFilter] = useState(filter);\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setDebouncedFilter(filter);\r\n    }, 500);\r\n\r\n    return () => clearTimeout(timer);\r\n  }, [filter]);\r\n\r\n  useEffect(() => {\r\n    const { From, EmpId } = debouncedFilter;\r\n    if (From && (EmpId || EmpId === 0)) {\r\n      fetchAttendanceData(From, EmpId);\r\n      fetchDropdownEmployees();\r\n    }\r\n  }, [debouncedFilter]);\r\n\r\n  const getDaysInMonth = (monthYear) => {\r\n    if (!monthYear) return 0;\r\n\r\n    const [year, month] = monthYear.split(\"-\");\r\n\r\n    return new Date(year, month, 0).getDate();\r\n  };\r\n\r\n  const [filters, setFilters] = useState({\r\n    FromDate: new Date().toISOString().split(\"T\")[0],\r\n    ToDate: new Date().toISOString().split(\"T\")[0],\r\n    Cancel_status: 0,\r\n  });\r\n\r\n  const toggleExpand = (department) => {\r\n    if (expandedDepartment === department) {\r\n      setExpandedDepartment(null);\r\n    } else {\r\n      setExpandedDepartment(department);\r\n    }\r\n  };\r\n  const [departments, setDepartments] = useState([]);\r\n  const [selectedDepartment, setSelectedDepartment] = useState(null);\r\n\r\n  const [selectedEmployees, setSelectedEmployees] = useState([]);\r\n  const Add_Rights = contextObj?.Add_Rights;\r\n\r\n  useEffect(() => {\r\n    if (loadingOn) loadingOn();\r\n\r\n    const today = new Date().toISOString().split(\"T\")[0];\r\n    const fromDate = filters.FromDate || today;\r\n    const toDate = filters.ToDate || today;\r\n\r\n    fetchLink({\r\n      address: `empAttendance/departmentwise?FromDate=${fromDate}&ToDate=${toDate}`,\r\n    })\r\n      .then((data) => {\r\n        if (data.success) {\r\n          setSaleOrders(data?.data);\r\n        }\r\n      })\r\n      .catch((e) => console.error(e))\r\n      .finally(() => {\r\n        if (loadingOff) loadingOff();\r\n      });\r\n  }, [reload]);\r\n\r\n  const handleFromChange = (e) => {\r\n    const getDaysInMonth = (monthYear) => {\r\n      if (!monthYear) return 0;\r\n\r\n      const [year, month] = monthYear.split(\"-\");\r\n\r\n      return new Date(year, month, 0).getDate();\r\n    };\r\n    const selectedMonth = e.target.value;\r\n    const [year, month] = selectedMonth.split(\"-\");\r\n    const startDate = `${year}-${month}-01`;\r\n    const dayCount = getDaysInMonth(`${year}-${month}`);\r\n    const endDate = `${year}-${month}-${dayCount}`;\r\n\r\n    setFilter({\r\n      From: startDate,\r\n      To: endDate,\r\n      EmpId: filter.EmpId || 0,\r\n      Name: filter?.Name,\r\n    });\r\n  };\r\n\r\nconst handleSummaryDownload = async () => {\r\n  try {\r\n    const fromDate = filter.From;\r\n    const [year, month] = fromDate.split(\"-\");\r\n    const startDate = `${year}-${month}-01`;\r\n    const dayCount = getDaysInMonth(`${year}-${month}`);\r\n    const endDate = `${year}-${month}-${dayCount}`;\r\n\r\n    const response = await fetchLink({\r\n      address: `userModule/employeeActivity/summary?FromDate=${startDate}&ToDate=${endDate}`,\r\n    });\r\n\r\n    if (response.success) {\r\n      const overallData = response.data;\r\n\r\n      // Build all dates in month\r\n      const getDateRange = (from, to) => {\r\n        const allDates = [];\r\n        const start = new Date(from);\r\n        const end = new Date(to);\r\n        let sundayCount = 0;\r\n\r\n        while (start <= end) {\r\n          const dateStr = start.toISOString().split(\"T\")[0];\r\n          allDates.push(dateStr);\r\n          if (start.getDay() === 0) sundayCount++; // Sunday\r\n          start.setDate(start.getDate() + 1);\r\n        }\r\n\r\n        return {\r\n          days: allDates,\r\n          sundayCount,\r\n          totalDays: allDates.length,\r\n        };\r\n      };\r\n\r\n      const { days: dateRange, sundayCount, totalDays } = getDateRange(startDate, endDate);\r\n\r\nconst summaryData = overallData.map((row) => {\r\n  const punchDetails = Array.isArray(row.AttendanceDetails)\r\n    ? row.AttendanceDetails\r\n    : row.AttendanceDetails\r\n    ? JSON.parse(row.AttendanceDetails)\r\n    : [];\r\n\r\n  let totalPresent = 0;\r\n  let companyHoliday = 0;\r\n\r\n  const workingDays = dateRange.filter(date => new Date(date).getDay() !== 0); // exclude Sundays\r\n\r\n  workingDays.forEach(date => {\r\n    const dayRecord = punchDetails.find(p => p.Date.startsWith(date));\r\n    if (dayRecord) {\r\n      if (dayRecord.AttendanceStatus === \"P\") {\r\n        totalPresent++;\r\n      } else if (dayRecord.AttendanceStatus === \"H\") {\r\n        companyHoliday++;\r\n      }\r\n    }\r\n  });\r\n\r\n  const approvedLeave = row.ApprovedLeave || 0;\r\n  const pendingLeave = row.PendingLeave || 0;\r\n  const totalWorkingDays = workingDays.length;\r\n\r\n  const totalAbsent =\r\n    totalWorkingDays - (totalPresent + approvedLeave + companyHoliday);\r\n\r\n  return {\r\n    Name: row.Name,\r\n    TotalPresent: totalPresent,\r\n    ApprovedLeave: approvedLeave,\r\n    PendingLeave: pendingLeave,\r\n    CompanyHoliday: companyHoliday,\r\n    TotalAbsent: totalAbsent < 0 ? 0 : totalAbsent,\r\n    NumberOfSundays: sundayCount,\r\n  };\r\n});\r\n\r\n// Create Excel Sheet\r\nconst ws = XLSX.utils.json_to_sheet(summaryData);\r\n\r\nconst headers = [\r\n  \"Name\",\r\n  \"TotalPresent\",\r\n  \"ApprovedLeave\",\r\n  \"PendingLeave\",\r\n  \"CompanyHoliday\",\r\n  \"TotalAbsent\",\r\n  \"NumberOfSundays\",\r\n];\r\n\r\n// Add headers to the top\r\nXLSX.utils.sheet_add_aoa(ws, [headers], { origin: \"A1\" });\r\n\r\n// Create workbook and download\r\nconst wb = XLSX.utils.book_new();\r\nXLSX.utils.book_append_sheet(wb, ws, \"Attendance Summary\");\r\n\r\nXLSX.writeFile(wb, `Attendance_Summary_${month}_${year}.xlsx`);\r\n\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error downloading attendance summary:\", error);\r\n    toast.error(\"Failed to generate summary report\");\r\n  }\r\n};\r\n\r\n\r\n\r\n// const handleSummaryDownload = async () => {\r\n//   try {\r\n//     const fromDate = filter.From;\r\n//     const [year, month] = fromDate.split(\"-\");\r\n//     const startDate = `${year}-${month}-01`;\r\n//     const dayCount = getDaysInMonth(`${year}-${month}`);\r\n//     const endDate = `${year}-${month}-${dayCount}`;\r\n\r\n//     // Fetch all required data\r\n//     const [attendanceRes, leaveRes, defaultLeaveRes] = await Promise.all([\r\n//       fetchLink({ address: `userModule/employeActivity/employeeAttendanceModuledownload?FromDate=${startDate}&ToDate=${endDate}` }),\r\n//       fetchLink({ address: `masters/leave?FromDate=${startDate}&ToDate=${endDate}` }),\r\n//       fetchLink({ address: `masters/defaultLeave?FromDate=${startDate}&ToDate=${endDate}` }),\r\n//     ]);\r\n\r\n//     if (!attendanceRes.success) {\r\n//       toast.error(\"Failed to fetch attendance data\");\r\n//       return;\r\n//     }\r\n\r\n//     const overallData = attendanceRes.data;\r\n//     const allLeaves = leaveRes?.data ? leaveRes.data : [];\r\n//     const defaultLeaves = defaultLeaveRes?.success ? defaultLeaveRes.data : [];\r\n\r\n// const approvedLeaveMap = {};\r\n// const pendingLeaveMap = {};\r\n\r\n// allLeaves.forEach(leave => {\r\n//   const userId = String(leave.User_Id);\r\n//   if (!userId) return;\r\n\r\n//   const status = leave.Status?.toLowerCase();\r\n//   const from = new Date(leave.FromDate);\r\n//   const to = new Date(leave.ToDate);\r\n\r\n//   let current = new Date(from);\r\n//   while (current <= to) {\r\n//     const dateStr = current.toISOString().split(\"T\")[0];\r\n\r\n//     if (status === \"approved\") {\r\n//       if (!approvedLeaveMap[userId]) approvedLeaveMap[userId] = {};\r\n//       approvedLeaveMap[userId][dateStr] = true;\r\n//       console.log(`✅ Approved leave set -> User: ${userId}, Date: ${dateStr}`);\r\n//     } else {\r\n//       if (!pendingLeaveMap[userId]) pendingLeaveMap[userId] = {};\r\n//       pendingLeaveMap[userId][dateStr] = true;\r\n//       console.log(`🕒 Pending leave set -> User: ${userId}, Date: ${dateStr}`);\r\n//     }\r\n\r\n//     current.setDate(current.getDate() + 1);\r\n//   }\r\n// });\r\n\r\n\r\n\r\n//     const defaultLeaveDates = new Set(\r\n//       defaultLeaves.map(d => d.Date?.split(\"T\")[0]).filter(Boolean)\r\n//     );\r\n\r\n//     const getDateRange = (start, end) => {\r\n//       const dates = [];\r\n//       let current = new Date(start);\r\n//       const endDate = new Date(end);\r\n      \r\n//       while (current <= endDate) {\r\n//         dates.push(current.toISOString().split(\"T\")[0]);\r\n//         current.setDate(current.getDate() + 1);\r\n//       }\r\n//       return dates;\r\n//     };\r\n\r\n//     const dateRange = getDateRange(startDate, endDate);\r\n//     const totalWorkingDays = dateRange.filter(date => new Date(date).getDay() !== 0).length;\r\n\r\n//     const summaryData = overallData.map((employee) => {\r\n//       const punchDetails = employee.AttendanceDetails ? JSON.parse(employee.AttendanceDetails) : [];\r\n//       const userId = String(employee.EmployeeID);\r\n      \r\n//       let totalPresent = 0;\r\n//       let totalApprovedLeave = 0;\r\n//       let totalPendingLeave = 0;\r\n//       let totalSundays = 0;\r\n//       let totalDefaultLeave = 0;\r\n//       let totalUnmarkedDays = 0;\r\n\r\n//  dateRange.forEach(date => {\r\n//   const dateObj = new Date(date);\r\n//   const dateStr = dateObj.toISOString().split(\"T\")[0];\r\n//   const isSunday = dateObj.getDay() === 0;\r\n//   const isDefaultLeave = defaultLeaveDates.has(dateStr);\r\n//   const attendanceRecord = punchDetails.find(d => d.Date === dateStr);\r\n\r\n//   const isApprovedLeave = approvedLeaveMap[userId]?.[dateStr] === true;\r\n//   const isPendingLeave = pendingLeaveMap[userId]?.[dateStr] === true;\r\n\r\n//   console.log(`📅 ${dateStr} - User ${String(userId)} | Approved: ${isApprovedLeave} | Pending: ${isPendingLeave}`);\r\n\r\n//   if (isSunday) {\r\n//     totalSundays++;\r\n//     if (attendanceRecord?.AttendanceStatus === \"P\") totalPresent++;\r\n//     return;\r\n//   }\r\n\r\n//   if (isDefaultLeave) {\r\n//     totalDefaultLeave++;\r\n//     if (attendanceRecord?.AttendanceStatus === \"P\") totalPresent++;\r\n//     return;\r\n//   }\r\n\r\n//   if (isApprovedLeave) {\r\n//     totalApprovedLeave++;\r\n//     totalPresent++;\r\n//     return;\r\n//   }\r\n\r\n//   if (isPendingLeave) {\r\n//     totalPendingLeave++;\r\n//     return;\r\n//   }\r\n\r\n//   if (attendanceRecord) {\r\n//     if (attendanceRecord.AttendanceStatus === \"P\") {\r\n//       totalPresent++;\r\n//     } else {\r\n//       totalUnmarkedDays++;\r\n//     }\r\n//   } else {\r\n//     totalUnmarkedDays++;\r\n//   }\r\n// });\r\n\r\n\r\n\r\n//       return {\r\n//         EmployeeName: employee.Name,\r\n//         EmployeeID: employee.EmployeeID,\r\n//         Month: `${month}-${year}`,\r\n//         Branch: employee.Branch,\r\n//         TotalWorkingDays: totalWorkingDays,\r\n//         TotalSundays: totalSundays,\r\n//         TotalDefaultLeave: totalDefaultLeave,\r\n//         TotalPresent: totalPresent,\r\n//         TotalApprovedLeave: totalApprovedLeave,\r\n//         TotalPendingLeave: totalPendingLeave,\r\n//         TotalUnmarkedDays: totalUnmarkedDays,\r\n//       };\r\n//     });\r\n\r\n//     const exportData = summaryData.map(item => ({\r\n//       \"Employee Name\": item.EmployeeName,\r\n//       \"Employee ID\": item.EmployeeID,\r\n//       \"Month\": item.Month,\r\n//       \"Branch\": item.Branch,\r\n//       \"Total Working Days\": item.TotalWorkingDays,\r\n//       \"Sundays\": item.TotalSundays,\r\n//       \"Company Holidays\": item.TotalDefaultLeave,\r\n//       \"Present Days\": item.TotalPresent,\r\n//       \"Approved Leave Days\": item.TotalApprovedLeave,\r\n//       \"Pending Leave Days\": item.TotalPendingLeave,\r\n//       \"Absent Days\": item.TotalUnmarkedDays,\r\n//     }));\r\n\r\n//     const ws = XLSX.utils.json_to_sheet(exportData);\r\n//     const wb = XLSX.utils.book_new();\r\n//     XLSX.utils.book_append_sheet(wb, ws, \"Attendance Summary\");\r\n//     XLSX.writeFile(wb, `Attendance_Summary_${month}_${year}.xlsx`);\r\n\r\n//   } catch (error) {\r\n//     console.error(\"Error downloading summary report:\", error);\r\n//     toast.error(\"Failed to generate attendance report\");\r\n//   }\r\n// };\r\n\r\n  const handleDownload = () => {\r\n    const maxPunches = 4;\r\n\r\n    const exportData = attendanceData.map((row) => {\r\n      const punchDetails = row.AttendanceDetails\r\n        ? row.AttendanceDetails.split(\",\").filter((p) => p.trim() !== \"\")\r\n        : [];\r\n\r\n      let attendanceStatus = row.AttendanceStatus;\r\n\r\n      if (!attendanceStatus) {\r\n        attendanceStatus = punchDetails.length === 0 ? \"A\" : \"P\";\r\n      }\r\n\r\n      const punchColumns = {};\r\n      for (let i = 0; i < maxPunches; i++) {\r\n        punchColumns[`Punch${i + 1}`] = punchDetails[i]\r\n          ? punchDetails[i].trim()\r\n          : \"--\";\r\n      }\r\n\r\n      return {\r\n        Employee: row.username || row.Employee,\r\n        \"Log Date\": formatAttendanceDate(row.LogDate),\r\n        \"Attendance Status\": attendanceStatus,\r\n        ...punchColumns,\r\n      };\r\n    });\r\n\r\n    const columnsOrder = [\r\n      \"Employee\",\r\n      \"Log Date\",\r\n      \"Attendance Status\",\r\n      \"Punch1\",\r\n      \"Punch2\",\r\n      \"Punch3\",\r\n      \"Punch4\",\r\n      \"Punch5\",\r\n      \"Punch6\"\r\n    ];\r\n\r\n    const reorderedData = exportData.map((row) =>\r\n      columnsOrder.reduce((acc, col) => {\r\n        acc[col] = row[col] || \"--\";\r\n        return acc;\r\n      }, {})\r\n    );\r\n\r\n    const ws = XLSX.utils.json_to_sheet(reorderedData);\r\n    const wb = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(wb, ws, \"Attendance Report\");\r\n\r\n    XLSX.writeFile(wb, \"Attendance_Report.xlsx\");\r\n  };\r\n\r\n  const MAX_PUNCHES = 6;\r\n\r\n  function formatToAmPm(timeString) {\r\n    if (!timeString) return \"--\";\r\n    const [hourStr, minuteStr] = timeString.split(\":\");\r\n    if (!hourStr || !minuteStr) return \"--\";\r\n\r\n    let hour = parseInt(hourStr, 10);\r\n    const minute = minuteStr;\r\n    const ampm = hour >= 12 ? \"PM\" : \"AM\";\r\n\r\n    hour = hour % 12 || 12;\r\n\r\n    return `${hour.toString().padStart(2, \"0\")}:${minute} ${ampm}`;\r\n  }\r\n\r\n  const punchColumns = Array.from({ length: MAX_PUNCHES }, (_, index) => ({\r\n    isCustomCell: true,\r\n    ColumnHeader: `Punch ${index + 1}`,\r\n    isVisible: 1,\r\n    width: \"13%\",\r\n    CellProps: {\r\n      sx: {\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        padding: \"10px\",\r\n      },\r\n    },\r\n    Cell: ({ row }) => {\r\n      const punches = row.AttendanceDetails\r\n        ? row.AttendanceDetails.split(\",\")\r\n            .map((p) => p.trim())\r\n            .filter((p) => p !== \"\")\r\n        : [];\r\n\r\n      const punch = punches[index] || \"--\";\r\n      const rawTime = punch.split(\":in(\")[0];\r\n      const formattedTime = punch !== \"--\" ? formatToAmPm(rawTime) : \"--\";\r\n\r\n      return formattedTime !== \"--\" ? (\r\n        <Chip\r\n          label={formattedTime}\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          sx={{ color: \"green\", margin: \"2px\" }}\r\n        />\r\n      ) : (\r\n        <div style={{ color: \"gray\" }}>--</div>\r\n      );\r\n    },\r\n  }));\r\n\r\n  const formatAttendanceDate = (logDateTime) => {\r\n    if (!logDateTime) return \"--\";\r\n    const [date] = logDateTime.split(\"T\");\r\n    return `${date} `;\r\n  };\r\n\r\n\r\n  \r\nconst handleOverallDownload = async () => {\r\n  try {\r\n    const fromDate = filter.From;\r\n    const [year, month] = fromDate.split(\"-\");\r\n    const startDate = `${year}-${month}-01`;\r\n    const dayCount = getDaysInMonth(`${year}-${month}`);\r\n    const endDate = `${year}-${month}-${dayCount}`;\r\n\r\n    const [attendanceRes, leaveRes, defaultLeaveRes] = await Promise.all([\r\n      fetchLink({\r\n        address: `userModule/employeActivity/employeeAttendanceModuledownload?FromDate=${startDate}&ToDate=${endDate}`,\r\n      }),\r\n      fetchLink({\r\n        address: `masters/leave?FromDate=${startDate}&ToDate=${endDate}`,\r\n      }),\r\n      fetchLink({\r\n        address: `masters/defaultLeave?FromDate=${startDate}&ToDate=${endDate}`,\r\n      }),\r\n    ]);\r\n\r\n    if (!attendanceRes.success) throw new Error(\"Attendance data failed\");\r\n\r\n    const leaveMap = {};\r\n    const defaultLeaveDates = new Set();\r\n\r\n \r\n    (leaveRes?.data || []).forEach((leave) => {\r\n      if (leave.Status?.toUpperCase() !== \"APPROVED\") return;\r\n\r\n      const userId = leave.User_Id;\r\n      if (!userId) return;\r\n\r\n      let current = new Date(leave.FromDate);\r\n      const leaveEnd = new Date(leave.ToDate);\r\n\r\n      while (current <= leaveEnd) {\r\n        const dateStr = current.toISOString().split(\"T\")[0];\r\n        if (!leaveMap[userId]) leaveMap[userId] = {};\r\n        leaveMap[userId][dateStr] = true;\r\n        current.setDate(current.getDate() + 1);\r\n      }\r\n    });\r\n\r\n    (defaultLeaveRes?.data || []).forEach((defaultLeave) => {\r\n      const dateStr = new Date(defaultLeave.Date).toISOString().split(\"T\")[0];\r\n      defaultLeaveDates.add(dateStr);\r\n    });\r\n\r\n    const { days: dateRange } = getDateRange(startDate, endDate);\r\n    const exportData = attendanceRes.data.map((emp) => {\r\n      const attendanceDetails = tryParseJSON(emp.AttendanceDetails) || [];\r\n      const dailyStatus = {};\r\n      let presentCount = 0;\r\n\r\n       const attendanceLookup = {};\r\n      attendanceDetails.forEach((record) => {\r\n        const dateStr = new Date(record.Date).toISOString().split(\"T\")[0];\r\n        attendanceLookup[dateStr] = {\r\n          status: record.AttendanceStatus,\r\n          hasPunch: record.Punch1 !== \"[]\",\r\n        };\r\n      });\r\n\r\n      dateRange.forEach((date, index) => {\r\n        const dayKey = `Day ${index + 1}`;\r\n        const userId = emp.User_Mgt_Id;\r\n        const dateStr = new Date(date).toISOString().split(\"T\")[0];\r\n        const isSunday = new Date(date).getDay() === 0;\r\n\r\n        const attendanceRecord = attendanceLookup[dateStr];\r\n        const attendanceStatus = attendanceRecord?.status;\r\n        const hasPunch = attendanceRecord?.hasPunch;\r\n        if (defaultLeaveDates.has(dateStr)) {\r\n          if (attendanceStatus === \"P\" && hasPunch) {\r\n            dailyStatus[dayKey] = \"P\";\r\n            presentCount++;\r\n          } else {\r\n            dailyStatus[dayKey] = \"DL\";\r\n          }\r\n        } else if (isSunday) {\r\n          dailyStatus[dayKey] = \"H\";\r\n        } else if (leaveMap[userId]?.[dateStr]) {\r\n          dailyStatus[dayKey] = \"L\";\r\n        } else if (attendanceStatus === \"L\") {\r\n          dailyStatus[dayKey] = \"L\";\r\n        } else if (attendanceStatus === \"P\") {\r\n          dailyStatus[dayKey] = hasPunch ? \"P\" : \"A\";\r\n          if (hasPunch) presentCount++;\r\n        } else if (attendanceStatus === \"H\") {\r\n          dailyStatus[dayKey] = \"H\";\r\n        } else {\r\n          dailyStatus[dayKey] = \"A\";\r\n        }\r\n      });\r\n\r\n      return {\r\n        EmployeeName: emp.username || emp.Name,\r\n        TotalPresent: presentCount,\r\n        ...dailyStatus,\r\n      };\r\n    });\r\n\r\n    const headers = [\r\n      \"EmployeeName\",\r\n      \"TotalPresent\",\r\n      ...dateRange.map((_, i) => `Day ${i + 1}`),\r\n    ];\r\n    const ws = XLSX.utils.json_to_sheet(exportData);\r\n    XLSX.utils.sheet_add_aoa(ws, [headers], { origin: \"A1\" });\r\n\r\n    const wb = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(wb, ws, \"Attendance Report\");\r\n    XLSX.writeFile(wb, `Attendance_Report_${month}_${year}.xlsx`);\r\n  } catch (error) {\r\n    console.error(\"Download failed:\", error);\r\n    toast.error(\"Failed to generate report\");\r\n  }\r\n};\r\n\r\n  \r\n  \r\n  function getDateRange(start, end) {\r\n    const dates = [];\r\n    const current = new Date(start);\r\n    const endDate = new Date(end);\r\n\r\n    while (current <= endDate) {\r\n      dates.push(current.toISOString().split(\"T\")[0]);\r\n      current.setDate(current.getDate() + 1);\r\n    }\r\n\r\n    return { days: dates, count: dates.length };\r\n  }\r\n\r\n  function tryParseJSON(jsonString) {\r\n    try {\r\n      return jsonString ? JSON.parse(jsonString) : [];\r\n    } catch {\r\n      return [];\r\n    }\r\n  }\r\n\r\nconst handleOverallWithPunch = async () => {\r\n  try {\r\n    const maxPunches = 6;\r\n\r\n\r\n    const firstLogDate = attendanceData[0]?.LogDate;\r\n    if (!firstLogDate) {\r\n      toast.error(\"No attendance data found\");\r\n      return;\r\n    }\r\n\r\n    const dateObj = new Date(firstLogDate);\r\n    const year = dateObj.getFullYear();\r\n    const month = dateObj.getMonth() + 1;\r\n    const startDate = `${year}-${month.toString().padStart(2, \"0\")}-01`;\r\n    const endDate = new Date(year, month, 0).toISOString().split(\"T\")[0];\r\n\r\n  \r\n    const defaultLeaveResponse = await fetchLink({\r\n      address: `masters/defaultLeave?FromDate=${startDate}&ToDate=${endDate}`,\r\n    });\r\n  \r\n    const defaultLeaveData = defaultLeaveResponse?.success ? defaultLeaveResponse.data : [];\r\n  const defaultLeaveDates = new Set(\r\n  defaultLeaveData\r\n    .map(leave => leave.Date ? leave.Date.split('T')[0] : null)\r\n    .filter(date => date !== null)\r\n);\r\n  \r\n    const leaveResponse = await fetchLink({\r\n      address: `masters/leave?FromDate=${startDate}&ToDate=${endDate}`,\r\n    });\r\n    const leaveData = leaveResponse.data || [];\r\n\r\n    const leaveMap = {};\r\n    leaveData.forEach((leave) => {\r\n      if (leave.Status?.toLowerCase() !== \"approved\") return;\r\n\r\n      const userId = String(leave.User_Id);\r\n      if (!userId) return;\r\n\r\n      const parseDate = (dateStr) => {\r\n        const parts = dateStr.split(/[-/]/) || [];\r\n        if (parts.length === 3) {\r\n          if (parts[2].length === 4) {\r\n            return parts[0].length === 2\r\n              ? new Date(`${parts[2]}-${parts[1]}-${parts[0]}`)\r\n              : new Date(`${parts[2]}-${parts[0]}-${parts[1]}`);\r\n          }\r\n          return new Date(dateStr);\r\n        }\r\n        return new Date(dateStr);\r\n      };\r\n\r\n      const leaveStart = parseDate(leave.FromDate);\r\n      const leaveEnd = parseDate(leave.ToDate);\r\n\r\n      let currentDate = new Date(leaveStart);\r\n      while (currentDate <= leaveEnd) {\r\n        const dateStr = currentDate.toISOString().split(\"T\")[0];\r\n        if (!leaveMap[userId]) leaveMap[userId] = {};\r\n        \r\n        if (currentDate.getDay() !== 0) { // Skip Sundays\r\n          leaveMap[userId][dateStr] = true;\r\n        }\r\n        currentDate.setDate(currentDate.getDate() + 1);\r\n      }\r\n    });\r\n\r\n    // 5. Filter and group attendance data\r\n    const filteredAttendanceData = attendanceData.filter((row) =>\r\n      selectedEmployees.some(\r\n        (user) =>\r\n          String(user.UserId) === String(row.User_Mgt_Id) ||\r\n          user.UserId === \"ALL\"\r\n      )\r\n    );\r\n\r\n    const groupedData = filteredAttendanceData.reduce((acc, row) => {\r\n      acc[row.username] = acc[row.username] || [];\r\n      acc[row.username].push(row);\r\n      return acc;\r\n    }, {});\r\n\r\n    if (Object.keys(groupedData).length === 0) {\r\n      toast.error(\"No attendance data found\");\r\n      return;\r\n    }\r\n\r\n    // 6. Generate Excel sheets\r\n    const wb = XLSX.utils.book_new();\r\n\r\n    Object.entries(groupedData).forEach(([username, userAttendance]) => {\r\n      const exportData = userAttendance.map((row) => {\r\n        const logDate = new Date(row.LogDate);\r\n        const dateStr = logDate.toISOString().split(\"T\")[0];\r\n        const isSunday = logDate.getDay() === 0;\r\n        const userId = String(row.User_Mgt_Id);\r\n\r\n        // Attendance status priority:\r\n        // 1. Default Leave (DL)\r\n        // 2. Approved Leave (L)\r\n        // 3. Sunday (H)\r\n        // 4. Present/Absent based on punches\r\n        let attendanceStatus;\r\n        if (defaultLeaveDates.has(dateStr)) {\r\n          attendanceStatus = \"DL\";\r\n        } else if (leaveMap[userId]?.[dateStr]) {\r\n          attendanceStatus = \"L\";\r\n        } else if (isSunday) {\r\n          attendanceStatus = \"H\";\r\n        } else {\r\n          const punches = row.AttendanceDetails?.split(\",\").map((d) => d.trim()) || [];\r\n          attendanceStatus = punches.some((p) => p && p !== \"--\") ? \"P\" : \"A\";\r\n        }\r\n\r\n        // Punch columns\r\n        const punchColumns = {};\r\n        const punches = row.AttendanceDetails?.split(\",\").map((d) => d.trim()) || [];\r\n        for (let i = 0; i < maxPunches; i++) {\r\n          punchColumns[`Punch ${i + 1}`] = punches[i] || \"--\";\r\n        }\r\n\r\n        return {\r\n          Employee: username,\r\n          \"Log Date\": formatAttendanceDate(row.LogDate),\r\n          \"Attendance Status\": attendanceStatus,\r\n          ...punchColumns,\r\n        };\r\n      });\r\n\r\n      // Reorder columns\r\n      const columnsOrder = [\r\n        \"Employee\",\r\n        \"Log Date\",\r\n        \"Attendance Status\",\r\n        ...Array.from({ length: maxPunches }, (_, i) => `Punch ${i + 1}`),\r\n      ];\r\n\r\n      const reorderedData = exportData.map((row) =>\r\n        columnsOrder.reduce((acc, col) => {\r\n          acc[col] = row[col] || \"--\";\r\n          return acc;\r\n        }, {})\r\n      );\r\n\r\n      XLSX.utils.book_append_sheet(\r\n        wb,\r\n        XLSX.utils.json_to_sheet(reorderedData),\r\n        username.slice(0, 31)\r\n      );\r\n    });\r\n\r\n    // 7. Export Excel file\r\n    const fileName = `Attendance_Report_${new Date().toLocaleString(\r\n      \"default\",\r\n      { month: \"long\" }\r\n    )}_${year}.xlsx`;\r\n    XLSX.writeFile(wb, fileName);\r\n\r\n  } catch (error) {\r\n    console.error(\"Error generating report:\", error);\r\n    toast.error(\"Failed to generate report\");\r\n  }\r\n};\r\n\r\n\r\n\r\n  const fetchDropdownEmployees = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const data = await fetchLink({\r\n        address: `masters/Employeedetails/dropDown?Company_id=${parseData.Company_id}`,\r\n      });\r\n      if (data.success) {\r\n        setDropdownEmployees(data.data);\r\n      }\r\n    } catch (e) {\r\n      console.error(e);\r\n      toast.error(\"Failed to fetch employees for dropdown\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const userTypeId = storage?.UserTypeId;\r\n    const userId = storage?.UserId;\r\n    const companyId = storage?.Company_id;\r\n\r\n    fetchLink({\r\n      address: `masters/users/employee/dropDown?Company_id=${companyId}`,\r\n      headers: {\r\n        Authorization: `Bearer ${localStorage.getItem(\"Autheticate_Id\")}`,\r\n      },\r\n    })\r\n      .then((data) => {\r\n        if (data.success) {\r\n          let filteredEmployees = [];\r\n\r\n          if (\r\n            Number(userTypeId) === 1 ||\r\n            Number(userTypeId) === 0 ||\r\n            Number(Add_Rights) === 1\r\n          ) {\r\n            filteredEmployees = data.data;\r\n            setFilter((prev) => ({ ...prev, EmpId: 0, Name: \"ALL\" }));\r\n            setIsDropdownDisabled(false);\r\n            setDropdownPlaceholder(\"ALL\");\r\n          } else {\r\n            filteredEmployees = data.data.filter(\r\n              (employee) => employee.UserId === userId\r\n            );\r\n            setFilter((prev) => ({\r\n              ...prev,\r\n              EmpId: userId,\r\n              Name: storage?.Name,\r\n            }));\r\n            setIsDropdownDisabled(true);\r\n            setDropdownPlaceholder(storage?.Name);\r\n          }\r\n\r\n          setEmployees(filteredEmployees);\r\n        }\r\n      })\r\n      .catch((e) => console.error(\"Error fetching employees:\", e));\r\n  }, [\r\n    storage?.UserTypeId,\r\n    storage?.UserId,\r\n    storage?.Company_id,\r\n    storage?.Name,\r\n    reload,\r\n  ]);\r\n\r\n  const fetchAttendanceData = async (From, EmpId) => {\r\n    try {\r\n      const userTypeId = storage?.UserTypeId;\r\n      const [year, month] = From.split(\"-\");\r\n\r\n      const startDate = `${year}-${month}-01`;\r\n\r\n      const dayCount = getDaysInMonth(`${year}-${month}`);\r\n\r\n      const endDate = `${year}-${month}-${dayCount}`;\r\n\r\n      const response = await fetchLink({\r\n        address: `userModule/employeActivity/trackActivitylogAttendance?FromDate=${startDate}&ToDate=${endDate}&UserTypeId=${userTypeId}&UserId=${EmpId}`,\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem(\"Autheticate_Id\")}`,\r\n        },\r\n      });\r\n\r\n      if (response.success) {\r\n        setAttendanceData(response.data);\r\n      }\r\n    } catch (e) {\r\n      console.error(\"Error fetching attendance data:\", e);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const queryFilters = {\r\n      FromDate:\r\n        query.get(\"FromDate\") && isValidDate(query.get(\"FromDate\"))\r\n          ? query.get(\"FromDate\")\r\n          : defaultFilters.Fromdate,\r\n      ToDate:\r\n        query.get(\"ToDate\") && isValidDate(query.get(\"ToDate\"))\r\n          ? query.get(\"ToDate\")\r\n          : defaultFilters.Todate,\r\n    };\r\n    setFilters((pre) => ({\r\n      ...pre,\r\n      FromDate: queryFilters.FromDate,\r\n      ToDate: queryFilters.ToDate,\r\n    }));\r\n  }, [location.search]);\r\n\r\n  useEffect(() => {\r\n    const FromDate =\r\n      stateDetails?.FromDate && isValidDate(stateDetails?.FromDate)\r\n        ? ISOString(stateDetails?.FromDate)\r\n        : null;\r\n    const ToDate =\r\n      stateDetails?.ToDate && isValidDate(stateDetails?.ToDate)\r\n        ? ISOString(stateDetails?.ToDate)\r\n        : null;\r\n    if (FromDate && ToDate) {\r\n      updateQueryString({ FromDate, ToDate });\r\n      setFilters((pre) => ({\r\n        ...pre,\r\n        FromDate: ISOString(stateDetails.FromDate),\r\n        ToDate: stateDetails.ToDate,\r\n      }));\r\n      setReload((pre) => !pre);\r\n    }\r\n  }, [stateDetails]);\r\n\r\n  const updateQueryString = (newFilters) => {\r\n    const params = new URLSearchParams(newFilters);\r\n    navigate(`?${params.toString()}`, { replace: true });\r\n  };\r\n\r\n  const handleAddEmployeeClose = () => {\r\n    setAddEmployeeDialogOpen(false);\r\n  };\r\n\r\n  const data = () => setViewMode(\"employee\");\r\n  const dataDepartment = () => setViewMode(\"department\");\r\n  const defaultLeave = () => setViewMode(\"defaultLeave\");\r\n\r\n\r\n\r\n  const dashboard = () => {\r\n    setFilters((prev) => ({\r\n      ...prev,\r\n      FromDate: prev.FromDate || new Date().toISOString().split(\"T\")[0],\r\n      ToDate: prev.ToDate || new Date().toISOString().split(\"T\")[0],\r\n    }));\r\n    setViewMode(\"default\");\r\n  };\r\n\r\n  const ExpendableComponent = ({ row }) => {\r\n    const departments =\r\n      typeof row.DepartmentWiseCounts === \"string\"\r\n        ? JSON.parse(row.DepartmentWiseCounts)\r\n        : row.DepartmentWiseCounts;\r\n\r\n    return (\r\n      <table\r\n        style={{\r\n          width: \"100%\",\r\n          borderCollapse: \"collapse\",\r\n          marginTop: \"10px\",\r\n        }}\r\n      >\r\n        <thead>\r\n          <tr style={{ backgroundColor: \"#f0f0f0\" }}>\r\n            <th\r\n              style={{\r\n                border: \"1px solid #ccc\",\r\n                padding: \"8px\",\r\n                textAlign: \"left\",\r\n              }}\r\n            >\r\n              Department Name\r\n            </th>\r\n            <th\r\n              style={{\r\n                border: \"1px solid #ccc\",\r\n                padding: \"8px\",\r\n                textAlign: \"left\",\r\n              }}\r\n            >\r\n              Total Employees\r\n            </th>\r\n            <th\r\n              style={{\r\n                border: \"1px solid #ccc\",\r\n                padding: \"8px\",\r\n                textAlign: \"left\",\r\n              }}\r\n            >\r\n              Present Today\r\n            </th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {departments && departments.length > 0 ? (\r\n            departments.map((data, index) => (\r\n              <tr key={index} onClick={() => toggleExpand(data.Department)}>\r\n                <td style={{ border: \"1px solid #ccc\", padding: \"8px\" }}>\r\n                  {data?.Department || \"-\"}\r\n                </td>\r\n                <td style={{ border: \"1px solid #ccc\", padding: \"8px\" }}>\r\n                  <div style={{ display: \"flex\", alignItems: \"center\" }}>\r\n                    <span\r\n                      style={{\r\n                        fontSize: \"1.25rem\",\r\n                        fontWeight: \"bold\",\r\n                        marginRight: \"100px\", // Increased from 15px to 100px\r\n                        minWidth: \"60px\", // Ensures consistent spacing\r\n                      }}\r\n                    >\r\n                      {data?.TotalEmployees || \"-\"}\r\n                    </span>\r\n                    <span style={{ fontSize: \"1rem\" }}>\r\n                      Male / Female: {data?.TotalMaleEmployees || \"0\"} /{\" \"}\r\n                      {data?.TotalFemaleEmployees || \"0\"}\r\n                    </span>\r\n                  </div>\r\n                </td>\r\n                <td style={{ border: \"1px solid #ccc\", padding: \"8px\" }}>\r\n                  <div style={{ display: \"flex\", alignItems: \"center\" }}>\r\n                    <span\r\n                      style={{\r\n                        fontSize: \"1.25rem\",\r\n                        fontWeight: \"bold\",\r\n                        marginRight: \"100px\", // Increased from 15px to 100px\r\n                        minWidth: \"60px\", // Ensures consistent spacing\r\n                      }}\r\n                    >\r\n                      {data?.TotalPresentToday || \"-\"}\r\n                    </span>\r\n                    <span style={{ fontSize: \"1rem\" }}>\r\n                      Male / Female: {data?.TotalMalePresentToday || \"0\"} /{\" \"}\r\n                      {data?.TotalFemalePresentToday || \"0\"}\r\n                    </span>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            ))\r\n          ) : (\r\n            <tr>\r\n              <td colSpan=\"3\" style={{ padding: \"8px\" }}>\r\n                No Departments Available\r\n              </td>\r\n            </tr>\r\n          )}\r\n        </tbody>\r\n      </table>\r\n    );\r\n  };\r\n\r\n  const handleRefresh = () => {\r\n    if (loadingOn) loadingOn();\r\n\r\n    const userTypeId = storage?.UserTypeId;\r\n    const userId = storage?.UserId;\r\n    const companyId = storage?.Company_id;\r\n\r\n    fetchLink({\r\n      address: `masters/users/employee/dropDown?Company_id=${companyId}`,\r\n      headers: {\r\n        Authorization: `Bearer ${localStorage.getItem(\"Autheticate_Id\")}`,\r\n      },\r\n    })\r\n      .then((data) => {\r\n        if (data.success) {\r\n          let filteredEmployees = [];\r\n\r\n          if (\r\n            Number(userTypeId) === 1 ||\r\n            Number(userTypeId) === 0 ||\r\n            Number(Add_Rights) === 1\r\n          ) {\r\n            filteredEmployees = data.data;\r\n            setFilter((prev) => ({ ...prev, EmpId: 0, Name: \"ALL\" }));\r\n            setIsDropdownDisabled(false);\r\n            setDropdownPlaceholder(\"ALL\");\r\n          } else {\r\n            filteredEmployees = data.data.filter(\r\n              (employee) => employee.UserId === userId\r\n            );\r\n            setFilter((prev) => ({\r\n              ...prev,\r\n              EmpId: userId,\r\n              Name: storage?.Name,\r\n            }));\r\n            setIsDropdownDisabled(true);\r\n            setDropdownPlaceholder(storage?.Name);\r\n          }\r\n\r\n          setEmployees(filteredEmployees);\r\n        }\r\n      })\r\n      .catch((e) => console.error(\"Error fetching employees:\", e))\r\n      .finally(() => {\r\n        if (loadingOff) loadingOff();\r\n        setReload((prev) => !prev);\r\n      });\r\n  };\r\n\r\n  const handleRefreshData = () => {\r\n    window.location.reload();\r\n  };\r\n\r\n  const ExpendableComponent1 = ({ row }) => {\r\n    let departments = [];\r\n    let monthlyAttendance = [];\r\n\r\n    try {\r\n      departments =\r\n        typeof row.Employees === \"string\"\r\n          ? JSON.parse(row.Employees)\r\n          : row.Employees || [];\r\n\r\n      monthlyAttendance =\r\n        typeof row.MonthlyAverageAttendance === \"string\"\r\n          ? JSON.parse(row.MonthlyAverageAttendance)\r\n          : row.MonthlyAverageAttendance || [];\r\n    } catch (err) {\r\n      departments = [];\r\n      monthlyAttendance = [];\r\n    }\r\n\r\n    const currentYear = new Date().getFullYear();\r\n\r\n    const monthList = [\r\n      { name: \"January\", number: 1 },\r\n      { name: \"February\", number: 2 },\r\n      { name: \"March\", number: 3 },\r\n      { name: \"April\", number: 4 },\r\n      { name: \"May\", number: 5 },\r\n      { name: \"June\", number: 6 },\r\n      { name: \"July\", number: 7 },\r\n      { name: \"August\", number: 8 },\r\n      { name: \"September\", number: 9 },\r\n      { name: \"October\", number: 10 },\r\n      { name: \"November\", number: 11 },\r\n      { name: \"December\", number: 12 },\r\n    ];\r\n\r\n    const attendanceMap = new Map();\r\n    monthlyAttendance.forEach((item) => {\r\n      const key = `${item.MonthNumber}-${item.YearNumber}`;\r\n      attendanceMap.set(key, item.UniqueEmployeeDays ?? 0);\r\n    });\r\n\r\n    return (\r\n      <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"10px\" }}>\r\n        <div style={{ display: \"flex\", gap: \"20px\" }}>\r\n          <table\r\n            style={{\r\n              width: \"20%\",\r\n              borderCollapse: \"collapse\",\r\n              border: \"1px solid #ccc\",\r\n              height:'10px'\r\n            }}\r\n          >\r\n            <thead>\r\n              <tr style={{ backgroundColor: \"#f0f0f0\" }}>\r\n                <th\r\n                  style={{\r\n                    border: \"1px solid #ccc\",\r\n                    padding: \"2px\",\r\n                    textAlign: \"left\",\r\n                  }}\r\n                >\r\n                  Emp_Name\r\n                </th>\r\n                <th\r\n                  style={{\r\n                    border: \"1px solid #ccc\",\r\n                    padding: \"2px\",\r\n                    textAlign: \"left\",\r\n                  }}\r\n                >\r\n                  Sex\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {departments && departments.length > 0 ? (\r\n                departments.map((data, index) => (\r\n                  <tr key={index}>\r\n                    <td style={{ border: \"1px solid #ccc\", padding: \"8px\" }}>\r\n                      {data?.Emp_Name || \"-\"}\r\n                    </td>\r\n                    <td style={{ border: \"1px solid #ccc\", padding: \"8px\" }}>\r\n                      {data?.Sex || \"-\"}\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n              ) : (\r\n                <tr>\r\n                  <td colSpan=\"2\" style={{ padding: \"8px\" }}>\r\n                    No Employees Available\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n\r\n          <div\r\n            style={{\r\n              flex: \"1\",\r\n              border: \"1px solid #ddd\",\r\n              borderRadius: \"5px\",\r\n              padding: \"10px\",\r\n              overflowX: \"auto\",\r\n              whiteSpace: \"nowrap\",\r\n            }}\r\n          >\r\n            <h3 style={{ textAlign: \"center\" }}>Months & Attendance</h3>\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                gap: \"10px\",\r\n              }}\r\n            >\r\n              {monthList.map((month) => {\r\n                const key = `${month.number}-${currentYear}`;\r\n                const uniqueEmployeeDays = attendanceMap.get(key) ?? 0;\r\n\r\n                return (\r\n                  <div\r\n                    key={month.number}\r\n                    style={{\r\n                      minWidth: \"100px\",\r\n                      padding: \"8px\",\r\n                      backgroundColor: \"#f0f0f0\",\r\n                      color: \"black\",\r\n                      borderRadius: \"4px\",\r\n                      textAlign: \"center\",\r\n                      userSelect: \"none\",\r\n                    }}\r\n                  >\r\n                    <div style={{ fontWeight: \"bold\" }}>\r\n                      {month.name} {currentYear}\r\n                    </div>\r\n                    <div\r\n                      style={{\r\n                        marginTop: \"6px\",\r\n                        fontSize: \"14px\",\r\n                        color: \"#555\",\r\n                      }}\r\n                    >\r\n                      {uniqueEmployeeDays}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\nconst handleViewChange = (newView) => {\r\n  setViewMode(newView);\r\n};\r\n  useEffect(() => {\r\n    const userTypeId = storage?.UserTypeId;\r\n    const userId = storage?.UserId;\r\n    const companyId = storage?.Company_id;\r\n\r\n    fetchLink({\r\n      address: `masters/users/employee/dropDown?Company_id=${companyId}`,\r\n      headers: {\r\n        Authorization: `Bearer ${localStorage.getItem(\"Autheticate_Id\")}`,\r\n      },\r\n    })\r\n      .then((data) => {\r\n        if (data.success) {\r\n          let filteredEmployees = [];\r\n\r\n          if (\r\n            Number(userTypeId) === 1 ||\r\n            Number(userTypeId) === 0 ||\r\n            Number(Add_Rights) === 1\r\n          ) {\r\n            filteredEmployees = data.data;\r\n            setFilter((prev) => ({ ...prev, EmpId: 0, Name: \"ALL\" }));\r\n            setIsDropdownDisabled(false);\r\n            setDropdownPlaceholder(\"ALL\");\r\n          } else {\r\n            filteredEmployees = data.data.filter(\r\n              (employee) => employee.UserId === userId\r\n            );\r\n            setFilter((prev) => ({\r\n              ...prev,\r\n              EmpId: userId,\r\n              Name: storage?.Name,\r\n            }));\r\n            setIsDropdownDisabled(true);\r\n            setDropdownPlaceholder(storage?.Name);\r\n          }\r\n\r\n          setEmployees(filteredEmployees);\r\n        }\r\n      })\r\n      .catch((e) => console.error(\"Error fetching employees:\", e));\r\n  }, [\r\n    storage?.UserTypeId,\r\n    storage?.UserId,\r\n    storage?.Company_id,\r\n    storage?.Name,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    const companyId = storage?.Company_id;\r\n\r\n    fetchLink({\r\n      address: `empAttendance/department?Company_id=${companyId}`,\r\n      headers: {\r\n        Authorization: `Bearer ${localStorage.getItem(\"Autheticate_Id\")}`,\r\n      },\r\n    })\r\n      .then((data) => {\r\n        if (data.success) {\r\n          if (data.others && data.others.department) {\r\n            const deptOptions = data.others.department.map((dept) => ({\r\n              value: dept.value,\r\n              label: dept.label,\r\n            }));\r\n            setDepartments(deptOptions);\r\n          }\r\n        }\r\n      })\r\n      .catch((e) => console.error(\"Error fetching departments:\", e));\r\n  }, [storage?.Company_id, reload]);\r\n\r\n  const handleDepartmentChange = (selected) => {\r\n    setSelectedDepartment(selected);\r\n\r\n    setEmployees([]);\r\n    setSelectedEmployee(null);\r\n\r\n    if (selected) {\r\n      fetchLink({\r\n        address: `empAttendance/employeesByDepartment`,\r\n        method: \"POST\",\r\n        bodyData: { department: selected.value },\r\n      })\r\n        .then((data) => {\r\n          if (data.success && data.others?.employees) {\r\n            const employeeOptions = data.others.employees.map((emp) => ({\r\n              value: emp.id || emp.value || emp.Emp_Id,\r\n              label: emp.name || emp.label || emp.Emp_Name,\r\n            }));\r\n\r\n            setEmployees(employeeOptions);\r\n          } else {\r\n            setEmployees([]);\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(\"Error fetching employees:\", e);\r\n          setEmployees([]);\r\n        });\r\n    } else {\r\n      setEmployees([]);\r\n    }\r\n  };\r\n\r\n  const departmentWiseCounts = React.useMemo(() => {\r\n    if (!saleOrders?.[0]?.DepartmentWiseCounts) return [];\r\n    try {\r\n      const parsed = JSON.parse(saleOrders[0].DepartmentWiseCounts);\r\n      return Array.isArray(parsed) ? parsed : [];\r\n    } catch (err) {\r\n      console.error(\"Failed to parse DepartmentWiseCounts JSON:\", err);\r\n      return [];\r\n    }\r\n  }, [saleOrders]);\r\n\r\n  const filteredData = React.useMemo(() => {\r\n    if (!departmentWiseCounts || !departmentWiseCounts.length) return [];\r\n\r\n    const filteredDepartments = departmentWiseCounts.filter((item) => {\r\n      return selectedDepartment\r\n        ? item.Department === selectedDepartment.label\r\n        : true;\r\n    });\r\n\r\n    return filteredDepartments.map((dept) => {\r\n      const employeeList = dept.employees || dept.Employees || [];\r\n\r\n      const filteredEmployees = selectedEmployee\r\n        ? employeeList.filter((emp) => {\r\n            if (!emp.Emp_Name) return false;\r\n            return (\r\n              emp.Emp_Name.trim().toLowerCase() ===\r\n              selectedEmployee.label.trim().toLowerCase()\r\n            );\r\n          })\r\n        : employeeList;\r\n\r\n      return {\r\n        ...dept,\r\n        Employees: filteredEmployees,\r\n      };\r\n    });\r\n  }, [departmentWiseCounts, selectedDepartment, selectedEmployee]);\r\n\r\n  return (\r\n    <>\r\n      {Number(userTypeId) === 0 || Number(userTypeId) === 1 ? (\r\n        <>\r\n          {viewMode === \"default\" && (\r\n            <FilterableTable\r\n              title={\r\n                <div className=\"d-flex align-items-center\">\r\n                  <Button\r\n                    size=\"small mx-2\"\r\n                    variant=\"outlined\"\r\n                    disabled\r\n                    onClick={() => dashboard()}\r\n                  >\r\n                    Dashboard\r\n                  </Button>\r\n                  <Button\r\n                    size=\"small mx-2\"\r\n                    variant=\"outlined\"\r\n                    onClick={() => data()}\r\n                  >\r\n                    Employee\r\n                  </Button>\r\n                  <Button\r\n                    size=\"small mx-2\"\r\n                    variant=\"outlined\"\r\n                    onClick={() => dataDepartment()}\r\n                  >\r\n                    Department\r\n                  </Button>\r\n                  <Button\r\n                    size=\"small mx-2\"\r\n                    variant=\"outlined\"\r\n                    onClick={() => defaultLeave()}\r\n                  >\r\n                    Defined Leave\r\n                  </Button>\r\n                  <div className=\"d-flex align-items-center justify-content-start gap-3\">\r\n                    <label>From Date</label>\r\n                    <input\r\n                      type=\"date\"\r\n                      onChange={(e) =>\r\n                        setFilters({ ...filters, FromDate: e.target.value })\r\n                      }\r\n                      value={filters?.FromDate}\r\n                      className=\"cus-inpt w-auto p-1\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"d-flex align-items-center justify-content-start gap-3\">\r\n                    <label>To Date</label>\r\n                    <input\r\n                      type=\"date\"\r\n                      onChange={(e) =>\r\n                        setFilters({ ...filters, ToDate: e.target.value })\r\n                      }\r\n                      value={filters?.ToDate}\r\n                      className=\"cus-inpt w-auto p-1\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"p-1\">\r\n                    <IconButton\r\n                      onClick={() => setReload(!reload)}\r\n                      variant=\"outlined\"\r\n                      size=\"small\"\r\n                    >\r\n                      <Search />\r\n                    </IconButton>\r\n                  </div>\r\n                </div>\r\n              }\r\n              dataArray={saleOrders}\r\n              EnableSerialNumber\r\n              columns={[\r\n                {\r\n                  isVisible: 1,\r\n                  ColumnHeader: \"Tot.Emp\",\r\n                  isCustomCell: true,\r\n                  Cell: ({ row }) => {\r\n                    const total = row?.TotalEmployees ?? 0;\r\n                    const male = row?.TotalMaleEmployees ?? 0;\r\n                    const female = row?.TotalFemaleEmployees ?? 0;\r\n                    return (\r\n                      <div style={{ fontSize: \"1.25rem\", fontWeight: \"bold\" }}>\r\n                        <div>{total}</div>\r\n                        <div style={{ fontSize: \"1rem\", fontWeight: \"normal\" }}>\r\n                          Male / Female: {male} / {female}\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  },\r\n                },\r\n                {\r\n                  isVisible: 1,\r\n                  ColumnHeader: \"Tot.Pre.Today\",\r\n                  isCustomCell: true,\r\n                  Cell: ({ row }) => {\r\n                    const total = row?.TotalPresentToday ?? 0;\r\n                    const male = row?.TotalMalePresentToday ?? 0;\r\n                    const female = row?.TotalFemalePresentToday ?? 0;\r\n                    return (\r\n                      <div style={{ fontSize: \"1.25rem\", fontWeight: \"bold\" }}>\r\n                        <div>{total}</div>\r\n                        <div style={{ fontSize: \"1rem\", fontWeight: \"normal\" }}>\r\n                          Male / Female: {male} / {female}\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  },\r\n                },\r\n              ]}\r\n              isExpendable={true}\r\n              tableMaxHeight={550}\r\n              expandableComp={ExpendableComponent}\r\n            />\r\n          )}\r\n\r\n          {viewMode === \"employee\" && (\r\n            <>\r\n              <Dialog\r\n                open={addEmployeeDialogOpen}\r\n                maxWidth=\"md\"\r\n                PaperProps={{\r\n                  style: { width: \"500px\", height: \"500px\" },\r\n                }}\r\n              >\r\n                <DialogTitle>Add Employee</DialogTitle>\r\n                <DialogContent>\r\n                  <Autocomplete\r\n                    multiple\r\n                    options={[\r\n                      { UserId: \"all\", Name: \"ALL\" },\r\n                      ...dropdownEmployees,\r\n                    ]}\r\n                    getOptionLabel={(option) => option.Name}\r\n                    isOptionEqualToValue={(option, value) =>\r\n                      option.UserId === value.UserId\r\n                    }\r\n                    onChange={(event, value) => {\r\n                      if (value.some((selected) => selected.UserId === \"all\")) {\r\n                        setSelectedEmployees(dropdownEmployees);\r\n                      } else {\r\n                        const uniqueValues = value.filter(\r\n                          (val, index, self) =>\r\n                            index ===\r\n                            self.findIndex((t) => t.UserId === val.UserId)\r\n                        );\r\n                        setSelectedEmployees(uniqueValues);\r\n                      }\r\n                    }}\r\n                    value={\r\n                      selectedEmployees.some((user) => user.UserId === \"all\")\r\n                        ? [{ UserId: \"all\", Name: \"ALL\" }]\r\n                        : selectedEmployees\r\n                    }\r\n                    renderInput={(params) => (\r\n                      <TextField {...params} placeholder=\"Employees\" />\r\n                    )}\r\n                  />\r\n                </DialogContent>\r\n                <DialogActions className=\"d-flex justify-content-between flex-wrap\">\r\n                  <Button\r\n                    type=\"button\"\r\n                    variant=\"outlined\"\r\n                    onClick={() => setSelectedEmployees([])}\r\n                  >\r\n                    Clear\r\n                  </Button>\r\n                  <span>\r\n                    <Button onClick={handleAddEmployeeClose}>Cancel</Button>\r\n                    <Button onClick={handleOverallWithPunch}>Download</Button>\r\n                  </span>\r\n                </DialogActions>\r\n              </Dialog>\r\n              <Card>\r\n                <CardContent sx={{ minHeight: \"50vh\" }}>\r\n                  <div className=\"ps-3 pb-2 pt-0 d-flex align-items-center justify-content-between border-bottom mb-3\">\r\n                    <h6 className=\"fa-18\">\r\n                      <Button\r\n                        size=\"small mx-2\"\r\n                        variant=\"outlined\"\r\n                        onClick={() => dashboard()}\r\n                      >\r\n                        Dashboard\r\n                      </Button>\r\n                      <Button\r\n                        size=\"small mx-2\"\r\n                        variant=\"outlined\"\r\n                        disabled\r\n                        onClick={() => data()}\r\n                      >\r\n                        EMPLOYEE\r\n                      </Button>\r\n                      <Button\r\n                        size=\"small mx-2\"\r\n                        variant=\"outlined\"\r\n                        onClick={() => dataDepartment()}\r\n                      >\r\n                        Department\r\n                      </Button>\r\n                       <Button\r\n                    size=\"small mx-2\"\r\n                    variant=\"outlined\"\r\n                    onClick={() => defaultLeave()}\r\n                  >\r\n                        Defined Leave\r\n                  </Button>\r\n                    </h6>\r\n\r\n                    <div className=\"d-flex align-items-center justify-content-start gap-3\">\r\n                      <Button\r\n                        onClick={handleDownload}\r\n                        variant=\"contained\"\r\n                        disabled={filter?.EmpId === 0 || filter?.Name === \"ALL\"}\r\n                      >\r\n                        Individual Report\r\n                      </Button>\r\n                      <Button\r\n                        onClick={() => {\r\n                          handleOverallDownload(filter?.From, filter?.To);\r\n                        }}\r\n                      >\r\n                        Monthly Report\r\n                      </Button>\r\n                      <Button\r\n                        onClick={() => {\r\n                          setAddEmployeeDialogOpen(true);\r\n                        }}\r\n                      >\r\n                        Cummulative Report\r\n                      </Button>\r\n                      <Button onClick={handleSummaryDownload}>Summary</Button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"px-2 row mb-4\">\r\n                    <div className=\"col-xl-2 col-lg-3 col-md-4 col-sm-6 p-2\">\r\n                      <label>Employee</label>\r\n                      <Select\r\n                        value={{ value: filter?.EmpId, label: filter?.Name }}\r\n                        onChange={(e) =>\r\n                          setFilter({\r\n                            ...filter,\r\n                            EmpId: e.value,\r\n                            Name: e.label,\r\n                          })\r\n                        }\r\n                        options={[\r\n                          { value: 0, label: `ALL` },\r\n                          ...employees.map((obj) => ({\r\n                            value: obj?.UserId,\r\n                            label: obj?.Name,\r\n                          })),\r\n                        ]}\r\n                        styles={customSelectStyles}\r\n                        isSearchable={true}\r\n                        placeholder={dropdownPlaceholder}\r\n                      />\r\n                    </div>\r\n\r\n                    <div className=\"col-xl-2 col-lg-3 col-md-4 col-sm-6 p-2\">\r\n                      <label>From</label>\r\n                      <input\r\n                        type=\"month\"\r\n                        className=\"cus-inpt\"\r\n                        value={filter?.From?.slice(0, 7)}\r\n                        onChange={handleFromChange}\r\n                      />\r\n                    </div>\r\n                    <div className=\"col-auto p-2 d-flex align-items-center\">\r\n                      <button\r\n                        className=\"btn btn-link ms-2 p-0 mt-3\"\r\n                        onClick={handleRefresh}\r\n                        title=\"Refresh Departments & Employees\"\r\n                      >\r\n                        <Refresh fontSize=\"medium\" />\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <FilterableTable\r\n                    dataArray={attendanceData}\r\n                    columns={[\r\n                      {\r\n                        isCustomCell: true,\r\n                        Cell: ({ row }) => row.username,\r\n                        ColumnHeader: \"Employee\",\r\n                        isVisible: 1,\r\n                        width: \"20%\",\r\n                        CellProps: {\r\n                          sx: {\r\n                            padding: \"10px\",\r\n                            textAlign: \"left\",\r\n                            fontWeight: \"bold\",\r\n                          },\r\n                        },\r\n                      },\r\n                      {\r\n                        isCustomCell: true,\r\n                        Cell: ({ row }) =>\r\n                          formatAttendanceDate(row.LogDate || \"--\"),\r\n                        ColumnHeader: \"Log Date\",\r\n                        isVisible: 1,\r\n                        width: \"20%\",\r\n                        CellProps: {\r\n                          sx: {\r\n                            padding: \"10px\",\r\n                            textAlign: \"center\",\r\n                            color: \"gray\",\r\n                          },\r\n                        },\r\n                      },\r\n                      ...punchColumns,\r\n                    ]}\r\n                    EnableSerialNumber\r\n                    CellSize=\"small\"\r\n                    disablePagination={false}\r\n                  />\r\n                </CardContent>\r\n              </Card>\r\n            </>\r\n          )}\r\n\r\n          {viewMode === \"department\" && (\r\n            <FilterableTable\r\n              title={\r\n                <div className=\"d-flex flex-column\">\r\n                  <div className=\"d-flex align-items-center mb-3\">\r\n                    <Button\r\n                      size=\"small mx-2\"\r\n                      variant=\"outlined\"\r\n                      onClick={() => dashboard()}\r\n                    >\r\n                      Dashboard\r\n                    </Button>\r\n                    <Button\r\n                      size=\"small mx-2\"\r\n                      variant=\"outlined\"\r\n                      onClick={() => data()}\r\n                    >\r\n                      Employee\r\n                    </Button>\r\n                    <Button\r\n                      size=\"small mx-2\"\r\n                      variant=\"outlined\"\r\n                      disabled\r\n                      onClick={() => dataDepartment()}\r\n                    >\r\n                      Department\r\n                    </Button>\r\n                     <Button\r\n                    size=\"small mx-2\"\r\n                    variant=\"outlined\"\r\n                    onClick={() => defaultLeave()}\r\n                  >\r\n                      Defined Leave\r\n                  </Button>\r\n                  </div>\r\n\r\n                  <div className=\"row align-items-end\">\r\n                    <div className=\"col-xl-2 col-lg-3 col-md-4 col-sm-6 p-2\">\r\n                      <label>Department</label>\r\n                      <Select\r\n                        options={departments}\r\n                        isSearchable\r\n                        placeholder=\"ALL\"\r\n                        value={selectedDepartment}\r\n                        styles={customSelectStyles}\r\n                        onChange={handleDepartmentChange}\r\n                      />\r\n                    </div>\r\n\r\n                    <div className=\"col-xl-2 col-lg-3 col-md-4 col-sm-6 p-2\">\r\n                      <label>Employee</label>\r\n                      <Select\r\n                        options={employees}\r\n                        isSearchable\r\n                        placeholder=\"ALL\"\r\n                        value={selectedEmployee}\r\n                        styles={customSelectStyles}\r\n                        onChange={setSelectedEmployee}\r\n                        isDisabled={!selectedDepartment}\r\n                      />\r\n                    </div>\r\n                    <div className=\"col-auto p-2 d-flex align-items-center\">\r\n                      <button\r\n                        className=\"btn btn-link ms-2 p-0 mb-2\"\r\n                        onClick={handleRefreshData}\r\n                        style={{ minWidth: \"24px\" }}\r\n                        title=\"Refresh Departments & Employees\"\r\n                      >\r\n                        <Refresh fontSize=\"small\" />\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              }\r\n              dataArray={filteredData}\r\n              EnableSerialNumber\r\n              columns={[\r\n                createCol(\"Department\", \"string\", \"Department\"),\r\n                createCol(\r\n                  \"TotalMaleEmployees\",\r\n                  \"number\",\r\n                  \"Total Male Employees\"\r\n                ),\r\n                createCol(\r\n                  \"TotalFemaleEmployees\",\r\n                  \"number\",\r\n                  \"Total Female Employees\"\r\n                ),\r\n                createCol(\"TotalEmployees\", \"number\", \"Total Employees\"),\r\n                createCol(\r\n                  \"TotalMalePresentToday\",\r\n                  \"number\",\r\n                  \"Total Male Present Today\"\r\n                ),\r\n                createCol(\r\n                  \"TotalFemalePresentToday\",\r\n                  \"number\",\r\n                  \"Total Female Present Today\"\r\n                ),\r\n                createCol(\"TotalPresentToday\", \"number\", \"Total Present Today\"),\r\n              ]}\r\n              isExpendable={true}\r\n              tableMaxHeight={550}\r\n              expandableComp={ExpendableComponent1}\r\n            />\r\n          )}\r\n\r\n         {viewMode === \"defaultLeave\" && (\r\n  <DefaultLeave\r\n    currentView={viewMode}\r\n    onViewChange={handleViewChange}\r\n    departments={departments}\r\n    selectedDepartment={selectedDepartment}\r\n    handleDepartmentChange={handleDepartmentChange}\r\n    employees={employees}\r\n    selectedEmployee={selectedEmployee}\r\n    setSelectedEmployee={setSelectedEmployee}\r\n    handleRefreshData={handleRefreshData}\r\n  />\r\n          )}\r\n        </>\r\n      ) : (\r\n        <>\r\n          <Dialog\r\n            open={addEmployeeDialogOpen}\r\n            maxWidth=\"md\"\r\n            PaperProps={{\r\n              style: { width: \"500px\", height: \"500px\" },\r\n            }}\r\n          >\r\n            <DialogTitle>Add Employee</DialogTitle>\r\n            <DialogContent>\r\n              <Autocomplete\r\n                multiple\r\n                options={[{ UserId: \"all\", Name: \"ALL\" }, ...dropdownEmployees]}\r\n                getOptionLabel={(option) => option.Name}\r\n                isOptionEqualToValue={(option, value) =>\r\n                  option.UserId === value.UserId\r\n                }\r\n                value={\r\n                  selectedEmployees.some((user) => user.UserId === \"all\")\r\n                    ? [{ UserId: \"all\", Name: \"ALL\" }]\r\n                    : selectedEmployees\r\n                }\r\n                onChange={(event, value) => {\r\n                  if (value.some((selected) => selected.UserId === \"all\")) {\r\n                    setSelectedEmployees(dropdownEmployees);\r\n                  } else {\r\n                    const uniqueValues = value.filter(\r\n                      (val, index, self) =>\r\n                        index === self.findIndex((t) => t.UserId === val.UserId)\r\n                    );\r\n                    setSelectedEmployees(uniqueValues);\r\n                  }\r\n                }}\r\n                renderInput={(params) => (\r\n                  <TextField {...params} placeholder=\"Employees\" />\r\n                )}\r\n              />\r\n            </DialogContent>\r\n            <DialogActions className=\"d-flex justify-content-between flex-wrap\">\r\n              <Button\r\n                variant=\"outlined\"\r\n                onClick={() => setSelectedEmployees([])}\r\n              >\r\n                Clear\r\n              </Button>\r\n              <span>\r\n                <Button onClick={handleAddEmployeeClose}>Cancel</Button>\r\n                <Button onClick={handleOverallWithPunch}>Download</Button>\r\n              </span>\r\n            </DialogActions>\r\n          </Dialog>\r\n\r\n          <Card>\r\n            <CardContent sx={{ minHeight: \"50vh\" }}>\r\n              <div className=\"ps-3 pb-2 pt-0 d-flex align-items-center justify-content-between border-bottom mb-3\">\r\n                <h6 className=\"fa-18\">\r\n                  <Button size=\"small\" variant=\"outlined\" className=\"mx-2\">\r\n                    EMPLOYEE\r\n                  </Button>\r\n                </h6>\r\n\r\n                {(userTypeId === 1 || userTypeId === 0) && (\r\n                  <div className=\"d-flex align-items-center justify-content-start gap-3\">\r\n                    <Button\r\n                      onClick={handleDownload}\r\n                      variant=\"contained\"\r\n                      disabled={filter?.EmpId === 0 || filter?.Name === \"ALL\"}\r\n                    >\r\n                      Individual Report\r\n                    </Button>\r\n                    <Button\r\n                      onClick={() =>\r\n                        handleOverallDownload(filter?.From, filter?.To)\r\n                      }\r\n                    >\r\n                      Monthly Report\r\n                    </Button>\r\n                    <Button onClick={() => setAddEmployeeDialogOpen(true)}>\r\n                      Cumulative Monthly Report\r\n                    </Button>\r\n                    <Button onClick={handleSummaryDownload}>Summary</Button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"px-2 row mb-4\">\r\n                <div className=\"col-xl-2 col-lg-3 col-md-4 col-sm-6 p-2\">\r\n                  <label>Employee</label>\r\n                  <Select\r\n                    value={{ value: filter?.EmpId, label: filter?.Name }}\r\n                    onChange={(e) =>\r\n                      setFilter({ ...filter, EmpId: e.value, Name: e.label })\r\n                    }\r\n                    options={[\r\n                      { value: 0, label: \"ALL\" },\r\n                      ...employees.map((obj) => ({\r\n                        value: obj.UserId,\r\n                        label: obj.Name,\r\n                      })),\r\n                    ]}\r\n                    styles={customSelectStyles}\r\n                    isSearchable\r\n                    placeholder={dropdownPlaceholder}\r\n                    isDisabled={isDropdownDisabled}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"col-xl-2 col-lg-3 col-md-4 col-sm-6 p-2\">\r\n                  <label>From</label>\r\n                  <input\r\n                    type=\"month\"\r\n                    className=\"cus-inpt\"\r\n                    value={filter?.From?.slice(0, 7)}\r\n                    onChange={handleFromChange}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <FilterableTable\r\n                dataArray={attendanceData}\r\n                columns={[\r\n                  {\r\n                    isCustomCell: true,\r\n                    Cell: ({ row }) => row.username,\r\n                    ColumnHeader: \"Employee\",\r\n                    isVisible: 1,\r\n                    width: \"20%\",\r\n                    CellProps: {\r\n                      sx: {\r\n                        padding: \"10px\",\r\n                        textAlign: \"left\",\r\n                        fontWeight: \"bold\",\r\n                      },\r\n                    },\r\n                  },\r\n                  {\r\n                    isCustomCell: true,\r\n                    Cell: ({ row }) =>\r\n                      formatAttendanceDate(row.LogDate || \"--\"),\r\n                    ColumnHeader: \"Log Date\",\r\n                    isVisible: 1,\r\n                    width: \"20%\",\r\n                    CellProps: {\r\n                      sx: {\r\n                        padding: \"10px\",\r\n                        textAlign: \"center\",\r\n                        color: \"gray\",\r\n                      },\r\n                    },\r\n                  },\r\n                  ...punchColumns,\r\n                ]}\r\n                EnableSerialNumber\r\n                CellSize=\"small\"\r\n                disablePagination={false}\r\n              />\r\n            </CardContent>\r\n          </Card>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\nexport default AttendanceNewScreen;\r\n","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n}), 'Close');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z\"\n}), 'Refresh');","\"use strict\";\n'use client';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function () {\n    return _utils.createSvgIcon;\n  }\n});\nvar _utils = require(\"@mui/material/utils\");","import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nexport function getCardContentUtilityClass(slot) {\n  return generateUtilityClass('MuiCardContent', slot);\n}\nconst cardContentClasses = generateUtilityClasses('MuiCardContent', ['root']);\nexport default cardContentClasses;","'use client';\n\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"className\", \"component\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport composeClasses from '@mui/utils/composeClasses';\nimport styled from '../styles/styled';\nimport { useDefaultProps } from '../DefaultPropsProvider';\nimport { getCardContentUtilityClass } from './cardContentClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root']\n  };\n  return composeClasses(slots, getCardContentUtilityClass, classes);\n};\nconst CardContentRoot = styled('div', {\n  name: 'MuiCardContent',\n  slot: 'Root',\n  overridesResolver: (props, styles) => styles.root\n})(() => {\n  return {\n    padding: 16,\n    '&:last-child': {\n      paddingBottom: 24\n    }\n  };\n});\nconst CardContent = /*#__PURE__*/React.forwardRef(function CardContent(inProps, ref) {\n  const props = useDefaultProps({\n    props: inProps,\n    name: 'MuiCardContent'\n  });\n  const {\n      className,\n      component = 'div'\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const ownerState = _extends({}, props, {\n    component\n  });\n  const classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(CardContentRoot, _extends({\n    as: component,\n    className: clsx(classes.root, className),\n    ownerState: ownerState,\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? CardContent.propTypes /* remove-proptypes */ = {\n  // ┌────────────────────────────── Warning ──────────────────────────────┐\n  // │ These PropTypes are generated from the TypeScript type definitions. │\n  // │    To update them, edit the d.ts file and run `pnpm proptypes`.     │\n  // └─────────────────────────────────────────────────────────────────────┘\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes.elementType,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport default CardContent;","import createChainedFunction from '@mui/utils/createChainedFunction';\nexport default createChainedFunction;","import deprecatedPropType from '@mui/utils/deprecatedPropType';\nexport default deprecatedPropType;","export default function deprecatedPropType(validator, reason) {\n  if (process.env.NODE_ENV === 'production') {\n    return () => null;\n  }\n  return (props, propName, componentName, location, propFullName) => {\n    const componentNameSafe = componentName || '<<anonymous>>';\n    const propFullNameSafe = propFullName || propName;\n    if (typeof props[propName] !== 'undefined') {\n      return new Error(`The ${location} \\`${propFullNameSafe}\\` of ` + `\\`${componentNameSafe}\\` is deprecated. ${reason}`);\n    }\n    return null;\n  };\n}","import requirePropFactory from '@mui/utils/requirePropFactory';\nexport default requirePropFactory;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nexport default function requirePropFactory(componentNameInError, Component) {\n  if (process.env.NODE_ENV === 'production') {\n    return () => null;\n  }\n\n  // eslint-disable-next-line react/forbid-foreign-prop-types\n  const prevPropTypes = Component ? _extends({}, Component.propTypes) : null;\n  const requireProp = requiredProp => (props, propName, componentName, location, propFullName, ...args) => {\n    const propFullNameSafe = propFullName || propName;\n    const defaultTypeChecker = prevPropTypes == null ? void 0 : prevPropTypes[propFullNameSafe];\n    if (defaultTypeChecker) {\n      const typeCheckerResult = defaultTypeChecker(props, propName, componentName, location, propFullName, ...args);\n      if (typeCheckerResult) {\n        return typeCheckerResult;\n      }\n    }\n    if (typeof props[propName] !== 'undefined' && !props[requiredProp]) {\n      return new Error(`The prop \\`${propFullNameSafe}\\` of ` + `\\`${componentNameInError}\\` can only be used together with the \\`${requiredProp}\\` prop.`);\n    }\n    return null;\n  };\n  return requireProp;\n}","import setRef from '@mui/utils/setRef';\nexport default setRef;","import unsupportedProp from '@mui/utils/unsupportedProp';\nexport default unsupportedProp;","export default function unsupportedProp(props, propName, componentName, location, propFullName) {\n  if (process.env.NODE_ENV === 'production') {\n    return null;\n  }\n  const propFullNameSafe = propFullName || propName;\n  if (typeof props[propName] !== 'undefined') {\n    return new Error(`The prop \\`${propFullNameSafe}\\` is not supported. Please remove it.`);\n  }\n  return null;\n}","'use client';\n\nimport { unstable_ClassNameGenerator as ClassNameGenerator } from '@mui/base/ClassNameGenerator';\nexport { default as capitalize } from './capitalize';\nexport { default as createChainedFunction } from './createChainedFunction';\nexport { default as createSvgIcon } from './createSvgIcon';\nexport { default as debounce } from './debounce';\nexport { default as deprecatedPropType } from './deprecatedPropType';\nexport { default as isMuiElement } from './isMuiElement';\nexport { default as ownerDocument } from './ownerDocument';\nexport { default as ownerWindow } from './ownerWindow';\nexport { default as requirePropFactory } from './requirePropFactory';\nexport { default as setRef } from './setRef';\nexport { default as unstable_useEnhancedEffect } from './useEnhancedEffect';\nexport { default as unstable_useId } from './useId';\nexport { default as unsupportedProp } from './unsupportedProp';\nexport { default as useControlled } from './useControlled';\nexport { default as useEventCallback } from './useEventCallback';\nexport { default as useForkRef } from './useForkRef';\nexport { default as useIsFocusVisible } from './useIsFocusVisible';\n// TODO: remove this export once ClassNameGenerator is stable\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport const unstable_ClassNameGenerator = {\n  configure: generator => {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn(['MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.', '', \"You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead\", '', 'The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401', '', 'The updated documentation: https://mui.com/guides/classname-generator/'].join('\\n'));\n    }\n    ClassNameGenerator.configure(generator);\n  }\n};"],"names":["customTableStyles","table","style","width","backgroundColor","rows","headCells","color","fontSize","customSelectStyles","menu","provided","state","_objectSpread","zIndex","menuPortal","base","groupHeading","fontWeight","padding","borderBottom","textTransform","option","isSelected","isFocused","MainMenu","id","headname","variant","align","companyDetails","dataBase","name","business","address","logo","SMT_LOGO","gstin","phone","fssai","bankAccount","ifsc","erpModules","_ref","currentView","onViewChange","attendanceData","setAttendanceData","useState","monthlyLeaves","setMonthlyLeaves","filter","setFilter","FromDate","Date","toISOString","split","Description","display","Created_By","description","setDesctiption","addDialog","setAddDialog","selectedDate","setSelectedDate","calendarViewDate","setCalendarViewDate","editMode","setEditMode","editIndex","setEditIndex","formatDate","dateStr","d","day","String","getDate","padStart","month","getMonth","year","getFullYear","concat","localData","localStorage","getItem","parseData","JSON","parse","fetchLeaves","async","res","fetchLink","success","data","currentMonth","currentYear","filtered","item","itemDate","e","console","error","useEffect","closeDialg","_jsxs","className","children","_jsx","Card","CardContent","sx","minHeight","map","view","Button","size","onClick","disabled","charAt","toUpperCase","slice","value","onChange","pre","Number","target","maxHeight","overflowY","length","index","FullCalendar","plugins","timeGridPlugin","listPlugin","dayGridPlugin","interactionPlugin","initialView","initialDate","events","o","title","start","objectData","headerToolbar","left","center","right","showNonCurrentDates","editable","selectable","selectMirror","height","eventClick","eventInfo","leave","event","extendedProps","date","findIndex","dateClick","info","datesSet","viewDate","Dialog","open","onClose","fullWidth","maxWidth","DialogTitle","IconButton","Close","DialogContent","type","dateString","formatForInputDate","DialogActions","currentRow","SNo","User_Id","UserId","Modified_By","_ref3","updatedList","bodyData","Id","method","toast","message","onUpdate","_ref2","then","catch","onsubmit","_filter$From","_filter$From2","loadingOn","loadingOff","storage","navigate","useNavigate","location","useLocation","stateDetails","addEmployeeDialogOpen","setAddEmployeeDialogOpen","getCurrentMonthYear","toString","initialValue","From","To","EmpId","Name","query","URLSearchParams","search","defaultFilters","saleOrders","setSaleOrders","viewMode","setViewMode","expandedDepartment","setExpandedDepartment","dropdownEmployees","setDropdownEmployees","reload","setReload","loading","setLoading","isDropdownDisabled","setIsDropdownDisabled","employees","setEmployees","selectedEmployee","setSelectedEmployee","userTypeId","UserTypeId","contextObj","useContext","MyContext","dropdownPlaceholder","setDropdownPlaceholder","debouncedFilter","setDebouncedFilter","timer","setTimeout","clearTimeout","fetchAttendanceData","fetchDropdownEmployees","getDaysInMonth","monthYear","filters","setFilters","ToDate","Cancel_status","departments","setDepartments","selectedDepartment","setSelectedDepartment","selectedEmployees","setSelectedEmployees","Add_Rights","today","fromDate","toDate","finally","handleFromChange","selectedMonth","startDate","dayCount","endDate","handleSummaryDownload","response","overallData","getDateRange","from","to","allDates","end","sundayCount","push","getDay","setDate","days","totalDays","dateRange","summaryData","row","punchDetails","Array","isArray","AttendanceDetails","totalPresent","companyHoliday","workingDays","forEach","dayRecord","find","p","startsWith","AttendanceStatus","approvedLeave","ApprovedLeave","pendingLeave","PendingLeave","totalAbsent","TotalPresent","CompanyHoliday","TotalAbsent","NumberOfSundays","ws","XLSX","json_to_sheet","headers","sheet_add_aoa","origin","wb","book_new","book_append_sheet","handleDownload","exportData","trim","attendanceStatus","punchColumns","i","Employee","username","formatAttendanceDate","LogDate","columnsOrder","reorderedData","reduce","acc","col","_","isCustomCell","ColumnHeader","isVisible","CellProps","justifyContent","alignItems","Cell","punch","rawTime","formattedTime","timeString","hourStr","minuteStr","hour","parseInt","minute","ampm","formatToAmPm","Chip","label","margin","logDateTime","handleOverallDownload","attendanceRes","leaveRes","defaultLeaveRes","Promise","all","Error","leaveMap","defaultLeaveDates","Set","_leave$Status","Status","userId","current","leaveEnd","defaultLeave","add","dates","count","emp","attendanceDetails","jsonString","_unused","tryParseJSON","dailyStatus","presentCount","attendanceLookup","record","status","hasPunch","Punch1","_leaveMap$userId","dayKey","User_Mgt_Id","isSunday","attendanceRecord","has","EmployeeName","handleOverallWithPunch","_attendanceData$","maxPunches","firstLogDate","dateObj","defaultLeaveResponse","defaultLeaveData","leaveData","_leave$Status2","toLowerCase","parseDate","parts","leaveStart","currentDate","groupedData","some","user","Object","keys","entries","userAttendance","_leaveMap$userId2","_row$AttendanceDetail2","logDate","_row$AttendanceDetail","punches","fileName","toLocaleString","Company_id","companyId","Authorization","filteredEmployees","prev","employee","queryFilters","get","isValidDate","Fromdate","Todate","ISOString","updateQueryString","newFilters","params","replace","handleAddEmployeeClose","dataDepartment","dashboard","handleRefreshData","window","others","department","deptOptions","dept","handleDepartmentChange","selected","_data$others","employeeOptions","Emp_Id","Emp_Name","departmentWiseCounts","React","_saleOrders$","DepartmentWiseCounts","parsed","err","filteredData","Department","employeeList","Employees","_Fragment","FilterableTable","Search","dataArray","EnableSerialNumber","columns","_ref6","_row$TotalEmployees","_row$TotalMaleEmploye","_row$TotalFemaleEmplo","total","TotalEmployees","male","TotalMaleEmployees","female","TotalFemaleEmployees","_ref7","_row$TotalPresentToda","_row$TotalMalePresent","_row$TotalFemalePrese","TotalPresentToday","TotalMalePresentToday","TotalFemalePresentToday","isExpendable","tableMaxHeight","expandableComp","_ref4","borderCollapse","marginTop","border","textAlign","toggleExpand","marginRight","minWidth","colSpan","PaperProps","Autocomplete","multiple","options","getOptionLabel","isOptionEqualToValue","uniqueValues","val","self","t","renderInput","TextField","placeholder","Select","obj","styles","isSearchable","handleRefresh","Refresh","_ref8","_ref9","CellSize","disablePagination","isDisabled","createCol","_ref5","monthlyAttendance","MonthlyAverageAttendance","attendanceMap","Map","_item$UniqueEmployeeD","key","MonthNumber","YearNumber","set","UniqueEmployeeDays","flexDirection","gap","Sex","flex","borderRadius","overflowX","whiteSpace","number","_attendanceMap$get","uniqueEmployeeDays","userSelect","DefaultLeave","newView","_ref10","_ref11","_interopRequireDefault","require","exports","_createSvgIcon","_jsxRuntime","default","jsx","createSvgIcon","defineProperty","enumerable","_utils","getCardContentUtilityClass","slot","generateUtilityClass","generateUtilityClasses","_excluded","CardContentRoot","styled","overridesResolver","props","root","paddingBottom","inProps","ref","useDefaultProps","component","other","_objectWithoutPropertiesLoose","ownerState","_extends","classes","composeClasses","useUtilityClasses","as","clsx","validator","reason","componentNameInError","Component","propName","componentName","propFullName","unstable_ClassNameGenerator","configure","generator","ClassNameGenerator"],"sourceRoot":""}