"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[3528],{63528:(e,s,t)=>{t.r(s),t.d(s,{default:()=>p});var a=t(69060),l=t(86e3),r=t(3358),n=t(5548),d=t(89e3),i=t(56480),o=(t(21680),t(1908)),c=t(39308),u=t(82496);function m(e){e.target.value=e.target.value.replace(/[^0-9]/g,"")}const v=e=>{let{screen:s,setScreen:t,underArray:l,row:r,refresh:n}=e;const d=JSON.parse(localStorage.getItem("user")),v={Branch_Id:0,Company_Id:0,Cust_Id:"",Cust_No:"",Customer_name:"",Contact_Person:"",Mobile_no:"",Email_Id:"",Address1:"",Address2:"",Address3:"",Address4:"",Pincode:"",State:"",Country:"India",Gstin:"",Under_Id:"",User_Mgt_Id:"",User_Type_Id:"",Entry_By:null===d||void 0===d?void 0:d.UserId},[_,p]=(0,a.useState)(v),[b,h]=(0,a.useState)([]);(0,a.useEffect)((()=>{(0,o.q)({address:`masters/branch/dropDown?User_Id=${null===d||void 0===d?void 0:d.UserId}&Company_id=${null===d||void 0===d?void 0:d.Company_id}`}).then((e=>{e.success&&h(e.data)})).catch((e=>console.error(e)))}),[]),(0,a.useEffect)((()=>{const{Branch_Id:e,Company_Id:s,Cust_Id:t,Cust_No:a,Customer_name:l,Contact_Person:n,Mobile_no:d,Email_Id:i,Address1:o,Address2:c,Address3:u,Address4:m,Pincode:v,State:_,Country:b,Gstin:h,Under_Id:C,User_Mgt_Id:I,User_Type_Id:g}=r;p((r=>({...r,Branch_Id:e,Company_Id:s,Cust_Id:t,Cust_No:a,Customer_name:l,Contact_Person:n,Mobile_no:d,Email_Id:i,Address1:o,Address2:c,Address3:u,Address4:m,Pincode:v,State:_,Country:b,Gstin:h,Under_Id:C,User_Mgt_Id:I,User_Type_Id:g})))}),[r]);const C=()=>{p(v)},I=l.filter((e=>(0,c.Qr)(e.User_Type_Id,5)&&(0,c.Qr)(e.Id,null===_||void 0===_?void 0:_.Cust_Id))).map((e=>({value:e.Cust_Id,label:e.Customer_name}))),g=[{label:"Name",elem:"input",placeholder:"Mr / Ms",event:e=>p({..._,Customer_name:e.target.value}),required:!0,value:_.Customer_name},{label:"Mobile",elem:"input",oninput:e=>m(e),placeholder:"Enter Mobile Number",event:e=>p({..._,Mobile_no:e.target.value}),required:!0,value:_.Mobile_no,max:10},{label:"Branch",elem:"select",options:[{value:0,label:" - Select - ",disabled:!0,selected:!0},...b.map((e=>({value:Number(e.BranchId),label:e.BranchName})))],class:"selectpicker",data:!0,event:e=>p({..._,Branch_Id:parseInt(e.target.value)}),required:!0,value:_.Branch_Id},{label:"User Type",elem:"select",options:[{value:"",label:" - Select - ",disabled:!0,selected:!0},{value:4,label:"CUSTOMER"},{value:5,label:"BROKER"}],event:e=>p({..._,User_Type_Id:parseInt(e.target.value)}),required:!0,value:_.User_Type_Id},{label:"Contact Person",elem:"input",placeholder:"",event:e=>p({..._,Contact_Person:e.target.value}),required:!0,value:_.Contact_Person},{label:"Email ID",elem:"input",type:"email",placeholder:"emailaddress@mail.com",event:e=>p({..._,Email_Id:e.target.value}),required:!1,value:_.Email_Id},{label:"Gstin",elem:"input",placeholder:"",event:e=>p({..._,Gstin:e.target.value}),required:!1,value:_.Gstin,max:15},{label:"Under",elem:"select",options:[{value:"",label:" - Select - ",disabled:!0,selected:!0},{value:0,label:" Primary "},...I],class:"selectpicker",data:!0,event:e=>p({..._,Under_Id:parseInt(e.target.value)}),required:!0,value:_.Under_Id},{label:"Pincode",elem:"input",placeholder:"654321",oninput:e=>m(e),event:e=>p({..._,Pincode:e.target.value}),required:!1,value:_.Pincode,max:6},{label:"State",elem:"input",placeholder:"",event:e=>p({..._,State:e.target.value}),required:!1,value:_.State},{label:"Address Line 1",elem:"textarea",event:e=>p({..._,Address1:e.target.value}),required:!0,value:_.Address1},{label:"Address Line 2",elem:"textarea",event:e=>p({..._,Address2:e.target.value}),value:_.Address2},{label:"Address Line 3",elem:"textarea",event:e=>p({..._,Address3:e.target.value}),value:_.Address3},{label:"Address Line 4",elem:"textarea",event:e=>p({..._,Address4:e.target.value}),value:_.Address4}],x=()=>{for(const e of g)if(e.required&&""===e.value)return`${e.label} is required.`;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_.Email_Id)&&""!==_.Email_Id)return"Invalid email address";if(!/^\d{10}$/.test(_.Mobile_no))return"Invalid phone number";if(!/^\d{15}$/.test(_.Gstin)&&""!==_.Gstin)return"Invalid gstin";return/^\d{6}$/.test(_.Pincode)||""===_.Pincode?"Success":"Invalid Pincode"};return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"card",children:[(0,u.jsxs)("div",{className:"card-header py-2 d-flex align-items-center justify-content-between",children:[(0,u.jsx)("h5",{className:"mb-0 ",children:"Customer Details"}),(0,u.jsx)("button",{className:"comadbtn mb-0",onClick:()=>{t(!s),C()},children:"Back"})]}),(0,u.jsx)("div",{className:"card-body row",children:g.map(((e,s)=>(0,u.jsxs)("div",{className:"col-lg-4 col-md-6 p-2 px-3",children:[(0,u.jsxs)("label",{children:[e.label,e.required&&(0,u.jsx)("p",{style:{color:"red",display:"inline",fontWeight:"bold",fontSize:"1em"},children:" *"})]}),"input"===e.elem?(0,u.jsx)("input",{type:e.type||"text",className:"cus-inpt b-0",onChange:e.event,onInput:e.oninput,disabled:e.disabled,value:e.value,maxLength:e.max}):"select"===e.elem?(0,u.jsx)("select",{className:"cus-inpt b-0",onChange:e.event,value:e.value,children:e.options.map(((e,s)=>(0,u.jsx)("option",{value:e.value,disabled:e.disabled,defaultValue:e.selected,children:e.label},s)))}):"textarea"===e.elem?(0,u.jsx)("textarea",{className:"cus-inpt b-0",onChange:e.event,rows:4,value:e.value}):null]},s)))}),(0,u.jsxs)("div",{className:"card-footer text-end",children:[(0,u.jsx)("button",{className:"cancelbtn",onClick:()=>t(!s),children:"Cancel"}),(0,u.jsx)("button",{className:"comadbtn mb-0",onClick:r.Cust_Id?()=>{const e=x();"Success"===e?(0,o.q)({address:"userModule/customer",method:"PUT",bodyData:{..._}}).then((e=>{e.success?(C(),i.m4.success(e.message),n(),t(!s)):i.m4.error(e.message)})).catch((e=>console.error(e))):i.m4.error(e)}:()=>{const e=x();"Success"===e?(0,o.q)({address:"userModule/customer",method:"POST",bodyData:{..._}}).then((e=>{e.success?(C(),i.m4.success(e.message),n(),t(!s)):i.m4.error(e.message)})).catch((e=>console.error(e))):i.m4.error(e)},children:r.Cust_Id?"Update":"Create"})]})]})})};var _=t(13724);const p=e=>{let{loadingOn:s,loadingOff:t,AddRights:i,EditRights:c}=e;const[m,p]=(0,a.useState)([]),[b,h]=(0,a.useState)(!1),[C,I]=(0,a.useState)({}),[g,x]=(0,a.useState)(!0);(0,a.useEffect)((()=>{(0,o.q)({address:"userModule/customer",loadingOn:s,loadingOff:t}).then((e=>{p(e.data?e.data:[])})).catch((e=>console.error(e)))}),[b]),(0,a.useEffect)((()=>{!0===g&&I({})}),[g]);return(0,u.jsx)(u.Fragment,{children:g?(0,u.jsx)(_.cp,{title:"Customers",dataArray:m,headerFontSizePx:13,bodyFontSizePx:12,columns:[(0,_.A5)("Cust_No","string","CusID"),(0,_.A5)("Customer_name","string","Name"),(0,_.A5)("UserTypeGet","string","Type"),(0,_.A5)("Mobile_no","string","Phone"),(0,_.A5)("Contact_Person","string","Contact Person"),(0,_.A5)("Email_Id","string","Email"),(0,_.A5)("State","string","State"),(0,_.A5)("Gstin","string","Gstin"),{isVisible:1,ColumnHeader:"Action",isCustomCell:!0,Cell:e=>{let{row:s}=e;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(r.c,{title:"Edit",children:(0,u.jsx)("span",{children:(0,u.jsx)(n.c,{size:"small",onClick:()=>{I(s),x(!g)},children:(0,u.jsx)(l.c,{className:"fa-20"})})})})})}}],ButtonArea:(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(d.c,{variant:"outlined",onClick:()=>x(!g),children:"Add"})})}):(0,u.jsx)(v,{screen:g,setScreen:x,underArray:m,row:C,refresh:()=>{h(!b)}})})}},86e3:(e,s,t)=>{t.d(s,{c:()=>r});var a=t(27664),l=t(82496);const r=(0,a.c)((0,l.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")}}]);
//# sourceMappingURL=3528.81e01c02.chunk.js.map