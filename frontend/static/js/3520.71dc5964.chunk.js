"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[3520],{3520:(e,s,c)=>{c.r(s),c.d(s,{default:()=>V});var d=c(30800),l=c(69060),i=c(14168),o=c(27664),a=c(82496);const r=(0,o.c)((0,a.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-2 12H6v-2h12zm0-3H6V9h12zm0-3H6V6h12z"}),"Message"),n=(0,o.c)((0,a.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Article");var t=c(28655);const m=(0,o.c)((0,a.jsx)("path",{d:"M22 9V7h-2v2h-2v2h2v2h2v-2h2V9zM8 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 1c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4m4.51-8.95C13.43 5.11 14 6.49 14 8s-.57 2.89-1.49 3.95C14.47 11.7 16 10.04 16 8s-1.53-3.7-3.49-3.95m4.02 9.78C17.42 14.66 18 15.7 18 17v3h2v-3c0-1.45-1.59-2.51-3.47-3.17"}),"GroupAdd");var h,u=c(86e3),v=c(45180),x=c(3358),j=c(5548),p=c(93996),g=c(82656),b=c(26773),N=c(4488),y=c(90048),C=c(89e3),f=c(77536),T=c(91012),I=c(56480),S=(c(21680),c(12720)),U=c(52924),_=c(44380),k=c(71448),D=c(26728),M=c(59736),R=c(51560),E=c(1908),z=c(39308);const w={Description:"",Id:"",Topic:"",Company_id:null===(h=JSON.parse(localStorage.getItem("user")))||void 0===h?void 0:h.Company_id},F=(0,a.jsx)(D.c,{fontSize:"small"}),Q=(0,a.jsx)(M.c,{fontSize:"small"}),V=()=>{const e=localStorage.getItem("user"),s=JSON.parse(e),[c,o]=(0,l.useState)([]),[h,D]=(0,l.useState)(!1),[M,V]=(0,l.useState)(!1),[A,O]=(0,l.useState)(!1),[H,P]=(0,l.useState)(w),[q,L]=(0,l.useState)({}),[W,J]=(0,l.useState)(!1),{contextObj:B}=(0,l.useContext)(f.a),[G,Y]=(0,l.useState)(!1),[K,X]=(0,l.useState)([]),Z=(0,R.i6)();(0,l.useEffect)((()=>{(0,E.q)({address:"discussionForum/discussionTopic?UserId=".concat(null===s||void 0===s?void 0:s.UserId,"&UserTypeId=").concat(null===s||void 0===s?void 0:s.UserTypeId,"&Company_id=").concat(null===s||void 0===s?void 0:s.Company_id)}).then((e=>{if(e.success){const c=[];e.data.forEach((e=>{var d;null===e||void 0===e||null===(d=e.InvolvedUsers)||void 0===d||d.forEach((d=>{Number(null===d||void 0===d?void 0:d.UserId)===Number(null===s||void 0===s?void 0:s.UserId)&&c.push(e)}))})),o(0===Number(s.UserTypeId)||1===Number(s.UserTypeId)?null===e||void 0===e?void 0:e.data:c)}})).catch((e=>console.log(e)))}),[G,null===s||void 0===s?void 0:s.UserId,null===s||void 0===s?void 0:s.UserTypeId]),(0,l.useEffect)((()=>{(0,E.q)({address:"masters/users/employeeAndSalesPerson/dropDown?Company_id=".concat(null===s||void 0===s?void 0:s.Company_id)}).then((e=>{e.success&&X(e.data)})).catch((e=>console.log(e)))}),[null===s||void 0===s?void 0:s.BranchId]);const $=()=>{D(!1),P(w),J(!1)},ee=()=>{V(!1),P(w)},se=()=>{O(!1),L({})};return 1===Number(B.Read_Rights)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I.jd,{}),(0,a.jsx)("div",{className:"cus-card",children:(0,a.jsxs)("div",{className:"p-3",children:[(0,a.jsxs)("div",{className:"d-flex mb-4 ",children:[(0,a.jsx)("p",{className:"fw-bold fa-18 px-2 flex-grow-1",children:"Topics"}),(0,z.Qr)(B.Add_Rights,1)&&(0,a.jsx)("button",{className:"btn btn-primary rounded-5 px-3 fa-13 shadow",onClick:()=>D(!0),children:"Create Topic"})]}),c.length>0?(0,a.jsx)("table",{className:"table",children:(0,a.jsx)("tbody",{children:c.map(((e,s)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"fa-14 border-0",children:(0,a.jsxs)("div",{className:"d-flex align-items-start justify-content-center flex-column",children:[(0,a.jsx)("p",{className:"mb-0 fw-bold fa-14 under-blue ".concat(0===Number(null===e||void 0===e?void 0:e.Project_Id)?"text-primary":"text-secondary"),onClick:()=>Z("chats",{state:e}),children:null===e||void 0===e?void 0:e.Topic}),(0,a.jsx)("p",{className:"mb-0 py-2 text-muted",children:null===e||void 0===e?void 0:e.Description})]})}),(0,a.jsx)("td",{className:"fa-14 text-center border-0",children:(0,a.jsx)(x.c,{title:"Team Size",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.c,{className:"fa-18 text-primary mx-1"})," ",null===e||void 0===e?void 0:e.InvolvedUsersCount]})})}),(0,a.jsx)("td",{className:"fa-14 text-center border-0",children:(0,a.jsx)(x.c,{title:"Messages Count",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r,{className:"fa-18 text-primary mx-1"})," ",null===e||void 0===e?void 0:e.TotalMessages]})})}),(0,a.jsx)("td",{className:"fa-14 border-0",children:(0,a.jsx)(x.c,{title:"Documents Shared",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n,{className:"fa-18 text-primary me-1"})," "," "+(null===e||void 0===e?void 0:e.DocumentsShared)]})})}),(0,a.jsx)("td",{className:"fa-14 border-0",children:(0,a.jsxs)("span",{className:"d-flex",children:[(0,a.jsx)(j.c,{size:"small",onClick:()=>Z("chats",{state:e}),children:(0,a.jsx)(t.c,{className:" text-primary"})}),((0,z.Qr)(B.Edit_Rights,1)||(0,z.Qr)(B.Delete_Rights,1))&&(0,a.jsxs)(S.c,{children:[(0,a.jsx)(S.c.Toggle,{variant:"success",id:"actions",className:"rounded-5 bg-transparent text-dark border-0 btn"}),(0,a.jsxs)(S.c.Menu,{children:[(0,z.Qr)(B.Edit_Rights,1)&&(0,a.jsxs)(p.c,{onClick:()=>(L(e),void O(!0)),children:[(0,a.jsx)(m,{className:"fa-in text-primary me-2"})," Manage Team"]}),(0,z.Qr)(B.Edit_Rights,1)&&(0,z.Qr)(null===e||void 0===e?void 0:e.Project_Id,0)&&(0,a.jsxs)(p.c,{onClick:()=>{return s=e,J(!0),P(s),void D(!0);var s},children:[(0,a.jsx)(u.c,{className:"fa-in me-2"})," Edit"]}),(0,z.Qr)(B.Delete_Rights,1)&&(0,z.Qr)(null===e||void 0===e?void 0:e.Project_Id,0)&&(0,a.jsxs)(p.c,{onClick:()=>{return s=e,V(!0),void P(s);var s},children:[(0,a.jsx)(v.c,{className:"fa-in me-2 text-danger"})," Delete"]})]})]})]})})]},s)))})}):(0,a.jsx)("h5",{className:"text-center mb-5",children:(0,z.Qr)(s.UserTypeId,0)||(0,z.Qr)(s.UserTypeId,1)?"No Topics Available":"You are not involved in any discussion"})]})}),(0,a.jsxs)(g.c,{open:h,onClose:$,maxWidth:"sm",fullWidth:!0,children:[(0,a.jsx)(b.c,{children:W?"Modify Topic":"Create Discussion Topic"}),(0,a.jsx)(N.c,{children:(0,a.jsx)("table",{className:"table",children:(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border-0",children:"Topic"}),(0,a.jsx)("td",{className:"border-0",children:(0,a.jsx)("input",{className:"cus-inpt",onChange:e=>P((0,d.c)((0,d.c)({},H),{},{Topic:e.target.value})),value:H.Topic,maxLength:100,placeholder:"ex: Morning Activiey",autoFocus:!0})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border-0",children:"Describtion"}),(0,a.jsx)("td",{className:"border-0",children:(0,a.jsx)("textarea",{className:"cus-inpt",value:H.Description,rows:5,maxLength:300,placeholder:"maximum 300 character",onChange:e=>P((0,d.c)((0,d.c)({},H),{},{Description:e.target.value}))})})]})]})})}),(0,a.jsxs)(y.c,{children:[(0,a.jsx)(C.c,{onClick:$,children:"Close"}),(0,a.jsx)(C.c,{onClick:W?async()=>{null!==H&&void 0!==H&&H.Id&&1===Number(null===B||void 0===B?void 0:B.Edit_Rights)&&1===Number(null===B||void 0===B?void 0:B.Add_Rights)&&(0,E.q)({address:"discussionForum/discussionTopic",method:"PUT",bodyData:H}).then((e=>{e.success?(I.m4.success(e.message),Y(!G),$()):I.m4.error(e.message)})).catch((e=>console.log(e)))}:async()=>{1===Number(null===B||void 0===B?void 0:B.Add_Rights)&&(0,E.q)({address:"discussionForum/discussionTopic",method:"POST",bodyData:H}).then((e=>{e.success?(I.m4.success(e.message),Y(!G),$()):I.m4.error(e.message)})).catch((e=>console.log(e)))},children:W?"Update":"Create"})]})]}),(0,a.jsxs)(g.c,{open:M,onClose:ee,children:[(0,a.jsx)(b.c,{children:"Confirmation"}),(0,a.jsxs)(N.c,{children:["Do you want to delete the ",(0,a.jsx)("span",{className:"text-primary fw-bold",children:null===H||void 0===H?void 0:H.Topic})," Topic?"]}),(0,a.jsxs)(y.c,{children:[(0,a.jsx)(C.c,{onClick:ee,children:"Close"}),(0,a.jsx)(C.c,{onClick:async()=>{null!==H&&void 0!==H&&H.Id&&1===Number(null===B||void 0===B?void 0:B.Delete_Rights)&&(0,E.q)({address:"discussionForum/discussionTopic",method:"DELETE",bodyData:H}).then((e=>{e.success?(I.m4.success(e.message),ee(),Y(!G)):I.m4.error(e.message)})).catch((e=>console.log(e)))},color:"error",children:"Delete"})]})]}),(0,a.jsxs)(g.c,{open:A,onClose:se,maxWidth:"sm",fullWidth:!0,children:[(0,a.jsx)(b.c,{children:"Manage Team"}),(0,a.jsx)(N.c,{children:(0,a.jsx)(k.c,{multiple:!0,id:"checkboxes-tags-demo",options:K,disableCloseOnSelect:!0,getOptionLabel:e=>null===e||void 0===e?void 0:e.Name,value:(null===q||void 0===q?void 0:q.InvolvedUsers)||[],onChange:(e,s)=>L((0,d.c)((0,d.c)({},q),{},{InvolvedUsers:s})),renderOption:(e,s,c)=>{let{selected:l}=c;return(0,a.jsxs)("li",(0,d.c)((0,d.c)({},e),{},{children:[(0,a.jsx)(U.c,{icon:F,checkedIcon:Q,style:{marginRight:8},checked:l}),null===s||void 0===s?void 0:s.Name]}))},className:"pt-2",isOptionEqualToValue:(e,s)=>(null===e||void 0===e?void 0:e.UserId)===(null===s||void 0===s?void 0:s.UserId),renderInput:e=>(0,a.jsx)(_.c,(0,d.c)((0,d.c)({},e),{},{label:"Users",placeholder:"Select Team Members"}))})}),(0,a.jsxs)(y.c,{children:[(0,a.jsx)(C.c,{onClick:se,children:"Close"}),(0,a.jsx)(C.c,{color:"success",onClick:async()=>{1===Number(null===B||void 0===B?void 0:B.Add_Rights)&&(0,E.q)({address:"discussionForum/modifyTeam",method:"POST",bodyData:{Teams:null===q||void 0===q?void 0:q.InvolvedUsers,Topic_Id:null===q||void 0===q?void 0:q.Id}}).then((e=>{e.success?(I.m4.success(e.message),Y(!G),se()):I.m4.error(e.message)})).catch((e=>console.log(e)))},children:"Save"})]})]})]}):(0,a.jsx)(T.c,{})}},14168:(e,s,c)=>{c.d(s,{c:()=>i});var d=c(27664),l=c(82496);const i=(0,d.c)((0,l.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"People")}}]);
//# sourceMappingURL=3520.71dc5964.chunk.js.map