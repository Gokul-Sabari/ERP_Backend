"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[4272],{84272:(e,o,s)=>{s.r(o),s.d(o,{default:()=>f});var d=s(69060),a=s(44380),n=s(5548),l=s(82656),r=s(26773),t=s(4488),c=s(90048),i=s(75848),m=s(89e3),u=s(56480),h=s(42136),w=s(57704),x=s(86e3),j=s(45180),p=s(1908),G=s(13724),C=s(82496);const g={Godown_Id:"",Godown_Name:""};const f=function(){const[e,o]=(0,d.useState)(!1),[s,f]=(0,d.useState)(!1),[y,N]=(0,d.useState)(!1),[_,b]=(0,d.useState)(g),[v,S]=(0,d.useState)(!1),[I,k]=(0,d.useState)([]),[E,D]=(0,d.useState)([]),[A,F]=(0,d.useState)(""),[q,z]=(0,d.useState)(!1),L=JSON.parse(localStorage.getItem("user")),O=null===L||void 0===L?void 0:L.UserId;(0,d.useEffect)((()=>{(async()=>{try{const e=await(0,p.q)({address:"masters/godown"});e.success&&(k(e.data),D(e.data))}catch(e){console.error(e),u.m4.error("Failed to load account groups")}})()}),[e]),(0,d.useEffect)((()=>{if(""===A.trim())D(I);else{const e=I.filter((e=>{var o,s;return(null===(o=e.Godown_Id)||void 0===o?void 0:o.toLowerCase().includes(A.toLowerCase()))||(null===(s=e.Godown_Name)||void 0===s?void 0:s.toLowerCase().includes(A.toLowerCase()))}));D(e)}}),[A,I]);const T=()=>{q||(N(!1),b(g))},P=()=>{q||(S(!1),b(g))},U=()=>{q||f(!1)};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"card",children:[(0,C.jsxs)("div",{className:"card-header bg-white fw-bold d-flex align-items-center justify-content-between",children:["GODOWN MASTER",(0,C.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,C.jsx)("div",{style:{width:"300px"},children:(0,C.jsx)(a.c,{fullWidth:!0,size:"small",variant:"outlined",placeholder:"Search Godown...",value:A,onChange:e=>F(e.target.value),InputProps:{startAdornment:(0,C.jsx)(w.c,{fontSize:"small",sx:{mr:1}}),style:{height:"40px"}}})}),(0,C.jsx)(h.c,{variant:"contained",size:"small",className:"rounded-1 btn-primary",onClick:()=>{N(!0),b(g)},sx:{textTransform:"none",fontWeight:500,px:2,height:"40px"},children:"Create Godown"})]})]}),(0,C.jsx)(G.cp,{dataArray:E,EnableSerialNumber:!0,maxHeightOption:!0,columns:[(0,G.A5)("Godown_Name","string","Godown_Name"),{ColumnHeader:"Actions",isVisible:1,isCustomCell:!0,Cell:e=>{let{row:o}=e;return(0,C.jsxs)("td",{style:{minWidth:"80px"},children:[(0,C.jsx)(n.c,{onClick:()=>(e=>{b({Godown_Id:e.Godown_Id,Godown_Name:e.Godown_Name}),S(!0)})(o),size:"small",children:(0,C.jsx)(x.c,{})}),(0,C.jsx)(n.c,{onClick:()=>{f(!0),b({Godown_Id:o.Godown_Id,Godown_Name:o.Godown_Name})},size:"small",color:"error",children:(0,C.jsx)(j.c,{})})]})}}]})]}),(0,C.jsxs)(l.c,{open:y,onClose:T,children:[(0,C.jsx)(r.c,{children:"Create Godown"}),(0,C.jsx)(t.c,{children:(0,C.jsxs)("div",{className:"p-2",children:[(0,C.jsx)("label",{children:"Godown Name*"}),(0,C.jsx)("input",{type:"text",value:_.Godown_Name,onChange:e=>b({..._,Godown_Name:e.target.value}),className:"cus-inpt",placeholder:"Enter Godown Name"})]})}),(0,C.jsxs)(c.c,{children:[(0,C.jsx)(m.c,{onClick:T,disabled:q,children:"Cancel"}),(0,C.jsx)(m.c,{onClick:async()=>{const{Godown_Name:e}=_;if(e){z(!0);try{const e=await(0,p.q)({address:"masters/godown",method:"POST",bodyData:{..._,Created_By:O}});e.success?(u.m4.success("Godown Created successfully!"),N(!1),b(g),o((e=>!e))):u.m4.error(e.message)}catch(s){console.error(s),u.m4.error("Failed to Create Godown")}finally{z(!1)}}else u.m4.error("Please fill all required fields.")},color:"primary",disabled:q||!_.Godown_Name,children:q?"Creating...":"Create"})]})]}),(0,C.jsxs)(l.c,{open:v,onClose:P,children:[(0,C.jsx)(r.c,{children:"Edit Godown"}),(0,C.jsx)(t.c,{children:(0,C.jsxs)("div",{className:"p-2",children:[(0,C.jsx)("label",{children:"Godown Name*"}),(0,C.jsx)("input",{type:"text",value:_.Godown_Name,onChange:e=>b({..._,Godown_Name:e.target.value}),className:"cus-inpt"})]})}),(0,C.jsxs)(c.c,{children:[(0,C.jsx)(m.c,{onClick:P,disabled:q,children:"Cancel"}),(0,C.jsx)(m.c,{onClick:()=>{const{Godown_Id:s,Godown_Name:d}=_;s&&d?(z(!0),(0,p.q)({address:"masters/godown",method:"PUT",bodyData:{..._,Alter_By:O}}).then((s=>{s.success?(u.m4.success("Godown updated successfully!"),S(!1),b(g),o(!e)):u.m4.error(s.message)})).catch((e=>{u.m4.error("Failed to update Godown")})).finally((()=>z(!1)))):u.m4.error("All required fields must be filled.")},color:"primary",disabled:q||!_.Godown_Id,children:q?"Updating...":"Update"})]})]}),(0,C.jsxs)(l.c,{open:s,onClose:U,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,C.jsx)(r.c,{id:"alert-dialog-title",children:"Confirmation"}),(0,C.jsx)(t.c,{children:(0,C.jsx)(i.c,{id:"alert-dialog-description",children:(0,C.jsx)("b",{children:`Do you want to delete the ${_.Godown_Name}?`})})}),(0,C.jsxs)(c.c,{children:[(0,C.jsx)(m.c,{onClick:U,children:"Cancel"}),(0,C.jsx)(m.c,{onClick:async()=>{z(!0);const e=_.Godown_Id;try{k((o=>o.filter((o=>o.Godown_Id!==e)))),D((o=>o.filter((o=>o.Godown_Id!==e))));const s=await(0,p.q)({address:"masters/godown",method:"DELETE",bodyData:{Godown_Id:e}});s.success?u.m4.success("Godown deleted successfully!"):(o((e=>!e)),u.m4.error(s.message||"Failed to delete account group"))}catch(s){console.error(s),o((e=>!e)),u.m4.error("Failed to delete account group")}finally{z(!1),f(!1)}},autoFocus:!0,sx:{color:"red"},children:q?"Deleting...":"Delete"})]})]})]})}}}]);
//# sourceMappingURL=4272.935db035.chunk.js.map