"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[3528],{13724:(e,l,t)=>{t.d(l,{A5:()=>z,Om:()=>k,cp:()=>M,oN:()=>$});var n=t(69060),s=t(3358),a=t(5548),r=t(66931),i=t(89500),o=t(93996),d=t(14696),c=t(13224),u=t(27454),m=t(96464),p=t(43692),v=t(85624),x=t(99904),h=t(33856),b=t(58612),g=t(53248),_=t(29504),C=t(5930),f=t(39308),j=t(4284),S=t(41459),y=t(46864),I=t(76491),N=t(10728),A=t(49608),P=t(28064),F=(t(37692),t(35832)),w=t(82496);const E=(e,l)=>e.map((e=>{const t={};return l.forEach(((l,n)=>{if(l.isVisible||l.Defult_Display)if(l.isCustomCell&&l.Cell){const s=l.Cell({row:e}),a=l.ColumnHeader?String(l.ColumnHeader).replace(/\s+/g,"_").toLowerCase():`field_${n+1}`;"string"!==typeof s&&"number"!==typeof s&&"bigint"!==typeof s||(t[a]=s)}else{let n=l.Field_Name;t[n]=e[n]||""}})),t})),z=function(){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{isVisible:arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,Field_Name:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",Fied_Data:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string",align:arguments.length>3&&void 0!==arguments[3]?arguments[3]:"left",verticalAlign:arguments.length>4&&void 0!==arguments[4]?arguments[4]:"center",...e&&{ColumnHeader:e}}},k=e=>{let{buttonsData:l=[],ToolTipText:t="Options"}=e;const[u,m]=(0,n.useState)(null),p=Boolean(u);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(s.c,{title:t,children:(0,w.jsx)(a.c,{"aria-describedby":p,onClick:e=>{m(e.currentTarget)},className:"ms-2",size:"small",children:(0,w.jsx)(j.c,{})})}),(0,w.jsx)(r.cp,{open:p,anchorEl:u,onClose:()=>{m(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,w.jsx)(i.c,{children:l.map(((e,l)=>(0,w.jsxs)(o.c,{onClick:()=>(null===e||void 0===e?void 0:e.onclick)&&(null===e||void 0===e?void 0:e.onclick()),disabled:null===e||void 0===e?void 0:e.disabled,children:[(0,w.jsx)(d.c,{children:null===e||void 0===e?void 0:e.icon}),(0,w.jsx)(c.c,{children:null===e||void 0===e?void 0:e.name})]},l)))})})]})},$=(e,l)=>{switch(l){case"number":return e?(0,f.SA)(e):e;case"date":return e?(0,f.uy)(e):e;case"time":return e?(0,f.AX)(e):e;case"string":return e;default:return""}},D=e=>{let{dataArray:l=[],columns:t=[],onClickFun:s=null,isExpendable:r=!1,expandableComp:i=null,tableMaxHeight:o=550,initialPageCount:d=20,EnableSerialNumber:c=!1,CellSize:j="small",disablePagination:z=!1,title:D="",PDFPrintOption:M=!1,ExcelPrintOption:U=!1,maxHeightOption:B=!1,ButtonArea:O=null,MenuButtons:T=[],bodyFontSizePx:q=13,headerFontSizePx:H=13}=e;const[L,G]=(0,n.useState)(0),[Q,R]=(0,n.useState)(d),[V,J]=(0,n.useState)([]),[K,W]=(0,n.useState)(!0),X=K&&B?" max-content ":o,Y=[{type:"left",class:"text-start"},{type:"right",class:"text-end"},{type:"center",class:"text-center"}],Z=[{type:"top",class:" vtop "},{type:"bottom",class:" vbottom "},{type:"center",class:" vctr "}],ee=(e=>{if(!V.length)return e;return[...e].sort(((e,l)=>{for(const t of V){const{columnId:n,direction:s}=t,a=e[n],r=l[n];if(a!==r)return"asc"===s?a>r?1:-1:a<r?1:-1}return 0}))})(l),le=L*Q,te=le+Q,ne=ee.slice(le,te),se=e=>{let{row:l,index:o}=e;const[d,p]=(0,n.useState)(!1),v="20px";return(0,w.jsxs)(n.Fragment,{children:[(0,w.jsxs)(u.c,{children:[!0===r&&i&&(0,w.jsx)(m.c,{className:"border-end text-center vtop",sx:{fontSize:`${q}px`},children:(0,w.jsx)(a.c,{size:"small",onClick:()=>p((e=>!e)),children:d?(0,w.jsx)(S.c,{sx:{fontSize:v}}):(0,w.jsx)(y.c,{sx:{fontSize:v}})})}),!0===c&&(0,w.jsx)(m.c,{className:"border-end text-center vtop",sx:{fontSize:`${q}px`},children:Q*L+o+1}),null===t||void 0===t?void 0:t.map(((e,t)=>{var n,a;const r=(0,f.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,f.Qr)(null===e||void 0===e?void 0:e.isVisible,1),i=Boolean(null===e||void 0===e?void 0:e.isCustomCell)&&e.Cell,d=!i,c=(l,t,n)=>null!==e&&void 0!==e&&e.tdClass?` ${null===e||void 0===e?void 0:e.tdClass({row:l,Field_Name:t,index:n})} `:"",u=e.align?null===(n=Y.find((l=>l.type===String(e.align).toLowerCase())))||void 0===n?void 0:n.class:"",p=e.verticalAlign?null===(a=Z.find((l=>l.type===String(e.verticalAlign).toLowerCase())))||void 0===a?void 0:a.class:" vctr ";if(r&&d){const n=Object.entries(l).find((l=>{let[t]=l;return t===e.Field_Name}));return(0,w.jsx)(m.c,{className:`border-end ${u} ${p} ${c(l,e.Field_Name,o)}`,sx:{fontSize:`${q}px`},onClick:()=>s?s(l):console.log("Function not supplied"),children:n?$(n[1],null===e||void 0===e?void 0:e.Fied_Data):"-"},t)}return r&&i?(0,w.jsx)(m.c,{className:`border-end ${u} ${p} ${c(l,e.Field_Name,o)}`,sx:{fontSize:`${q}px`},children:e.Cell({row:l,Field_Name:e.Field_Name,index:o})},t):(0,w.jsx)(m.c,{sx:{fontSize:`${q}px`},className:`border-end ${u} ${p}`,children:"-"},t)}))]}),!0===r&&i&&d&&(0,w.jsx)(u.c,{children:(0,w.jsx)(m.c,{colSpan:Number(null===t||void 0===t?void 0:t.length)+(!0===c?2:1),children:i({row:l,index:o})})})]})};return(0,w.jsxs)(p.c,{className:"rounded-3 bg-white overflow-hidden",component:v.c,children:[(0,w.jsxs)("div",{className:"d-flex align-items-center flex-wrap px-3 py-2 flex-row-reverse ",children:[(M||U||T.length>0||B)&&(0,w.jsx)(k,{ToolTipText:"Table Options",buttonsData:[...B?[{name:"Max Height",icon:K?(0,w.jsx)(I.c,{fontSize:"small",color:"primary"}):(0,w.jsx)(N.c,{fontSize:"small"}),onclick:()=>W((e=>!e)),disabled:(0,f.Qr)(null===l||void 0===l?void 0:l.length,0)}]:[],...M?[{name:"PDF Print",icon:(0,w.jsx)(A.c,{fontSize:"small",color:"primary"}),onclick:()=>((e,l)=>{try{const t=new P.default,n=E(e,l),s=l.filter((e=>e.isVisible||e.Defult_Display)).map((e=>e.Field_Name||String(e.ColumnHeader).replace(/\s+/g,"_").toLowerCase())),a=n.map((e=>s.map((l=>e[l])))).map(((e,l)=>({...e,Sno:l+1})));t.autoTable({head:[s],body:a}),t.save("table.pdf")}catch(t){console.error(t)}})(l,t),disabled:(0,f.Qr)(null===l||void 0===l?void 0:l.length,0)}]:[],...U?[{name:"Excel Print",icon:(0,w.jsx)(A.c,{fontSize:"small",color:"primary"}),onclick:()=>((e,l)=>{try{const t=E(e,l),n=F.c$.json_to_sheet(t),s=F.c$.book_new();F.c$.book_append_sheet(s,n,"Data"),F.a8(s,"table.xlsx")}catch(t){console.error(t)}})(l,t),disabled:(0,f.Qr)(null===l||void 0===l?void 0:l.length,0)}]:[],...T]}),O&&O,D&&(0,w.jsx)("h6",{className:"fw-bold text-muted flex-grow-1 m-0",children:D})]}),(0,w.jsx)(x.c,{sx:{maxHeight:X},children:(0,w.jsxs)(h.c,{stickyHeader:!0,size:j,children:[(0,w.jsx)(b.c,{children:(0,w.jsxs)(u.c,{children:[r&&i&&(0,w.jsx)(m.c,{className:"fw-bold border-end border-top text-center",sx:{fontSize:`${H}px`,backgroundColor:"#EDF0F7"},children:"#"}),c&&(0,w.jsx)(m.c,{className:"fw-bold border-end border-top text-center",sx:{fontSize:`${H}px`,backgroundColor:"#EDF0F7"},children:"SNo"}),t.map(((e,l)=>{const t=(0,f.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,f.Qr)(null===e||void 0===e?void 0:e.isVisible,1),n=!1===Boolean(null===e||void 0===e?void 0:e.isCustomCell)||!e.Cell,s=V.find((l=>l.columnId===e.Field_Name)),a=s?s.direction:"asc";var r,i,o,d;return t?n?(0,w.jsx)(m.c,{className:"fw-bold border-end border-top "+(e.align?null===(r=Y.find((l=>l.type===String(e.align).toLowerCase())))||void 0===r?void 0:r.class:""),sx:{fontSize:`${H}px`,backgroundColor:"#EDF0F7"},sortDirection:!!s&&a,children:(0,w.jsx)(g.c,{active:!!s,direction:a,onClick:()=>(e=>{const l=V.find((l=>l.columnId===e));if(l){const t="asc"===l.direction;J(V.map((l=>l.columnId===e?{...l,direction:t?"desc":"asc"}:l)))}else J([...V,{columnId:e,direction:"asc"}])})(e.Field_Name),children:e.ColumnHeader||(null===e||void 0===e||null===(i=e.Field_Name)||void 0===i?void 0:i.replace(/_/g," "))})},l):(0,w.jsx)(m.c,{className:(e.ColumnHeader||null!==e&&void 0!==e&&e.Field_Name?" fw-bold border-end border-top p-2 appFont ":" p-0 ")+" "+(e.align?null===(o=Y.find((l=>l.type===String(e.align).toLowerCase())))||void 0===o?void 0:o.class:""),sx:{fontSize:`${H}px`,backgroundColor:"#EDF0F7"},children:e.ColumnHeader||(null===e||void 0===e||null===(d=e.Field_Name)||void 0===d?void 0:d.replace(/_/g," "))},l):null}))]})}),(0,w.jsxs)(_.c,{children:[(z?ee:ne).map(((e,l)=>(0,w.jsx)(se,{row:e,index:l},l))),0===l.length&&(0,w.jsx)(u.c,{children:(0,w.jsx)(m.c,{colSpan:t.length+(!0===r&&i?1:0)+(!0===c?1:0),sx:{textAlign:"center"},children:"No Data"})})]})]})}),!z&&0!==ne.length&&(0,w.jsx)("div",{className:"p-2 pb-0",children:(0,w.jsx)(C.c,{component:"div",count:l.length,page:L,onPageChange:(e,l)=>{G(l)},rowsPerPage:Q,onRowsPerPageChange:e=>{R(parseInt(e.target.value,10)),G(0)},rowsPerPageOptions:Array.from(new Set([d,5,20,50,100,200,500])).sort(((e,l)=>e-l)),labelRowsPerPage:"Rows per page",showFirstButton:!0,showLastButton:!0})})]})};D.defaultProps={dataArray:[],columns:[],onClickFun:null,isExpendable:!1,expandableComp:null,tableMaxHeight:550,initialPageCount:20,EnableSerialNumber:!1,CellSize:"small",disablePagination:!1,title:void 0,PDFPrintOption:!1,ExcelPrintOption:!1,maxHeightOption:!1,ButtonArea:null,MenuButtons:[],headerFontSizePx:13,bodyFontSizePx:13};const M=D},63528:(e,l,t)=>{t.r(l),t.d(l,{default:()=>x});var n=t(69060),s=t(86e3),a=t(3358),r=t(5548),i=t(89e3),o=t(56480),d=(t(21680),t(1908)),c=t(39308),u=t(82496);function m(e){e.target.value=e.target.value.replace(/[^0-9]/g,"")}const p=e=>{let{screen:l,setScreen:t,underArray:s,row:a,refresh:r}=e;const i=JSON.parse(localStorage.getItem("user")),p={Branch_Id:0,Company_Id:0,Cust_Id:"",Cust_No:"",Customer_name:"",Contact_Person:"",Mobile_no:"",Email_Id:"",Address1:"",Address2:"",Address3:"",Address4:"",Pincode:"",State:"",Country:"India",Gstin:"",Under_Id:"",User_Mgt_Id:"",User_Type_Id:"",Entry_By:null===i||void 0===i?void 0:i.UserId},[v,x]=(0,n.useState)(p),[h,b]=(0,n.useState)([]);(0,n.useEffect)((()=>{(0,d.q)({address:`masters/branch/dropDown?User_Id=${null===i||void 0===i?void 0:i.UserId}&Company_id=${null===i||void 0===i?void 0:i.Company_id}`}).then((e=>{e.success&&b(e.data)})).catch((e=>console.error(e)))}),[]),(0,n.useEffect)((()=>{const{Branch_Id:e,Company_Id:l,Cust_Id:t,Cust_No:n,Customer_name:s,Contact_Person:r,Mobile_no:i,Email_Id:o,Address1:d,Address2:c,Address3:u,Address4:m,Pincode:p,State:v,Country:h,Gstin:b,Under_Id:g,User_Mgt_Id:_,User_Type_Id:C}=a;x((a=>({...a,Branch_Id:e,Company_Id:l,Cust_Id:t,Cust_No:n,Customer_name:s,Contact_Person:r,Mobile_no:i,Email_Id:o,Address1:d,Address2:c,Address3:u,Address4:m,Pincode:p,State:v,Country:h,Gstin:b,Under_Id:g,User_Mgt_Id:_,User_Type_Id:C})))}),[a]);const g=()=>{x(p)},_=s.filter((e=>(0,c.Qr)(e.User_Type_Id,5)&&(0,c.Qr)(e.Id,null===v||void 0===v?void 0:v.Cust_Id))).map((e=>({value:e.Cust_Id,label:e.Customer_name}))),C=[{label:"Name",elem:"input",placeholder:"Mr / Ms",event:e=>x({...v,Customer_name:e.target.value}),required:!0,value:v.Customer_name},{label:"Mobile",elem:"input",oninput:e=>m(e),placeholder:"Enter Mobile Number",event:e=>x({...v,Mobile_no:e.target.value}),required:!0,value:v.Mobile_no,max:10},{label:"Branch",elem:"select",options:[{value:0,label:" - Select - ",disabled:!0,selected:!0},...h.map((e=>({value:Number(e.BranchId),label:e.BranchName})))],class:"selectpicker",data:!0,event:e=>x({...v,Branch_Id:parseInt(e.target.value)}),required:!0,value:v.Branch_Id},{label:"User Type",elem:"select",options:[{value:"",label:" - Select - ",disabled:!0,selected:!0},{value:4,label:"CUSTOMER"},{value:5,label:"BROKER"}],event:e=>x({...v,User_Type_Id:parseInt(e.target.value)}),required:!0,value:v.User_Type_Id},{label:"Contact Person",elem:"input",placeholder:"",event:e=>x({...v,Contact_Person:e.target.value}),required:!0,value:v.Contact_Person},{label:"Email ID",elem:"input",type:"email",placeholder:"emailaddress@mail.com",event:e=>x({...v,Email_Id:e.target.value}),required:!1,value:v.Email_Id},{label:"Gstin",elem:"input",placeholder:"",event:e=>x({...v,Gstin:e.target.value}),required:!1,value:v.Gstin,max:15},{label:"Under",elem:"select",options:[{value:"",label:" - Select - ",disabled:!0,selected:!0},{value:0,label:" Primary "},..._],class:"selectpicker",data:!0,event:e=>x({...v,Under_Id:parseInt(e.target.value)}),required:!0,value:v.Under_Id},{label:"Pincode",elem:"input",placeholder:"654321",oninput:e=>m(e),event:e=>x({...v,Pincode:e.target.value}),required:!1,value:v.Pincode,max:6},{label:"State",elem:"input",placeholder:"",event:e=>x({...v,State:e.target.value}),required:!1,value:v.State},{label:"Address Line 1",elem:"textarea",event:e=>x({...v,Address1:e.target.value}),required:!0,value:v.Address1},{label:"Address Line 2",elem:"textarea",event:e=>x({...v,Address2:e.target.value}),value:v.Address2},{label:"Address Line 3",elem:"textarea",event:e=>x({...v,Address3:e.target.value}),value:v.Address3},{label:"Address Line 4",elem:"textarea",event:e=>x({...v,Address4:e.target.value}),value:v.Address4}],f=()=>{for(const e of C)if(e.required&&""===e.value)return`${e.label} is required.`;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v.Email_Id)&&""!==v.Email_Id)return"Invalid email address";if(!/^\d{10}$/.test(v.Mobile_no))return"Invalid phone number";if(!/^\d{15}$/.test(v.Gstin)&&""!==v.Gstin)return"Invalid gstin";return/^\d{6}$/.test(v.Pincode)||""===v.Pincode?"Success":"Invalid Pincode"};return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"card",children:[(0,u.jsxs)("div",{className:"card-header py-2 d-flex align-items-center justify-content-between",children:[(0,u.jsx)("h5",{className:"mb-0 ",children:"Customer Details"}),(0,u.jsx)("button",{className:"comadbtn mb-0",onClick:()=>{t(!l),g()},children:"Back"})]}),(0,u.jsx)("div",{className:"card-body row",children:C.map(((e,l)=>(0,u.jsxs)("div",{className:"col-lg-4 col-md-6 p-2 px-3",children:[(0,u.jsxs)("label",{children:[e.label,e.required&&(0,u.jsx)("p",{style:{color:"red",display:"inline",fontWeight:"bold",fontSize:"1em"},children:" *"})]}),"input"===e.elem?(0,u.jsx)("input",{type:e.type||"text",className:"cus-inpt b-0",onChange:e.event,onInput:e.oninput,disabled:e.disabled,value:e.value,maxLength:e.max}):"select"===e.elem?(0,u.jsx)("select",{className:"cus-inpt b-0",onChange:e.event,value:e.value,children:e.options.map(((e,l)=>(0,u.jsx)("option",{value:e.value,disabled:e.disabled,defaultValue:e.selected,children:e.label},l)))}):"textarea"===e.elem?(0,u.jsx)("textarea",{className:"cus-inpt b-0",onChange:e.event,rows:4,value:e.value}):null]},l)))}),(0,u.jsxs)("div",{className:"card-footer text-end",children:[(0,u.jsx)("button",{className:"cancelbtn",onClick:()=>t(!l),children:"Cancel"}),(0,u.jsx)("button",{className:"comadbtn mb-0",onClick:a.Cust_Id?()=>{const e=f();"Success"===e?(0,d.q)({address:"userModule/customer",method:"PUT",bodyData:{...v}}).then((e=>{e.success?(g(),o.m4.success(e.message),r(),t(!l)):o.m4.error(e.message)})).catch((e=>console.error(e))):o.m4.error(e)}:()=>{const e=f();"Success"===e?(0,d.q)({address:"userModule/customer",method:"POST",bodyData:{...v}}).then((e=>{e.success?(g(),o.m4.success(e.message),r(),t(!l)):o.m4.error(e.message)})).catch((e=>console.error(e))):o.m4.error(e)},children:a.Cust_Id?"Update":"Create"})]})]})})};var v=t(13724);const x=e=>{let{loadingOn:l,loadingOff:t,AddRights:o,EditRights:c}=e;const[m,x]=(0,n.useState)([]),[h,b]=(0,n.useState)(!1),[g,_]=(0,n.useState)({}),[C,f]=(0,n.useState)(!0);(0,n.useEffect)((()=>{(0,d.q)({address:"userModule/customer",loadingOn:l,loadingOff:t}).then((e=>{x(e.data?e.data:[])})).catch((e=>console.error(e)))}),[h]),(0,n.useEffect)((()=>{!0===C&&_({})}),[C]);return(0,u.jsx)(u.Fragment,{children:C?(0,u.jsx)(v.cp,{title:"Customers",dataArray:m,headerFontSizePx:13,bodyFontSizePx:12,columns:[(0,v.A5)("Cust_No","string","CusID"),(0,v.A5)("Customer_name","string","Name"),(0,v.A5)("UserTypeGet","string","Type"),(0,v.A5)("Mobile_no","string","Phone"),(0,v.A5)("Contact_Person","string","Contact Person"),(0,v.A5)("Email_Id","string","Email"),(0,v.A5)("State","string","State"),(0,v.A5)("Gstin","string","Gstin"),{isVisible:1,ColumnHeader:"Action",isCustomCell:!0,Cell:e=>{let{row:l}=e;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(a.c,{title:"Edit",children:(0,u.jsx)("span",{children:(0,u.jsx)(r.c,{size:"small",onClick:()=>{_(l),f(!C)},children:(0,u.jsx)(s.c,{className:"fa-20"})})})})})}}],ButtonArea:(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(i.c,{variant:"outlined",onClick:()=>f(!C),children:"Add"})})}):(0,u.jsx)(p,{screen:C,setScreen:f,underArray:m,row:g,refresh:()=>{b(!h)}})})}},86e3:(e,l,t)=>{t.d(l,{c:()=>a});var n=t(27664),s=t(82496);const a=(0,n.c)((0,s.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")}}]);
//# sourceMappingURL=3528.bcaec69c.chunk.js.map