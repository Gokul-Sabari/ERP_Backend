"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[7472],{1336:(e,t,a)=>{a.d(t,{c:()=>s});var l=a(30800),o=a(69060),n=a(1908),r=a(39308),c=a(13724),i=a(82496);const s=e=>{let{loadingOn:t,loadingOff:a,Fromdate:s,Todate:d,module:u="Sales",api:m="salesInvoice"}=e;const[v,h]=(0,o.useState)([]),[x,p]=(0,o.useState)({comparisonDialog:!1,excluedeSyced:1});return(0,o.useEffect)((()=>{(0,n.q)({address:"\n                analytics/dataComparison/".concat(m,"/itemWise?\n                Fromdate=").concat(s,"&\n                Todate=").concat(d,"&\n                excluedeSyced=").concat(x.excluedeSyced),loadingOn:t,loadingOff:a}).then((e=>{if(e.success){const t=(0,r.dq)(null===e||void 0===e?void 0:e.data);h(t)}else h([])})).catch((e=>console.error(e)))}),[s,d,x.excluedeSyced]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(c.cp,{title:u+" unsynced list",headerFontSizePx:12,bodyFontSizePx:12,EnableSerialNumber:!0,ExcelPrintOption:!0,ButtonArea:(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("select",{className:"cus-inpt p-2 w-auto",value:x.excluedeSyced,onChange:e=>p((t=>(0,l.c)((0,l.c)({},t),{},{excluedeSyced:e.target.value}))),children:[(0,i.jsx)("option",{value:"0",children:"Show Synced"}),(0,i.jsx)("option",{value:"1",children:"Exclude Synced"})]})}),dataArray:v,columns:[(0,c.A5)("transactionDate","date","Date"),(0,c.A5)("invoiceNo","string","Voucher Number"),(0,c.A5)("VoucherTypeGet","string","Voucher"),(0,c.A5)("LedgerName","string","Ledger"),(0,c.A5)("ItemName","string","Item"),(0,c.A5)("erpQty","number","E-Qty"),(0,c.A5)("tallyQty","number","T-Qty"),(0,c.A5)("erpRate","number","E-Rate"),(0,c.A5)("tallyRate","number","T-Rate"),(0,c.A5)("erpAmount","number","E-Amount"),(0,c.A5)("tallyAmount","number","T-Amount"),(0,c.A5)("Status","string","Reason")]})})}},7472:(e,t,a)=>{a.r(t),a.d(t,{default:()=>F});var l=a(30800),o=a(18256),n=a(29720),r=a(61584),c=a(5548),i=a(12572),s=a(15786),d=a(69060),u=a(39308),m=a(57704),v=a(1908),h=a(13724),x=a(60348),p=a(82656),f=a(26773),y=a(4488),g=a(90048),b=a(71412),j=a(14499),S=a(82496);const _=e=>{let{loadingOn:t,loadingOff:a,Fromdate:o,Todate:n}=e;const[r,i]=(0,d.useState)([]),[s,m]=(0,d.useState)([]),[_,C]=(0,d.useState)({erpStatus:"",tallyStatus:"",comparisonDialog:!1,erpRow:{},tallyRow:{},reload:!1});(0,d.useEffect)((()=>{(0,v.q)({address:"analytics/dataComparison/salesInvoice/alterBased?Fromdate=".concat(o,"&Todate=").concat(n),loadingOn:t,loadingOff:a}).then((e=>{if(e.success){var t,a;const o=(0,u.dq)(null===e||void 0===e||null===(t=e.others)||void 0===t?void 0:t.ERPDifference),n=(0,u.dq)(null===e||void 0===e||null===(a=e.others)||void 0===a?void 0:a.TallyDifference);i(o.map((e=>{const t=n.find((t=>(0,u.Qr)(null===t||void 0===t?void 0:t.tally_id,null===e||void 0===e?void 0:e.Tally_Id)));return(0,l.c)((0,l.c)({},e),{},{RowStatus:t?"Modified":"ONLY IN ERP",statusCode:t?3:1})}))),m(n.map((e=>{const t=o.find((t=>(0,u.Qr)(null===t||void 0===t?void 0:t.Tally_Id,null===e||void 0===e?void 0:e.tally_id)));return(0,l.c)((0,l.c)({},e),{},{RowStatus:t?"Modified":"ONLY IN Tally",statusCode:t?3:2})})))}else i([]),m([])})).catch((e=>console.error(e)))}),[o,n]);const T=()=>{C((e=>(0,l.c)((0,l.c)({},e),{},{comparisonDialog:!1,erpRow:{},tallyRow:{}})))},F=(0,d.useMemo)((()=>function(e,t,a){const l=[];for(const[r,[c,i]]of Object.entries(a)){var o,n;const a=null!==(o=e[c])&&void 0!==o?o:"",s=null!==(n=t[i])&&void 0!==n?n:"",d=String(a)===String(s)?"Match":"Different";l.push({label:r,tallyValue:String(a),erpValue:String(s),status:d})}return l}(_.tallyRow,_.erpRow,x.w)),[_.erpRow,_.tallyRow,x.w]);return console.log(r,s),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:"row p-2",children:[(0,S.jsx)("div",{className:"col-lg-6 p-2",children:(0,S.jsx)(h.cp,{title:"ERP Miss-Matched",headerFontSizePx:12,bodyFontSizePx:12,EnableSerialNumber:!0,ButtonArea:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("select",{className:"cus-inpt p-2 w-auto",value:_.erpStatus,onChange:e=>C((t=>(0,l.c)((0,l.c)({},t),{},{erpStatus:e.target.value}))),children:[(0,S.jsx)("option",{value:"",children:"All Type"}),(0,S.jsx)("option",{value:"1",children:"ERP only"}),(0,S.jsx)("option",{value:"3",children:"Modified"}),(0,S.jsx)("option",{value:"4",children:"Child"})]}),(0,S.jsx)("label",{className:"me-1",children:"Error Type:"})]}),dataArray:((0,u.Q$)(_.erpStatus)?r.filter((e=>(0,u.Qr)(e.statusCode,_.erpStatus))):r).sort(((e,t)=>String((null===e||void 0===e?void 0:e.Do_Inv_No)||"").localeCompare(String((null===t||void 0===t?void 0:t.Do_Inv_No)||"")))),columns:[(0,h.A5)("Do_Inv_No","string","Voucher Number"),(0,h.A5)("Do_Date","date","Date"),(0,h.A5)("Total_Invoice_value","number","Invoice Value"),(0,h.A5)("RowStatus","string","Reason"),{isVisible:1,ColumnHeader:"Preview Invoice",isCustomCell:!0,Cell:e=>{let{row:t}=e;const a=s.find((e=>(0,u.Qr)(null===e||void 0===e?void 0:e.tally_id,null===t||void 0===t?void 0:t.Tally_Id)));return(0,S.jsx)(c.c,{size:"small",onClick:()=>C((e=>(0,l.c)((0,l.c)({},e),{},{comparisonDialog:!0,erpRow:t,tallyRow:a||{}}))),children:(0,S.jsx)(b.c,{})})}}]})}),(0,S.jsx)("div",{className:"col-lg-6 p-2",children:(0,S.jsx)(h.cp,{title:"Tally Miss-Matched",headerFontSizePx:12,bodyFontSizePx:12,EnableSerialNumber:!0,ButtonArea:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("select",{className:"cus-inpt p-2 w-auto",value:_.tallyStatus,onChange:e=>C((t=>(0,l.c)((0,l.c)({},t),{},{tallyStatus:e.target.value}))),children:[(0,S.jsx)("option",{value:"",children:"All Type"}),(0,S.jsx)("option",{value:"2",children:"Tally only"}),(0,S.jsx)("option",{value:"3",children:"Modified"}),(0,S.jsx)("option",{value:"4",children:"Child"})]}),(0,S.jsx)("label",{className:"me-1",children:"Error Type:"})]}),dataArray:((0,u.Q$)(_.tallyStatus)?s.filter((e=>(0,u.Qr)(e.statusCode,_.tallyStatus))):s).sort(((e,t)=>String((null===e||void 0===e?void 0:e.invoice_no)||"").localeCompare(String((null===t||void 0===t?void 0:t.invoice_no)||"")))),columns:[(0,h.A5)("invoice_no","string","Voucher Number"),(0,h.A5)("invoice_date","date","Date"),(0,h.A5)("total_invoice_value","number","Invoice Value"),(0,h.A5)("RowStatus","string","Reason"),{isVisible:1,ColumnHeader:"Preview Invoice",isCustomCell:!0,Cell:e=>{let{row:t}=e;const a=r.find((e=>(0,u.Qr)(null===e||void 0===e?void 0:e.Tally_Id,null===t||void 0===t?void 0:t.tally_id)));return(0,S.jsx)(c.c,{size:"small",onClick:()=>C((e=>(0,l.c)((0,l.c)({},e),{},{comparisonDialog:!0,tallyRow:t,erpRow:a}))),children:(0,S.jsx)(b.c,{})})}}]})})]}),(0,S.jsxs)(p.c,{open:_.comparisonDialog,onClose:T,fullWidth:!0,maxWidth:"md",children:[(0,S.jsxs)(f.c,{className:"d-flex justify-content-between align-items-center",children:[(0,S.jsx)("span",{children:"Invoice Difference"}),(0,S.jsx)(c.c,{size:"small",onClick:T,children:(0,S.jsx)(j.c,{color:"error"})})]}),(0,S.jsx)(y.c,{children:(0,S.jsxs)("div",{className:"table-responsive ",children:[(0,S.jsx)("h2",{className:"text-xl font-bold mb-4",children:"ERP vs Tally Comparison"}),(0,S.jsxs)("table",{className:"table table-bordered border-gray-300",children:[(0,S.jsx)("thead",{children:(0,S.jsxs)("tr",{className:"bg-gray-100 text-left",children:[(0,S.jsx)("th",{children:"Field"}),(0,S.jsx)("th",{children:"Tally DB"}),(0,S.jsx)("th",{children:"ERP DB"}),(0,S.jsx)("th",{children:"Status"})]})}),(0,S.jsx)("tbody",{children:F.map(((e,t)=>{let{label:a,tallyValue:l,erpValue:o,status:n}=e;return(0,S.jsxs)("tr",{className:"Different"===n?"bg-red-100":"bg-white",children:[(0,S.jsx)("td",{className:" font-medium",children:a}),(0,S.jsx)("td",{children:l}),(0,S.jsx)("td",{children:o}),(0,S.jsx)("td",{className:"p-2 border font-semibold ".concat("Different"===n?"text-red-600":"text-green-600"),children:n})]},t)}))})]})]})}),(0,S.jsx)(g.c,{})]})]})},C=e=>{let{loadingOn:t,loadingOff:a,Fromdate:o,Todate:n}=e;const[r,c]=(0,d.useState)([]),[i,s]=(0,d.useState)({comparisonDialog:!1,excluedeSyced:1});return(0,d.useEffect)((()=>{(0,v.q)({address:"\n                analytics/dataComparison/salesInvoice/invoiceBased?\n                Fromdate=".concat(o,"&\n                Todate=").concat(n,"&\n                excluedeSyced=").concat(i.excluedeSyced),loadingOn:t,loadingOff:a}).then((e=>{if(e.success){const t=(0,u.dq)(null===e||void 0===e?void 0:e.data);c(t)}else c([])})).catch((e=>console.error(e)))}),[o,n,i.excluedeSyced]),(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(h.cp,{title:"Sales unsynced list",headerFontSizePx:12,bodyFontSizePx:12,EnableSerialNumber:!0,ButtonArea:(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("select",{className:"cus-inpt p-2 w-auto",value:i.excluedeSyced,onChange:e=>s((t=>(0,l.c)((0,l.c)({},t),{},{excluedeSyced:e.target.value}))),children:[(0,S.jsx)("option",{value:"0",children:"Show Synced"}),(0,S.jsx)("option",{value:"1",children:"Exclude Synced"})]})}),dataArray:r,columns:[(0,h.A5)("Do_Date","date","Date"),(0,h.A5)("Do_Inv_No","string","Voucher Number"),(0,h.A5)("Retailer_Name","string","Ledger"),(0,h.A5)("Total_Invoice_value","number","Invoice Value"),(0,h.A5)("erpChildCount","number","ERP-Products"),(0,h.A5)("erpChildQuantity","number","ERP Bill Quantity"),(0,h.A5)("tallyChildCount","number","Tally-Products"),(0,h.A5)("tallyChildQuantity","number","Tally Bill Quantity"),(0,h.A5)("RowStatus","string","Reason")]})})};var T=a(1336);const F=e=>{let{loadingOn:t,loadingOff:a}=e;const[v,h]=(0,d.useState)(1),[x,p]=(0,d.useState)({Fromdate:(0,u.SO)(10),Todate:(0,u.Q7)(),FilterFromDate:(0,u.SO)(10),FilterTodate:(0,u.Q7)()}),f=[{name:"Item based",component:(0,S.jsx)(T.c,{loadingOn:t,loadingOff:a,Fromdate:x.Fromdate,Todate:x.Todate})},{name:"InvoiceId based",component:(0,S.jsx)(C,{loadingOn:t,loadingOff:a,Fromdate:x.Fromdate,Todate:x.Todate})},{name:"AlterId based",component:(0,S.jsx)(_,{loadingOn:t,loadingOff:a,Fromdate:x.Fromdate,Todate:x.Todate})}];return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:"d-flex align-items-center flex-wrap mb-3",children:[(0,S.jsx)("label",{htmlFor:"from",className:"me-1 fw-bold ",children:"Fromdate: "}),(0,S.jsx)("input",{type:"date",id:"from",className:"cus-inpt p-2 w-auto me-2",value:x.FilterFromDate,onChange:e=>p((t=>(0,l.c)((0,l.c)({},t),{},{FilterFromDate:e.target.value})))}),(0,S.jsx)("label",{htmlFor:"to",className:"me-1 fw-bold ",children:"Todate: "}),(0,S.jsx)("input",{type:"date",id:"to",className:"cus-inpt p-2 w-auto",value:x.FilterTodate,onChange:e=>p((t=>(0,l.c)((0,l.c)({},t),{},{FilterTodate:e.target.value})))}),(0,S.jsx)(c.c,{size:"small",onClick:()=>p((e=>(0,l.c)((0,l.c)({},e),{},{Fromdate:e.FilterFromDate?e.FilterFromDate:e.Fromdate,Todate:e.FilterTodate?e.FilterTodate:e.Todate}))),children:(0,S.jsx)(m.c,{})})]}),(0,S.jsxs)(o.cp,{value:v,children:[(0,S.jsx)(i.c,{sx:{borderBottom:1,borderColor:"divider"},children:(0,S.jsx)(n.c,{indicatorColor:"transparant",onChange:(e,t)=>h(t),variant:"scrollable",scrollButtons:"auto",children:f.map(((e,t)=>(0,S.jsx)(s.c,{sx:v===t+1?{backgroundColor:"#c6d7eb"}:{},label:e.name,value:t+1},t)))})}),f.map(((e,t)=>(0,S.jsx)(r.c,{value:t+1,sx:{p:0,pt:2},children:e.component},t)))]})]})}},60348:(e,t,a)=>{a.d(t,{w:()=>l});const l={"Invoice No":["invoice_no","Do_Inv_No"],"Invoice Date":["invoice_date","Do_Date"],"Tally ID":["tally_id","Tally_Id"],"Alter ID":["alter_id","Alter_Id"],"Sales Ledger / Retailer":["sales_party_ledger_id","Retailer_Id"],"Before Tax":["invoice_value_before_tax","Total_Before_Tax"],"After Tax":["invoice_value_after_tax","Total_Invoice_value"],"Round Off":["round_off","Round_off"],Narration:["narration","Narration"],"Cancel Status":["cancel_status","Cancel_status"],"Created By":["created_by","Created_by"],"Altered By":["altered_by","Altered_by"],"Created On":["created_on_date","Created_on"],"Altered On":["alterd_date","Alterd_on"]}},14499:(e,t,a)=>{a.d(t,{c:()=>n});var l=a(27664),o=a(82496);const n=(0,l.c)((0,o.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},57704:(e,t,a)=>{a.d(t,{c:()=>n});var l=a(27664),o=a(82496);const n=(0,l.c)((0,o.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},71412:(e,t,a)=>{a.d(t,{c:()=>n});var l=a(27664),o=a(82496);const n=(0,l.c)((0,o.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},18256:(e,t,a)=>{a.d(t,{Ed:()=>s,cp:()=>r,oF:()=>c,qM:()=>i});var l=a(69060),o=a(82496);const n=l.createContext(null);function r(e){const{children:t,value:a}=e,r=function(){const[e,t]=l.useState(null);return l.useEffect((()=>{t("mui-p-".concat(Math.round(1e5*Math.random())))}),[]),e}(),c=l.useMemo((()=>({idPrefix:r,value:a})),[r,a]);return(0,o.jsx)(n.Provider,{value:c,children:t})}function c(){return l.useContext(n)}function i(e,t){const{idPrefix:a}=e;return null===a?null:"".concat(e.idPrefix,"-P-").concat(t)}function s(e,t){const{idPrefix:a}=e;return null===a?null:"".concat(e.idPrefix,"-T-").concat(t)}},29720:(e,t,a)=>{a.d(t,{c:()=>d});var l=a(45072),o=a(95656),n=a(69060),r=a(77828),c=a(18256),i=a(82496);const s=["children"],d=n.forwardRef((function(e,t){const{children:a}=e,d=(0,o.c)(e,s),u=(0,c.oF)();if(null===u)throw new TypeError("No TabContext provided");const m=n.Children.map(a,(e=>n.isValidElement(e)?n.cloneElement(e,{"aria-controls":(0,c.qM)(u,e.props.value),id:(0,c.Ed)(u,e.props.value)}):null));return(0,i.jsx)(r.c,(0,l.c)({},d,{ref:t,value:u.value,children:m}))}))},61584:(e,t,a)=>{a.d(t,{c:()=>p});var l=a(45072),o=a(95656),n=a(69060),r=a(79736),c=a(12556),i=a(23456),s=a(21412),d=a(33448);function u(e){return(0,d.cp)("MuiTabPanel",e)}(0,a(10099).c)("MuiTabPanel",["root"]);var m=a(18256),v=a(82496);const h=["children","className","value"],x=(0,c.cp)("div",{name:"MuiTabPanel",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;return{padding:t.spacing(3)}})),p=n.forwardRef((function(e,t){const a=(0,i.c)({props:e,name:"MuiTabPanel"}),{children:n,className:c,value:d}=a,p=(0,o.c)(a,h),f=(0,l.c)({},a),y=(e=>{const{classes:t}=e;return(0,s.c)({root:["root"]},u,t)})(f),g=(0,m.oF)();if(null===g)throw new TypeError("No TabContext provided");const b=(0,m.qM)(g,d),j=(0,m.Ed)(g,d);return(0,v.jsx)(x,(0,l.c)({"aria-labelledby":j,className:(0,r.c)(y.root,c),hidden:d!==g.value,id:b,ref:t,role:"tabpanel",ownerState:f},p,{children:d===g.value&&n}))}))},12572:(e,t,a)=>{a.d(t,{c:()=>s});var l=a(0),o=a(31152),n=a(46712),r=a(83068);const c=(0,a(10099).c)("MuiBox",["root"]),i=(0,n.c)(),s=(0,l.c)({themeId:r.c,defaultTheme:i,defaultClassName:c.root,generateClassName:o.c.generate})}}]);
//# sourceMappingURL=7472.2f79c05c.chunk.js.map