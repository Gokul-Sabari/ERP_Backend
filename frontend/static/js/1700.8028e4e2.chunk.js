"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[1700],{84968:(e,l,a)=>{a.d(l,{c:()=>p});var n=a(30800),d=a(69060),i=a(99904),t=a(85624),r=a(33856),o=a(58612),s=a(27454),c=a(700),u=a(53248),v=a(29504),m=a(5930),x=a(39308),h=a(82496);const p=e=>{let{dataArray:l,columns:a,onClickFun:p}=e;const[g,j]=(0,d.useState)(0),[b,f]=(0,d.useState)(20),[y,N]=(0,d.useState)([]),S=g*b,_=S+b,F=(e=>{if(!y.length)return e;return[...e].sort(((e,l)=>{for(const a of y){const{columnId:n,direction:d}=a,i=e[n],t=l[n];if(i!==t)return"asc"===d?i>t?1:-1:i<t?1:-1}return 0}))})(l).slice(S,_),C=(e,l)=>{switch(l){case"number":return(0,x.SA)(e);case"date":return(0,x.uy)(e);case"string":return e;default:return""}};return(0,h.jsxs)("div",{children:[(0,h.jsx)(i.c,{component:t.c,sx:{maxHeight:550},children:(0,h.jsxs)(r.c,{stickyHeader:!0,size:"small",children:[(0,h.jsx)(o.c,{children:(0,h.jsx)(s.c,{children:a.map(((e,l)=>{var a;return((0,x.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,x.Qr)(null===e||void 0===e?void 0:e.isVisible,1))&&(0,h.jsx)(c.c,{className:"fa-13 fw-bold border-end border-top",style:{backgroundColor:"#EDF0F7"},sortDirection:!!y.some((l=>l.columnId===e.Field_Name))&&y.find((l=>l.columnId===e.Field_Name)).direction,children:(0,h.jsx)(u.c,{active:y.some((l=>l.columnId===e.Field_Name)),direction:y.some((l=>l.columnId===e.Field_Name))?y.find((l=>l.columnId===e.Field_Name)).direction:"asc",onClick:()=>(e=>{const l=y.find((l=>l.columnId===e));if(l){const a="asc"===l.direction;N(y.map((l=>l.columnId===e?(0,n.c)((0,n.c)({},l),{},{direction:a?"desc":"asc"}):l)))}else N([...y,{columnId:e,direction:"asc"}])})(e.Field_Name),children:null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.replace(/_/g," ")})},l)}))})}),(0,h.jsx)(v.c,{children:F.map(((e,l)=>(0,h.jsx)(s.c,{children:a.map((a=>Object.entries(e).map((n=>{let[d,i]=n;return a.Field_Name===d&&((0,x.Qr)(null===a||void 0===a?void 0:a.Defult_Display,1)||(0,x.Qr)(null===a||void 0===a?void 0:a.isVisible,1))&&(0,h.jsx)(c.c,{className:"fa-13 border-end",onClick:()=>p?p(e):console.log("Function not supplied"),children:C(i,null===a||void 0===a?void 0:a.Fied_Data)},a+l)}))))},l)))})]})}),(0,h.jsx)("div",{className:"p-2",children:(0,h.jsx)(m.c,{component:"div",count:l.length,page:g,onPageChange:(e,l)=>{j(l)},rowsPerPage:b,onRowsPerPageChange:e=>{f(parseInt(e.target.value,10)),j(0)},rowsPerPageOptions:[20,50,100,200,500],labelRowsPerPage:"Rows per page",showFirstButton:!0,showLastButton:!0})})]})}},68392:(e,l,a)=>{a.d(l,{c:()=>b});var n=a(30800),d=a(69060),i=a(5548),t=a(82656),r=a(26773),o=a(4488),s=a(43692),c=a(85624),u=a(78092),v=a(90048),m=a(89e3),x=a(12120),h=a(58560),p=a(56480),g=a(1908),j=a(82496);const b=e=>{let{CompanyId:l,refresh:a,columns:b,ReportId:f}=e;const[y,N]=(0,d.useState)([]),[S,_]=(0,d.useState)(!1),[F,C]=(0,d.useState)(!1);(0,d.useEffect)((()=>{N([...b])}),[b,S]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(i.c,{size:"small",onClick:()=>C((e=>!e)),children:(0,j.jsx)(x.c,{})}),(0,j.jsxs)(t.c,{open:F,onClose:()=>C(!1),fullWidth:!0,maxWidth:"lg",children:[(0,j.jsx)(r.c,{children:"Column Visiblity Settings"}),(0,j.jsx)(o.c,{children:(0,j.jsx)("div",{className:"row",children:null===y||void 0===y?void 0:y.map(((e,l)=>(0,j.jsx)("div",{className:"col-lg-4 col-md-6 p-2",children:(0,j.jsxs)(s.c,{component:c.c,className:"p-2 d-flex justify-content-between align-items-center flex-wrap ".concat(l%2!==0?"bg-light":""),children:[(0,j.jsxs)("div",{className:"d-flex justify-content-between align-items-center flex-wrap",children:[(0,j.jsx)(u.c,{checked:Boolean(null===e||void 0===e?void 0:e.Defult_Display)||Boolean(null===e||void 0===e?void 0:e.isVisible),disabled:Boolean(null===e||void 0===e?void 0:e.Defult_Display),onChange:l=>N((a=>a.map((a=>a.Field_Id===(null===e||void 0===e?void 0:e.Field_Id)?(0,n.c)((0,n.c)({},a),{},{isVisible:l.target.checked?1:0}):a))))}),(0,j.jsx)("h6",{className:"fa-13 mb-0 fw-bold ",children:null===e||void 0===e?void 0:e.Field_Name})]}),(0,j.jsx)("input",{type:"number",value:Number(null===e||void 0===e?void 0:e.OrderBy)?null===e||void 0===e?void 0:e.OrderBy:"",onChange:l=>N((a=>a.map((a=>a.Field_Id===(null===e||void 0===e?void 0:e.Field_Id)?(0,n.c)((0,n.c)({},a),{},{OrderBy:l.target.value}):a)))),label:"Order Value",className:"mt-2 p-1 border-0 cus-inpt",style:{width:"80px"},placeholder:"Order"})]})},l)))})}),(0,j.jsxs)(v.c,{className:"d-flex justify-content-between",children:[(0,j.jsx)(m.c,{onClick:()=>_((e=>!e)),variant:"outlined",startIcon:(0,j.jsx)(h.c,{}),children:"reset"}),(0,j.jsxs)("span",{children:[(0,j.jsx)(m.c,{onClick:()=>C(!1),color:"error",children:"Cancel"}),(0,j.jsx)(m.c,{onClick:()=>{C(!1),(0,g.q)({address:"reports/tallyReports/qpay/columnVisiblity",method:"POST",bodyData:{dataArray:y,CompanyId:l,ReportId:f||1}}).then((e=>{e.success?p.m4.success(e.message):p.m4.error(e.message)})).catch((e=>console.error(e))).finally((()=>{a&&a()}))},variant:"outlined",children:"Save"})]})]})]})]})}},84080:(e,l,a)=>{a.r(l),a.d(l,{default:()=>H});var n=a(30800),d=a(69060),i=a(71448),t=a(52924),r=a(44380),o=a(43692),s=a(36852),c=a(78092),u=a(3358),v=a(5548),m=a(12572),x=a(15786),h=a(82656),p=a(4488),g=a(90048),j=a(89e3),b=a(68424),f=a(39504),y=a(61988),N=a(74912),S=a(18256),_=a(29720),F=a(61584),C=a(98944),w=a(39308),A=a(60476),D=a(82496);const k=e=>{let{dataArray:l}=e;const[a,n]=(0,d.useState)([]);(0,d.useEffect)((()=>{const e=[{min:0,max:5e3,data:[]},{min:5e3,max:1e4,data:[]},{min:1e4,max:2e4,data:[]},{min:2e4,max:5e4,data:[]},{min:5e4,max:1e5,data:[]},{min:1e5,max:2e5,data:[]},{min:2e5,max:5e5,data:[]},{min:5e5,max:1e6,data:[]},{min:1e6,max:15e5,data:[]},{min:15e5,max:2e6,data:[]},{min:2e6,max:1e15,data:[]}];l.forEach((l=>{const a=Number(l.Sales_Amount),n=e.findIndex((e=>a>e.min&&a<=e.max));-1!==n&&e[n].data.push(l)})),n(e)}),[l]);const i=e=>{var n,i,t,r;let{o:o,i:s}=e;const[c,u]=(0,d.useState)(!1);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("tr",{onClick:()=>u((e=>!e)),className:"hov",children:[(0,D.jsx)("td",{className:"fa-13 border text-center hov-bg",children:s+1}),(0,D.jsx)("td",{className:"fa-13 border text-center hov-bg",children:a[s+1]?(0,w.SA)(null===o||void 0===o?void 0:o.min)+" - "+(0,w.SA)(null===o||void 0===o?void 0:o.max):"< "+(null===o||void 0===o?void 0:o.min.toString())}),(0,D.jsx)("td",{className:"fa-13 border text-center hov-bg blue-text",children:null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.length}),(0,D.jsxs)("td",{className:"fa-13 border text-center hov-bg",children:[(0,w.SA)((null===o||void 0===o||null===(i=o.data)||void 0===i?void 0:i.length)/(null===l||void 0===l?void 0:l.length)*100),"%"]}),(0,D.jsx)("td",{className:"fa-13 border text-center hov-bg",children:0===o.data.length?0:((null===o||void 0===o||null===(t=o.data)||void 0===t?void 0:t.reduce(((e,l)=>e+l.Sales_Count||0),0))/o.data.length).toFixed(2)}),(0,D.jsx)("td",{className:"fa-13 border text-center hov-bg",children:0===o.data.length?0:((null===o||void 0===o||null===(r=o.data)||void 0===r?void 0:r.reduce(((e,l)=>e+l.Freq_Days||0),0))/o.data.length).toFixed(2)})]}),(0,D.jsx)(A.c,{in:c,unmountOnExit:!0,children:(0,D.jsx)("tr",{children:(0,D.jsx)("td",{colSpan:6})})})]})};return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)("div",{className:"px-3 d-flex align-items-center justify-content-center flex-column py-2",children:[(0,D.jsx)(C.e,{xAxis:[{scaleType:"band",data:null===a||void 0===a?void 0:a.map(((e,l)=>a[l+1]?"> "+(0,w.SA)(null===e||void 0===e?void 0:e.max):"< "+(null===e||void 0===e?void 0:e.min)))}],series:[{data:null===a||void 0===a?void 0:a.map((e=>{var l;return null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.length})),label:"Parties",color:"skyblue"}],height:400,barLabel:"value",borderRadius:6}),(0,D.jsx)("div",{className:"table-responsive w-100",children:(0,D.jsxs)("table",{className:"table",children:[(0,D.jsx)("thead",{children:(0,D.jsx)("tr",{children:["Sno","Amount-Range","Parties","Percentage","Sales Count (Avg)","Frequency Days (Avg)"].map((e=>(0,D.jsx)("th",{className:"border fa-14 text-center",style:{backgroundColor:"#EDF0F7"},children:e},e)))})}),(0,D.jsxs)("tbody",{children:[a.map(((e,l)=>(0,D.jsx)(i,{o:e,i:l},l))),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border"}),(0,D.jsx)("td",{className:"border"}),(0,D.jsx)("td",{className:"fa-13 border text-center",children:(0,w.SA)(null===a||void 0===a?void 0:a.reduce(((e,l)=>{var a;return e+(null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a.length)}),0))}),(0,D.jsxs)("td",{className:"fa-13 border text-center",children:[(0,w.SA)(null===a||void 0===a?void 0:a.reduce(((e,a)=>{var n;return e+(null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.length)/(null===l||void 0===l?void 0:l.length)*100}),0)),"%"]}),(0,D.jsx)("td",{className:"fa-13 border text-center",children:(0,w.SA)((null===l||void 0===l?void 0:l.length)/(null===l||void 0===l?void 0:l.reduce(((e,l)=>e+(Number(null===l||void 0===l?void 0:l.Sales_Count)||0)),0))*100)}),(0,D.jsx)("td",{className:"fa-13 border text-center",children:(0,w.SA)((null===l||void 0===l?void 0:l.length)/(null===l||void 0===l?void 0:l.reduce(((e,l)=>e+(Number(null===l||void 0===l?void 0:l.Freq_Days)||0)),0))*100)})]})]})]})})]})})};var I=a(2509);const P=e=>{let{dataArray:l,columns:a,filters:i}=e;const[t,r]=(0,d.useState)([]),[o,s]=(0,d.useState)(!1),[c,u]=(0,d.useState)([]),[v,m]=(0,d.useState)({group:localStorage.getItem("qPayGroup")||""}),x=e=>e?e.trim().toLowerCase():"";(0,d.useEffect)((()=>{const e=Array.isArray(i[v.group])?i[v.group]:[];u(e)}),[i,v.group]),(0,d.useEffect)((()=>{const e=[{min:0,max:5,data:[]},{min:5,max:10,data:[]},{min:10,max:15,data:[]},{min:15,max:20,data:[]},{min:20,max:30,data:[]},{min:30,max:40,data:[]},{min:40,max:60,data:[]},{min:60,max:1e4,data:[]}];l.forEach((l=>{const a=Number(l.Q_Pay_Days),n=e.findIndex((e=>a>e.min&&a<=e.max));-1!==n&&e[n].data.push(l)})),r(e)}),[l,o]);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{className:"col-xxl-3 col-lg-4 col-md-6 col-sm-8",children:(0,D.jsxs)("select",{className:"cus-inpt w-auto border",value:v.group,onChange:e=>{m((l=>(0,n.c)((0,n.c)({},l),{},{group:e.target.value}))),localStorage.setItem("qPayGroup",e.target.value)},children:[(0,D.jsx)("option",{value:"",children:"Select Group By"}),null===a||void 0===a?void 0:a.map(((e,l)=>{var a;return"string"===(null===e||void 0===e?void 0:e.Fied_Data)&&(0,D.jsx)("option",{value:null===e||void 0===e?void 0:e.Field_Name,children:null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.replace(/_/g," ")},l)}))]})}),""===(null===v||void 0===v?void 0:v.group)||0===c.length?(0,D.jsxs)("div",{className:"d-flex justify-content-around align-items-center flex-wrap px-3 py-2",children:[(0,D.jsx)("div",{className:"table-responsive",children:(0,D.jsxs)("table",{className:"table",children:[(0,D.jsx)("thead",{children:(0,D.jsx)("tr",{children:["Sno","Day-Range","Parties","Percentage"].map((e=>(0,D.jsx)("th",{className:"border fa-15",style:{backgroundColor:"#EDF0F7"},children:e},e)))})}),(0,D.jsxs)("tbody",{children:[t.map(((e,a)=>{var n,d,i,r;return(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"fa-15 border text-center",children:a+1}),(0,D.jsx)("td",{className:"fa-15 border text-center",children:t[a+1]?(null===(n=(null===e||void 0===e?void 0:e.min)+1)||void 0===n?void 0:n.toString())+" - "+(null===e||void 0===e||null===(d=e.max)||void 0===d?void 0:d.toString()):"< "+(null===e||void 0===e?void 0:e.min.toString())}),(0,D.jsx)("td",{className:"fa-15 border text-center",children:null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.length}),(0,D.jsx)("td",{className:"fa-15 border text-center",children:(0,w.SA)((null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.length)/(null===l||void 0===l?void 0:l.length)*100)})]},a)})),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border"}),(0,D.jsx)("td",{className:"border"}),(0,D.jsx)("td",{className:"fa-13 border text-center",children:(0,w.SA)(null===t||void 0===t?void 0:t.reduce(((e,l)=>{var a;return e+(null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a.length)}),0))}),(0,D.jsx)("td",{className:"fa-13 border text-center",children:(0,w.SA)(null===t||void 0===t?void 0:t.reduce(((e,a)=>{var n;return e+(null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.length)/(null===l||void 0===l?void 0:l.length)*100}),0))})]})]})]})}),(0,D.jsxs)("div",{className:"d-flex align-items-center flex-column overflow-scroll",children:[(0,D.jsx)("h5",{children:"Q-Pay Days"}),(0,D.jsx)(I.i,{series:[{data:null===t||void 0===t?void 0:t.map(((e,a)=>{var n,d,i;return{label:t[a+1]?(0,w.SA)(null===e||void 0===e?void 0:e.min)+"-"+(0,w.SA)(null===e||void 0===e?void 0:e.max)+"("+(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.length)+")":"< "+(0,w.SA)(null===e||void 0===e?void 0:e.min)+"("+(null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.length)+")",value:((null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.length)/(null===l||void 0===l?void 0:l.length)*100).toFixed(2),color:(0,w.oX)()}})),arcLabel:e=>"".concat(e.label),arcLabelMinAngle:35}],width:570,height:400,title:"QPay Days"}),(0,D.jsx)(j.c,{onClick:()=>s((e=>!e)),children:"Change color"})]})]}):(0,D.jsx)(D.Fragment,{children:(0,D.jsx)("div",{className:"cus-grid mt-3",children:c.map(((e,l)=>{var a;return(0,D.jsxs)("div",{className:"table-responsive grid-card bg-white border",children:[(0,D.jsxs)("h6",{className:"fw-bold text-muted d-flex justify-content-between",children:[null===(a=String(e))||void 0===a?void 0:a.toUpperCase(),(0,D.jsx)("span",{children:(0,w.SA)(null===t||void 0===t?void 0:t.reduce(((l,a)=>{var n;return l+(null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.reduce(((l,a)=>x(a[v.group])===x(e)?l+1:l),0))}),0))})]}),(0,D.jsxs)("table",{className:"table",children:[(0,D.jsx)("thead",{children:(0,D.jsx)("tr",{children:["Sno","Day-Range","Parties","Percentage"].map((e=>(0,D.jsx)("th",{className:"border fa-14",style:{backgroundColor:"#EDF0F7"},children:e},e)))})}),(0,D.jsx)("tbody",{children:t.map(((l,a)=>{var n,d,i,r;return(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"fa-15 border text-center",children:a+1}),(0,D.jsx)("td",{className:"fa-15 border text-center",children:t[a+1]?(null===(n=(null===l||void 0===l?void 0:l.min)+1)||void 0===n?void 0:n.toString())+" - "+(null===l||void 0===l||null===(d=l.max)||void 0===d?void 0:d.toString()):"< "+(null===l||void 0===l?void 0:l.min.toString())}),(0,D.jsx)("td",{className:"fa-15 border text-center",children:null===l||void 0===l||null===(i=l.data)||void 0===i?void 0:i.reduce(((l,a)=>x(a[v.group])===x(e)?l+1:l),0)}),(0,D.jsx)("td",{className:"fa-15 border text-center",children:(0,w.SA)((null===l||void 0===l||null===(r=l.data)||void 0===r?void 0:r.reduce(((l,a)=>x(a[v.group])===x(e)?l+1:l),0))/(null===t||void 0===t?void 0:t.reduce(((l,a)=>{var n;return l+(null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.reduce(((l,a)=>x(a[v.group])===x(e)?l+1:l),0))}),0))*100)})]},a)}))})]})]},l)}))})})]})};var E=a(84968),O=a(68392),B=a(41978);const L=(e,l)=>{switch(l){case"number":return(0,w.SA)(e);case"date":return(0,w.uy)(e);case"string":return e;default:return""}},Q=e=>{let{dataArray:l,columns:a}=e;const[i,t]=(0,d.useState)([]);(0,d.useEffect)((()=>{const e=[...a].filter((e=>(0,w.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,w.Qr)(null===e||void 0===e?void 0:e.isVisible,1))).map((e=>{var l,a;return(0,n.c)({header:null===e||void 0===e||null===(l=e.Field_Name)||void 0===l?void 0:l.replace(/_/g," "),accessorKey:null===e||void 0===e?void 0:e.Field_Name,sortable:!0,size:150,aggregationFn:null!==e&&void 0!==e&&null!==(a=e.Field_Name)&&void 0!==a&&a.includes("mount")?"sum":"number"===(null===e||void 0===e?void 0:e.Fied_Data)?"mean":"uniqueCount",AggregatedCell:e=>{let{cell:l}=e;return(0,D.jsx)("div",{className:"blue-text text-center float-end w-100",children:(0,w.SA)(l.getValue())})},Cell:l=>{let{cell:a}=l;return(0,D.jsx)("p",{className:"m-0 text-center fa-14 w-100 ",children:L(a.getValue(),null===e||void 0===e?void 0:e.Fied_Data)})}},((e,l,a)=>{switch(l){case"number":return{filterVariant:"range",filterFn:"between"};case"date":case"string":return{filterVariant:"text"};default:return""}})(null===e||void 0===e||e.Field_Name,null===e||void 0===e?void 0:e.Fied_Data))}));t(e)}),[a]);const r=(0,B.g$)({columns:i,data:l||[],enableColumnResizing:!0,enableGrouping:!0,enableStickyHeader:!0,enableStickyFooter:!0,enableColumnOrdering:!0,enableRowNumbers:!1,initialState:{density:"compact",pagination:{pageIndex:0,pageSize:100},sorting:[{id:"Q_Pay_Days"}]},muiToolbarAlertBannerChipProps:{color:"primary"},muiTableContainerProps:{sx:{maxHeight:"64vh",minHeight:"56vh"}}});return(0,D.jsx)(B._Y,{table:r})};var R=a(56480),V=a(51560),z=a(89796),T=a(1908);const q=(0,D.jsx)(b.c,{fontSize:"small"}),G=(0,D.jsx)(f.c,{fontSize:"small"}),H=()=>{const e=(0,V.i6)(),l=["LIST","Q-PAY BASED","SALES VALUE BASED"],[a,b]=(0,d.useState)([]),[f,C]=(0,d.useState)([]),[A,I]=(0,d.useState)(!1),[B,L]=(0,d.useState)({zeros:!1,company:2,consolidate:1,view:"LIST",filterDialog:!1,displayGrouping:!1}),[H,M]=(0,d.useState)([]),[W,Y]=(0,d.useState)([]),[U,$]=(0,d.useState)({}),[K,X]=(0,d.useState)(f),[Z,J]=(0,d.useState)([]);(0,d.useEffect)((()=>{Y(null===H||void 0===H?void 0:H.sort(((e,l)=>null!==e&&void 0!==e&&e.OrderBy&&null!==l&&void 0!==l&&l.OrderBy?(null===e||void 0===e?void 0:e.OrderBy)-(null===l||void 0===l?void 0:l.OrderBy):(null===l||void 0===l?void 0:l.OrderBy)-(null===e||void 0===e?void 0:e.OrderBy))))}),[H]),(0,d.useEffect)((()=>{b([]),(0,T.q)({address:"reports/tallyReports/qPay?Company_Id=".concat(null===B||void 0===B?void 0:B.company,"&Consolidate=").concat(null===B||void 0===B?void 0:B.consolidate)}).then((e=>{e.success&&b(e.data)})).catch((e=>console.error(e)))}),[null===B||void 0===B?void 0:B.company,null===B||void 0===B?void 0:B.consolidate,A]),(0,d.useEffect)((()=>{const e=[...a],l=B.zeros?e:e.filter((e=>null===e||void 0===e?void 0:e.Q_Pay_Days));C(l)}),[a,B.zeros]),(0,d.useEffect)((()=>{(0,T.q)({address:"reports/tallyReports/qpay/columnVisiblity?CompanyId=".concat(B.company,"&Report_Type_Id=").concat(Boolean(null===B||void 0===B?void 0:B.consolidate)?1:2)}).then((e=>{var l;e.success&&(null===e||void 0===e||null===(l=e.data)||void 0===l||l.sort(((e,l)=>{var a;return null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.localeCompare(null===l||void 0===l?void 0:l.Field_Name)})),M(e.data))})).catch((e=>console.error(e)))}),[B.company,null===B||void 0===B?void 0:B.consolidate,A]),(0,d.useEffect)((()=>{ne()}),[U]),(0,d.useEffect)((()=>{const e=Object.keys(U).length>0?K:f,l=null===e||void 0===e?void 0:e.reduce(((e,l)=>null!==l&&void 0!==l&&l.Ledger_Tally_Id?[...e,null===l||void 0===l?void 0:l.Ledger_Tally_Id]:e),[]);J(l)}),[U,f,K]);const ee=l=>{if(Array.isArray(l)&&null!==l&&void 0!==l&&l.length){const a=null===l||void 0===l?void 0:l.reduce(((e,l)=>l?e?"".concat(e,",").concat(l):"".concat(l):e),"");e("transaction",{state:{Ledger_Tally_Id:a,isObj:!1,rowDetails:l,company:B.company,preFilters:U}})}else(0,w.Y9)(l)&&(0,w.Q$)(l.Ledger_Tally_Id)?e("transaction",{state:{Ledger_Tally_Id:l.Ledger_Tally_Id,isObj:!0,rowDetails:l,company:B.company,preFilters:U}}):R.m4.error("Ledger Id not available")},le=e=>{const l=Object.keys(U).length>0?K:f;switch(e){case"LIST":return(0,D.jsx)(E.c,{dataArray:l,columns:W,onClickFun:ee});case"Q-PAY BASED":return(0,D.jsx)(P,{dataArray:l,columns:W,filters:U});case"SALES VALUE BASED":return(0,D.jsx)(k,{dataArray:l});default:D.Fragment}},ae=(e,l)=>{$((a=>(0,n.c)((0,n.c)({},a),{},{[e]:l})))},ne=()=>{let e=[...f];for(const a of W)if(U[a.Field_Name])if("range"===U[a.Field_Name].type){const{min:l,max:n}=U[a.Field_Name];e=e.filter((e=>{const d=e[a.Field_Name];return(void 0===l||d>=l)&&(void 0===n||d<=n)}))}else if("date"===U[a.Field_Name].type){const{start:l,end:n}=U[a.Field_Name].value;e=e.filter((e=>{const d=new Date(e[a.Field_Name]);return(void 0===l||d>=new Date(l))&&(void 0===n||d<=new Date(n))}))}else if(Array.isArray(U[a.Field_Name])){var l;e=(null===(l=U[a.Field_Name])||void 0===l?void 0:l.length)>0?e.filter((e=>U[a.Field_Name].includes(e[a.Field_Name].toLowerCase().trim()))):e}X(e)},de=e=>{const{Field_Name:l,Fied_Data:a}=e;var d,o,s,c,u,v,m,x,h,p;if("number"===a)return(0,D.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,D.jsx)("input",{placeholder:"Min",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(d=null===(o=U[l])||void 0===o?void 0:o.min)&&void 0!==d?d:"",onChange:e=>ae(l,(0,n.c)((0,n.c)({type:"range"},U[l]),{},{min:e.target.value?parseFloat(e.target.value):void 0}))}),(0,D.jsx)("input",{placeholder:"Max",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(s=null===(c=U[l])||void 0===c?void 0:c.max)&&void 0!==s?s:"",onChange:e=>ae(l,(0,n.c)((0,n.c)({type:"range"},U[l]),{},{max:e.target.value?parseFloat(e.target.value):void 0}))})]});if("date"===a)return(0,D.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,D.jsx)("input",{placeholder:"Start Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(u=null===(v=U[l])||void 0===v||null===(m=v.value)||void 0===m?void 0:m.start)&&void 0!==u?u:"",onChange:e=>{var a;return ae(l,{type:"date",value:(0,n.c)((0,n.c)({},null===(a=U[l])||void 0===a?void 0:a.value),{},{start:e.target.value||void 0})})}}),(0,D.jsx)("input",{placeholder:"End Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(x=null===(h=U[l])||void 0===h||null===(p=h.value)||void 0===p?void 0:p.end)&&void 0!==x?x:"",onChange:e=>{var a;return ae(l,{type:"date",value:(0,n.c)((0,n.c)({},null===(a=U[l])||void 0===a?void 0:a.value),{},{end:e.target.value||void 0})})}})]});if("string"===a){const e=[...new Set(f.map((e=>{var a,n;return null===(a=e[l])||void 0===a||null===(n=a.toLowerCase())||void 0===n?void 0:n.trim()})))];return(0,D.jsx)(i.c,{multiple:!0,id:"".concat(l,"-filter"),options:e,disableCloseOnSelect:!0,getOptionLabel:e=>e,value:U[l]||[],onChange:(e,a)=>ae(l,a),renderOption:(e,l,a)=>{let{selected:d}=a;return(0,D.jsxs)("li",(0,n.c)((0,n.c)({},e),{},{children:[(0,D.jsx)(t.c,{icon:q,checkedIcon:G,style:{marginRight:8},checked:d}),l]}))},isOptionEqualToValue:(e,l)=>e===l,renderInput:e=>(0,D.jsx)(r.c,(0,n.c)((0,n.c)({},e),{},{label:l,placeholder:"Select ".concat(null===l||void 0===l?void 0:l.replace(/_/g," "))}))})}};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(o.c,{children:[(0,D.jsx)("div",{className:"p-2 border-bottom fa-16 fw-bold",children:(0,D.jsx)("span",{className:"text-uppercase ps-3",children:"Q-Pay Report"})}),(0,D.jsxs)("div",{className:"d-flex flex-wrap justify-content-between p-2",children:[(0,D.jsxs)("span",{children:[(0,D.jsx)(s.c,{control:(0,D.jsx)(c.c,{checked:!B.zeros,onChange:e=>L((l=>(0,n.c)((0,n.c)({},l),{},{zeros:!e.target.checked})))}),label:"Remove Zeros",labelPlacement:"start",className:" fw-bold text-primary"}),(0,D.jsx)(s.c,{control:(0,D.jsx)(c.c,{checked:1===B.consolidate,onChange:e=>L((l=>(0,n.c)((0,n.c)({},l),{},{consolidate:e.target.checked?1:0})))}),label:"Consolidate",labelPlacement:"start",className:" fw-bold text-primary"}),(0,D.jsx)(s.c,{control:(0,D.jsx)(c.c,{checked:B.displayGrouping,onChange:e=>L((l=>(0,n.c)((0,n.c)({},l),{},{displayGrouping:e.target.checked})))}),label:"Grouping",labelPlacement:"start",className:" fw-bold text-primary"})]}),(0,D.jsxs)("span",{children:[(0,D.jsx)(O.c,{CompanyId:B.company,columns:W,refresh:()=>{I((e=>!e))},ReportId:Boolean(null===B||void 0===B?void 0:B.consolidate)?1:2}),(0,D.jsx)(u.c,{title:"Open Sales List",children:(0,D.jsx)(v.c,{onClick:()=>ee(Z),size:"small",children:(0,D.jsx)(z.AO1,{})})}),(0,D.jsx)(u.c,{title:"Filters",children:(0,D.jsx)(v.c,{onClick:()=>L((e=>(0,n.c)((0,n.c)({},e),{},{filterDialog:!0}))),size:"small",className:"d-md-none d-inline",children:(0,D.jsx)(y.c,{})})})]})]}),B.displayGrouping?(0,D.jsx)(Q,{dataArray:f,columns:W}):(0,D.jsxs)("div",{className:"row ",children:[(0,D.jsx)("div",{className:"col-xxl-10 col-lg-9 col-md-8",children:(0,D.jsx)("div",{className:"p-2",children:(0,D.jsxs)(S.cp,{value:B.view,children:[(0,D.jsx)(m.c,{sx:{borderBottom:1,borderColor:"divider"},children:(0,D.jsx)(_.c,{indicatorColor:"transparant",onChange:(e,l)=>L((e=>(0,n.c)((0,n.c)({},e),{},{view:l}))),variant:"scrollable",scrollButtons:"auto",allowScrollButtonsMobile:!0,children:l.map((e=>(0,D.jsx)(x.c,{sx:B.view===e?{backgroundColor:"#c6d7eb"}:{},label:e,value:e},e)))})}),l.map((e=>(0,D.jsx)(F.c,{value:e,sx:{px:0,py:2},children:le(B.view)},e)))]})})}),(0,D.jsxs)("div",{className:"col-xxl-2 col-lg-3 col-md-4 d-none d-md-block",children:[(0,D.jsxs)("h5",{className:"d-flex justify-content-between px-2",children:["Filters",(0,D.jsx)(u.c,{title:"Clear Filters",children:(0,D.jsx)(v.c,{size:"small",onClick:()=>$({}),children:(0,D.jsx)(N.c,{})})})]}),(0,D.jsxs)("div",{className:"border rounded-3 ",style:{maxHeight:"70vh",overflow:"auto"},children:[H.map(((e,l)=>{var a;return((0,w.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,w.Qr)(null===e||void 0===e?void 0:e.isVisible,1))&&(0,D.jsxs)("div",{className:"py-3 px-3 hov-bg border-bottom",children:[(0,D.jsx)("label",{className:"mt-2 mb-1",children:null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.replace(/_/g," ")}),de(e)]},l)})),(0,D.jsx)("br",{})]})]})]})]}),(0,D.jsxs)(h.c,{open:null===B||void 0===B?void 0:B.filterDialog,onClose:()=>L((e=>(0,n.c)((0,n.c)({},e),{},{filterDialog:!1}))),fullWidth:!0,maxWidth:"sm",children:[(0,D.jsxs)(p.c,{children:[(0,D.jsxs)("h5",{className:"d-flex justify-content-between px-2",children:["Filters",(0,D.jsx)(u.c,{title:"Clear Filters",children:(0,D.jsx)(v.c,{size:"small",onClick:()=>$({}),children:(0,D.jsx)(N.c,{})})})]}),(0,D.jsxs)("div",{className:"border rounded-3 ",style:{maxHeight:"70vh",overflow:"auto"},children:[H.map(((e,l)=>{var a;return((0,w.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,w.Qr)(null===e||void 0===e?void 0:e.isVisible,1))&&(0,D.jsxs)("div",{className:"py-3 px-3 hov-bg border-bottom",children:[(0,D.jsx)("label",{className:"mt-2 mb-1",children:null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.replace(/_/g," ")}),de(e)]},l)})),(0,D.jsx)("br",{})]})]}),(0,D.jsx)(g.c,{children:(0,D.jsx)(j.c,{onClick:()=>L((e=>(0,n.c)((0,n.c)({},e),{},{filterDialog:!1}))),color:"error",children:"close"})})]})]})}}}]);
//# sourceMappingURL=1700.8028e4e2.chunk.js.map