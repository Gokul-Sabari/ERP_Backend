"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[2072],{42072:(e,a,l)=>{l.r(a),l.d(a,{default:()=>O});var t=l(69060),n=l(1908),r=l(39308),i=l(13724),m=l(71448),o=l(52924),u=l(44380),_=l(3358),s=l(5548),d=l(82656),c=l(4488),p=l(90048),y=l(89e3),N=l(26773),v=l(43692),b=l(85624),C=l(78092),D=l(68424),x=l(39504),g=l(12120),h=l(74912),T=l(61988),j=l(59952),f=l(82496);const S=(0,f.jsx)(D.c,{fontSize:"small"}),F=(0,f.jsx)(x.c,{fontSize:"small"}),O=e=>{let{loadingOn:a,loadingOff:l,defaultGrouping:D="",groupingOption:x=!0}=e;const[O,B]=(0,t.useState)([]),[Q,k]=(0,t.useState)({}),[w,E]=(0,t.useState)(D),[P,G]=(0,t.useState)([]),[A,R]=(0,t.useState)(!1),[I,V]=(0,t.useState)(!1),[z,M]=(0,t.useState)({reqDate:(0,r.Q7)()}),L=j.M$.map(((e,a)=>({isVisible:a<11?1:0,Field_Name:null===e||void 0===e?void 0:e.Column_Name,Fied_Data:null===e||void 0===e?void 0:e.Data_Type,OrderBy:a+1,isEnabled:!0}))),[q,$]=(0,t.useState)(L);(0,t.useEffect)((()=>{(0,n.q)({address:`reports/itemGroup/stockInfo?\n            reqDate=${z.reqDate}`,loadingOn:a,loadingOff:l}).then((e=>{e.success&&B((0,r.dq)(e.data))})).catch((e=>console.error(e)))}),[z.reqDate,a,l]);const W=(0,t.useMemo)((()=>[...q].sort(((e,a)=>null!==e&&void 0!==e&&e.OrderBy&&null!==a&&void 0!==a&&a.OrderBy?(null===e||void 0===e?void 0:e.OrderBy)-(null===a||void 0===a?void 0:a.OrderBy):(null===a||void 0===a?void 0:a.OrderBy)-(null===e||void 0===e?void 0:e.OrderBy)))),[q]),H=(0,t.useMemo)((()=>W.filter((e=>((0,r.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,r.Qr)(null===e||void 0===e?void 0:e.isVisible,1))&&!0===e.isEnabled))),[W]),U=(0,t.useMemo)((()=>{const e=Object.keys(Q).length>0,a=!!w,l=e?P:O,t=a?(0,r.ui)(l,w):[],n=H.filter((e=>"number"===(0,r.MP)(e.Fied_Data))).map((e=>e.Field_Name)),i=t.map((e=>({...e,...Object.fromEntries(n.map((a=>{var l;return[a,null===e||void 0===e||null===(l=e.groupedData)||void 0===l?void 0:l.reduce(((e,l)=>(0,r.Q5)(e,(0,r.gH)(l[a])||0)),0)]})))})));return a?i:l}),[Q,O,P,w,H]);(0,t.useEffect)((()=>{K()}),[Q]);const J=(e,a)=>{k((l=>({...l,[e]:a})))},K=()=>{let e=[...O];for(const l of W)if(Q[l.Field_Name])if("range"===Q[l.Field_Name].type){const{min:a,max:t}=Q[l.Field_Name];e=e.filter((e=>{const n=e[l.Field_Name];return(void 0===a||n>=a)&&(void 0===t||n<=t)}))}else if("date"===Q[l.Field_Name].type){const{start:a,end:t}=Q[l.Field_Name].value;e=e.filter((e=>{const n=new Date(e[l.Field_Name]);return(void 0===a||n>=new Date(a))&&(void 0===t||n<=new Date(t))}))}else if(Array.isArray(Q[l.Field_Name])){var a;e=(null===(a=Q[l.Field_Name])||void 0===a?void 0:a.length)>0?e.filter((e=>{var a;return Q[l.Field_Name].includes(null===(a=e[l.Field_Name])||void 0===a?void 0:a.toLowerCase().trim())})):e}G(e)},X=e=>{const{Field_Name:a,Fied_Data:l}=e;var t,n,r,i,_,s,d,c,p,y;if("number"===l)return(0,f.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,f.jsx)("input",{placeholder:"Min",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(t=null===(n=Q[a])||void 0===n?void 0:n.min)&&void 0!==t?t:"",onChange:e=>J(a,{type:"range",...Q[a],min:e.target.value?parseFloat(e.target.value):void 0})}),(0,f.jsx)("input",{placeholder:"Max",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(r=null===(i=Q[a])||void 0===i?void 0:i.max)&&void 0!==r?r:"",onChange:e=>J(a,{type:"range",...Q[a],max:e.target.value?parseFloat(e.target.value):void 0})})]});if("date"===l)return(0,f.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,f.jsx)("input",{placeholder:"Start Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(_=null===(s=Q[a])||void 0===s||null===(d=s.value)||void 0===d?void 0:d.start)&&void 0!==_?_:"",onChange:e=>{var l;return J(a,{type:"date",value:{...null===(l=Q[a])||void 0===l?void 0:l.value,start:e.target.value||void 0}})}}),(0,f.jsx)("input",{placeholder:"End Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(c=null===(p=Q[a])||void 0===p||null===(y=p.value)||void 0===y?void 0:y.end)&&void 0!==c?c:"",onChange:e=>{var l;return J(a,{type:"date",value:{...null===(l=Q[a])||void 0===l?void 0:l.value,end:e.target.value||void 0}})}})]});if("string"===l){const e=[...new Set(O.map((e=>{var l,t;return null===(l=e[a])||void 0===l||null===(t=l.toLowerCase())||void 0===t?void 0:t.trim()})))];return(0,f.jsx)(m.c,{multiple:!0,id:`${a}-filter`,options:e,disableCloseOnSelect:!0,getOptionLabel:e=>e,value:Q[a]||[],onChange:(e,l)=>J(a,l),renderOption:(e,a,l)=>{let{selected:t}=l;return(0,f.jsxs)("li",{...e,children:[(0,f.jsx)(o.c,{icon:S,checkedIcon:F,style:{marginRight:8},checked:t}),a]})},isOptionEqualToValue:(e,a)=>e===a,renderInput:e=>(0,f.jsx)(u.c,{...e,label:a,placeholder:`Select ${a}`})})}},Y=()=>{R(!1),V(!1)};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i.cp,{title:"Item Wise",EnableSerialNumber:!0,headerFontSizePx:12,bodyFontSizePx:12,maxHeightOption:!0,ButtonArea:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(_.c,{title:"Column Visibility",children:(0,f.jsx)(s.c,{size:"small",onClick:()=>R(!0),children:(0,f.jsx)(g.c,{})})}),(0,f.jsx)(_.c,{title:"Clear Filters",children:(0,f.jsx)(s.c,{size:"small",onClick:()=>k({}),children:(0,f.jsx)(h.c,{})})}),(0,f.jsx)(_.c,{title:"Filters",children:(0,f.jsx)(s.c,{onClick:()=>V(!0),size:"small",children:(0,f.jsx)(T.c,{})})}),x&&(0,f.jsxs)("div",{className:"d-flex align-items-center flex-wrap",children:[(0,f.jsx)("span",{children:"Group-By: "}),(0,f.jsxs)("select",{className:"cus-inpt p-2 w-auto m-1",value:w,onChange:e=>E(e.target.value),children:[(0,f.jsx)("option",{value:"",children:"select group"}),H.filter((e=>"string"===(0,r.MP)(e.Fied_Data)&&"Ledger_Name"!==(null===e||void 0===e?void 0:e.Field_Name)&&e.isEnabled)).map(((e,a)=>(0,f.jsx)("option",{value:null===e||void 0===e?void 0:e.Field_Name,children:null===e||void 0===e?void 0:e.Field_Name},a)))]})]})]}),ExcelPrintOption:!0,dataArray:U,columns:w?H.filter((e=>U.length>0&&Object.keys(U[0]).includes(e.Field_Name)&&e.isEnabled)).map((e=>({...e,ColumnHeader:e.Field_Name}))):H.filter((e=>e.isEnabled)).map((e=>({...e,ColumnHeader:e.Field_Name}))),isExpendable:!!w,expandableComp:e=>{let{row:a}=e;return(0,f.jsx)(i.cp,{EnableSerialNumber:!0,headerFontSizePx:12,bodyFontSizePx:12,dataArray:(0,r.dq)(null===a||void 0===a?void 0:a.groupedData),columns:H.filter((e=>!(0,r.m2)(e.Field_Name,w)&&e.isEnabled))})}}),(0,f.jsxs)(d.c,{open:I,onClose:Y,maxWidth:"sm",fullWidth:!0,children:[(0,f.jsxs)(c.c,{children:[(0,f.jsxs)("h5",{className:"d-flex justify-content-between px-2",children:[(0,f.jsx)("span",{children:"Filters"}),(0,f.jsxs)("span",{children:[(0,f.jsx)(_.c,{title:"Column Visibility",children:(0,f.jsx)(s.c,{size:"small",onClick:()=>R(!0),children:(0,f.jsx)(g.c,{})})}),(0,f.jsx)(_.c,{title:"Clear Filters",children:(0,f.jsx)(s.c,{size:"small",onClick:()=>k({}),children:(0,f.jsx)(h.c,{})})})]})]}),(0,f.jsxs)("div",{className:"border rounded-3",children:[H.filter((e=>e.isEnabled)).map(((e,a)=>(0,f.jsxs)("div",{className:"py-3 px-3 hov-bg border-bottom",children:[(0,f.jsx)("label",{className:"mt-2 mb-1",children:null===e||void 0===e?void 0:e.Field_Name}),X(e)]},a))),(0,f.jsx)("br",{})]})]}),(0,f.jsx)(p.c,{children:(0,f.jsx)(y.c,{onClick:Y,color:"error",children:"Close"})})]}),(0,f.jsxs)(d.c,{open:A,onClose:()=>R(!1),maxWidth:"lg",fullWidth:!0,children:[(0,f.jsx)(N.c,{children:"Column Settings"}),(0,f.jsx)(c.c,{children:(0,f.jsx)("div",{className:"row",children:q.map(((e,a)=>(0,f.jsx)("div",{className:"col-lg-4 col-md-6 p-2",children:(0,f.jsxs)(v.c,{component:b.c,className:`p-2 d-flex justify-content-between align-items-center flex-wrap ${a%2!==0?"bg-light":""} ${e.isEnabled?"":"opacity-50"}`,children:[(0,f.jsxs)("div",{className:"d-flex justify-content-between align-items-center flex-wrap",children:[(0,f.jsx)(C.c,{checked:Boolean(null===e||void 0===e?void 0:e.isVisible)&&e.isEnabled,onChange:a=>e.isEnabled&&$((l=>l.map((l=>l.Field_Name===(null===e||void 0===e?void 0:e.Field_Name)?{...l,isVisible:a.target.checked?1:0}:l))))}),(0,f.jsxs)("h6",{className:"fa-13 mb-0 fw-bold",children:[e.Field_Name,!e.isEnabled&&(0,f.jsx)("span",{className:"text-muted small"})]})]}),(0,f.jsx)("input",{type:"number",value:(0,r.Q$)(null===e||void 0===e?void 0:e.OrderBy)?null===e||void 0===e?void 0:e.OrderBy:"",onChange:a=>e.isEnabled&&$((l=>l.map((l=>l.Field_Name===(null===e||void 0===e?void 0:e.Field_Name)?{...l,OrderBy:a.target.value}:l)))),disabled:!e.isEnabled,className:"mt-2 p-1 border-0 cus-inpt",style:{width:"80px"},placeholder:"Order"})]})},a)))})}),(0,f.jsxs)(p.c,{children:[(0,f.jsx)(y.c,{onClick:()=>{$(L)},variant:"outlined",children:"Reset"}),(0,f.jsx)(y.c,{onClick:()=>R(!1),color:"error",children:"Close"})]})]})]})}},59952:(e,a,l)=>{l.d(a,{M$:()=>r,__:()=>n,us:()=>t});const t=[{Column_Name:"Trans_Date",Data_Type:"date"},{Column_Name:"Group_Name",Data_Type:"string"},{Column_Name:"stock_item_name",Data_Type:"string"},{Column_Name:"OB_Bal_Qty",Data_Type:"number"},{Column_Name:"OB_Act_Qty",Data_Type:"number"},{Column_Name:"Pur_Qty",Data_Type:"number"},{Column_Name:"Sal_Qty",Data_Type:"number"},{Column_Name:"Bal_Qty",Data_Type:"number"},{Column_Name:"Bal_Act_Qty",Data_Type:"number"},{Column_Name:"Pur_Act_Qty",Data_Type:"number"},{Column_Name:"Sal_Act_Qty",Data_Type:"number"},{Column_Name:"Stock_Item",Data_Type:"string"},{Column_Name:"Group_ST",Data_Type:"string"},{Column_Name:"Bag",Data_Type:"string"},{Column_Name:"Stock_Group",Data_Type:"string"},{Column_Name:"Product_Rate",Data_Type:"number"},{Column_Name:"S_Sub_Group_1",Data_Type:"string"},{Column_Name:"Grade_Item_Group",Data_Type:"string"},{Column_Name:"Item_Name_Modified",Data_Type:"string"}],n=[{Column_Name:"Godown_Name",Data_Type:"string"},{Column_Name:"stock_item_name",Data_Type:"string"},{Column_Name:"Bal_Qty",Data_Type:"number"},{Column_Name:"CL_Value",Data_Type:"number"},{Column_Name:"OB_Bal_Qty",Data_Type:"number"},{Column_Name:"OB_Act_Qty",Data_Type:"number"},{Column_Name:"Pur_Qty",Data_Type:"number"},{Column_Name:"Sal_Qty",Data_Type:"number"},{Column_Name:"Act_Bal_Qty",Data_Type:"number"},{Column_Name:"Pur_Act_Qty",Data_Type:"number"},{Column_Name:"Sal_Act_Qty",Data_Type:"number"},{Column_Name:"Stock_Item",Data_Type:"string"},{Column_Name:"Group_ST",Data_Type:"string"},{Column_Name:"Bag",Data_Type:"string"},{Column_Name:"Stock_Group",Data_Type:"string"},{Column_Name:"Product_Rate",Data_Type:"number"},{Column_Name:"S_Sub_Group_1",Data_Type:"string"},{Column_Name:"Grade_Item_Group",Data_Type:"string"},{Column_Name:"Item_Name_Modified",Data_Type:"string"},{Column_Name:"CL_Rate",Data_Type:"number"}],r=[{Column_Name:"Group_Name",Data_Type:"string"},{Column_Name:"Brand",Data_Type:"string"},{Column_Name:"Group_ST",Data_Type:"string"},{Column_Name:"Stock_Group",Data_Type:"string"},{Column_Name:"S_Sub_Group_1",Data_Type:"string"},{Column_Name:"Grade_Item_Group",Data_Type:"string"},{Column_Name:"Trans_Date",Data_Type:"date"},{Column_Name:"OB_Bal_Qty",Data_Type:"number"},{Column_Name:"OB_Rate",Data_Type:"number"},{Column_Name:"OB_Value",Data_Type:"number"},{Column_Name:"Pur_Qty",Data_Type:"number"},{Column_Name:"Pur_Rate",Data_Type:"number"},{Column_Name:"Pur_value",Data_Type:"number"},{Column_Name:"Adj_Pur_Qty",Data_Type:"number"},{Column_Name:"Adj_Pur_Rate",Data_Type:"number"},{Column_Name:"Adj_Pur_value",Data_Type:"number"},{Column_Name:"IN_Qty",Data_Type:"number"},{Column_Name:"IN_Rate",Data_Type:"number"},{Column_Name:"IN_Value",Data_Type:"number"},{Column_Name:"Sal_Qty",Data_Type:"number"},{Column_Name:"Sal_Rate",Data_Type:"number"},{Column_Name:"Sal_value",Data_Type:"number"},{Column_Name:"Adj_Sal_Qty",Data_Type:"number"},{Column_Name:"Adj_Sal_Rate",Data_Type:"number"},{Column_Name:"Adj_Sal_value",Data_Type:"number"},{Column_Name:"OUT_Qty",Data_Type:"number"},{Column_Name:"Out_Rate",Data_Type:"number"},{Column_Name:"Out_Value",Data_Type:"number"},{Column_Name:"Expense_value",Data_Type:"number"},{Column_Name:"Act_Expense",Data_Type:"number"},{Column_Name:"Bal_Qty",Data_Type:"number"},{Column_Name:"CL_Rate",Data_Type:"number"},{Column_Name:"CL_Value",Data_Type:"number"},{Column_Name:"CR_CL_Rate",Data_Type:"number"},{Column_Name:"Pre_Qty",Data_Type:"number"},{Column_Name:"Pre_Rate",Data_Type:"number"},{Column_Name:"Pre_CL_Value",Data_Type:"number"}]}}]);
//# sourceMappingURL=2072.93bd81fb.chunk.js.map