"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[8804],{78688:(e,t,a)=>{a.d(t,{c:()=>u});var l=a(69060),s=a(3358),c=a(82656),r=a(26773),d=a(5548),o=a(4488),n=a(14499),i=a(82496);const u=e=>{const[t,a]=(0,l.useState)(!1),{url:u}=e,p=()=>{a(!1)};return(0,i.jsxs)("span",{children:[(0,i.jsx)(s.c,{title:"Tap to Open",children:(0,i.jsx)("span",{onClick:()=>{a(!0)},style:{cursor:"pointer"},children:e.children})}),(0,i.jsxs)(c.c,{open:t,onClose:p,fullWidth:!0,maxWidth:"lg",children:[(0,i.jsxs)(r.c,{className:"bg-dark text-white d-flex justify-content-between",children:[(0,i.jsx)("span",{children:"Image Preview"}),(0,i.jsx)(d.c,{onClick:p,children:(0,i.jsx)(n.c,{sx:{color:"white"}})})]}),(0,i.jsx)(o.c,{className:"bg-dark pb-4 d-flex align-items-center justify-content-center",children:(0,i.jsx)("img",{src:u,alt:"Preview",style:{maxWidth:"100%",maxHeight:"100%"}})})]})]})}},64568:(e,t,a)=>{a.d(t,{c:()=>s});var l=a(82496);const s=()=>(0,l.jsx)("span",{style:{color:"red",fontWeight:"bold",fontSize:"1em"},children:" *"})},58804:(e,t,a)=>{a.r(t),a.d(t,{default:()=>E});var l=a(30800),s=a(69060),c=a(89e3),r=a(5548),d=a(43692),o=a(85624),n=a(3358),i=a(84436),u=a(82656),p=a(26773),m=a(4488),h=a(90048),v=a(27664),x=a(82496);const j=(0,v.c)((0,x.jsx)("path",{d:"M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8zM5 19l3-4 2 3 3-4 4 5z"}),"AddPhotoAlternate");var _=a(86e3),g=a(87016),b=a(96064),P=a(79476),S=a(56480),f=a(78688),N=a(1908),C=a(39308),I=a(64568);const y={Product_Id:"",Product_Name:"",Short_Name:"",Product_Description:"",Brand:"",Product_Group:"",Pack_Id:"",UOM_Id:"",IS_Sold:"",Display_Order_By:"",HSN_Code:"",Gst_P:"",Cgst_P:"",Sgst_P:"",Igst_P:"",ERP_Id:""},w=e=>{let{row:t,children:a,openAction:r,reload:d,onCloseFun:o,loadingOn:n,loadingOff:i}=e;const[v,j]=(0,s.useState)([]),[_,g]=(0,s.useState)([]),[b,P]=(0,s.useState)([]),[f,w]=(0,s.useState)([]),[U,O]=(0,s.useState)(y),[k,E]=(0,s.useState)(!1),[D,G]=(0,s.useState)(!1);(0,s.useEffect)((()=>E(!!r)),[r]),(0,s.useEffect)((()=>{(0,C.CY)(t)?(O((e=>{let a=(0,l.c)({},e);return Object.entries(t).forEach((e=>{let[t,l]=e;a[t]=null!==l&&void 0!==l?l:""})),a})),G(!0),E(!0)):(O(y),G(!1))}),[t]),(0,s.useEffect)((()=>{(0,N.q)({address:"masters/uom"}).then((e=>{e.success&&j(e.data)})).catch((e=>console.error(e))),(0,N.q)({address:"masters/brand"}).then((e=>{e.success&&g(e.data)})).catch((e=>console.error(e))),(0,N.q)({address:"masters/products/packs"}).then((e=>{e.success&&P(e.data)})).catch((e=>console.error(e))),(0,N.q)({address:"masters/products/productGroups"}).then((e=>{e.success&&w(e.data)})).catch((e=>console.error(e)))}),[]);const M=[{label:"Product Name",elem:"input",placeholder:"Enter Product Name",event:e=>O((t=>(0,l.c)((0,l.c)({},t),{},{Product_Name:e.target.value}))),required:!0,value:U.Product_Name,max:100},{label:"Short Name",elem:"input",placeholder:"Enter Short Name",event:e=>O((t=>(0,l.c)((0,l.c)({},t),{},{Short_Name:e.target.value}))),value:U.Short_Name,max:100},{label:"Is Saleable",elem:"select",options:[{value:"",label:" - Select - ",disabled:!0,selected:!0},{value:0,label:"Not Salable"},{value:1,label:"Salable"}],event:e=>O((t=>(0,l.c)((0,l.c)({},t),{},{IS_Sold:e.target.value}))),value:U.IS_Sold},{label:"Brand",elem:"select",options:[{value:"",label:" - Select - ",disabled:!0,selected:!0},..._.map((e=>({value:Number(e.Brand_Id),label:e.Brand_Name})))],event:e=>O((t=>(0,l.c)((0,l.c)({},t),{},{Brand:e.target.value}))),value:U.Brand},{label:"Product Group",elem:"select",options:[{value:"",label:" - Select - ",disabled:!0,selected:!0},...f.map((e=>({value:Number(e.Pro_Group_Id),label:e.Pro_Group})))],event:e=>O((t=>(0,l.c)((0,l.c)({},t),{},{Product_Group:e.target.value}))),value:U.Product_Group},{label:"Pack",elem:"select",options:[{value:"",label:" - Select - ",disabled:!0,selected:!0},...b.map((e=>({value:Number(e.Pack_Id),label:e.Pack})))],event:e=>O((t=>(0,l.c)((0,l.c)({},t),{},{Pack_Id:e.target.value}))),value:U.Pack_Id},{label:"Unit Of Measurement",elem:"select",options:[{value:"",label:" - Select - ",disabled:!0,selected:!0},...v.map((e=>({value:Number(e.Unit_Id),label:e.Units})))],event:e=>O((t=>(0,l.c)((0,l.c)({},t),{},{UOM_Id:e.target.value}))),value:U.UOM_Id},{label:"HSN / SAC Code",elem:"input",placeholder:"Enter HSN / SAC",event:e=>O((t=>(0,l.c)((0,l.c)({},t),{},{HSN_Code:e.target.value}))),required:!0,value:U.HSN_Code},{label:"GST Percentage (%)",elem:"input",oninput:e=>(0,C.Gk)(e),placeholder:"Enter GST Percentage",event:e=>O((t=>(0,l.c)((0,l.c)({},t),{},{Gst_P:e.target.value}))),required:!0,value:U.Gst_P},{label:"Order By",elem:"input",oninput:e=>(0,C.Gk)(e),placeholder:"Enter list order number",event:e=>O((t=>(0,l.c)((0,l.c)({},t),{},{Display_Order_By:e.target.value}))),value:U.Display_Order_By},{label:"ERP ID",elem:"input",placeholder:"Enter ERP ID",event:e=>O((t=>(0,l.c)((0,l.c)({},t),{},{ERP_Id:e.target.value}))),value:U.ERP_Id},{label:"Product Description",elem:"textarea",event:e=>O((t=>(0,l.c)((0,l.c)({},t),{},{Product_Description:e.target.value}))),value:U.Product_Description}],q=()=>{O(y),E(!1),G(!1),o&&o()};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("span",{onClick:()=>E(!0),style:{cursor:"pointer"},children:a}),(0,x.jsxs)(u.c,{open:k,onClose:q,fullScreen:!0,children:[(0,x.jsx)(p.c,{children:D?"Update Product Details":"Create New Product"}),(0,x.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n&&n(),(0,N.q)({address:"masters/products",method:D?"PUT":"POST",bodyData:U}).then((e=>{e.success?(d&&d(),q(),S.m4.success(e.message)):S.m4.error(e.message)})).catch((e=>console.error(e))).finally((()=>{i&&i()}))},children:[(0,x.jsx)(m.c,{children:(0,x.jsx)("div",{className:"row",children:M.map(((e,t)=>(0,x.jsxs)("div",{className:"col-lg-4 col-md-6 p-2 px-3",children:[(0,x.jsxs)("label",{children:[e.label," ",e.required&&(0,x.jsx)(I.c,{})]}),"input"===e.elem?(0,x.jsx)("input",{type:e.type||"text",className:"cus-inpt b-0",onChange:e.event,onInput:e.oninput,disabled:e.disabled,value:e.value,maxLength:e.max,required:!!e.required}):"select"===e.elem?(0,x.jsx)("select",{className:"cus-inpt b-0",onChange:e.event,value:e.value,required:!!e.required,children:e.options.map(((e,t)=>(0,x.jsx)("option",{value:e.value,disabled:e.disabled,defaultValue:e.selected,children:e.label},t)))}):"textarea"===e.elem?(0,x.jsx)("textarea",{className:"cus-inpt b-0",onChange:e.event,rows:4,value:e.value}):null]},t)))})}),(0,x.jsxs)(h.c,{children:[(0,x.jsx)(c.c,{type:"button",onClick:q,children:"cancel"}),(0,x.jsx)(c.c,{type:"submit",children:"save"})]})]})]})]})};var U=a(13724);const O={Product_Id:"",Product_Code:"",Product_Name:"",Short_Name:"",Product_Description:"",Brand:"",Product_Group:"",Pack_Id:"",UOM_Id:"",IS_Sold:"",Display_Order_By:"",HSN_Code:"",Gst_P:"",Cgst_P:"",Sgst_P:"",Igst_P:"",ERP_Id:"",Product_Image:""},k=e=>{var t,a,s;let{product:d,setProductInputValue:o,setDialog:n}=e;return(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-sm-2 p-0",children:(0,x.jsxs)("div",{className:"product-card-image d-flex align-items-center flex-column",children:[(0,x.jsx)(f.c,{url:null===d||void 0===d?void 0:d.productImageUrl,children:(0,x.jsx)("img",{src:null===d||void 0===d?void 0:d.productImageUrl,alt:null===d||void 0===d?void 0:d.Product_Name,style:{maxWidth:"150px"}})}),(0,x.jsx)(c.c,{onClick:()=>{n((e=>(0,l.c)((0,l.c)({},e),{},{imageUpload:!0}))),o((e=>(0,l.c)((0,l.c)({},e),{},{Product_Id:d.Product_Id,Product_Name:null===d||void 0===d?void 0:d.Product_Name})))},size:"small",variant:"outlined",startIcon:(0,x.jsx)(j,{sx:{fontSize:"15px"}}),className:"w-100 mt-2",children:"Change Photo"})]})}),(0,x.jsxs)("div",{className:" col-sm-10 p-2",children:[(0,x.jsxs)("div",{className:"product-brand-group",children:[(0,x.jsxs)("span",{children:[null===d||void 0===d?void 0:d.Brand_Name," - ",null===d||void 0===d?void 0:d.Pro_Group]}),(0,x.jsx)("span",{children:(0,x.jsx)(r.c,{onClick:()=>{o((e=>{let t=(0,l.c)({},e);return Object.entries(d).forEach((e=>{let[a,l]=e;t[a]=null!==l&&void 0!==l?l:""})),t})),n((e=>(0,l.c)((0,l.c)({},e),{},{createAndUpdate:!0})))},children:(0,x.jsx)(_.c,{})})})]}),(0,x.jsx)("h6",{className:"fw-bold fa-18",children:null===d||void 0===d?void 0:d.Product_Name}),(0,x.jsx)("p",{className:"product-description",children:null===d||void 0===d?void 0:d.Product_Description}),(0,x.jsx)("table",{style:{minWidth:"300px",marginBottom:"15px"},children:(0,x.jsxs)("tbody",{children:[(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{className:"border fa-12 p-1 fw-bold",children:"HSN Code"}),(0,x.jsx)("td",{className:"border fa-12 p-1",children:null!==(t=null===d||void 0===d?void 0:d.HSN_Code)&&void 0!==t?t:"-"}),(0,x.jsx)("td",{className:"border fa-12 p-1 fw-bold",children:"ERP Id"}),(0,x.jsx)("td",{className:"border fa-12 p-1",children:null!==(a=null===d||void 0===d?void 0:d.ERP_Id)&&void 0!==a?a:"-"})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{className:"border fa-12 p-1 fw-bold",children:"Tax"}),(0,x.jsxs)("td",{className:"border fa-12 p-1",children:[null!==(s=null===d||void 0===d?void 0:d.Gst_P)&&void 0!==s?s:0,"(%)"]}),(0,x.jsx)("td",{className:"border fa-12 p-1 fw-bold",children:"Is Salable?"}),(0,x.jsx)("td",{className:"border fa-12 p-1",children:(()=>{switch(null===d||void 0===d?void 0:d.IS_Sold){case 0:return"Not Salable";case 1:return"Salable";default:return"Unknown"}})()})]})]})}),(0,x.jsxs)("div",{className:"product-price",children:[(0,x.jsx)("span",{className:"price",children:(0,C.iQ)(null===d||void 0===d?void 0:d.Item_Rate)}),(0,x.jsxs)("span",{className:"units",children:[" / ",null===d||void 0===d?void 0:d.Units]})]})]})]})},E=e=>{let{loadingOn:t,loadingOff:a}=e;const v=JSON.parse(localStorage.getItem("user")),[j,_]=(0,s.useState)([]),[f,C]=(0,s.useState)(!1),[I,y]=(0,s.useState)([]),[E,D]=(0,s.useState)(""),[G,M]=(0,s.useState)(O),[q,A]=(0,s.useState)({imageUpload:!1,createAndUpdate:!1});(0,s.useEffect)((()=>{(0,N.q)({address:"masters/products?Company_Id=".concat(null===v||void 0===v?void 0:v.Company_id)}).then((e=>{e.success&&_(e.data)})).catch((e=>console.error(e)))}),[f,null===v||void 0===v?void 0:v.Company_id]),(0,s.useEffect)((()=>{const e=j.filter((e=>Object.values(e).some((e=>String(e).toLowerCase().includes(E.toLowerCase())))));y(e)}),[j,E]);const B=()=>{A({imageUpload:!1,createAndUpdate:!1}),M(O)};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(d.c,{component:o.c,children:[(0,x.jsxs)("div",{className:"p-3 pb-1 d-flex align-items-center flex-wrap",children:[(0,x.jsx)("h6",{className:"flex-grow-1 fa-18",children:"Products"}),(0,x.jsx)(n.c,{title:"Sync Tally LOS",children:(0,x.jsx)(r.c,{onClick:()=>{t&&t(),(0,N.q)({address:"masters/products/losSync",method:"POST"}).then((e=>{e.success?S.m4.success(e.message):S.m4.error(e.message)})).catch((e=>console.error(e))).finally((()=>{a&&a()}))},children:(0,x.jsx)(g.c,{})})}),(0,x.jsx)(w,{reload:()=>C((e=>!e)),loadingOn:t,loadingOff:a,onCloseFun:()=>{M(O),A((e=>(0,l.c)((0,l.c)({},e),{},{createAndUpdate:!1})))},children:(0,x.jsx)(c.c,{variant:"outlined",startIcon:(0,x.jsx)(b.c,{}),children:"New"})}),(0,x.jsx)("input",{type:"search",value:E,className:"cus-inpt w-auto p-1 ps-2 ms-2",placeholder:"Search",onChange:e=>D(e.target.value)})]}),(0,x.jsx)(i.c,{sx:{p:0},children:(0,x.jsx)(U.cp,{dataArray:""===E?j:I,columns:[{isVisible:1,isCustomCell:!0,Cell:e=>{let{row:t}=e;return(0,x.jsx)(k,{product:t,setDialog:A,setProductInputValue:M})}}],tableMaxHeight:600,initialPageCount:10})})]}),(0,x.jsxs)(u.c,{open:q.imageUpload,onClose:B,fullWidth:!0,maxWidth:"sm",children:[(0,x.jsxs)(p.c,{children:["Update Product Image",(0,x.jsx)("span",{className:"ps-1 text-primary",children:null===G||void 0===G?void 0:G.Product_Name})]}),(0,x.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=new FormData;t.append("Product_Image",G.Product_Image),t.append("Product_Id",null===G||void 0===G?void 0:G.Product_Id),null!==G&&void 0!==G&&G.Product_Image&&null!==G&&void 0!==G&&G.Product_Id&&fetch("".concat(P.c,"masters/products/productImage"),{method:"PUT",body:t}).then((e=>e.json())).then((e=>{e.success?(S.m4.success(e.message),B(),C(!f)):S.m4.error(e.message)})).catch((e=>console.error(e)))},children:[(0,x.jsxs)(m.c,{children:[(0,x.jsx)("label",{children:"Select Product Image"}),(0,x.jsx)("input",{type:"file",className:"cus-inpt",required:!0,onChange:e=>M((0,l.c)((0,l.c)({},G),{},{Product_Image:e.target.files[0]})),accept:"image/*"}),G.Product_Image&&(0,x.jsx)("img",{src:URL.createObjectURL(G.Product_Image),alt:"Preview",style:{maxWidth:"100%",maxHeight:200,marginTop:10}})]}),(0,x.jsxs)(h.c,{children:[(0,x.jsx)(c.c,{type:"button",onClick:B,children:"cancel"}),(0,x.jsx)(c.c,{type:"submit",children:"update"})]})]})]}),q.createAndUpdate&&(0,x.jsx)(w,{reload:()=>C((e=>!e)),loadingOn:t,loadingOff:a,row:G,openAction:q.createAndUpdate,onCloseFun:()=>{M(O),A((e=>(0,l.c)((0,l.c)({},e),{},{createAndUpdate:!1})))}})]})}},96064:(e,t,a)=>{a.d(t,{c:()=>c});var l=a(27664),s=a(82496);const c=(0,l.c)((0,s.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},14499:(e,t,a)=>{a.d(t,{c:()=>c});var l=a(27664),s=a(82496);const c=(0,l.c)((0,s.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},86e3:(e,t,a)=>{a.d(t,{c:()=>c});var l=a(27664),s=a(82496);const c=(0,l.c)((0,s.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},87016:(e,t,a)=>{a.d(t,{c:()=>c});var l=a(27664),s=a(82496);const c=(0,l.c)((0,s.jsx)("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8m0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4z"}),"Sync")},84436:(e,t,a)=>{a.d(t,{c:()=>x});var l=a(45072),s=a(95656),c=a(69060),r=a(79736),d=a(21412),o=a(12556),n=a(49836),i=a(10099),u=a(33448);function p(e){return(0,u.cp)("MuiCardContent",e)}(0,i.c)("MuiCardContent",["root"]);var m=a(82496);const h=["className","component"],v=(0,o.cp)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),x=c.forwardRef((function(e,t){const a=(0,n.C)({props:e,name:"MuiCardContent"}),{className:c,component:o="div"}=a,i=(0,s.c)(a,h),u=(0,l.c)({},a,{component:o}),x=(e=>{const{classes:t}=e;return(0,d.c)({root:["root"]},p,t)})(u);return(0,m.jsx)(v,(0,l.c)({as:o,className:(0,r.c)(x.root,c),ownerState:u,ref:t},i))}))}}]);
//# sourceMappingURL=8804.3d7726a5.chunk.js.map