"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[9052],{13724:(e,t,i)=>{i.d(t,{A5:()=>P,Om:()=>$,cp:()=>H,oN:()=>E});var s=i(69060),l=i(3358),a=i(5548),r=i(66931),n=i(89500),c=i(93996),o=i(14696),d=i(13224),m=i(27454),u=i(96464),x=i(43692),h=i(85624),p=i(99904),b=i(33856),v=i(58612),f=i(53248),g=i(29504),S=i(5930),N=i(39308),j=i(4284),_=i(41459),C=i(46864),D=i(76491),y=i(10728),w=i(49608),F=i(28064),I=(i(37692),i(35832)),k=i(82496);const z=(e,t)=>e.map((e=>{const i={};return t.forEach(((t,s)=>{if(t.isVisible||t.Defult_Display)if(t.isCustomCell&&t.Cell){const l=t.Cell({row:e}),a=t.ColumnHeader?String(t.ColumnHeader).replace(/\s+/g,"_").toLowerCase():`field_${s+1}`;"string"!==typeof l&&"number"!==typeof l&&"bigint"!==typeof l||(i[a]=l)}else{let s=t.Field_Name;i[s]=e[s]||""}})),i})),P=function(){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{isVisible:arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,Field_Name:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",Fied_Data:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string",align:arguments.length>3&&void 0!==arguments[3]?arguments[3]:"left",verticalAlign:arguments.length>4&&void 0!==arguments[4]?arguments[4]:"center",...e&&{ColumnHeader:e}}},$=e=>{let{buttonsData:t=[],ToolTipText:i="Options"}=e;const[m,u]=(0,s.useState)(null),x=Boolean(m);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(l.c,{title:i,children:(0,k.jsx)(a.c,{"aria-describedby":x,onClick:e=>{u(e.currentTarget)},className:"ms-2",size:"small",children:(0,k.jsx)(j.c,{})})}),(0,k.jsx)(r.cp,{open:x,anchorEl:m,onClose:()=>{u(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,k.jsx)(n.c,{children:t.map(((e,t)=>(0,k.jsxs)(c.c,{onClick:()=>(null===e||void 0===e?void 0:e.onclick)&&(null===e||void 0===e?void 0:e.onclick()),disabled:null===e||void 0===e?void 0:e.disabled,children:[(0,k.jsx)(o.c,{children:null===e||void 0===e?void 0:e.icon}),(0,k.jsx)(d.c,{children:null===e||void 0===e?void 0:e.name})]},t)))})})]})},E=(e,t)=>{switch(t){case"number":return e?(0,N.SA)(e):e;case"date":return e?(0,N.uy)(e):e;case"time":return e?(0,N.AX)(e):e;case"string":return e;default:return""}},A=e=>{let{dataArray:t=[],columns:i=[],onClickFun:l=null,isExpendable:r=!1,expandableComp:n=null,tableMaxHeight:c=550,initialPageCount:o=20,EnableSerialNumber:d=!1,CellSize:j="small",disablePagination:P=!1,title:A="",PDFPrintOption:H=!1,ExcelPrintOption:T=!1,maxHeightOption:O=!1,ButtonArea:L=null,MenuButtons:B=[],bodyFontSizePx:q=13,headerFontSizePx:Q=13}=e;const[M,V]=(0,s.useState)(0),[R,U]=(0,s.useState)(o),[W,X]=(0,s.useState)([]),[G,J]=(0,s.useState)(!0),K=G&&O?" max-content ":c,Y=[{type:"left",class:"text-start"},{type:"right",class:"text-end"},{type:"center",class:"text-center"}],Z=[{type:"top",class:" vtop "},{type:"bottom",class:" vbottom "},{type:"center",class:" vctr "}],ee=(e=>{if(!W.length)return e;return[...e].sort(((e,t)=>{for(const i of W){const{columnId:s,direction:l}=i,a=e[s],r=t[s];if(a!==r)return"asc"===l?a>r?1:-1:a<r?1:-1}return 0}))})(t),te=M*R,ie=te+R,se=ee.slice(te,ie),le=e=>{let{row:t,index:c}=e;const[o,x]=(0,s.useState)(!1),h="20px";return(0,k.jsxs)(s.Fragment,{children:[(0,k.jsxs)(m.c,{children:[!0===r&&n&&(0,k.jsx)(u.c,{className:"border-end text-center vtop",sx:{fontSize:`${q}px`},children:(0,k.jsx)(a.c,{size:"small",onClick:()=>x((e=>!e)),children:o?(0,k.jsx)(_.c,{sx:{fontSize:h}}):(0,k.jsx)(C.c,{sx:{fontSize:h}})})}),!0===d&&(0,k.jsx)(u.c,{className:"border-end text-center vtop",sx:{fontSize:`${q}px`},children:R*M+c+1}),null===i||void 0===i?void 0:i.map(((e,i)=>{var s,a;const r=(0,N.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,N.Qr)(null===e||void 0===e?void 0:e.isVisible,1),n=Boolean(null===e||void 0===e?void 0:e.isCustomCell)&&e.Cell,o=!n,d=(t,i,s)=>null!==e&&void 0!==e&&e.tdClass?` ${null===e||void 0===e?void 0:e.tdClass({row:t,Field_Name:i,index:s})} `:"",m=e.align?null===(s=Y.find((t=>t.type===String(e.align).toLowerCase())))||void 0===s?void 0:s.class:"",x=e.verticalAlign?null===(a=Z.find((t=>t.type===String(e.verticalAlign).toLowerCase())))||void 0===a?void 0:a.class:" vctr ";if(r&&o){const s=Object.entries(t).find((t=>{let[i]=t;return i===e.Field_Name}));return(0,k.jsx)(u.c,{className:`border-end ${m} ${x} ${d(t,e.Field_Name,c)}`,sx:{fontSize:`${q}px`},onClick:()=>l?l(t):console.log("Function not supplied"),children:s?E(s[1],null===e||void 0===e?void 0:e.Fied_Data):"-"},i)}return r&&n?(0,k.jsx)(u.c,{className:`border-end ${m} ${x} ${d(t,e.Field_Name,c)}`,sx:{fontSize:`${q}px`},children:e.Cell({row:t,Field_Name:e.Field_Name,index:c})},i):(0,k.jsx)(u.c,{sx:{fontSize:`${q}px`},className:`border-end ${m} ${x}`,children:"-"},i)}))]}),!0===r&&n&&o&&(0,k.jsx)(m.c,{children:(0,k.jsx)(u.c,{colSpan:Number(null===i||void 0===i?void 0:i.length)+(!0===d?2:1),children:n({row:t,index:c})})})]})};return(0,k.jsxs)(x.c,{className:"rounded-3 bg-white overflow-hidden",component:h.c,children:[(0,k.jsxs)("div",{className:"d-flex align-items-center flex-wrap px-3 py-2 flex-row-reverse ",children:[(H||T||B.length>0||O)&&(0,k.jsx)($,{ToolTipText:"Table Options",buttonsData:[...O?[{name:"Max Height",icon:G?(0,k.jsx)(D.c,{fontSize:"small",color:"primary"}):(0,k.jsx)(y.c,{fontSize:"small"}),onclick:()=>J((e=>!e)),disabled:(0,N.Qr)(null===t||void 0===t?void 0:t.length,0)}]:[],...H?[{name:"PDF Print",icon:(0,k.jsx)(w.c,{fontSize:"small",color:"primary"}),onclick:()=>((e,t)=>{try{const i=new F.default,s=z(e,t),l=t.filter((e=>e.isVisible||e.Defult_Display)).map((e=>e.Field_Name||String(e.ColumnHeader).replace(/\s+/g,"_").toLowerCase())),a=s.map((e=>l.map((t=>e[t])))).map(((e,t)=>({...e,Sno:t+1})));i.autoTable({head:[l],body:a}),i.save("table.pdf")}catch(i){console.error(i)}})(t,i),disabled:(0,N.Qr)(null===t||void 0===t?void 0:t.length,0)}]:[],...T?[{name:"Excel Print",icon:(0,k.jsx)(w.c,{fontSize:"small",color:"primary"}),onclick:()=>((e,t)=>{try{const i=z(e,t),s=I.c$.json_to_sheet(i),l=I.c$.book_new();I.c$.book_append_sheet(l,s,"Data"),I.a8(l,"table.xlsx")}catch(i){console.error(i)}})(t,i),disabled:(0,N.Qr)(null===t||void 0===t?void 0:t.length,0)}]:[],...B]}),L&&L,A&&(0,k.jsx)("h6",{className:"fw-bold text-muted flex-grow-1 m-0",children:A})]}),(0,k.jsx)(p.c,{sx:{maxHeight:K},children:(0,k.jsxs)(b.c,{stickyHeader:!0,size:j,children:[(0,k.jsx)(v.c,{children:(0,k.jsxs)(m.c,{children:[r&&n&&(0,k.jsx)(u.c,{className:"fw-bold border-end border-top text-center",sx:{fontSize:`${Q}px`,backgroundColor:"#EDF0F7"},children:"#"}),d&&(0,k.jsx)(u.c,{className:"fw-bold border-end border-top text-center",sx:{fontSize:`${Q}px`,backgroundColor:"#EDF0F7"},children:"SNo"}),i.map(((e,t)=>{const i=(0,N.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,N.Qr)(null===e||void 0===e?void 0:e.isVisible,1),s=!1===Boolean(null===e||void 0===e?void 0:e.isCustomCell)||!e.Cell,l=W.find((t=>t.columnId===e.Field_Name)),a=l?l.direction:"asc";var r,n,c,o;return i?s?(0,k.jsx)(u.c,{className:"fw-bold border-end border-top "+(e.align?null===(r=Y.find((t=>t.type===String(e.align).toLowerCase())))||void 0===r?void 0:r.class:""),sx:{fontSize:`${Q}px`,backgroundColor:"#EDF0F7"},sortDirection:!!l&&a,children:(0,k.jsx)(f.c,{active:!!l,direction:a,onClick:()=>(e=>{const t=W.find((t=>t.columnId===e));if(t){const i="asc"===t.direction;X(W.map((t=>t.columnId===e?{...t,direction:i?"desc":"asc"}:t)))}else X([...W,{columnId:e,direction:"asc"}])})(e.Field_Name),children:e.ColumnHeader||(null===e||void 0===e||null===(n=e.Field_Name)||void 0===n?void 0:n.replace(/_/g," "))})},t):(0,k.jsx)(u.c,{className:(e.ColumnHeader||null!==e&&void 0!==e&&e.Field_Name?" fw-bold border-end border-top p-2 appFont ":" p-0 ")+" "+(e.align?null===(c=Y.find((t=>t.type===String(e.align).toLowerCase())))||void 0===c?void 0:c.class:""),sx:{fontSize:`${Q}px`,backgroundColor:"#EDF0F7"},children:e.ColumnHeader||(null===e||void 0===e||null===(o=e.Field_Name)||void 0===o?void 0:o.replace(/_/g," "))},t):null}))]})}),(0,k.jsxs)(g.c,{children:[(P?ee:se).map(((e,t)=>(0,k.jsx)(le,{row:e,index:t},t))),0===t.length&&(0,k.jsx)(m.c,{children:(0,k.jsx)(u.c,{colSpan:i.length+(!0===r&&n?1:0)+(!0===d?1:0),sx:{textAlign:"center"},children:"No Data"})})]})]})}),!P&&0!==se.length&&(0,k.jsx)("div",{className:"p-2 pb-0",children:(0,k.jsx)(S.c,{component:"div",count:t.length,page:M,onPageChange:(e,t)=>{V(t)},rowsPerPage:R,onRowsPerPageChange:e=>{U(parseInt(e.target.value,10)),V(0)},rowsPerPageOptions:Array.from(new Set([o,5,20,50,100,200,500])).sort(((e,t)=>e-t)),labelRowsPerPage:"Rows per page",showFirstButton:!0,showLastButton:!0})})]})};A.defaultProps={dataArray:[],columns:[],onClickFun:null,isExpendable:!1,expandableComp:null,tableMaxHeight:550,initialPageCount:20,EnableSerialNumber:!1,CellSize:"small",disablePagination:!1,title:void 0,PDFPrintOption:!1,ExcelPrintOption:!1,maxHeightOption:!1,ButtonArea:null,MenuButtons:[],headerFontSizePx:13,bodyFontSizePx:13};const H=A},19052:(e,t,i)=>{i.r(t),i.d(t,{default:()=>N});var s=i(69060),l=i(44380),a=i(5548),r=i(82656),n=i(26773),c=i(4488),o=i(90048),d=i(75848),m=i(89e3),u=i(56480),x=i(42136),h=i(57704),p=i(86e3),b=i(45180),v=i(1908),f=i(13724),g=i(82496);const S={District_Id:0,District_Name:"",State_Id:0,State_Name:""};const N=function(){const[e,t]=(0,s.useState)(!1),[i,N]=(0,s.useState)(!1),[j,_]=(0,s.useState)(!1),[C,D]=(0,s.useState)(S),[y,w]=(0,s.useState)(!1),[F,I]=(0,s.useState)([]),[k,z]=(0,s.useState)([]),[P,$]=(0,s.useState)([]),[E,A]=(0,s.useState)(""),[H,T]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(async()=>{try{const e=await(0,v.q)({address:"masters/district"});e.success&&(I(e.data),z(e.data))}catch(e){console.error(e),u.m4.error("Failed to load districts")}})(),(async()=>{try{const e=await(0,v.q)({address:"masters/state/dropDown"});e.success&&$(e.data)}catch(e){console.log(e),u.m4.error("Failed to load State dropdown")}})()}),[e]),(0,s.useEffect)((()=>{if(""===E.trim())z(F);else{const e=F.filter((e=>{const t=E.toLowerCase();return String(e.District_Id).toLowerCase().includes(t)||e.District_Name&&e.District_Name.toLowerCase().includes(t)||e.State_Name&&e.State_Name.toLowerCase().includes(t)}));z(e)}}),[E,F]);const O=()=>{H||(_(!1),D(S))},L=()=>{H||(w(!1),D(S))},B=()=>{H||N(!1)};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"card",children:[(0,g.jsxs)("div",{className:"card-header bg-white fw-bold d-flex align-items-center justify-content-between",children:["DISTRICT MASTER",(0,g.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,g.jsx)("div",{style:{width:"300px"},children:(0,g.jsx)(l.c,{fullWidth:!0,size:"small",variant:"outlined",placeholder:"Search District...",value:E,onChange:e=>A(e.target.value),InputProps:{startAdornment:(0,g.jsx)(h.c,{fontSize:"small",sx:{mr:1}}),style:{height:"40px"}}})}),(0,g.jsx)(x.c,{variant:"contained",size:"small",className:"rounded-1 btn-primary",onClick:()=>{_(!0),D(S)},sx:{textTransform:"none",fontWeight:500,px:2,height:"40px"},children:"Create District"})]})]}),(0,g.jsx)(f.cp,{dataArray:k,EnableSerialNumber:!0,maxHeightOption:!0,columns:[(0,f.A5)("District_Name","string","District Name"),(0,f.A5)("State_Name","string","State"),{ColumnHeader:"Actions",isVisible:1,isCustomCell:!0,Cell:e=>{let{row:t}=e;return(0,g.jsxs)("td",{style:{minWidth:"80px"},children:[(0,g.jsx)(a.c,{onClick:()=>(e=>{D({District_Id:Number(e.District_Id),District_Name:e.District_Name,State_Id:Number(e.State_Id),State_Name:e.State_Name||""}),w(!0)})(t),size:"small",children:(0,g.jsx)(p.c,{})}),(0,g.jsx)(a.c,{onClick:()=>{N(!0),D({District_Id:t.District_Id,District_Name:t.District_Name})},size:"small",color:"error",children:(0,g.jsx)(b.c,{})})]})}}]})]}),(0,g.jsxs)(r.c,{open:j,onClose:O,children:[(0,g.jsx)(n.c,{children:"Create District"}),(0,g.jsx)(c.c,{children:(0,g.jsxs)("div",{className:"p-2",children:[(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsx)("label",{htmlFor:"stateSelect",children:"State *"}),(0,g.jsxs)("select",{className:"form-select form-select-sm",id:"editStateSelect",value:C.State_Id||"",onChange:e=>{const t=Number(e.target.value),i=P.find((e=>e.State_Id===t));D({...C,State_Id:t,State_Name:i?i.State_Name:""})},children:[(0,g.jsx)("option",{value:"",children:"Select State"}),P.map((e=>(0,g.jsx)("option",{value:e.State_Id,children:e.State_Name},e.State_Id)))]})]}),(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsx)("label",{htmlFor:"districtName",className:"form-label",children:"District Name *"}),(0,g.jsx)("input",{type:"text",className:"form-control form-control-mdf",id:"districtName",value:C.District_Name,onChange:e=>D({...C,District_Name:e.target.value})})]})]})}),(0,g.jsxs)(o.c,{children:[(0,g.jsx)("button",{className:"btn btn-secondary btn-sm",onClick:O,disabled:H,children:"Cancel"}),(0,g.jsx)("button",{className:"btn btn-primary btn-sm",onClick:async()=>{const{District_Name:e,State_Id:i}=C;if(e&&i){T(!0);try{const e=await(0,v.q)({address:"masters/district",method:"POST",bodyData:{...C}});e.success?(u.m4.success("District Created successfully!"),_(!1),D(S),t((e=>!e))):u.m4.error(e.message)}catch(s){console.error(s),u.m4.error("Failed to Create District")}finally{T(!1)}}else u.m4.error("Please fill all required fields.")},disabled:H||!C.District_Name||!C.State_Id,children:H?"Creating...":"Create"})]})]}),(0,g.jsxs)(r.c,{open:y,onClose:L,children:[(0,g.jsx)(n.c,{children:"Edit District"}),(0,g.jsx)(c.c,{children:(0,g.jsxs)("div",{className:"p-3",children:[(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsx)("label",{htmlFor:"editStateSelect",className:"form-label",children:"State *"}),(0,g.jsxs)("select",{className:"form-select form-select-sm",id:"editStateSelect",value:C.State_Id||"",onChange:e=>{const t=Number(e.target.value);if(isNaN(t))return void u.m4.error("Invalid state selected");const i=P.find((e=>e.State_Id===t));D({...C,State_Id:t,State_Name:i?i.State_Name:""})},children:[(0,g.jsx)("option",{value:"",children:"Select State"}),P.map((e=>(0,g.jsx)("option",{value:e.State_Id,children:e.State_Name},e.State_Id)))]})]}),(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsx)("label",{htmlFor:"editDistrictName",className:"form-label",children:"District Name *"}),(0,g.jsx)("input",{type:"text",className:"form-control form-control-sm",id:"editDistrictName",value:C.District_Name,onChange:e=>D({...C,District_Name:e.target.value})})]})]})}),(0,g.jsxs)(o.c,{children:[(0,g.jsx)("button",{className:"btn btn-secondary btn-sm me-2",onClick:L,disabled:H,children:"Cancel"}),(0,g.jsx)("button",{className:"btn btn-primary btn-sm",onClick:async()=>{var e;const{District_Id:i,District_Name:s,State_Id:l}=C,a={District_Id:Number(i),District_Name:s.trim(),State_Id:Number(l),State_Name:(null===(e=C.State_Name)||void 0===e?void 0:e.trim())||null};if(a.District_Id&&a.District_Name&&a.State_Id){T(!0);try{const e=await(0,v.q)({address:"masters/district",method:"PUT",bodyData:a});e.success?(u.m4.success("District updated successfully!"),I((e=>e.map((e=>e.District_Id===a.District_Id?{...e,...a}:e)))),z((e=>e.map((e=>e.District_Id===a.District_Id?{...e,...a}:e)))),w(!1),D(S)):(u.m4.error(e.message||"Update failed"),t((e=>!e)))}catch(r){console.error("Update error:",r),u.m4.error(`Failed to update district: ${r.message}`),t((e=>!e))}finally{T(!1)}}else u.m4.error("All required fields must be properly filled.")},disabled:H||!C.District_Name||!C.State_Id,children:H?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("span",{className:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"}),"Updating..."]}):"Update"})]})]}),(0,g.jsxs)(r.c,{open:i,onClose:B,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,g.jsx)(n.c,{id:"alert-dialog-title",children:"Confirmation"}),(0,g.jsx)(c.c,{children:(0,g.jsx)(d.c,{id:"alert-dialog-description",children:(0,g.jsx)("b",{children:`Do you want to delete the ${C.District_Name}?`})})}),(0,g.jsxs)(o.c,{children:[(0,g.jsx)(m.c,{onClick:B,children:"Cancel"}),(0,g.jsx)(m.c,{onClick:async()=>{T(!0);const e=C.District_Id;try{I((t=>t.filter((t=>t.District_Id!==e)))),z((t=>t.filter((t=>t.District_Id!==e))));const i=await(0,v.q)({address:"masters/district",method:"DELETE",bodyData:{District_Id:e}});i.success?u.m4.success("District deleted successfully!"):(t((e=>!e)),u.m4.error(i.message||"Failed to delete district"))}catch(i){console.error(i),t((e=>!e)),u.m4.error("Failed to delete district")}finally{T(!1),N(!1)}},autoFocus:!0,sx:{color:"red"},children:H?"Deleting...":"Delete"})]})]})]})}}}]);
//# sourceMappingURL=9052.cfb9b3fe.chunk.js.map