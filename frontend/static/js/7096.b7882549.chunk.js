"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[7096],{64568:(e,t,l)=>{l.d(t,{c:()=>a});var o=l(82496);const a=()=>(0,o.jsx)("span",{style:{color:"red",fontWeight:"bold",fontSize:"1em"},children:" *"})},97096:(e,t,l)=>{l.r(t),l.d(t,{default:()=>S});var o=l(5548),a=l(89e3),s=l(82656),n=l(26773),r=l(4488),d=l(90048),i=l(13724),c=l(51560),u=l(69060),h=l(39308),m=l(86e3),v=l(61988),x=l(57704),p=l(1908),j=l(99852),g=l(62344),C=l(14499),_=l(18096),N=l(56480),b=l(64568),T=l(82496);const f=e=>{var t;let{loadingOn:l,loadingOff:i,children:c,productValue:m={},onSubmit:v,open:x=!1,close:f=(()=>{})}=e;const w="border fa-14 vctr",[S,F]=(0,u.useState)([]),[I,P]=(0,u.useState)([]),[G,y]=(0,u.useState)([]),[A,Q]=(0,u.useState)({..._.Cf});(0,u.useEffect)((()=>{if(x){(async()=>{try{l&&l();const[e,t,o]=await Promise.all([(0,p.q)({address:"masters/products/allProducts"}),(0,p.q)({address:"dataEntry/godownLocationMaster"}),(0,p.q)({address:"masters/uom"})]),a=(e.success?e.data:[]).sort(((e,t)=>String(null===e||void 0===e?void 0:e.Product_Name).localeCompare(null===t||void 0===t?void 0:t.Product_Name))),s=(t.success?t.data:[]).sort(((e,t)=>String(null===e||void 0===e?void 0:e.Godown_Name).localeCompare(null===t||void 0===t?void 0:t.Godown_Name))),n=(o.success?o.data:[]).sort(((e,t)=>String(null===e||void 0===e?void 0:e.Units).localeCompare(null===t||void 0===t?void 0:t.Units)));P(a),F(s),y(n)}catch(e){console.error("Error fetching data:",e)}finally{i&&i()}})()}}),[x]),(0,u.useEffect)((()=>{(0,h.Q$)(null===m||void 0===m?void 0:m.Arr_Id)&&Q((e=>Object.fromEntries(Object.entries(e).map((e=>{let[t,l]=e;return"Arrival_Date"===t?[t,m[t]?(0,h.Q7)(m[t]):l]:[t,m[t]?m[t]:l]})))))}),[m]);const L=()=>{f&&f()};return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("span",{className:"p-0 m-0",children:c}),(0,T.jsx)(s.c,{open:x,onClose:L,fullWidth:!0,maxWidth:"sm",children:(0,T.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!(0,h.Q$)(A.Product_Id))return N.m4.error("Select Item");(()=>{l&&l();const e=(0,h.Q$)(null===A||void 0===A?void 0:A.Arr_Id)?"PUT":"POST";(0,p.q)({address:"inventory/tripSheet/arrivalEntry",method:e,bodyData:A}).then((e=>{e.success?(N.m4.success(e.message),L(),v&&v()):N.m4.error(e.message)})).catch((e=>console.log(e))).finally((()=>{i&&i()}))})()},children:[(0,T.jsxs)(n.c,{className:"d-flex align-items-center",children:[(0,T.jsx)("span",{className:"flex-grow-1",children:"Add Arrival Details"}),(0,T.jsx)(o.c,{size:"small",type:"button",color:"error",onClick:L,children:(0,T.jsx)(C.c,{})})]}),(0,T.jsx)(r.c,{children:(0,T.jsx)("table",{className:"table m-0",children:(0,T.jsxs)("tbody",{children:[(0,T.jsxs)("tr",{children:[(0,T.jsxs)("td",{className:w,children:["Date ",(0,T.jsx)(b.c,{})]}),(0,T.jsx)("td",{className:w,children:(0,T.jsx)("input",{type:"date",value:A.Arrival_Date,onChange:e=>Q((t=>({...t,Arrival_Date:e.target.value}))),className:"cus-inpt p-2 ",required:!0})})]}),(0,T.jsxs)("tr",{children:[(0,T.jsxs)("td",{className:w,children:["Item Name ",(0,T.jsx)(b.c,{})]}),(0,T.jsx)("td",{className:w,children:(0,T.jsx)(j.cp,{value:{value:A.Product_Id,label:null===(t=I.find((e=>(0,h.Qr)(e.Product_Id,A.Product_Id))))||void 0===t?void 0:t.Product_Name},onChange:e=>{const t=Number(e.value||0),l=I.find((e=>(0,h.Qr)(e.Product_Id,t)));Q((t=>({...t,Product_Id:e.value,HSN_Code:null===l||void 0===l?void 0:l.HSN_Code,Gst_P:null===l||void 0===l?void 0:l.Gst_P,Cgst_P:null===l||void 0===l?void 0:l.Cgst_P,Sgst_P:null===l||void 0===l?void 0:l.Sgst_P,Igst_P:null===l||void 0===l?void 0:l.Igst_P,Unit_Id:null===l||void 0===l?void 0:l.UOM_Id,Units:null===l||void 0===l?void 0:l.Units})))},options:[{value:"",label:"select product",isDisabled:!0},...I.map((e=>({value:null===e||void 0===e?void 0:e.Product_Id,label:null===e||void 0===e?void 0:e.Product_Name})))],styles:g.cF,required:!0,isSearchable:!0,placeholder:"Select Product",maxMenuHeight:200})})]}),(0,T.jsxs)("tr",{children:[(0,T.jsxs)("td",{className:w,children:["From Godown ",(0,T.jsx)(b.c,{})]}),(0,T.jsx)("td",{className:w,children:(0,T.jsxs)("select",{value:A.From_Location,onChange:e=>Q({...A,From_Location:e.target.value,BatchLocation:S.find((t=>(0,h.Qr)(t.Godown_Id,e.target.value))).Godown_Name||""}),className:"cus-inpt p-2",required:!0,children:[(0,T.jsx)("option",{value:"",disabled:!0,children:"select godown"}),S.filter((e=>!(0,h.Qr)(e.Godown_Id,A.To_Location))).map(((e,t)=>(0,T.jsx)("option",{value:e.Godown_Id,children:e.Godown_Name},t)))]})})]}),(0,T.jsxs)("tr",{children:[(0,T.jsxs)("td",{className:w,children:["To Godown ",(0,T.jsx)(b.c,{})]}),(0,T.jsx)("td",{className:w,children:(0,T.jsxs)("select",{value:A.To_Location,onChange:e=>Q({...A,To_Location:e.target.value}),className:"cus-inpt p-2",required:!0,children:[(0,T.jsx)("option",{value:"",disabled:!0,children:"select godown"}),S.filter((e=>!(0,h.Qr)(e.Godown_Id,A.From_Location))).map(((e,t)=>(0,T.jsx)("option",{value:e.Godown_Id,children:e.Godown_Name},t)))]})})]}),(0,T.jsxs)("tr",{children:[(0,T.jsxs)("td",{className:w,children:["Weight ",(0,T.jsx)(b.c,{})]}),(0,T.jsxs)("td",{className:w,children:[(0,T.jsx)("input",{className:"cus-inpt p-2 w-50",value:A.QTY?A.QTY:"",required:!0,placeholder:"Weight",onInput:h.Gk,onChange:e=>{const t=(0,h.Q$)(A.Gst_Rate)?(0,h.eX)(e.target.value,A.Gst_Rate):A.Taxable_Value;Q((l=>({...l,QTY:e.target.value,Taxable_Value:t,Total_Value:t})))}}),(0,T.jsxs)("select",{className:"cus-inpt p-2 w-50",value:A.Unit_Id,placeholder:"Units ex: kg, l, ml...",onChange:e=>Q((t=>({...t,Unit_Id:e.target.value,Units:G.find((t=>(0,h.Qr)(t.Unit_Id,e.target.value))).Units}))),children:[(0,T.jsx)("option",{value:"",disabled:!0,children:"select uom"}),G.map(((e,t)=>(0,T.jsx)("option",{value:e.Unit_Id,children:e.Units},t)))]})]})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{className:w,children:"Rate"}),(0,T.jsx)("td",{className:w,children:(0,T.jsx)("input",{className:"cus-inpt p-2",value:A.Gst_Rate?A.Gst_Rate:"",placeholder:"Rate",onInput:h.Gk,onChange:e=>{const t=(0,h.Q$)(A.QTY)?(0,h.eX)(e.target.value,A.QTY):A.Taxable_Value;Q((l=>({...l,Gst_Rate:e.target.value,Taxable_Value:t,Total_Value:t})))}})})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{className:w,children:"Batch / Lot Number"}),(0,T.jsx)("td",{className:w,children:(0,T.jsx)("input",{value:A.Batch_No,onChange:e=>Q({...A,Batch_No:e.target.value}),className:"cus-inpt p-2"})})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{className:w,children:"BillNo"}),(0,T.jsx)("td",{className:w,children:(0,T.jsx)("input",{value:A.BillNo,onChange:e=>Q({...A,BillNo:e.target.value}),className:"cus-inpt p-2"})})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{className:w,children:"Concern"}),(0,T.jsx)("td",{className:w,children:(0,T.jsx)("input",{value:A.Concern,onChange:e=>Q({...A,Concern:e.target.value}),className:"cus-inpt p-2"})})]})]})})}),(0,T.jsxs)(d.c,{children:[(0,T.jsx)(a.c,{type:"button",onClick:L,children:"close"}),(0,T.jsx)(a.c,{type:"submit",variant:"outlined",children:(0,h.Q$)(A.Id)?"Update":"Add"})]})]})})]})},w={Fromdate:(0,h.Q7)(),Todate:(0,h.Q7)()},S=e=>{let{loadingOn:t,loadingOff:l}=e;const C=(0,c.i6)(),_=(0,c.IT)(),N=new URLSearchParams((0,c.IT)().search),[b,S]=(0,u.useState)([]),[F,I]=(0,u.useState)({Fromdate:w.Fromdate,Todate:w.Todate,fetchFrom:w.Fromdate,fetchTo:w.Todate,filterDialog:!1,refresh:!1,printPreviewDialog:!1,FromGodown:{label:"Select Godown",value:""},ToGodown:{label:"Select Godown",value:""},Items:[],TripConvertion:{label:"ALL",value:""},addDialog:!1});(0,u.useEffect)((()=>{t&&t(),(0,p.q)({address:`inventory/tripSheet/arrivalEntry?Fromdate=${null===F||void 0===F?void 0:F.fetchFrom}&Todate=${null===F||void 0===F?void 0:F.fetchTo}`}).then((e=>{e.success&&S(e.data)})).finally((()=>{l&&l()})).catch((e=>console.error(e)))}),[null===F||void 0===F?void 0:F.fetchFrom,null===F||void 0===F?void 0:F.fetchTo,null===F||void 0===F?void 0:F.refresh]),(0,u.useEffect)((()=>{const e={Fromdate:N.get("Fromdate")&&(0,h.e8)(N.get("Fromdate"))?N.get("Fromdate"):w.Fromdate,Todate:N.get("Todate")&&(0,h.e8)(N.get("Todate"))?N.get("Todate"):w.Todate};I((t=>({...t,fetchFrom:e.Fromdate,fetchTo:e.Todate})))}),[_.search]);const P=()=>{I({...F,filterDialog:!1})},G=(0,u.useMemo)((()=>{const e=b.map((e=>e.FromLocation));return[...new Set(e)].map((e=>({value:e,label:e})))}),[b]),y=(0,u.useMemo)((()=>{const e=b.map((e=>e.ToLocation));return[...new Set(e)].map((e=>({value:e,label:e})))}),[b]),A=(0,u.useMemo)((()=>{const e=b.map((e=>e.Product_Name));return[...new Set(e)].map((e=>({value:e,label:e})))}),[b]),Q=(0,u.useMemo)((()=>b.filter((e=>{var t,l,o,a;const s=(null===(t=F.FromGodown)||void 0===t?void 0:t.value)||null,n=(null===(l=F.ToGodown)||void 0===l?void 0:l.value)||null,r=F.Items||[],d=""!==(null===(o=F.TripConvertion)||void 0===o?void 0:o.value),i=null===(a=F.TripConvertion)||void 0===a?void 0:a.value,c=!!d&&("Converted"===i?(0,h.Q$)(null===e||void 0===e?void 0:e.Trip_Id):!(0,h.Q$)(null===e||void 0===e?void 0:e.Trip_Id)),u=!!s&&(0,h.MP)(s)===(0,h.MP)(e.FromLocation),m=!!n&&(0,h.MP)(n)===(0,h.MP)(e.ToLocation),v=r.length>0&&r.some((t=>(0,h.MP)(t.value)===(0,h.MP)(e.Product_Name)));return s&&n&&r.length>0?u&&m&&v:s&&n?u&&m:s&&r.length>0?u&&v:n&&r.length>0?m&&v:c&&(u||m||v)}))),[b,F.FromGodown,F.ToGodown,F.Items,F.TripConvertion]),L=e=>{let{row:t}=e;const[l,a]=(0,u.useState)(!1);return!(0,h.Q$)(null===t||void 0===t?void 0:t.Trip_Id)&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(o.c,{onClick:()=>a(!0),children:(0,T.jsx)(m.c,{className:"fa-20"})}),l&&(0,T.jsx)(f,{productValue:{...t,dialog:l},open:l,close:()=>a(!1),onSubmit:()=>{a(!1),I((e=>({...e,refresh:!e.refresh})))},children:"H"})]})};return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(i.cp,{dataArray:F.FromGodown.value||F.ToGodown.value||F.Items.length>0?Q:b,title:"Arrival List",maxHeightOption:!0,ExcelPrintOption:!0,EnableSerialNumber:!0,initialPageCount:10,headerFontSizePx:13,bodyFontSizePx:11,ButtonArea:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(o.c,{size:"small",onClick:()=>I((e=>({...e,filterDialog:!0}))),children:(0,T.jsx)(v.c,{})}),(0,T.jsx)(f,{onSubmit:()=>I((e=>({...e,refresh:!e.refresh}))),open:F.addDialog,close:()=>I((e=>({...e,addDialog:!1}))),children:(0,T.jsx)(a.c,{onClick:()=>I((e=>({...e,addDialog:!0}))),children:"Add"})})]}),columns:[(0,i.A5)("Arrival_Date","date","Date"),(0,i.A5)("Product_Name","string","Item"),(0,i.A5)("QTY","string","Weight"),(0,i.A5)("Gst_Rate","string","Rate"),(0,i.A5)("Batch_No","string","Batch"),(0,i.A5)("FromLocation","string","From"),(0,i.A5)("ToLocation","string","To"),{isVisible:1,ColumnHeader:"Trip-?",isCustomCell:!0,Cell:e=>{let{row:t}=e;const l=(0,h.Q$)(null===t||void 0===t?void 0:t.Arrival_Id);return(0,T.jsx)("span",{className:"cus-badge text-white fa-10 fw-bold "+(l?"bg-success":"bg-warning"),children:l?"Converted":"Not"})}},{isVisible:1,ColumnHeader:"P-Orders",isCustomCell:!0,Cell:e=>{let{row:t}=e;const l=(0,h.Qr)(null===t||void 0===t?void 0:t.ConvertedAsOrder,1);return(0,T.jsx)("span",{className:"cus-badge text-white fa-10 fw-bold "+(l?" bg-success ":" bg-warning "),children:l?"Converted":"Not"})}},{isVisible:1,ColumnHeader:"P-Invoices",isCustomCell:!0,Cell:e=>{let{row:t}=e;const l=(0,h.Qr)(null===t||void 0===t?void 0:t.ConvertedAsInvoice,1);return(0,T.jsx)("span",{className:"cus-badge text-white fa-10 fw-bold "+(l?" bg-success ":" bg-warning "),children:l?"Converted":"Not"})}},{isVisible:1,ColumnHeader:"Action",isCustomCell:!0,Cell:e=>{let{row:t}=e;return(0,T.jsx)(L,{row:t})}}]}),(0,T.jsxs)(s.c,{open:F.filterDialog,onClose:P,fullWidth:!0,maxWidth:"md",children:[(0,T.jsx)(n.c,{children:"Filters"}),(0,T.jsx)(r.c,{children:(0,T.jsx)("div",{className:"table-responsive pb-4",children:(0,T.jsx)("table",{className:"table",children:(0,T.jsxs)("tbody",{children:[(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{style:{verticalAlign:"middle"},children:"From"}),(0,T.jsx)("td",{children:(0,T.jsx)("input",{type:"date",value:F.Fromdate,onChange:e=>I({...F,Fromdate:e.target.value}),className:"cus-inpt"})}),(0,T.jsx)("td",{style:{verticalAlign:"middle"},children:"To"}),(0,T.jsx)("td",{children:(0,T.jsx)("input",{type:"date",value:F.Todate,onChange:e=>I({...F,Todate:e.target.value}),className:"cus-inpt"})})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{style:{verticalAlign:"middle"},children:"Items"}),(0,T.jsx)("td",{colSpan:3,children:(0,T.jsx)(j.cp,{value:F.Items,onChange:e=>I((t=>({...t,Items:e}))),menuPortalTarget:document.body,options:A,isMulti:!0,styles:g.cF,isSearchable:!0,placeholder:"Select Items",maxMenuHeight:300})})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{style:{verticalAlign:"middle"},children:"From Godown"}),(0,T.jsx)("td",{colSpan:3,children:(0,T.jsx)(j.cp,{value:F.FromGodown,onChange:e=>I((t=>({...t,FromGodown:e}))),menuPortalTarget:document.body,options:G,styles:g.cF,isSearchable:!0,placeholder:"Select From Godown",maxMenuHeight:300})})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{style:{verticalAlign:"middle"},children:"To Godown"}),(0,T.jsx)("td",{colSpan:3,children:(0,T.jsx)(j.cp,{value:F.ToGodown,onChange:e=>{I((t=>({...t,ToGodown:e})))},menuPortalTarget:document.body,options:y,styles:g.cF,isSearchable:!0,placeholder:"Select To Godown",maxMenuHeight:300})})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{style:{verticalAlign:"middle"},children:"Trip Convertion"}),(0,T.jsx)("td",{colSpan:3,children:(0,T.jsxs)("select",{value:F.TripConvertion,onChange:e=>I((t=>({...t,TripConvertion:e.target.value}))),className:"cus-inpt p-2",children:[(0,T.jsx)("option",{value:"",children:"ALL"}),(0,T.jsx)("option",{value:"Converted",children:"Converted"}),(0,T.jsx)("option",{value:"Not Converted",children:"Not Converted"})]})})]})]})})})}),(0,T.jsxs)(d.c,{children:[(0,T.jsx)(a.c,{onClick:P,children:"close"}),(0,T.jsx)(a.c,{onClick:()=>{(e=>{const t=new URLSearchParams(e);C(`?${t.toString()}`,{replace:!0})})({Fromdate:null===F||void 0===F?void 0:F.Fromdate,Todate:null===F||void 0===F?void 0:F.Todate}),P()},startIcon:(0,T.jsx)(x.c,{}),variant:"outlined",children:"Search"})]})]})]})}},86e3:(e,t,l)=>{l.d(t,{c:()=>s});var o=l(27664),a=l(82496);const s=(0,o.c)((0,a.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},61988:(e,t,l)=>{l.d(t,{c:()=>s});var o=l(27664),a=l(82496);const s=(0,o.c)((0,a.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61"}),"FilterAlt")},57704:(e,t,l)=>{l.d(t,{c:()=>s});var o=l(27664),a=l(82496);const s=(0,o.c)((0,a.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")}}]);
//# sourceMappingURL=7096.b7882549.chunk.js.map