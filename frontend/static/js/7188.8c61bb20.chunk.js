"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[7188],{13724:(e,l,t)=>{t.d(l,{A5:()=>w,Om:()=>R,cp:()=>z,oN:()=>E});var i=t(69060),n=t(3358),o=t(5548),a=t(66931),s=t(89500),d=t(93996),c=t(14696),r=t(13224),u=t(27454),h=t(96464),v=t(43692),p=t(85624),m=t(99904),x=t(33856),g=t(58612),y=t(53248),j=t(29504),b=t(5930),f=t(39308),_=t(4284),C=t(41459),S=t(46864),A=t(76491),F=t(10728),N=t(49608),T=t(28064),D=(t(37692),t(35832)),P=t(82496);const k=(e,l)=>e.map((e=>{const t={};return l.forEach(((l,i)=>{if(l.isVisible||l.Defult_Display)if(l.isCustomCell&&l.Cell){const n=l.Cell({row:e}),o=l.ColumnHeader?String(l.ColumnHeader).replace(/\s+/g,"_").toLowerCase():`field_${i+1}`;"string"!==typeof n&&"number"!==typeof n&&"bigint"!==typeof n||(t[o]=n)}else{let i=l.Field_Name;t[i]=e[i]||""}})),t})),w=function(){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{isVisible:arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,Field_Name:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",Fied_Data:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string",align:arguments.length>3&&void 0!==arguments[3]?arguments[3]:"left",verticalAlign:arguments.length>4&&void 0!==arguments[4]?arguments[4]:"center",...e&&{ColumnHeader:e}}},R=e=>{let{buttonsData:l=[],ToolTipText:t="Options"}=e;const[u,h]=(0,i.useState)(null),v=Boolean(u);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(n.c,{title:t,children:(0,P.jsx)(o.c,{"aria-describedby":v,onClick:e=>{h(e.currentTarget)},className:"ms-2",size:"small",children:(0,P.jsx)(_.c,{})})}),(0,P.jsx)(a.cp,{open:v,anchorEl:u,onClose:()=>{h(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,P.jsx)(s.c,{children:l.map(((e,l)=>(0,P.jsxs)(d.c,{onClick:()=>(null===e||void 0===e?void 0:e.onclick)&&(null===e||void 0===e?void 0:e.onclick()),disabled:null===e||void 0===e?void 0:e.disabled,children:[(0,P.jsx)(c.c,{children:null===e||void 0===e?void 0:e.icon}),(0,P.jsx)(r.c,{children:null===e||void 0===e?void 0:e.name})]},l)))})})]})},E=(e,l)=>{switch(l){case"number":return e?(0,f.SA)(e):e;case"date":return e?(0,f.uy)(e):e;case"time":return e?(0,f.AX)(e):e;case"string":return e;default:return""}},H=e=>{let{dataArray:l=[],columns:t=[],onClickFun:n=null,isExpendable:a=!1,expandableComp:s=null,tableMaxHeight:d=550,initialPageCount:c=20,EnableSerialNumber:r=!1,CellSize:_="small",disablePagination:w=!1,title:H="",PDFPrintOption:z=!1,ExcelPrintOption:I=!1,maxHeightOption:V=!1,ButtonArea:B=null,MenuButtons:$=[],bodyFontSizePx:M=13,headerFontSizePx:O=13}=e;const[q,L]=(0,i.useState)(0),[U,Q]=(0,i.useState)(c),[W,G]=(0,i.useState)([]),[K,J]=(0,i.useState)(!0),Y=K&&V?" max-content ":d,Z=[{type:"left",class:"text-start"},{type:"right",class:"text-end"},{type:"center",class:"text-center"}],X=[{type:"top",class:" vtop "},{type:"bottom",class:" vbottom "},{type:"center",class:" vctr "}],ee=(e=>{if(!W.length)return e;return[...e].sort(((e,l)=>{for(const t of W){const{columnId:i,direction:n}=t,o=e[i],a=l[i];if(o!==a)return"asc"===n?o>a?1:-1:o<a?1:-1}return 0}))})(l),le=q*U,te=le+U,ie=ee.slice(le,te),ne=e=>{let{row:l,index:d}=e;const[c,v]=(0,i.useState)(!1),p="20px";return(0,P.jsxs)(i.Fragment,{children:[(0,P.jsxs)(u.c,{children:[!0===a&&s&&(0,P.jsx)(h.c,{className:"border-end text-center vtop",sx:{fontSize:`${M}px`},children:(0,P.jsx)(o.c,{size:"small",onClick:()=>v((e=>!e)),children:c?(0,P.jsx)(C.c,{sx:{fontSize:p}}):(0,P.jsx)(S.c,{sx:{fontSize:p}})})}),!0===r&&(0,P.jsx)(h.c,{className:"border-end text-center vtop",sx:{fontSize:`${M}px`},children:U*q+d+1}),null===t||void 0===t?void 0:t.map(((e,t)=>{var i,o;const a=(0,f.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,f.Qr)(null===e||void 0===e?void 0:e.isVisible,1),s=Boolean(null===e||void 0===e?void 0:e.isCustomCell)&&e.Cell,c=!s,r=(l,t,i)=>null!==e&&void 0!==e&&e.tdClass?` ${null===e||void 0===e?void 0:e.tdClass({row:l,Field_Name:t,index:i})} `:"",u=e.align?null===(i=Z.find((l=>l.type===String(e.align).toLowerCase())))||void 0===i?void 0:i.class:"",v=e.verticalAlign?null===(o=X.find((l=>l.type===String(e.verticalAlign).toLowerCase())))||void 0===o?void 0:o.class:" vctr ";if(a&&c){const i=Object.entries(l).find((l=>{let[t]=l;return t===e.Field_Name}));return(0,P.jsx)(h.c,{className:`border-end ${u} ${v} ${r(l,e.Field_Name,d)}`,sx:{fontSize:`${M}px`},onClick:()=>n?n(l):console.log("Function not supplied"),children:i?E(i[1],null===e||void 0===e?void 0:e.Fied_Data):"-"},t)}return a&&s?(0,P.jsx)(h.c,{className:`border-end ${u} ${v} ${r(l,e.Field_Name,d)}`,sx:{fontSize:`${M}px`},children:e.Cell({row:l,Field_Name:e.Field_Name,index:d})},t):(0,P.jsx)(h.c,{sx:{fontSize:`${M}px`},className:`border-end ${u} ${v}`,children:"-"},t)}))]}),!0===a&&s&&c&&(0,P.jsx)(u.c,{children:(0,P.jsx)(h.c,{colSpan:Number(null===t||void 0===t?void 0:t.length)+(!0===r?2:1),children:s({row:l,index:d})})})]})};return(0,P.jsxs)(v.c,{className:"rounded-3 bg-white overflow-hidden",component:p.c,children:[(0,P.jsxs)("div",{className:"d-flex align-items-center flex-wrap px-3 py-2 flex-row-reverse ",children:[(z||I||$.length>0||V)&&(0,P.jsx)(R,{ToolTipText:"Table Options",buttonsData:[...V?[{name:"Max Height",icon:K?(0,P.jsx)(A.c,{fontSize:"small",color:"primary"}):(0,P.jsx)(F.c,{fontSize:"small"}),onclick:()=>J((e=>!e)),disabled:(0,f.Qr)(null===l||void 0===l?void 0:l.length,0)}]:[],...z?[{name:"PDF Print",icon:(0,P.jsx)(N.c,{fontSize:"small",color:"primary"}),onclick:()=>((e,l)=>{try{const t=new T.default,i=k(e,l),n=l.filter((e=>e.isVisible||e.Defult_Display)).map((e=>e.Field_Name||String(e.ColumnHeader).replace(/\s+/g,"_").toLowerCase())),o=i.map((e=>n.map((l=>e[l])))).map(((e,l)=>({...e,Sno:l+1})));t.autoTable({head:[n],body:o}),t.save("table.pdf")}catch(t){console.error(t)}})(l,t),disabled:(0,f.Qr)(null===l||void 0===l?void 0:l.length,0)}]:[],...I?[{name:"Excel Print",icon:(0,P.jsx)(N.c,{fontSize:"small",color:"primary"}),onclick:()=>((e,l)=>{try{const t=k(e,l),i=D.c$.json_to_sheet(t),n=D.c$.book_new();D.c$.book_append_sheet(n,i,"Data"),D.a8(n,"table.xlsx")}catch(t){console.error(t)}})(l,t),disabled:(0,f.Qr)(null===l||void 0===l?void 0:l.length,0)}]:[],...$]}),B&&B,H&&(0,P.jsx)("h6",{className:"fw-bold text-muted flex-grow-1 m-0",children:H})]}),(0,P.jsx)(m.c,{sx:{maxHeight:Y},children:(0,P.jsxs)(x.c,{stickyHeader:!0,size:_,children:[(0,P.jsx)(g.c,{children:(0,P.jsxs)(u.c,{children:[a&&s&&(0,P.jsx)(h.c,{className:"fw-bold border-end border-top text-center",sx:{fontSize:`${O}px`,backgroundColor:"#EDF0F7"},children:"#"}),r&&(0,P.jsx)(h.c,{className:"fw-bold border-end border-top text-center",sx:{fontSize:`${O}px`,backgroundColor:"#EDF0F7"},children:"SNo"}),t.map(((e,l)=>{const t=(0,f.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,f.Qr)(null===e||void 0===e?void 0:e.isVisible,1),i=!1===Boolean(null===e||void 0===e?void 0:e.isCustomCell)||!e.Cell,n=W.find((l=>l.columnId===e.Field_Name)),o=n?n.direction:"asc";var a,s,d,c;return t?i?(0,P.jsx)(h.c,{className:"fw-bold border-end border-top "+(e.align?null===(a=Z.find((l=>l.type===String(e.align).toLowerCase())))||void 0===a?void 0:a.class:""),sx:{fontSize:`${O}px`,backgroundColor:"#EDF0F7"},sortDirection:!!n&&o,children:(0,P.jsx)(y.c,{active:!!n,direction:o,onClick:()=>(e=>{const l=W.find((l=>l.columnId===e));if(l){const t="asc"===l.direction;G(W.map((l=>l.columnId===e?{...l,direction:t?"desc":"asc"}:l)))}else G([...W,{columnId:e,direction:"asc"}])})(e.Field_Name),children:e.ColumnHeader||(null===e||void 0===e||null===(s=e.Field_Name)||void 0===s?void 0:s.replace(/_/g," "))})},l):(0,P.jsx)(h.c,{className:(e.ColumnHeader||null!==e&&void 0!==e&&e.Field_Name?" fw-bold border-end border-top p-2 appFont ":" p-0 ")+" "+(e.align?null===(d=Z.find((l=>l.type===String(e.align).toLowerCase())))||void 0===d?void 0:d.class:""),sx:{fontSize:`${O}px`,backgroundColor:"#EDF0F7"},children:e.ColumnHeader||(null===e||void 0===e||null===(c=e.Field_Name)||void 0===c?void 0:c.replace(/_/g," "))},l):null}))]})}),(0,P.jsxs)(j.c,{children:[(w?ee:ie).map(((e,l)=>(0,P.jsx)(ne,{row:e,index:l},l))),0===l.length&&(0,P.jsx)(u.c,{children:(0,P.jsx)(h.c,{colSpan:t.length+(!0===a&&s?1:0)+(!0===r?1:0),sx:{textAlign:"center"},children:"No Data"})})]})]})}),!w&&0!==ie.length&&(0,P.jsx)("div",{className:"p-2 pb-0",children:(0,P.jsx)(b.c,{component:"div",count:l.length,page:q,onPageChange:(e,l)=>{L(l)},rowsPerPage:U,onRowsPerPageChange:e=>{Q(parseInt(e.target.value,10)),L(0)},rowsPerPageOptions:Array.from(new Set([c,5,20,50,100,200,500])).sort(((e,l)=>e-l)),labelRowsPerPage:"Rows per page",showFirstButton:!0,showLastButton:!0})})]})};H.defaultProps={dataArray:[],columns:[],onClickFun:null,isExpendable:!1,expandableComp:null,tableMaxHeight:550,initialPageCount:20,EnableSerialNumber:!1,CellSize:"small",disablePagination:!1,title:void 0,PDFPrintOption:!1,ExcelPrintOption:!1,maxHeightOption:!1,ButtonArea:null,MenuButtons:[],headerFontSizePx:13,bodyFontSizePx:13};const z=H},62344:(e,l,t)=>{t.d(l,{o$:()=>a,o5:()=>s,cF:()=>o,iI:()=>n,_8:()=>d});const i=t.p+"static/media/smt.aa4d4f940bbebff07a57.png",n={table:{style:{width:"auto",backgroundColor:"transparent"}},rows:{style:{backgroundColor:"transparent"}},headCells:{style:{backgroundColor:"#6b9080f8",color:"white",fontSize:"14px"}}},o={menu:(e,l)=>({...e,zIndex:9999}),menuPortal:e=>({...e,zIndex:9999}),groupHeading:e=>({...e,backgroundColor:"#f5f5f5",color:"#333",fontWeight:"bold",fontSize:"14px",padding:"8px 12px",borderBottom:"1px solid #ddd",textTransform:"uppercase"}),option:(e,l)=>({...e,backgroundColor:l.isSelected?"#2684FF":l.isFocused?"#E2ECF9":"white",color:l.isSelected?"white":"#333",padding:"10px 12px"})},a=[{id:1,headname:"Menu ID",variant:"head",align:"left",width:100},{id:2,headname:"MenuName"},{id:3,headname:"Read Rights"},{id:4,headname:"Add Rights"},{id:5,headname:"Edit Rights"},{id:6,headname:"Delete Rights"},{id:7,headname:"Print Rights"},{id:8,headname:"Action"}],s=[{dataBase:1,name:"SHANKAR TRADERS",business:"Wholesale Merchant in Dhall",address:"32, Chitrakara Street, Madurai - 01 <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:i,gstin:"33AADFS6973R1ZD",phone:"984-313-1353, 984-335-5166",fssai:"12418012000818",bankAccount:"0021 5032 0885 122",ifsc:"TMBL0000002"},{dataBase:2,name:"SMT AGRO PRODUCTS",business:"",address:"H.O: 153, Chitrakara Street, 2nd Floor, Madurai -01 <br /> G.O: 746 Puliyur, Sayanapuram, Svga <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:i,gstin:"33ACMFS3420Q1ZQ",phone:"0452-4371625",fssai:"12418012000818",bankAccount:"0025 3031 0875 947",ifsc:"TMBL0000002"},{dataBase:3,name:"BHAVANI TRADERS",business:"",address:"H.O: 152-A, Chitrakara Street, Madurai -01 <br /> G.O: 30/1-Rajman Nagar, Chintamani Main Road, Mdu-01 <br /> Tax Invoice",logo:i,gstin:"33AAEFB6728J1ZG",phone:"958-559-7641, 958-559-7614",fssai:"12418012000670",bankAccount:"0021 5005 0800 309",ifsc:"TMBL0000002"}],d=[{name:"PURCHASE_ORDER"},{name:"PURCHASE_INVOICE"},{name:"SALE_ORDER"},{name:"SALE_INVOICE"},{name:"JOURNAL"},{name:"STOCK_JOURNAL"},{name:"PAYMENT"},{name:"RECEIPT"},{name:"CONTRA"}]},74087:(e,l,t)=>{t.r(l),t.d(l,{default:()=>D});var i=t(3358),n=t(5548),o=t(89e3),a=t(82656),s=t(26773),d=t(4488),c=t(90048),r=t(39308),u=t(1908),h=t(13724),v=t(99852),p=t(69060),m=t(61988),x=t(86e3),g=t(45180),y=t(57704),j=t(51560),b=t(62344),f=t(56480),_=t(64568),C=t(35228),S=t(82496);const A=e=>{var l;let{updateValues:t,setUpdateValues:i,open:n=!1,onClose:u,update:h,creditAccount:v=[]}=e;const p=(null===(l=C.payTypeAndStatus.find((e=>e.type===(null===t||void 0===t?void 0:t.collection_type))))||void 0===l?void 0:l.statusOptions)||[];return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(a.c,{open:n,onClose:u,maxWidth:"md",fullWidth:!0,children:[(0,S.jsx)(s.c,{children:"Update Receipt"}),(0,S.jsxs)("form",{onSubmit:e=>{e.preventDefault(),h({...t,verified_by:(0,r.Qr)(null===t||void 0===t?void 0:t.verify_status,1)?t.verified_by:null})},children:[(0,S.jsx)(d.c,{children:(0,S.jsxs)("div",{className:"table-responsive",children:[(0,S.jsx)("table",{className:"table table-borderless fa-13",children:(0,S.jsxs)("tbody",{children:[(0,S.jsxs)("tr",{children:[(0,S.jsxs)("td",{children:["Date",(0,S.jsx)(_.c,{})]}),(0,S.jsx)("td",{children:(0,S.jsx)("input",{type:"date",className:"cus-inpt border p-2",value:null===t||void 0===t?void 0:t.collection_date,onChange:e=>i((l=>({...l,collection_date:e.target.value}))),required:!0})})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:"Verify Date"}),(0,S.jsx)("td",{children:(0,S.jsx)("input",{type:"date",value:null!==t&&void 0!==t&&t.bank_date?null===t||void 0===t?void 0:t.bank_date:"",onChange:e=>i((l=>({...l,bank_date:e.target.value}))),className:"cus-inpt border border p-2"})})]}),(0,S.jsxs)("tr",{children:[(0,S.jsxs)("td",{children:["Payment Type",(0,S.jsx)(_.c,{})]}),(0,S.jsx)("td",{children:(0,S.jsxs)("select",{className:"cus-inpt border p-2",value:null===t||void 0===t?void 0:t.collection_type,required:!0,onChange:e=>i((l=>{var t;return{...l,collection_type:e.target.value,payment_status:null===(t=C.payTypeAndStatus.find((l=>l.type===e.target.value)))||void 0===t?void 0:t.default}})),children:[(0,S.jsx)("option",{value:"",disabled:!0,children:"Select"}),(0,S.jsx)("option",{value:"CASH",children:"CASH"}),(0,S.jsx)("option",{value:"UPI",children:"UPI"}),(0,S.jsx)("option",{value:"CHEQUE",children:"CHEQUE"}),(0,S.jsx)("option",{value:"BANK",children:"BANK"})]})})]}),(0,S.jsxs)("tr",{children:[(0,S.jsxs)("td",{children:["Payment Account ",(0,S.jsx)(_.c,{})]}),(0,S.jsx)("td",{children:(0,S.jsxs)("select",{className:"cus-inpt border p-2",value:null===t||void 0===t?void 0:t.collection_account,required:!0,disabled:!(null!==t&&void 0!==t&&t.collection_type),onChange:e=>i((l=>({...l,collection_account:e.target.value}))),children:[(0,S.jsx)("option",{value:"",disabled:!0,children:"Select"}),(0,r.dq)(v).filter((e=>(0,r.m2)(t.collection_type,"CASH")?(0,r.m2)(e.Type,"CASH"):!(0,r.m2)(e.Type,"CASH"))).map(((e,l)=>(0,S.jsx)("option",{value:null===e||void 0===e?void 0:e.Id,children:null===e||void 0===e?void 0:e.Bank_Name},l)))]})})]}),(0,S.jsxs)("tr",{children:[(0,S.jsxs)("td",{children:["Payment Status",(0,S.jsx)(_.c,{})]}),(0,S.jsx)("td",{children:(0,S.jsxs)("select",{className:"cus-inpt border p-2",value:null===t||void 0===t?void 0:t.payment_status,required:!0,disabled:!(null!==t&&void 0!==t&&t.collection_type),onChange:e=>i((l=>({...l,payment_status:e.target.value}))),children:[(0,S.jsx)("option",{value:"",disabled:!0,children:"Select"}),p.map(((e,l)=>(0,S.jsx)("option",{value:e,children:e},l))),(0,S.jsx)("option",{value:"Canceled",children:"Canceled"}),(0,S.jsx)("option",{value:"Completed",children:"Completed"})]})})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:"Verify Status"}),(0,S.jsx)("td",{children:(0,S.jsxs)("select",{value:null===t||void 0===t?void 0:t.verify_status,onChange:e=>i((l=>({...l,verify_status:e.target.value}))),className:"cus-inpt border border p-2",children:[(0,S.jsx)("option",{value:0,children:"Not-verified"}),(0,S.jsx)("option",{value:1,children:"verified"})]})})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:"Narration"}),(0,S.jsx)("td",{children:(0,S.jsx)("textarea",{className:"cus-inpt border p-2",value:null===t||void 0===t?void 0:t.narration,onChange:e=>i((l=>({...l,narration:e.target.value}))),placeholder:"Narration..."})})]})]})}),(0,S.jsxs)("table",{className:"table table-bordered fa-13",children:[(0,S.jsx)("thead",{children:(0,S.jsx)("tr",{children:["Sno","Invoice No","Invoice Date","Invoice Value","Total Receipt","Receipt Amount"].map(((e,l)=>(0,S.jsx)("th",{children:e},l)))})}),(0,S.jsx)("tbody",{children:(0,r.dq)(null===t||void 0===t?void 0:t.Receipts).map(((e,l)=>{const t=(0,r.gH)(null===e||void 0===e?void 0:e.collected_amount);return(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:l+1}),(0,S.jsx)("td",{children:null===e||void 0===e?void 0:e.Do_Inv_No}),(0,S.jsx)("td",{children:(0,r.uy)(null===e||void 0===e?void 0:e.Do_Date)}),(0,S.jsx)("td",{children:(0,r.SA)(null===e||void 0===e?void 0:e.Total_Invoice_value)}),(0,S.jsx)("td",{children:(0,r.SA)(null===e||void 0===e?void 0:e.total_receipt_amount)}),(0,S.jsx)("td",{children:(0,S.jsx)("input",{className:"cus-inpt",value:null===e||void 0===e?void 0:e.collected_amount,type:"number",required:!0,max:(0,r.od)(null===e||void 0===e?void 0:e.Total_Invoice_value,(0,r.od)(null===e||void 0===e?void 0:e.total_receipt_amount,t)),onChange:e=>i((t=>{const i=[...t.Receipts];return i[l].collected_amount=e.target.value,{...t,Receipts:i}}))})})]},l)}))})]})]})}),(0,S.jsxs)(c.c,{children:[(0,S.jsx)(o.c,{onClick:u,type:"button",children:"cancel"}),(0,S.jsx)(o.c,{type:"submit",variant:"outlined",children:"update"})]})]})]})})};var F=t(83612);const N={Fromdate:(0,r.Q7)(),Todate:(0,r.Q7)()},T={voucherType:[],retailers:[],collectionType:[],paymentStatus:[],collectedBy:[]},D=e=>{let{loadingOn:l,loadingOff:t}=e;const _=(0,j.i6)(),C=(0,j.IT)(),D=new URLSearchParams((0,j.IT)().search),P=(0,r.gV)().user,[k,w]=(0,p.useState)([]),[R,E]=(0,p.useState)([]),[H,z]=(0,p.useState)(T),[I,V]=(0,p.useState)({creditAccount:[]}),[B,$]=(0,p.useState)({Fromdate:N.Fromdate,Todate:N.Todate,fetchFrom:N.Fromdate,fetchTo:N.Todate,retailer_id:{value:"",label:"Search by Retailer"},voucher_id:{value:"",label:"Select by voucher"},collection_type:{value:"",label:"Search by collection type"},verify_status:{value:"",label:"Search by verify status"},payment_status:{value:"",label:"Search by payment status"},collected_by:{value:"",label:"Search by collection person"},verify_status:{value:"",label:"Search by Verify Status"},filterDialog:!1,deleteDialog:!1,updateDialog:!1,refresh:!1}),[M,O]=(0,p.useState)(0),[q,L]=(0,p.useState)(0),[U,Q]=(0,p.useState)(null),[W,G]=(0,p.useState)(F.Y),[K,J]=(0,p.useState)(!1);(0,p.useEffect)((()=>{(0,u.q)({address:"receipt/filterValues"}).then((e=>{var l,t,i,n,o,a;e.success&&z({voucherType:(0,r.dq)(null===e||void 0===e||null===(l=e.others)||void 0===l?void 0:l.voucherType),retailers:(0,r.dq)(null===e||void 0===e||null===(t=e.others)||void 0===t?void 0:t.retailers),collectionType:(0,r.dq)(null===e||void 0===e||null===(i=e.others)||void 0===i?void 0:i.collectionType),paymentStatus:(0,r.dq)(null===e||void 0===e||null===(n=e.others)||void 0===n?void 0:n.paymentStatus),collectedBy:(0,r.dq)(null===e||void 0===e||null===(o=e.others)||void 0===o?void 0:o.collectedBy),verifyStatus:(0,r.dq)(null===e||void 0===e||null===(a=e.others)||void 0===a?void 0:a.verifyStatus)})})).catch((e=>console.error(e))),(0,u.q)({address:"receipt/creditAccounts"}).then((e=>{e.success?V((l=>({...l,creditAccount:e.data}))):V((e=>({...e,creditAccount:[]})))})).catch((e=>console.error(e)))}),[]),(0,p.useEffect)((()=>{l&&l(),(0,u.q)({address:`receipt/collectionReceipts?Fromdate=${null===B||void 0===B?void 0:B.fetchFrom}&Todate=${null===B||void 0===B?void 0:B.fetchTo}&retailer_id=${B.retailer_id.value}&voucher_id=${B.voucher_id.value}&collection_type=${B.collection_type.value}&verify_status=${B.verify_status.value}&payment_status=${B.payment_status.value}&collected_by=${B.collected_by.value}`}).then((e=>{if(e.success){E(e.data);const l=e.data.length;L(l);const t=e.data.reduce(((e,l)=>e+(parseFloat(l.total_amount)||0)),0);O(t)}})).finally((()=>{t&&t()})).catch((e=>console.error(e)))}),[null===B||void 0===B?void 0:B.fetchFrom,null===B||void 0===B?void 0:B.fetchTo,null===B||void 0===B?void 0:B.refresh]),(0,p.useEffect)((()=>{const e={Fromdate:D.get("Fromdate")&&(0,r.e8)(D.get("Fromdate"))?D.get("Fromdate"):N.Fromdate,Todate:D.get("Todate")&&(0,r.e8)(D.get("Todate"))?D.get("Todate"):N.Todate};$((l=>({...l,fetchFrom:e.Fromdate,fetchTo:e.Todate})))}),[C.search]);const Y=()=>{$((e=>({...e,filterDialog:!1,deleteDialog:!1,updateDialog:!1}))),Q(null),G(F.Y)};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(h.cp,{title:"Receipts",ButtonArea:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(i.c,{title:"Filters",children:(0,S.jsx)(n.c,{size:"small",onClick:()=>$({...B,filterDialog:!0}),children:(0,S.jsx)(m.c,{})})}),(0,S.jsx)(o.c,{variant:"outlined",className:"ms-2",onClick:()=>_("create"),children:"Create Receipt"}),(0,S.jsx)("div",{className:"d-flex justify-content-between align-items-center mx-2",children:R.length>0&&(0,S.jsx)(o.c,{variant:"outlined",onClick:()=>{k.length===R.length?w([]):w(R)},children:k.length===R.length?"Unselect All":"Select All"})}),(0,S.jsx)(o.c,{variant:"outlined",className:"ms-2 mx-2",onClick:()=>J(!0),disabled:0===k.length,children:"Verify"}),(0,S.jsxs)("div",{className:"summary-block",children:[(0,S.jsxs)("div",{children:["Total Count: ",q]}),(0,S.jsxs)("div",{children:["Total Collection Amount: \u20b9 ",M.toFixed(2)]})]})]}),EnableSerialNumber:!0,dataArray:R,headerFontSizePx:13,bodyFontSizePx:12,columns:[{isVisible:1,ColumnHeader:"CheckBox",isCustomCell:!0,Cell:e=>{let{row:l}=e;const t=k.some((e=>e.collection_id===l.collection_id));return(0,S.jsx)("input",{type:"checkbox",checked:t,onChange:()=>(e=>{const l=k.some((l=>l.collection_id===e.collection_id));w(l?k.filter((l=>l.collection_id!==e.collection_id)):[...k,e])})(l),disabled:0!==(null===l||void 0===l?void 0:l.verify_status),onFocus:e=>{e.target.blur()},style:{cursor:"pointer",transform:"scale(1.5)",width:"14px",height:"20px"}})}},(0,h.A5)("collection_inv_no","string","Invoice"),(0,h.A5)("collection_date","date","Date"),(0,h.A5)("RetailerGet","string","Retailer"),(0,h.A5)("CollectedByGet","string","Received By"),(0,h.A5)("total_amount","number","Amount"),(0,h.A5)("collection_type","string","Type"),(0,h.A5)("VoucherGet","string","Voucher"),{isVisible:1,ColumnHeader:"Verifyed-?",isCustomCell:!0,Cell:e=>{let{row:l}=e;const t=(0,r.Qr)(null===l||void 0===l?void 0:l.verify_status,1);return(0,S.jsx)("span",{className:(t?"bg-success":"bg-warning")+" text-light fa-11 px-2 py-1 rounded-3",children:t?"Verified":"Pending"})}},{isVisible:1,ColumnHeader:"Action",isCustomCell:!0,Cell:e=>{let{row:l}=e;const t=null===l||void 0===l?void 0:l.collection_id;return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(h.Om,{buttonsData:[{name:"Edit",icon:(0,S.jsx)(x.c,{className:"fa-20"}),onclick:()=>{G({collection_id:Number(null===l||void 0===l?void 0:l.collection_id),collection_date:(0,r.Q7)(null===l||void 0===l?void 0:l.collection_date),bank_date:null!==l&&void 0!==l&&l.bank_date?(0,r.Q7)(null===l||void 0===l?void 0:l.bank_date):"",collection_type:(null===l||void 0===l?void 0:l.collection_type)||"CASH",collection_account:(null===l||void 0===l?void 0:l.collection_account)||0,verify_status:null===l||void 0===l?void 0:l.verify_status,payment_status:null===l||void 0===l?void 0:l.payment_status,narration:null===l||void 0===l?void 0:l.narration,verified_by:P.UserId,Receipts:(0,r.dq)(null===l||void 0===l?void 0:l.Receipts)}),$((e=>({...e,updateDialog:!0})))}},{name:"Delete",icon:(0,S.jsx)(g.c,{className:"fa-20 text-danger"}),onclick:()=>{Q(t),$((e=>({...e,deleteDialog:!0})))}}]})})}}],isExpendable:!0,expandableComp:e=>{let{row:l}=e;return(0,S.jsx)("div",{className:"py-2",children:(0,S.jsx)(h.cp,{disablePagination:!0,headerFontSizePx:13,bodyFontSizePx:12,dataArray:Array.isArray(null===l||void 0===l?void 0:l.Receipts)?null===l||void 0===l?void 0:l.Receipts:[],columns:[(0,h.A5)("Do_Inv_No","string","Delivery Invoice Number"),(0,h.A5)("Do_Date","date","Delivery Date"),(0,h.A5)("collected_amount","number","Receipt Amount"),(0,h.A5)("total_receipt_amount","number","Total Receipt"),(0,h.A5)("Total_Invoice_value","number","Invoice Value"),{isVisible:1,ColumnHeader:"Pending Amount",isCustomCell:!0,Cell:e=>{let{row:l}=e;return(0,r.od)(null===l||void 0===l?void 0:l.bill_amount,null===l||void 0===l?void 0:l.total_receipt_amount)}}]})})}}),(0,S.jsx)(A,{update:e=>{l&&l(),(0,u.q)({address:"receipt/collectionReceipts",method:"PUT",bodyData:e}).then((e=>{e.success?(f.m4.success((null===e||void 0===e?void 0:e.message)||"Changes saved"),Y(),$((e=>({...e,refresh:!e.refresh})))):f.m4.error((null===e||void 0===e?void 0:e.message)||"Failed to save changes")})).catch((e=>console.error(e))).finally((()=>{t&&t()}))},updateValues:W,setUpdateValues:G,open:B.updateDialog,onClose:Y,creditAccount:I.creditAccount}),(0,S.jsxs)(a.c,{open:B.filterDialog,onClose:Y,fullWidth:!0,maxWidth:"md",children:[(0,S.jsx)(s.c,{children:"Filters"}),(0,S.jsx)(d.c,{children:(0,S.jsx)("div",{className:"table-responsive pb-4",children:(0,S.jsx)("table",{className:"table",children:(0,S.jsxs)("tbody",{children:[(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{style:{verticalAlign:"middle"},children:"From"}),(0,S.jsx)("td",{children:(0,S.jsx)("input",{type:"date",value:B.Fromdate,onChange:e=>$({...B,Fromdate:e.target.value}),className:"cus-inpt"})}),(0,S.jsx)("td",{style:{verticalAlign:"middle"},children:"To"}),(0,S.jsx)("td",{children:(0,S.jsx)("input",{type:"date",value:B.Todate,onChange:e=>$({...B,Todate:e.target.value}),className:"cus-inpt"})})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{style:{verticalAlign:"middle"},children:"Voucher"}),(0,S.jsx)("td",{colSpan:3,children:(0,S.jsx)(v.cp,{value:B.voucher_id,onChange:e=>$((l=>({...l,voucher_id:e}))),menuPortalTarget:document.body,options:H.voucherType,styles:b.cF,isSearchable:!0,placeholder:"Select Voucher",maxMenuHeight:300})})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{style:{verticalAlign:"middle"},children:"Retailer"}),(0,S.jsx)("td",{colSpan:3,children:(0,S.jsx)(v.cp,{value:B.retailer_id,onChange:e=>$((l=>({...l,retailer_id:e}))),menuPortalTarget:document.body,options:H.retailers,styles:b.cF,isSearchable:!0,placeholder:"Select Retailer",maxMenuHeight:300})})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{style:{verticalAlign:"middle"},children:"Receipt Type"}),(0,S.jsx)("td",{colSpan:3,children:(0,S.jsx)(v.cp,{value:B.collection_type,onChange:e=>$((l=>({...l,collection_type:e}))),menuPortalTarget:document.body,options:H.collectionType,styles:b.cF,isSearchable:!0,placeholder:"Select Receipt Type",maxMenuHeight:300})})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{style:{verticalAlign:"middle"},children:"Collected By"}),(0,S.jsx)("td",{colSpan:3,children:(0,S.jsx)(v.cp,{value:B.collected_by,onChange:e=>$((l=>({...l,collected_by:e}))),menuPortalTarget:document.body,options:H.collectedBy,styles:b.cF,isSearchable:!0,placeholder:"Select Collection Person",maxMenuHeight:300})})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{style:{verticalAlign:"middle"},children:"Payment Status"}),(0,S.jsx)("td",{colSpan:3,children:(0,S.jsx)(v.cp,{value:B.payment_status,onChange:e=>$((l=>({...l,payment_status:e}))),menuPortalTarget:document.body,options:H.paymentStatus,styles:b.cF,isSearchable:!0,placeholder:"Select Payment Status",maxMenuHeight:300})})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{style:{verticalAlign:"middle"},children:"Verify Status"}),(0,S.jsx)("td",{colSpan:3,children:(0,S.jsx)(v.cp,{value:B.verify_status,onChange:e=>$((l=>({...l,verify_status:e}))),menuPortalTarget:document.body,options:H.verifyStatus,styles:b.cF,isSearchable:!0,placeholder:"Select Verify Status",maxMenuHeight:300})})]})]})})})}),(0,S.jsxs)(c.c,{children:[(0,S.jsx)(o.c,{onClick:Y,children:"close"}),(0,S.jsx)(o.c,{onClick:()=>{(e=>{const l=new URLSearchParams(e);_(`?${l.toString()}`,{replace:!0})})({Fromdate:null===B||void 0===B?void 0:B.Fromdate,Todate:null===B||void 0===B?void 0:B.Todate}),$((e=>({...e,refresh:!e.refresh}))),Y()},startIcon:(0,S.jsx)(y.c,{}),variant:"outlined",children:"Search"})]})]}),(0,S.jsxs)(a.c,{open:B.deleteDialog,onClose:Y,maxWidth:"sm",fullWidth:!0,children:[(0,S.jsx)(s.c,{children:"Confirmation"}),(0,S.jsx)(d.c,{children:"Do you want to delete the receipt permanently?"}),(0,S.jsxs)(c.c,{children:[(0,S.jsx)(o.c,{onClick:Y,children:"cancel"}),(0,S.jsx)(o.c,{onClick:()=>{return e=U,l&&l(),void(0,u.q)({address:"receipt/collectionReceipts",method:"DELETE",bodyData:{collection_id:e}}).then((e=>{e.success?(f.m4.success((null===e||void 0===e?void 0:e.message)||"Receipt deleted successfully"),$((e=>({...e,refresh:!e.refresh}))),Y()):f.m4.error((null===e||void 0===e?void 0:e.message)||"Failed to delete Receipt")})).catch((e=>console.error(e))).finally((()=>{t&&t()}));var e},variant:"outlined",color:"error",children:"Delete"})]})]}),(0,S.jsxs)(a.c,{open:K,fullWidth:!0,maxWidth:"sm",children:[(0,S.jsx)(s.c,{children:"Confirm Action"}),(0,S.jsx)(d.c,{children:(0,S.jsx)("div",{children:"Are you sure you want to verify this status?"})}),(0,S.jsxs)(c.c,{children:[(0,S.jsx)(o.c,{onClick:()=>J(!1),children:"Cancel"}),(0,S.jsx)(o.c,{onClick:async()=>{if(!k||0===k.length)return void f.m4.warning("Please select at least one record to verify.");const e=k.map((e=>e.collection_id));l&&l();try{const l=await(0,u.q)({address:"receipt/verifyStatus",method:"PUT",bodyData:{collectionIdToUpdate:e},headers:{"Content-Type":"application/json"}});l.success?(f.m4.success((null===l||void 0===l?void 0:l.message)||"Collections verified successfully"),Y(),$((e=>({...e,refresh:!e.refresh})))):f.m4.error((null===l||void 0===l?void 0:l.message)||"Failed to verify collections")}catch(i){f.m4.error("Something went wrong while verifying")}finally{t&&t()}},color:"primary",variant:"contained",children:"Verify"})]})]})]})}},45180:(e,l,t)=>{t.d(l,{c:()=>o});var i=t(27664),n=t(82496);const o=(0,i.c)((0,n.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},86e3:(e,l,t)=>{t.d(l,{c:()=>o});var i=t(27664),n=t(82496);const o=(0,i.c)((0,n.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},61988:(e,l,t)=>{t.d(l,{c:()=>o});var i=t(27664),n=t(82496);const o=(0,i.c)((0,n.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61"}),"FilterAlt")},57704:(e,l,t)=>{t.d(l,{c:()=>o});var i=t(27664),n=t(82496);const o=(0,i.c)((0,n.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")}}]);
//# sourceMappingURL=7188.8c61bb20.chunk.js.map