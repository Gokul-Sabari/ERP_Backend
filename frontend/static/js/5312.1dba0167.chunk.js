"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[5312],{64568:(e,l,t)=>{t.d(l,{c:()=>a});var d=t(82496);const a=()=>(0,d.jsx)("span",{style:{color:"red",fontWeight:"bold",fontSize:"1em"},children:" *"})},55312:(e,l,t)=>{t.d(l,{c:()=>D});var d=t(30800),a=t(69060),r=t(89e3),s=t(5548),i=t(82656),n=t(26773),o=t(4488),c=t(90048),u=t(40656),v=t(62344),m=t(56480),h=t(39308),_=t(96064),x=t(86e3),b=t(45180),p=t(80156),I=t(36992),j=t(56084),g=t(1908),N=t(13724),y=t(64568),P=t(82496);const S=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1){case 0:return(0,h.kR)(e*(l/100));case 1:return(0,h.kR)(e-e*(100/(100+l)));default:return 0}},C=function(){var e;let l=arguments.length>1?arguments[1]:void 0;return null!==(e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find((e=>(0,h.Qr)(e.Product_Id,l))))&&void 0!==e?e:{}},D=e=>{let{editValues:l,loadingOn:t,loadingOff:D,reload:T,switchScreen:B,editOn:f}=e;const R=JSON.parse(localStorage.getItem("user")),[G,Q]=(0,a.useState)([]),[A,U]=(0,a.useState)([]),[w,M]=(0,a.useState)([]),[V,O]=(0,a.useState)([]),[k,H]=(0,a.useState)({}),[F,q]=(0,a.useState)([]),[X,E]=(0,a.useState)([]),L={Company_Id:null===R||void 0===R?void 0:R.Company_id,Do_Date:(0,h.Q7)(),VoucherType:"",Retailer_Id:"",Retailer_Name:"Select",Delivery_Status:1,Delivery_Person_Id:0,Payment_Ref_No:"",Delivery_Person_Name:"",Payment_Mode:0,Payment_Status:0,Branch_Id:null===R||void 0===R?void 0:R.BranchId,Narration:"",Created_by:null===R||void 0===R?void 0:R.UserId,Product_Array:[],So_No:null===l||void 0===l?void 0:l.So_Id,GST_Inclusive:1,IS_IGST:0},z={Item_Id:"",ItemName:"Search Item",Bill_Qty:0,Item_Rate:0,UOM:"",Units:"",Product:{},Group:"Search Group",GroupID:"",Brand:"Search Brand",BrandID:"",Amount:0},[W,J]=(0,a.useState)(L),[Y,K]=(0,a.useState)([]),[Z,$]=(0,a.useState)(z),[ee,le]=(0,a.useState)(!1),[te,de]=(0,a.useState)(!1),ae=(0,h.Qr)(W.GST_Inclusive,0),re=(0,h.Qr)(W.GST_Inclusive,1),se=(0,h.Qr)(W.GST_Inclusive,2),ie=(0,h.Qr)(W.IS_IGST,1),[ne,oe]=(0,a.useState)(null),[ce,ue]=(0,a.useState)([]);(0,a.useEffect)((()=>{var e;(0,h.CY)(l)?(J((e=>{var t;return(0,d.c)((0,d.c)({},e),{},{Do_Id:null===l||void 0===l?void 0:l.Do_Id,Do_Date:null!==(t=null===l||void 0===l?void 0:l.Do_Date)&&void 0!==t?t:(0,h.Q7)(),VoucherType:null===l||void 0===l?void 0:l.Voucher_Type,Retailer_Id:null===l||void 0===l?void 0:l.Retailer_Id,Retailer_Name:null===l||void 0===l?void 0:l.Retailer_Name,Delivery_Status:null===l||void 0===l?void 0:l.Delivery_Status,Delivery_Person_Id:null===l||void 0===l?void 0:l.Delivery_Person_Id,Delivery_Person_Name:null===l||void 0===l?void 0:l.Delivery_Person_Name,Payment_Status:null===l||void 0===l?void 0:l.Payment_Status,Payment_Mode:null===l||void 0===l?void 0:l.Payment_Mode,Branch_Id:null===l||void 0===l?void 0:l.Branch_Id,Narration:null===l||void 0===l?void 0:l.Narration,Created_by:null===l||void 0===l?void 0:l.Created_by,Payment_Ref_No:null===l||void 0===l?void 0:l.Payment_Ref_No,So_No:null===l||void 0===l?void 0:l.So_Id,GST_Inclusive:null===l||void 0===l?void 0:l.GST_Inclusive,IS_IGST:null===l||void 0===l?void 0:l.IS_IGST})})),K(null===l||void 0===l||null===(e=l.Products_List)||void 0===e?void 0:e.map((e=>{var l,t,a,r,s,i,n,o,c,u,v,m,_,x,b,p,I;return(0,d.c)((0,d.c)({},e),{},{Item_Id:null!==(l=e.Item_Id)&&void 0!==l?l:"",ItemName:null!==(t=null===e||void 0===e?void 0:e.Product_Name)&&void 0!==t?t:"",Bill_Qty:null!==(a=null===e||void 0===e?void 0:e.Bill_Qty)&&void 0!==a?a:0,Item_Rate:null!==(r=null===e||void 0===e?void 0:e.Item_Rate)&&void 0!==r?r:0,UOM:null!==(s=null===e||void 0===e?void 0:e.Unit_Id)&&void 0!==s?s:"",Units:null!==(i=null===e||void 0===e?void 0:e.Units)&&void 0!==i?i:"",Product:null!==(n=(0,d.c)((0,d.c)({},e),{},{Cgst_P:null!==(o=Number(null===(c=C(A,e.Item_Id))||void 0===c?void 0:c.Cgst_P))&&void 0!==o?o:0,Sgst_P:null!==(u=Number(null===(v=C(A,e.Item_Id))||void 0===v?void 0:v.Sgst_P))&&void 0!==u?u:0,Igst_P:null!==(m=Number(null===(_=C(A,e.Item_Id))||void 0===_?void 0:_.Igst_P))&&void 0!==m?m:0,Gst_P:null!==(x=(0,h.Q5)(null===(b=C(A,e.Item_Id))||void 0===b?void 0:b.Cgst_P,null===(p=C(A,e.Item_Id))||void 0===p?void 0:p.Sgst_P))&&void 0!==x?x:0}))&&void 0!==n?n:{},Group:"Search Group",GroupID:"",Brand:"Search Brand",BrandID:"",Amount:null!==(I=null===e||void 0===e?void 0:e.Amount)&&void 0!==I?I:0})}))),le(!0),null!==l&&void 0!==l&&l.Latitude&&null!==l&&void 0!==l&&l.Longitude||(async()=>{try{const e=await new Promise(((e,l)=>{navigator.geolocation.getCurrentPosition(e,l)})),{latitude:l,longitude:t}=e.coords;J((e=>(0,d.c)((0,d.c)({},e),{},{Delivery_Latitude:l,Delivery_Longitude:t})))}catch(e){console.error(e),m.m4.warn("Unable to fetch location. Allow location access.")}})()):(J(L),K([]),le(!1))}),[l,A]),(0,a.useEffect)((()=>{(0,g.q)({address:"masters/retailers/dropDown?Company_Id=".concat(null===R||void 0===R?void 0:R.Company_id)}).then((e=>{e.success&&Q(e.data)})).catch((e=>console.error(e))),(0,g.q)({address:"masters/uom"}).then((e=>{e.success&&O(e.data)})).catch((e=>console.error(e))),(0,g.q)({address:"masters/products?Company_Id=".concat(null===R||void 0===R?void 0:R.Company_id)}).then((e=>{if(e.success){U(e.data);const l=(0,h.Un)(e.data,"Brand",["Brand_Name"]);M(l)}else U([]),M([])})).catch((e=>console.error(e))),(0,g.q)({address:"masters/users/salesPerson/dropDown?Company_id=".concat(null===R||void 0===R?void 0:R.Company_id)}).then((e=>{e.success&&ue(e.data)})).catch((e=>console.error(e))),(0,g.q)({address:"masters/company?Company_id=".concat(null===R||void 0===R?void 0:R.Company_id)}).then((e=>{e.success&&H(null!==e&&void 0!==e&&e.data[0]?null===e||void 0===e?void 0:e.data[0]:{})})).catch((e=>console.error(e))),(0,g.q)({address:"purchase/voucherType"}).then((e=>{e.success&&q(e.data)})).catch((e=>console.error(e))),(0,g.q)({address:"masters/branch/dropDown"}).then((e=>{e.success&&E(e.data)})).catch((e=>console.error(e)))}),[null===R||void 0===R?void 0:R.Company_id]);const ve=()=>{de(!1),$(z)},me=Y.reduce(((e,l)=>{const t=(0,h.kR)(null===l||void 0===l?void 0:l.Item_Rate),d=parseInt(null===l||void 0===l?void 0:l.Bill_Qty),a=(0,h.eX)(d,t);if(re||se)return e+a;if(ae){const r=C(A,l.Item_Id),s=(0,h.Qr)(ie,1)?r.Igst_P:r.Gst_P;return e+(a+S(0,t,s)*d)}return e}),0),he=Y.reduce(((e,l)=>{const t=(0,h.kR)(null===l||void 0===l?void 0:l.Item_Rate),d=parseInt(null===l||void 0===l?void 0:l.Bill_Qty)||0;if(se)return e.TotalValue+=(0,h.eX)(d,t),e;const a=C(A,l.Item_Id),r=ie?a.Igst_P:a.Gst_P;if(re){const l=S(1,t,r),a=(0,h.od)(t,l);e.TotalTax+=(0,h.eX)(d,l),e.TotalValue+=(0,h.eX)(d,a)}if(ae){const l=S(0,t,r);e.TotalTax+=(0,h.eX)(d,l),e.TotalValue+=(0,h.eX)(d,t)}return e}),{TotalValue:0,TotalTax:0});(0,a.useEffect)((()=>{K((e=>null===e||void 0===e?void 0:e.map((e=>(0,d.c)((0,d.c)({},e),{},{Amount:(0,h.eX)(null===e||void 0===e?void 0:e.Item_Rate,null===e||void 0===e?void 0:e.Bill_Qty)})))))}),[W.GST_Inclusive]);return(0,P.jsxs)(P.Fragment,{children:[f&&(0,P.jsx)(P.Fragment,{children:(0,P.jsx)("h6",{className:"fa-18 m-0 p-3 py-2 d-flex align-items-center justify-content-between",children:"Create Delivery Order"})}),(0,P.jsxs)("div",{className:"p-3 pt-0",children:[(0,P.jsxs)("div",{className:"p-3 bg-light rounded-3 mb-3 shadow-sm",children:[(0,P.jsx)("h5",{className:"border-bottom",children:"From:"}),(0,P.jsxs)("div",{className:"row",children:[(0,P.jsx)("div",{className:"col-lg-8 col-md-7",children:(0,P.jsx)("table",{className:"table",children:(0,P.jsxs)("tbody",{children:[(0,P.jsx)("tr",{children:(0,P.jsx)("td",{className:"border-0 bg-light",colSpan:2,children:null===k||void 0===k?void 0:k.Company_Name})}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:"border-0 bg-light",children:"Address:"}),(0,P.jsx)("td",{className:"border-0 bg-light",children:null===k||void 0===k?void 0:k.Company_Address})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:"border-0 bg-light",children:"Phone:"}),(0,P.jsx)("td",{className:"border-0 bg-light",children:null===k||void 0===k?void 0:k.Telephone_Number})]})]})})}),(0,P.jsx)("div",{className:"col-lg-4 col-md-5",children:(0,P.jsx)("table",{className:"table",children:(0,P.jsxs)("tbody",{children:[(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:"border-0 bg-light",children:"Date:"}),(0,P.jsx)("td",{className:"border-0 bg-light",children:(0,P.jsx)("input",{type:"date",value:null!==W&&void 0!==W&&W.Do_Date?(0,h.Q7)(null===W||void 0===W?void 0:W.Do_Date):"",onChange:e=>J((0,d.c)((0,d.c)({},W),{},{Do_Date:e.target.value})),className:"cus-inpt p-1"})})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:"border-0 bg-light",children:"Invoice Type:"}),(0,P.jsx)("td",{className:"border-0 bg-light",children:(0,P.jsxs)("select",{className:"cus-inpt p-1",onChange:e=>J((0,d.c)((0,d.c)({},W),{},{GST_Inclusive:Number(e.target.value)})),value:W.GST_Inclusive,children:[(0,P.jsx)("option",{value:1,children:"Inclusive Tax"}),(0,P.jsx)("option",{value:0,children:"Exclusive Tax"}),(0,P.jsx)("option",{value:2,children:"Not Taxable"})]})})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:"border-0 bg-light",children:"Tax Type:"}),(0,P.jsx)("td",{className:"border-0 bg-light",children:(0,P.jsxs)("select",{className:"cus-inpt p-1",onChange:e=>J((0,d.c)((0,d.c)({},W),{},{IS_IGST:Number(e.target.value)})),value:W.IS_IGST,children:[(0,P.jsx)("option",{value:"0",children:"GST"}),(0,P.jsx)("option",{value:"1",children:"IGST"})]})})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:"border-0 bg-light",children:"Branch"}),(0,P.jsx)("td",{className:"border-0 bg-light",children:(0,P.jsxs)("select",{className:"cus-inpt p-1 ",onChange:e=>J((0,d.c)((0,d.c)({},W),{},{VoucherType:e.target.value})),value:W.VoucherType,children:[(0,P.jsx)("option",{value:"",disabled:!0,children:"select voucher"}),F.map(((e,l)=>(0,P.jsx)("option",{value:e.Vocher_Type_Id,children:e.Voucher_Type},l)))]})})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:"border-0 bg-light",children:"Branch"}),(0,P.jsx)("td",{className:"border-0 bg-light",children:(0,P.jsxs)("select",{className:"cus-inpt p-1",onChange:e=>J((0,d.c)((0,d.c)({},W),{},{Branch_Id:Number(e.target.value)})),value:W.Branch_Id,children:[(0,P.jsx)("option",{value:"",disabled:!0,children:"select Branch"}),X.map(((e,l)=>(0,P.jsx)("option",{value:e.BranchId,children:e.BranchName},l)))]})})]})]})})})]})]}),(0,P.jsxs)("div",{className:"p-3 bg-light rounded-3 mb-3 shadow-sm",children:[(0,P.jsx)("h5",{className:"border-bottom",children:"To:"}),(0,P.jsxs)("div",{className:"row ",children:[(0,P.jsx)("div",{className:"col-md-6",children:(0,P.jsx)("table",{className:"table",children:(0,P.jsxs)("tbody",{children:[(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:"border-0 bg-light",children:"Retailer Name:"}),(0,P.jsx)("td",{className:"border-0 bg-light",children:(0,P.jsx)(u.cp,{value:{value:null===W||void 0===W?void 0:W.Retailer_Id,label:null===W||void 0===W?void 0:W.Retailer_Name},onChange:e=>J((0,d.c)((0,d.c)({},W),{},{Retailer_Id:e.value,Retailer_Name:e.label})),options:[{value:"",label:"select",isDisabled:!0},...G.map((e=>({value:null===e||void 0===e?void 0:e.Retailer_Id,label:null===e||void 0===e?void 0:e.Retailer_Name})))],styles:v.cF,isSearchable:!0,placeholder:"Retailer Name",maxMenuHeight:200})})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:"border-0 bg-light",children:"Address:"}),(0,P.jsx)("td",{className:"border-0 bg-light",children:R.Name})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:"border-0 bg-light",children:"Phone:"}),(0,P.jsx)("td",{className:"border-0 bg-light"})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:"border-0 bg-light",children:"Delivery_Status:"}),(0,P.jsx)("td",{className:"border-0 bg-light",children:(0,P.jsxs)("select",{className:"cus-inpt p-1",onChange:e=>J((0,d.c)((0,d.c)({},W),{},{Delivery_Status:e.target.value})),value:W.Delivery_Status?W.Delivery_Status:1,children:[(0,P.jsx)("option",{value:5,children:"Pending"}),(0,P.jsx)("option",{value:7,children:"Delivered"}),(0,P.jsx)("option",{value:6,children:"Return"})]})})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:"border-0 bg-light",children:"Payment_Mode:"}),(0,P.jsx)("td",{className:"border-0 bg-light",children:(0,P.jsxs)("select",{className:"cus-inpt p-1",onChange:e=>J((0,d.c)((0,d.c)({},W),{},{Payment_Mode:e.target.value})),value:W.Payment_Mode||0,children:[(0,P.jsx)("option",{value:0}),(0,P.jsx)("option",{value:1,children:"Cash"}),(0,P.jsx)("option",{value:3,children:"QR-Pay"}),(0,P.jsx)("option",{value:2,children:"G-Pay"})]})})]})]})})}),(0,P.jsx)("div",{className:"col-md-6",children:(0,P.jsx)("table",{className:"table",children:(0,P.jsxs)("tbody",{children:[(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:"border-0 bg-light",children:"Q-Pay:"}),(0,P.jsx)("td",{className:"border-0 bg-light",children:10})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:"border-0 bg-light",children:"Frequency Days:"}),(0,P.jsx)("td",{className:"border-0 bg-light",children:20})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:"border-0 bg-light",children:"Payment_Status:"}),(0,P.jsx)("td",{className:"border-0 bg-light",children:(0,P.jsxs)("select",{className:"cus-inpt p-1",onChange:e=>J((0,d.c)((0,d.c)({},W),{},{Payment_Status:Number(e.target.value)})),value:W.Payment_Status,children:[(0,P.jsx)("option",{value:1,children:"Pending"}),(0,P.jsx)("option",{value:3,children:"Complete"})]})})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:"border-0 bg-light",children:"Delivery Person Name:"}),(0,P.jsx)("td",{className:"border-0 bg-light",children:(0,P.jsx)(u.cp,{value:ne?{value:ne.UserId,label:ne.Name}:{value:null===W||void 0===W?void 0:W.Delivery_Person_Id,label:null===W||void 0===W?void 0:W.Delivery_Person_Name},onChange:e=>{oe(e?{UserId:e.value,Name:e.label}:null)},options:[{value:"",label:"Select",isDisabled:!0},...ce.map((e=>({value:e.UserId,label:e.Name})))],styles:v.cF,isSearchable:!0,placeholder:ne?ne.Name:"Sales Person Name"})})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:"border-0 bg-light",children:"Payment Reference No:"}),(0,P.jsx)("td",{className:"border-0 bg-light",children:(0,P.jsx)("input",{type:"text",className:"cus-inpt p-1",onChange:e=>J((0,d.c)((0,d.c)({},W),{},{Payment_Ref_No:e.target.value})),value:null===W||void 0===W?void 0:W.Payment_Ref_No,placeholder:"Enter Payment Reference Number"})})]})]})})})]})]}),(0,P.jsx)("div",{className:"d-flex align-items-end justify-content-end flex-wrap mb-3",children:(0,P.jsx)(r.c,{onClick:()=>de(!0),sx:{ml:1},variant:"outlined",startIcon:(0,P.jsx)(_.c,{}),children:"Add Product"})}),(0,P.jsx)(N.cp,{dataArray:Y,columns:[{isCustomCell:!0,Cell:e=>{var l;let{row:t}=e;return null===t||void 0===t||null===(l=t.Product)||void 0===l?void 0:l.Product_Name},ColumnHeader:"Product",isVisible:1},{isCustomCell:!0,Cell:e=>{var l;let{row:t}=e;return null===t||void 0===t||null===(l=t.Product)||void 0===l?void 0:l.HSN_Code},ColumnHeader:"HSN Code",isVisible:1},{isCustomCell:!0,Cell:e=>{var l;let{row:t}=e;return(null===t||void 0===t?void 0:t.Bill_Qty)+" "+(null!==(l=null===t||void 0===t?void 0:t.Units)&&void 0!==l?l:"")},ColumnHeader:"Quantity",isVisible:1,align:"center"},{Field_Name:"Item_Rate",ColumnHeader:"Rate",Fied_Data:"number",isVisible:1,align:"right"},{ColumnHeader:"Taxable Amount",isCustomCell:!0,Cell:e=>{var l,t,d,a,r;let{row:s}=e;const i=null!==(l=ie?null===s||void 0===s||null===(t=s.Product)||void 0===t?void 0:t.Igst_P:(0,h.Q5)(null===s||void 0===s||null===(d=s.Product)||void 0===d?void 0:d.Cgst_P,null===s||void 0===s||null===(a=s.Product)||void 0===a?void 0:a.Sgst_P))&&void 0!==l?l:0,n=null!==(r=s.Amount)&&void 0!==r?r:0,o=S(W.GST_Inclusive,n,i);return(0,h.SA)(re?n-o:n)},isVisible:1,align:"right"},{isCustomCell:!0,Cell:e=>{var l,t,d,a,r;let{row:s}=e;const i=null!==(l=ie?null===s||void 0===s||null===(t=s.Product)||void 0===t?void 0:t.Igst_P:(0,h.Q5)(null===s||void 0===s||null===(d=s.Product)||void 0===d?void 0:d.Cgst_P,null===s||void 0===s||null===(a=s.Product)||void 0===a?void 0:a.Sgst_P))&&void 0!==l?l:0,n=null!==(r=s.Amount)&&void 0!==r?r:0;return(0,h.SA)(S(W.GST_Inclusive,n,i))+" ("+i+"%)"},ColumnHeader:"Tax",isVisible:1,align:"right"},{ColumnHeader:"Amount",isCustomCell:!0,Cell:e=>{var l,t,d,a,r;let{row:s}=e;const i=null!==(l=ie?null===s||void 0===s||null===(t=s.Product)||void 0===t?void 0:t.Igst_P:(0,h.Q5)(null===s||void 0===s||null===(d=s.Product)||void 0===d?void 0:d.Cgst_P,null===s||void 0===s||null===(a=s.Product)||void 0===a?void 0:a.Sgst_P))&&void 0!==l?l:0,n=null!==(r=s.Amount)&&void 0!==r?r:0,o=S(W.GST_Inclusive,n,i);return(0,h.SA)((0,h.Qr)(W.GST_Inclusive,1)?n:n+o)},isVisible:1,align:"right"},{isCustomCell:!0,Cell:e=>{let{row:l}=e;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(s.c,{onClick:()=>{var e,t,d,a,r;$({Item_Id:l.Item_Id,ItemName:null===l||void 0===l||null===(e=l.Product)||void 0===e?void 0:e.Product_Name,Bill_Qty:l.Bill_Qty,Item_Rate:l.Item_Rate,UOM:l.Product.UOM_Id,Product:l.Product,Group:null===l||void 0===l||null===(t=l.Product)||void 0===t?void 0:t.Pro_Group,GroupID:null===l||void 0===l||null===(d=l.Product)||void 0===d?void 0:d.Product_Group,Brand:null===l||void 0===l||null===(a=l.Product)||void 0===a?void 0:a.Brand_Name,BrandID:null===l||void 0===l||null===(r=l.Product)||void 0===r?void 0:r.Brand,Amount:null===l||void 0===l?void 0:l.Amount}),de(!0)},size:"small",children:(0,P.jsx)(x.c,{})}),(0,P.jsx)(s.c,{size:"small",onClick:()=>{K((e=>e.filter((e=>!(0,h.Qr)(e.Item_Id,l.Item_Id)))))},color:"error",children:(0,P.jsx)(b.c,{})})]})},ColumnHeader:"Action",isVisible:1}],EnableSerialNumber:!0,CellSize:"small",disablePagination:!0}),Y.length>0&&(0,P.jsx)("div",{className:"d-flex justify-content-end py-2",children:(0,P.jsx)("table",{className:"table",children:(0,P.jsxs)("tbody",{children:[(0,P.jsxs)("tr",{children:[(0,P.jsxs)("td",{className:"border p-2",rowSpan:(0,h.Qr)(W.IS_IGST,1)?4:5,children:["Total in words: ",(0,h.m4)(parseInt(me))]}),(0,P.jsx)("td",{className:"border p-2",children:"Total Taxable Amount"}),(0,P.jsx)("td",{className:"border p-2",children:(0,h.SA)(he.TotalValue)})]}),(0,h.Qr)(W.IS_IGST,1)?(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:"border p-2",children:"IGST"}),(0,P.jsx)("td",{className:"border p-2",children:(0,h.SA)(he.TotalTax)})]}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:"border p-2",children:"CGST"}),(0,P.jsx)("td",{className:"border p-2",children:(0,h.SA)(he.TotalTax/2)})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:"border p-2",children:"SGST"}),(0,P.jsx)("td",{className:"border p-2",children:(0,h.SA)(he.TotalTax/2)})]})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:"border p-2",children:"Round Off"}),(0,P.jsx)("td",{className:"border p-2",children:(0,h.SA)(me-(he.TotalValue+he.TotalTax))})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:"border p-2",children:"Total"}),(0,P.jsx)("td",{className:"border p-2",children:(0,h.SA)(me)})]})]})})}),(0,P.jsx)("p",{className:"fa-15 mt-3 m-0",children:"Narration"}),(0,P.jsx)("textarea",{className:"cus-inpt ",value:W.Narration,onChange:e=>J((l=>(0,d.c)((0,d.c)({},l),{},{Narration:e.target.value})))}),(0,P.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,P.jsx)(r.c,{variant:"outlined",startIcon:(0,P.jsx)(p.c,{}),onClick:B,children:"cancel"}),(0,P.jsx)(r.c,{onClick:()=>{if((null===Y||void 0===Y?void 0:Y.length)>0&&null!==W&&void 0!==W&&W.Retailer_Id)t(),console.log("fasdadadas",Y),(0,g.q)({address:"delivery/deliveryOrder",method:ee&&!f?"PUT":"POST",bodyData:(0,d.c)((0,d.c)({},W),{},{Product_Array:Y.filter((e=>(0,h.QT)(null===e||void 0===e?void 0:e.Bill_Qty,0))),Delivery_Person_Id:ne?ne.UserId:Number(null===W||void 0===W?void 0:W.Delivery_Person_Id),Payment_Status:null!==W&&void 0!==W&&W.Payment_Status?Number(null===W||void 0===W?void 0:W.Payment_Status):1,Payment_Ref_No:null===W||void 0===W?void 0:W.Payment_Ref_No,Delivery_Status:null!==W&&void 0!==W&&W.Delivery_Status?Number(null===W||void 0===W?void 0:W.Delivery_Status):1,Payment_Mode:null!==W&&void 0!==W&&W.Payment_Mode?Number(null===W||void 0===W?void 0:W.Payment_Mode):1})}).then((e=>{e.success?(m.m4.success(null===e||void 0===e?void 0:e.message),J(L),K([]),T()):m.m4.error(null===e||void 0===e?void 0:e.message)})).catch((e=>console.error(e))).finally((()=>D()));else{if(Y.length<=0)return m.m4.error("Enter any one product quantity");if(null===W||void 0===W||!W.Retailer_Id)return m.m4.error("Select Retailer"),m.m4.error("Select Retailer")}},sx:{ml:1},variant:"outlined",color:"success",startIcon:(0,P.jsx)(I.c,{}),disabled:0===(null===Y||void 0===Y?void 0:Y.length)||!(null!==W&&void 0!==W&&W.Retailer_Id),children:"Save"})]})]}),(0,P.jsxs)(i.c,{open:te,onClose:ve,maxWidth:"sm",fullWidth:!0,children:[(0,P.jsx)(n.c,{className:"border-bottom",children:(0,P.jsx)("span",{children:"Add Products Details"})}),(0,P.jsxs)("form",{onSubmit:e=>{e.preventDefault(),Z.Item_Id&&Z.Bill_Qty&&Z.Item_Rate?(((e,l,t,a,r,s)=>{const i=Y.findIndex((l=>(0,h.Qr)(l.Item_Id,e)));if(-1!==i){const e=[...Y];e[i].Bill_Qty=Number(l),e[i].Item_Rate=Number(t),e[i].UOM=r,e[i].Units=s,e[i].Amount=(0,h.eX)(l,t),e[i]=(0,d.c)((0,d.c)({},e[i]),{},{Product:a}),K(e)}else K((d=>[...d,{Item_Id:e,Bill_Qty:Number(l),Item_Rate:Number(t),UOM:r,Units:s,Amount:(0,h.eX)(l,t),Product:a}]))})(Z.Item_Id,Z.Bill_Qty,Z.Item_Rate,Z.Product,Z.UOM,Z.Units),ve()):m.m4.warn(Z.Item_Id?Z.Bill_Qty?"Enter Rate or Amount":"Enter Quantity":"Select Product")},children:[(0,P.jsx)(o.c,{children:(0,P.jsxs)("div",{className:"row pb-5",children:[(0,P.jsxs)("div",{className:"col-6 p-2",children:[(0,P.jsx)("label",{children:"Brand"}),(0,P.jsx)(u.cp,{value:{value:Z.BrandID,label:Z.Brand},onChange:e=>$((l=>(0,d.c)((0,d.c)({},l),{},{BrandID:e.value,Brand:e.label}))),options:[{value:"",label:"select",isDisabled:!0},...w.map((e=>({value:null===e||void 0===e?void 0:e.Brand,label:null===e||void 0===e?void 0:e.Brand_Name})))],styles:v.cF,isSearchable:!0,placeholder:"Select Brand",maxMenuHeight:200})]}),(0,P.jsxs)("div",{className:"col-6 p-2",children:[(0,P.jsx)("label",{children:"Group"}),(0,P.jsx)(u.cp,{value:{value:Z.GroupID,label:Z.Group},onChange:e=>$((l=>(0,d.c)((0,d.c)({},l),{},{GroupID:e.value,Group:e.label}))),options:[{value:"",label:"select",isDisabled:!0},...A.filter((e=>!Z.BrandID||(0,h.Qr)(e.Brand,Z.BrandID))).reduce(((e,l)=>(e.some((e=>e.value===l.Product_Group))||e.push({value:l.Product_Group,label:l.Pro_Group}),e)),[])],styles:v.cF,isSearchable:!0,placeholder:"Select Group",maxMenuHeight:200})]}),(0,P.jsxs)("div",{className:"col-12 p-2",children:[(0,P.jsxs)("label",{children:["Item Name ",(0,P.jsx)(y.c,{})]}),(0,P.jsx)(u.cp,{value:{value:Z.Item_Id,label:Z.ItemName},onChange:e=>{const l=A.find((l=>(0,h.Qr)(l.Product_Id,e.value)));$((t=>{var a,r,s,i,n,o,c;return(0,d.c)((0,d.c)({},t),{},{Item_Id:e.value,ItemName:e.label,Product:null!==l&&void 0!==l?l:{},Group:null!==(a=l.Pro_Group)&&void 0!==a?a:t.Group,GroupID:null!==(r=l.Product_Group)&&void 0!==r?r:t.GroupID,Brand:null!==(s=l.Brand_Name)&&void 0!==s?s:t.Brand,BrandID:null!==(i=l.Brand)&&void 0!==i?i:t.BrandID,UOM:null!==(n=l.UOM_Id)&&void 0!==n?n:t.UOM,Units:null!==(o=l.Units)&&void 0!==o?o:t.Units,Item_Rate:null!==(c=l.Item_Rate)&&void 0!==c?c:0,Amount:0,Bill_Qty:0})}))},options:[{value:"",label:"select",isDisabled:!0},...[...A.filter((e=>!Z.BrandID||(0,h.Qr)(e.Brand,Z.BrandID))).filter((e=>!Z.GroupID||(0,h.Qr)(e.Product_Group,Z.GroupID)))].map((e=>({value:null===e||void 0===e?void 0:e.Product_Id,label:null===e||void 0===e?void 0:e.Product_Name,isDisabled:-1!==Y.findIndex((l=>(0,h.Qr)(null===l||void 0===l?void 0:l.Item_Id,null===e||void 0===e?void 0:e.Product_Id)))})))],styles:v.cF,isSearchable:!0,required:!0,placeholder:"Select Product",maxMenuHeight:200})]}),(0,P.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,P.jsxs)("label",{children:["Quantity ",(0,P.jsx)(y.c,{})]}),(0,P.jsx)("input",{type:"number",required:!0,value:Z.Bill_Qty?Z.Bill_Qty:"",onChange:e=>{Z.Item_Rate?$((l=>(0,d.c)((0,d.c)({},l),{},{Amount:(0,h.eX)(Z.Item_Rate,e.target.value),Bill_Qty:e.target.value}))):Z.Amount?$((l=>(0,d.c)((0,d.c)({},l),{},{Item_Rate:(0,h.yy)(l.Amount,e.target.value),Bill_Qty:e.target.value}))):$((l=>(0,d.c)((0,d.c)({},l),{},{Bill_Qty:e.target.value})))},className:"cus-inpt",min:1})]}),(0,P.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,P.jsx)("label",{children:"Rate "}),(0,P.jsx)("input",{type:"number",value:Z.Item_Rate?(0,h.SA)(Z.Item_Rate):"",onChange:e=>$((l=>(0,d.c)((0,d.c)({},l),{},{Item_Rate:e.target.value,Amount:l.Bill_Qty?(0,h.eX)(e.target.value,l.Bill_Qty):l.Amount}))),min:1,className:"cus-inpt"})]}),(0,P.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,P.jsx)("label",{children:"UOM"}),(0,P.jsxs)("select",{value:Z.UOM,onChange:e=>{const l=e.target.selectedIndex,t=e.target.options[l].text,a=e.target.value;$((e=>(0,d.c)((0,d.c)({},e),{},{UOM:a,Units:t})))},className:"cus-inpt",children:[(0,P.jsx)("option",{value:"",disabled:!0,children:"select"}),V.map(((e,l)=>(0,P.jsx)("option",{value:e.Unit_Id,children:e.Units},l)))]})]}),(0,P.jsxs)("div",{className:"col-md-6 p-2",children:[(0,P.jsx)("label",{children:"Amount"}),(0,P.jsx)("input",{type:"number",value:Z.Amount?Z.Amount:"",onChange:e=>$((l=>(0,d.c)((0,d.c)({},l),{},{Amount:e.target.value,Item_Rate:l.Bill_Qty?(0,h.yy)(e.target.value,l.Bill_Qty):l.Item_Rate}))),className:"cus-inpt",min:1})]})]})}),(0,P.jsxs)(c.c,{className:"d-flex justify-content-between align-items-center",children:[(0,P.jsx)(r.c,{onClick:()=>$(z),type:"button",startIcon:(0,P.jsx)(j.c,{}),children:"Clear"}),(0,P.jsxs)("span",{children:[(0,P.jsx)(r.c,{type:"button",onClick:ve,children:"cancel"}),(0,P.jsx)(r.c,{type:"submit",variant:"outlined",children:"Add"})]})]})]})]})]})}}}]);
//# sourceMappingURL=5312.1dba0167.chunk.js.map