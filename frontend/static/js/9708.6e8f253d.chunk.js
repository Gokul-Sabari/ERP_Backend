"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[9708],{50764:(e,l,a)=>{a.d(l,{c:()=>A});var s=a(69060),t=a(39308),i=a(71448),n=a(52924),d=a(44380),r=a(12572),o=a(89e3),c=a(3358),u=a(5548),m=a(82656),v=a(26773),x=a(4488),p=a(90048),h=a(43692),j=a(85624),g=a(78092),f=a(68424),b=a(39504),y=a(61988),N=a(12120),F=a(74912),C=a(97332),_=a(13724),w=a(82496);(0,C.g0)({fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0});const S=(0,w.jsx)(f.c,{fontSize:"small"}),k=(0,w.jsx)(b.c,{fontSize:"small"}),A=e=>{let{dataArray:l=[],columns:a=[],ExpandableComp:f,enableFilters:b=!1,ExportAllData:C=!1}=e;const[A,D]=(0,s.useState)([]),[O,T]=(0,s.useState)({}),[E,B]=(0,s.useState)(l),z=Object.keys(O).length>0?E:l,[I,$]=(0,s.useState)({filters:!1,columnSettings:!1});(0,s.useEffect)((()=>{const e=a.map(((e,l)=>({Field_Name:null===e||void 0===e?void 0:e.Column_Name,Fied_Data:null===e||void 0===e?void 0:e.Data_Type,isVisible:l<=7?1:0,align:"center",OrderBy:l+1})));D(e)}),[a]);const V=(0,s.useMemo)((()=>[...A].sort(((e,l)=>e.OrderBy-l.OrderBy))),[A]);(0,s.useEffect)((()=>{P()}),[O]);const W=(e,l)=>{T((a=>({...a,[e]:l})))},P=()=>{let e=[...l];for(const l of A)if(O[l.Field_Name])if("range"===O[l.Field_Name].type){const{min:a,max:s}=O[l.Field_Name];e=e.filter((e=>{const t=e[l.Field_Name];return(void 0===a||t>=a)&&(void 0===s||t<=s)}))}else if("date"===O[l.Field_Name].type){const{start:a,end:s}=O[l.Field_Name].value;e=e.filter((e=>{const t=new Date(e[l.Field_Name]);return(void 0===a||t>=new Date(a))&&(void 0===s||t<=new Date(s))}))}else if(Array.isArray(O[l.Field_Name])){var a;e=(null===(a=O[l.Field_Name])||void 0===a?void 0:a.length)>0?e.filter((e=>O[l.Field_Name].includes(e[l.Field_Name].toLowerCase().trim()))):e}B(e)},R=e=>{const{Field_Name:l,Fied_Data:a}=e;var s,t,r,o,c,u,m,v,x,p;if("number"===a)return(0,w.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,w.jsx)("input",{placeholder:"Min",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(s=null===(t=O[l])||void 0===t?void 0:t.min)&&void 0!==s?s:"",onChange:e=>W(l,{type:"range",...O[l],min:e.target.value?parseFloat(e.target.value):void 0})}),(0,w.jsx)("input",{placeholder:"Max",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(r=null===(o=O[l])||void 0===o?void 0:o.max)&&void 0!==r?r:"",onChange:e=>W(l,{type:"range",...O[l],max:e.target.value?parseFloat(e.target.value):void 0})})]});if("date"===a)return(0,w.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,w.jsx)("input",{placeholder:"Start Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(c=null===(u=O[l])||void 0===u||null===(m=u.value)||void 0===m?void 0:m.start)&&void 0!==c?c:"",onChange:e=>{var a;return W(l,{type:"date",value:{...null===(a=O[l])||void 0===a?void 0:a.value,start:e.target.value||void 0}})}}),(0,w.jsx)("input",{placeholder:"End Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(v=null===(x=O[l])||void 0===x||null===(p=x.value)||void 0===p?void 0:p.end)&&void 0!==v?v:"",onChange:e=>{var a;return W(l,{type:"date",value:{...null===(a=O[l])||void 0===a?void 0:a.value,end:e.target.value||void 0}})}})]});if("string"===a){const e=[...new Set(z.map((e=>{var a,s;return null===(a=e[l])||void 0===a||null===(s=a.toLowerCase())||void 0===s?void 0:s.trim()})))];return(0,w.jsx)(i.c,{multiple:!0,id:`${l}-filter`,options:e,disableCloseOnSelect:!0,getOptionLabel:e=>e,value:O[l]||[],onChange:(e,a)=>W(l,a),renderOption:(e,l,a)=>{let{selected:s}=a;return(0,w.jsxs)("li",{...e,children:[(0,w.jsx)(n.c,{icon:S,checkedIcon:k,style:{marginRight:8},checked:s}),l]})},isOptionEqualToValue:(e,l)=>e===l,renderInput:e=>(0,w.jsx)(d.c,{...e,label:l,placeholder:`Select ${null===l||void 0===l?void 0:l.replace(/_/g," ")}`})})}};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(r.c,{sx:{display:"flex",gap:"16px",padding:"8px",flexWrap:"wrap"},children:(0,w.jsx)(o.c,{onClick:()=>$((e=>({...e,filters:!0}))),className:b?"d-md-none d-inline":"d-none",startIcon:(0,w.jsx)(y.c,{}),children:"Filters"})}),(0,w.jsxs)("div",{className:"row ",children:[(0,w.jsx)("div",{className:b?"col-xxl-10 col-lg-9 col-md-8":"",children:(0,w.jsx)("div",{className:"p-2",children:(0,w.jsx)(_.cp,{dataArray:z,columns:V,isExpendable:!!f,expandableComp:f||void 0,tableMaxHeight:650,ExcelPrintOption:!0})})}),b&&(0,w.jsxs)("div",{className:"col-xxl-2 col-lg-3 col-md-4 d-none d-md-block",children:[(0,w.jsxs)("h5",{className:"d-flex justify-content-between px-2",children:[(0,w.jsx)("span",{children:"Filters"}),(0,w.jsxs)("span",{children:[(0,w.jsx)(c.c,{title:"Column Visiblity",children:(0,w.jsx)(u.c,{size:"small",onClick:()=>$((e=>({...e,columnSettings:!0}))),children:(0,w.jsx)(N.c,{})})}),(0,w.jsx)(c.c,{title:"Clear Filters",children:(0,w.jsx)(u.c,{size:"small",onClick:()=>T({}),children:(0,w.jsx)(F.c,{})})})]})]}),(0,w.jsxs)("div",{className:"border rounded-3 ",style:{maxHeight:"70vh",overflow:"auto"},children:[A.map(((e,l)=>{var a;return(0,w.jsxs)("div",{className:"py-3 px-3 hov-bg border-bottom",children:[(0,w.jsx)("label",{className:"mt-2 mb-1",children:null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.replace(/_/g," ")}),R(e)]},l)})),(0,w.jsx)("br",{})]})]})]}),(0,w.jsxs)(m.c,{open:I.filters,onClose:()=>$((e=>({...e,filters:!1}))),fullWidth:!0,maxWidth:"sm",children:[(0,w.jsx)(v.c,{children:(0,w.jsx)("span",{children:(0,w.jsxs)("h5",{className:"d-flex justify-content-between px-2",children:[(0,w.jsx)("span",{children:"Filters"}),(0,w.jsxs)("span",{children:[(0,w.jsx)(c.c,{title:"Column Visiblity",children:(0,w.jsx)(u.c,{size:"small",onClick:()=>$((e=>({...e,filters:!1}))),children:(0,w.jsx)(N.c,{})})}),(0,w.jsx)(c.c,{title:"Clear Filters",children:(0,w.jsx)(u.c,{size:"small",onClick:()=>T({}),children:(0,w.jsx)(F.c,{})})})]})]})})}),(0,w.jsx)(x.c,{children:(0,w.jsxs)("div",{className:"border rounded-3 ",style:{maxHeight:"70vh",overflow:"auto"},children:[A.map(((e,l)=>{var a;return(0,w.jsxs)("div",{className:"py-3 px-3 hov-bg border-bottom",children:[(0,w.jsx)("label",{className:"mt-2 mb-1",children:null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.replace(/_/g," ")}),R(e)]},l)})),(0,w.jsx)("br",{})]})}),(0,w.jsx)(p.c,{children:(0,w.jsx)(o.c,{onClick:()=>$((e=>({...e,filters:!1}))),children:"Close"})})]}),(0,w.jsxs)(m.c,{open:I.columnSettings,onClose:()=>$((e=>({...e,columnSettings:!1}))),maxWidth:"lg",fullWidth:!0,children:[(0,w.jsx)(v.c,{children:"Column Settings"}),(0,w.jsx)(x.c,{children:(0,w.jsx)("div",{className:"row",children:a.map(((e,l)=>{const a=A.find((l=>l.Field_Name===(null===e||void 0===e?void 0:e.Column_Name)));return(0,w.jsx)("div",{className:"col-lg-4 col-md-6 p-2",children:(0,w.jsxs)(h.c,{component:j.c,className:"p-2 d-flex justify-content-between align-items-center flex-wrap "+(l%2!==0?"bg-light":""),children:[(0,w.jsxs)("div",{className:"d-flex justify-content-between align-items-center flex-wrap",children:[(0,w.jsx)(g.c,{checked:Boolean(null===a||void 0===a?void 0:a.isVisible),onChange:l=>D((a=>a.map((a=>a.Field_Name===(null===e||void 0===e?void 0:e.Column_Name)?{...a,isVisible:l.target.checked?1:0}:a))))}),(0,w.jsx)("h6",{className:"fa-13 mb-0 fw-bold ",children:null===e||void 0===e?void 0:e.Column_Name})]}),(0,w.jsx)("input",{type:"number",value:(0,t.Q$)(null===a||void 0===a?void 0:a.OrderBy)?null===a||void 0===a?void 0:a.OrderBy:"",onChange:e=>D((l=>l.map((l=>l.Field_Name===(null===a||void 0===a?void 0:a.Field_Name)?{...l,OrderBy:e.target.value}:l)))),label:"Order Value",className:"mt-2 p-1 border-0 cus-inpt",style:{width:"80px"},placeholder:"Order"})]})},l)}))})}),(0,w.jsx)(p.c,{children:(0,w.jsx)(o.c,{onClick:()=>$((e=>({...e,columnSettings:!1}))),color:"error",children:"close"})})]})]})}},59708:(e,l,a)=>{a.r(l),a.d(l,{default:()=>p});var s=a(69060),t=a(43692),i=a(84436),n=a(3358),d=a(5548),r=a(39308),o=a(50764),c=a(31664),u=a(61988),m=a(1908),v=a(82496);const x=e=>{let{row:l,Fromdate:a,Todate:t,DB:i}=e;const[n,d]=(0,s.useState)([]),[r,c]=(0,s.useState)([]);return(0,s.useEffect)((()=>{(0,m.q)({address:`sales/partyWiseReport/details?Fromdate=${a}&Todate=${t}&Party_Name=${null===l||void 0===l?void 0:l.Actual_Party_Name}`,headers:{Db:i}}).then((e=>{let{success:l,data:a,others:s}=e;if(l){const{dataTypeInfo:e}=s;d(a),c((l=>({...l,salesInfo:Array.isArray(e)?e:[]})))}else d([])})).catch(console.error)}),[null===l||void 0===l?void 0:l.Party_Name,a,t]),(0,v.jsx)(o.c,{dataArray:n,columns:r.salesInfo})},p=()=>{const e=JSON.parse(localStorage.getItem("user")),[l,a]=(0,s.useState)(null),[p,h]=(0,s.useState)([]),[j,g]=(0,s.useState)({Fromdate:(0,r.SO)(1),Todate:(0,r.Q7)(),filterDialog:!1,reload:!0});return(0,s.useEffect)((()=>{a(null),h([]),(0,m.q)({address:`sales/partyWiseReport?Fromdate=${null===j||void 0===j?void 0:j.Fromdate}&Todate=${null===j||void 0===j?void 0:j.Todate}`,headers:{Db:null===e||void 0===e?void 0:e.Company_id}}).then((e=>{let{success:l,data:s,others:t}=e;if(l){const{dataTypeInfo:e}=t;a(s),h(Array.isArray(e)?e:[])}else a([])})).catch(console.error)}),[j.reload]),(0,v.jsx)(s.Fragment,{children:(0,v.jsxs)(t.c,{className:"mt-3",children:[(0,v.jsx)("div",{className:"px-3 py-2 d-flex justify-content-between align-items-center fw-bold text-dark",style:{backgroundColor:"#eae0cc"},children:(0,v.jsx)("span",{children:"PARTY BASED SALES"})}),(0,v.jsxs)(i.c,{children:[(0,v.jsxs)("div",{className:"mb-3",children:[(0,v.jsx)("input",{type:"date",className:"cus-inpt w-auto ps-3 border rounded-5 me-1",value:j.Fromdate,onChange:e=>g((l=>({...l,Fromdate:e.target.value})))}),(0,v.jsx)("input",{type:"date",className:"cus-inpt w-auto ps-3 border rounded-5",value:j.Todate,onChange:e=>g((l=>({...l,Todate:e.target.value})))}),(0,v.jsx)(n.c,{title:"Reload Data",children:(0,v.jsx)(d.c,{onClick:()=>g((e=>({...e,reload:!e.reload}))),size:"small",className:"ms-2",children:(0,v.jsx)(c.c,{})})}),(0,v.jsx)(n.c,{title:"Filters",children:(0,v.jsx)(d.c,{onClick:()=>g((e=>({...e,filterDialog:!0}))),size:"small",className:"d-md-none d-inline",children:(0,v.jsx)(u.c,{})})})]}),null===l&&(0,v.jsx)("h6",{className:"blue-text text-center",children:"Fetching data..."}),Array.isArray(l)&&(0,v.jsx)(o.c,{dataArray:l,columns:p,ExpandableComp:l=>{let{row:a}=l;return(0,v.jsx)(x,{row:a,DB:null===e||void 0===e?void 0:e.Company_id,Fromdate:null===j||void 0===j?void 0:j.Fromdate,Todate:null===j||void 0===j?void 0:j.Todate})},enableFilters:!0})]})]})})}}}]);
//# sourceMappingURL=9708.6e8f253d.chunk.js.map