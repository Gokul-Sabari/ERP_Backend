"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[4252],{62344:(e,l,t)=>{t.d(l,{o$:()=>o,o5:()=>s,cF:()=>i,iI:()=>a,_8:()=>n});const r=t.p+"static/media/smt.aa4d4f940bbebff07a57.png",a={table:{style:{width:"auto",backgroundColor:"transparent"}},rows:{style:{backgroundColor:"transparent"}},headCells:{style:{backgroundColor:"#6b9080f8",color:"white",fontSize:"14px"}}},i={menu:(e,l)=>({...e,zIndex:9999}),menuPortal:e=>({...e,zIndex:9999}),groupHeading:e=>({...e,backgroundColor:"#f5f5f5",color:"#333",fontWeight:"bold",fontSize:"14px",padding:"8px 12px",borderBottom:"1px solid #ddd",textTransform:"uppercase"}),option:(e,l)=>({...e,backgroundColor:l.isSelected?"#2684FF":l.isFocused?"#E2ECF9":"white",color:l.isSelected?"white":"#333",padding:"10px 12px"})},o=[{id:1,headname:"Menu ID",variant:"head",align:"left",width:100},{id:2,headname:"MenuName"},{id:3,headname:"Read Rights"},{id:4,headname:"Add Rights"},{id:5,headname:"Edit Rights"},{id:6,headname:"Delete Rights"},{id:7,headname:"Print Rights"},{id:8,headname:"Action"}],s=[{dataBase:1,name:"SHANKAR TRADERS",business:"Wholesale Merchant in Dhall",address:"32, Chitrakara Street, Madurai - 01 <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:r,gstin:"33AADFS6973R1ZD",phone:"984-313-1353, 984-335-5166",fssai:"12418012000818",bankAccount:"0021 5032 0885 122",ifsc:"TMBL0000002"},{dataBase:2,name:"SMT AGRO PRODUCTS",business:"",address:"H.O: 153, Chitrakara Street, 2nd Floor, Madurai -01 <br /> G.O: 746 Puliyur, Sayanapuram, Svga <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:r,gstin:"33ACMFS3420Q1ZQ",phone:"0452-4371625",fssai:"12418012000818",bankAccount:"0025 3031 0875 947",ifsc:"TMBL0000002"},{dataBase:3,name:"BHAVANI TRADERS",business:"",address:"H.O: 152-A, Chitrakara Street, Madurai -01 <br /> G.O: 30/1-Rajman Nagar, Chintamani Main Road, Mdu-01 <br /> Tax Invoice",logo:r,gstin:"33AAEFB6728J1ZG",phone:"958-559-7641, 958-559-7614",fssai:"12418012000670",bankAccount:"0021 5005 0800 309",ifsc:"TMBL0000002"}],n=[{name:"PURCHASE ORDER"},{name:"PURCHASE INVOICE"},{name:"SALE ORDER"},{name:"SALE INVOICE"},{name:"JOURNAL"},{name:"STOCK JOURNAL"},{name:"PAYMENT"},{name:"RECEIPT"},{name:"CONTRA"}]},28082:(e,l,t)=>{t.r(l),t.d(l,{default:()=>Y});var r=t(69060),a=t(1908),i=t(39308),o=t(12572),s=t(85624),n=t(67828),c=t(56880),d=t(89e3),h=t(77828),x=t(15786),g=t(44380),u=t(99904),m=t(33856),j=t(58612),p=t(27454),b=t(96464),v=t(29504),f=t(5930),A=t(5548),k=t(3358),F=t(60476),w=t(82656),y=t(4488),N=t(90048),C=t(61988),S=t(36992),I=t(41459),_=t(46864),D=t(74912),P=t(99852),T=t(62344),B=t(56480),R=t(35372),L=t(21784),V=t(26773),E=t(14499),O=t(49608),W=t(33452),$=t(82496);const M=e=>{let{open:l,onClose:t,brokerData:a}=e;const o=(0,r.useRef)(null),s=(0,W.useReactToPrint)({content:()=>o.current}),n=(null===a||void 0===a?void 0:a.Items)||[],c=n.reduce(((e,l)=>e+parseFloat(l.Brok_Amt||0)),0),h=n.reduce(((e,l)=>e+parseFloat(l.Coolie_Amt||0)),0),x=parseFloat((null===a||void 0===a?void 0:a.Total_Amount)||0),g=parseFloat((null===a||void 0===a?void 0:a.VilaiVasi)||0),u=x-c+h-g,m=Math.round(u),j=m-u,p=(()=>{const e=n.reduce(((e,l)=>{const t=Math.round(parseFloat(l.KGS)/parseFloat(l.QTY));return isNaN(t)||(e[t]=(e[t]||0)+parseFloat(l.QTY)),e}),{});return e?Object.entries(e).sort(((e,l)=>{let[t]=e,[r]=l;return t-r})).map((e=>{let[l,t]=e;return`${l}kg - ${t}`})).join(" & "):null})();return(0,$.jsxs)(w.c,{open:l,onClose:t,fullWidth:!0,maxWidth:"lg",children:[(0,$.jsxs)(V.c,{children:["Broker Report: ",null===a||void 0===a?void 0:a.Broker_Name,(0,$.jsx)(A.c,{"aria-label":"close",onClick:t,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,$.jsx)(E.c,{})})]}),(0,$.jsxs)(y.c,{ref:o,children:[(0,$.jsxs)("div",{className:"text-center mb-3",children:[(0,$.jsx)("h4",{children:"Broker Report Page"}),(0,$.jsxs)("p",{className:"mb-0",children:["Date: ",(new Date).toLocaleDateString("en-IN")]}),(0,$.jsxs)("p",{className:"mb-0",children:["Broker: ",null===a||void 0===a?void 0:a.Broker_Name]}),p&&(0,$.jsxs)("p",{className:"mb-0",children:["Pack Sizes: ",p]})]}),(0,$.jsxs)("table",{className:"table table-bordered",style:{fontSize:"12px"},children:[(0,$.jsx)("thead",{children:(0,$.jsxs)("tr",{children:[(0,$.jsx)("th",{children:"PARTY NAME"}),(0,$.jsx)("th",{children:"ALIAS NAME"}),(0,$.jsx)("th",{className:"text-end",children:"BILL RATE"}),(0,$.jsx)("th",{className:"text-end",children:"BROKER EXP"}),(0,$.jsx)("th",{className:"text-end",children:"QTY"}),(0,$.jsx)("th",{className:"text-end",children:"KGS"}),(0,$.jsx)("th",{className:"text-end",children:"AMOUNT"}),(0,$.jsx)("th",{className:"text-end",children:"VILAIVAASI"})]})}),(0,$.jsxs)("tbody",{children:[n.map(((e,l)=>(0,$.jsxs)("tr",{children:[(0,$.jsx)("td",{children:e.Retailer_Name||e.Ledger_Name}),(0,$.jsx)("td",{children:e.Short_Name}),(0,$.jsx)("td",{className:"text-end",children:e.Item_Rate}),(0,$.jsx)("td",{className:"text-end",children:(0,i.SA)(e.Brok_Amt||0)}),(0,$.jsx)("td",{className:"text-end",children:e.QTY}),(0,$.jsx)("td",{className:"text-end",children:e.KGS}),(0,$.jsx)("td",{className:"text-end",children:(0,i.SA)(e.Amount)}),(0,$.jsx)("td",{className:"text-end",children:(0,i.SA)(e.Vilaivasi_Rate)})]},l))),(0,$.jsxs)("tr",{children:[(0,$.jsx)("td",{colSpan:"4",className:"text-end fw-bold",children:"TOTAL"}),(0,$.jsx)("td",{className:"text-end fw-bold",children:(null===a||void 0===a?void 0:a.Total_Qty)||0}),(0,$.jsx)("td",{className:"text-end fw-bold",children:(null===a||void 0===a?void 0:a.Total_KGS)||0}),(0,$.jsx)("td",{className:"text-end fw-bold",children:(0,i.SA)((null===a||void 0===a?void 0:a.Total_Amount)||0)}),(0,$.jsx)("td",{className:"text-end fw-bold",children:(0,i.SA)((null===a||void 0===a?void 0:a.VilaiVasi)||0)})]}),(0,$.jsx)("tr",{children:(0,$.jsx)("td",{className:"text-end fw-bold",children:p})})]})]}),(0,$.jsx)("div",{className:"row mt-3",children:(0,$.jsx)("div",{className:"col-6 offset-6",children:(0,$.jsx)("table",{className:"table table-bordered",style:{fontSize:"12px"},children:(0,$.jsxs)("tbody",{children:[(0,$.jsxs)("tr",{children:[(0,$.jsx)("td",{className:"fw-bold",children:"COOLIE"}),(0,$.jsx)("td",{className:"text-end fw-bold",children:(0,i.SA)(h)})]}),(0,$.jsxs)("tr",{children:[(0,$.jsx)("td",{className:"fw-bold",children:"BROKERAGE"}),(0,$.jsxs)("td",{className:"text-end fw-bold",children:["- ",(0,i.SA)(c)]})]}),(0,$.jsxs)("tr",{children:[(0,$.jsx)("td",{className:"fw-bold",children:"VILAIVAASI"}),(0,$.jsxs)("td",{className:"text-end fw-bold",children:["- ",(0,i.SA)(g)]})]}),(0,$.jsxs)("tr",{children:[(0,$.jsx)("td",{className:"fw-bold",children:"ROUNDOFF"}),(0,$.jsx)("td",{className:"text-end fw-bold",children:function(e){const l=Number(e)||0;return`${l>=0?"+":""}${(0,i.SA)(l)}`}(j)})]}),(0,$.jsxs)("tr",{className:"bg-light",children:[(0,$.jsx)("td",{className:"fw-bold",children:"NET TOTAL"}),(0,$.jsx)("td",{className:"text-end fw-bold",children:(0,i.SA)(m)})]})]})})})}),(0,$.jsx)("div",{className:"text-center mt-3 small",children:(0,$.jsx)("p",{children:"This is a computer generated report"})})]}),(0,$.jsxs)(N.c,{children:[(0,$.jsx)(d.c,{startIcon:(0,$.jsx)(E.c,{}),variant:"outlined",color:"error",onClick:t,children:"Close"}),(0,$.jsx)(d.c,{startIcon:(0,$.jsx)(O.c,{}),variant:"contained",color:"primary",onClick:s,children:"Download"})]})]})};var Q=t(85592),z=t.n(Q),G=t(26592);const K=e=>{let{open:l,onClose:t,brokerData:a}=e;const i=(null===a||void 0===a?void 0:a.Items)||[],o=i.reduce(((e,l)=>e+parseFloat(l.Brok_Amt||0)),0),s=i.reduce(((e,l)=>e+parseFloat(l.Coolie_Amt||0)),0),n=parseFloat((null===a||void 0===a?void 0:a.Total_Amount)||0),c=parseFloat((null===a||void 0===a?void 0:a.VilaiVasi)||0),d=n-o+s-c,h=Math.round(d),x=h-d,g=e=>{const l=Number(e)||0;return(l>=0?"+":"")+l.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})},u=()=>{const e=i.reduce(((e,l)=>{const t=Math.round(parseFloat(l.KGS)/parseFloat(l.QTY));return isNaN(t)||(e[t]=(e[t]||0)+parseFloat(l.QTY)),e}),{});return Object.entries(e).sort(((e,l)=>{let[t]=e,[r]=l;return t-r})).map((e=>{let[l,t]=e;return`${l}kg - ${t}`})).join(" & ")};return(0,r.useEffect)((()=>{l&&(async()=>{const e=new(z().Workbook),l=e.addWorksheet("Broker Report"),t={style:"thick",color:{argb:"FF000000"}},r={border:{top:t,bottom:t,left:t,right:t}},n=l.addRow([`Broker Report: ${(null===a||void 0===a?void 0:a.Broker_Name)||""} - Date: ${(new Date).toLocaleDateString("en-IN")}`]);l.mergeCells(`A${n.number}:H${n.number}`),n.eachCell((e=>{e.style={...r,font:{bold:!0,size:14},alignment:{horizontal:"center"},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFD9D9D9"}}}})),l.addRow([]);const d=l.addRow(["PARTY NAME","ALIAS NAME","BILL RATE","BROKER EXP","QTY","KGS","AMOUNT","VILAIVAASI"]);l.columns=[{width:50},{width:30},{width:15},{width:15},{width:10},{width:10},{width:15},{width:15}],d.eachCell((e=>{e.style={...r,font:{bold:!0,color:{argb:"FFFFFFFF"},size:12},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FF2F5496"}},alignment:{horizontal:"center",vertical:"middle"}}})),i.forEach(((e,t)=>{const a=l.addRow([e.Retailer_Name||e.Ledger_Name||"",e.Short_Name||"",e.Item_Rate||"",e.Brok_Amt||"",e.QTY||"",e.KGS||"",Number(e.Amount||0),Number(e.Vilaivasi_Rate||0)]);a.eachCell((e=>{e.style={...r,font:{size:11},alignment:{vertical:"middle"},fill:t%2===1?{type:"pattern",pattern:"solid",fgColor:{argb:"FFF2F2F2"}}:void 0}})),a.getCell(7).numFmt="#,##0.00",a.getCell(8).numFmt="#,##0.00"})),l.addRow(["","","","TOTAL",Number((null===a||void 0===a?void 0:a.Total_Qty)||0),Number((null===a||void 0===a?void 0:a.Total_KGS)||0),Number((null===a||void 0===a?void 0:a.Total_Amount)||0),Number((null===a||void 0===a?void 0:a.VilaiVasi)||0)]).eachCell(((e,l)=>{l>=4?(e.style={...r,font:{bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FF70AD47"}}},l>=5&&(e.numFmt=5===l||6===l?"0.00":"#,##0.00")):e.style=r})),l.addRow([]);const m=l.addRow([`Pack Sizes: ${u()}`]);l.mergeCells(`A${m.number}:H${m.number}`),m.eachCell((e=>{e.style={...r,font:{italic:!0},alignment:{horizontal:"left"}}})),l.addRow([]),[{label:"COOLIE",value:Number(s)},{label:"BROKERAGE",value:Number(-o)},{label:"VILAIVAASI",value:Number(-c)},{label:"ROUNDOFF",value:g(x)},{label:"NET TOTAL",value:Number(h)}].forEach((e=>{const t=l.addRow(["","","","","",e.label,e.value,""]);t.getCell(6).style={...r,font:{bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FF4472C4"}},alignment:{horizontal:"right"}},t.getCell(7).style={...r,font:{bold:!0,color:{argb:"FF000000"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFFFC000"}},alignment:{horizontal:"right"},numFmt:"#,##0.00"}})),l.addRow([]),l.addRow([]);const j=await e.xlsx.writeBuffer();(0,G.saveAs)(new Blob([j]),`Broker_Report_${(null===a||void 0===a?void 0:a.Broker_Name)||"Export"}_${(new Date).toISOString().slice(0,10)}.xlsx`)})().then((()=>{"function"===typeof t&&t()}))}),[l]),null},Y=e=>{let{loadingOn:l,loadingOff:t}=e;const[V,E]=(0,r.useState)({page:0,rowsPerPage:10}),[O,W]=(0,r.useState)({page:0,rowsPerPage:10}),[Q,z]=(0,r.useState)(0),[G,Y]=(0,r.useState)({broker:[]}),[Z,U]=(0,r.useState)({FromDate:(new Date).toISOString().split("T")[0],ToDate:(new Date).toISOString().split("T")[0],Broker:{value:"",label:"ALL Brokers"},Ledger:{value:"",label:"All Ledger"},Item:{value:"",label:"All Item"},refresh:!1,filterDialog:!1}),[H,q]=(0,r.useState)([]),[J,X]=(0,r.useState)({}),[ee,le]=(0,r.useState)({FromDate:(new Date).toISOString().split("T")[0],ToDate:(new Date).toISOString().split("T")[0],Broker:{value:"",label:"ALL Brokers"},Ledger:{value:"",label:"All Ledger"},Item:{value:"",label:"All Item"},VilaiVasiZero:{value:"",label:"All"},refresh:!1,filterDialog:!1}),[te,re]=(0,r.useState)([]),[ae,ie]=(0,r.useState)({ledgers:[],items:[]}),[oe,se]=(0,r.useState)({}),[ne,ce]=(0,r.useState)(!1),de=JSON.parse(localStorage.getItem("user")),[he,xe]=(0,r.useState)(!1),[ge,ue]=(0,r.useState)(!1),[me,je]=(0,r.useState)(null),[pe,be]=(0,r.useState)(null),[ve,fe]=(0,r.useState)("");(0,r.useEffect)((()=>{(0,a.q)({address:"reports/brokerageReport/getInvolvedBroker"}).then((e=>{e.success&&Y((l=>({...l,broker:(0,i.dq)(e.data)})))})).catch(console.error)}),[]),(0,r.useEffect)((()=>{(async()=>{try{l();const e=await(0,a.q)({address:`reports/brokerageNakalReport/sales?FromDate=${Z.FromDate}&ToDate=${Z.ToDate}&broker=${Z.Broker.value}`});if(e.success){const l=(0,i.dq)(e.data);q(l);const t={};l.forEach((e=>{const l=`${e.Do_Id}-${e.Product_Id}`;t[l]=e.brokerage||""})),X(t)}else q([]),X({})}catch(e){q([]),X({})}finally{t()}})()}),[Z.refresh]),(0,r.useEffect)((()=>{(async()=>{try{l();let e=`reports/brokerageNagal/list?FromDate=${ee.FromDate}&ToDate=${ee.ToDate}`;ee.Broker.value&&(e+=`&broker=${ee.Broker.value}`),ee.Ledger.value&&(e+=`&ledger=${ee.Ledger.value}`),ee.Item.value&&(e+=`&item=${ee.Item.value}`),ee.VilaiVasiZero.value&&(e+=`&vilaivasiFilter=${ee.VilaiVasiZero.value}`);const t=await(0,a.q)({address:e});if(t.success){const e=(0,i.dq)(t.data);re(e);const l=e.flatMap((e=>e.Items||[])),r=Array.from(new Map(l.map((e=>[e.Ledger_Tally_Id,{value:e.Ledger_Tally_Id,label:e.Ledger_Name}]))).values()),a=Array.from(new Map(l.map((e=>[e.Product_Id,{value:e.Product_Id,label:e.Product_Name}]))).values());ie({ledgers:r,items:a})}}catch(e){}finally{t()}})()}),[ee.refresh]);const Ae=()=>U((e=>({...e,filterDialog:!1}))),ke=()=>le((e=>({...e,filterDialog:!1}))),Fe=(0,r.useMemo)((()=>H.reduce(((e,l)=>(0,i.Q5)(e,l.displayQuantity||l.Qty||0)),0)),[H]),we=(0,r.useMemo)((()=>te.reduce(((e,l)=>(0,i.Q5)(e,l.Total_Bags||0)),0)),[te]),ye=(e,l,t)=>{const r=[...H];r[e][l]=parseFloat(t)||0,q(r)},Ne=(0,r.useMemo)((()=>te&&0!==te.length?te.reduce(((e,l)=>{const t=l.Broker_Name||"Unknown Broker";return e[t]||(e[t]=[]),e[t].push(l),e}),{}):{}),[te]),Ce=(0,r.useMemo)((()=>Object.keys(Ne)),[Ne]);return(0,$.jsxs)(o.c,{children:[(0,$.jsxs)(s.c,{sx:{p:3,mb:3},children:[(0,$.jsxs)(n.cp,{container:!0,justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,$.jsx)(c.c,{variant:"h5",component:"h2",children:"Brokerage Nagal Report"}),(0,$.jsxs)(o.c,{children:[(0,$.jsx)(d.c,{variant:"outlined",startIcon:(0,$.jsx)(C.c,{}),onClick:()=>0===Q?U((e=>({...e,filterDialog:!0}))):le((e=>({...e,filterDialog:!0}))),sx:{mr:2},children:"Filters"}),(0,$.jsxs)(c.c,{component:"span",variant:"body1",children:["Total Bags:"," ",(0,$.jsx)("strong",{children:0===Q?Fe:we})]})]})]}),(0,$.jsxs)(h.c,{value:Q,onChange:(e,l)=>z(l),sx:{mb:3},children:[(0,$.jsx)(x.c,{label:"Data Entry"}),(0,$.jsx)(x.c,{label:"Listing"})]}),0===Q&&(0,$.jsxs)(o.c,{mb:1,sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:2},children:[(0,$.jsx)(c.c,{sx:{fontWeight:"bold"},children:"VilaiVasi (All):"}),(0,$.jsx)(g.c,{type:"number",size:"small",value:ve,inputProps:{step:"1"},onChange:e=>{fe(e.target.value),X((l=>{const t={...l};return H.forEach((l=>{const r=`${l.Do_Id}-${l.Product_Id}`;t[r]=e.target.value})),t}))},placeholder:"Set VilaiVasi for all",sx:{"& .MuiInputBase-input":{height:40,boxSizing:"border-box"}}}),(0,$.jsx)(d.c,{variant:"outlined",size:"small",onClick:()=>{fe(""),X((e=>{const l={...e};return H.forEach((e=>{const t=`${e.Do_Id}-${e.Product_Id}`;l[t]=""})),l}))},children:"Clear All"})]}),0===Q?(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(u.c,{component:s.c,children:[(0,$.jsxs)(m.c,{size:"small",children:[(0,$.jsx)(j.c,{children:(0,$.jsxs)(p.c,{sx:{backgroundColor:"primary.main"},children:[(0,$.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Date"}),(0,$.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},children:"Do No"}),(0,$.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},children:"Product"}),(0,$.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},children:"Ledger_Name"}),(0,$.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},children:"Broker"}),(0,$.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Bill_Qty"}),(0,$.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Qty"}),(0,$.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Rate"}),(0,$.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Pack"}),(0,$.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Amount"}),(0,$.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Brok.Rate"}),(0,$.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Brokerage"}),(0,$.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Coolie.Rate"}),(0,$.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Coolie.Amt"}),(0,$.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Vilaivasi"}),(0,$.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Narration"}),(0,$.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Vilaivasi Amt"})]})}),(0,$.jsx)(v.c,{children:H.slice(V.page*V.rowsPerPage,V.page*V.rowsPerPage+V.rowsPerPage).map(((e,l)=>{const t=J[`${e.Do_Id}-${e.Product_Id}`]||"",r=(a=t,i=e.Bill_Qty,(parseFloat(a)||0)/100*(parseFloat(i)||0));var a,i,o,s;return(0,$.jsxs)(p.c,{hover:!0,children:[(0,$.jsx)(b.c,{align:"left",children:e.Date.split("T")[0]}),(0,$.jsx)(b.c,{children:e.Do_No||e.Do_Inv_No}),(0,$.jsx)(b.c,{children:e.Product_Name}),(0,$.jsx)(b.c,{children:e.Retailer_Name}),(0,$.jsx)(b.c,{children:e.CostCenterGet}),(0,$.jsx)(b.c,{align:"right",children:e.Bill_Qty}),(0,$.jsx)(b.c,{align:"right",children:null===e||void 0===e?void 0:e.displayQuantity}),(0,$.jsx)(b.c,{align:"right",children:e.Rate||e.Item_Rate}),(0,$.jsx)(b.c,{align:"right",children:e.Pack}),(0,$.jsx)(b.c,{align:"right",children:e.Amount}),(0,$.jsx)(b.c,{align:"right",children:(0,$.jsx)(g.c,{size:"small",type:"number",value:e.Brokerage,onChange:e=>ye(l,"Brokerage",e.target.value),sx:{width:"80px"},inputProps:{step:"0.01"}})}),(0,$.jsx)(b.c,{align:"right",children:e.Brokerage*e.displayQuantity}),(0,$.jsx)(b.c,{align:"right",children:(0,$.jsx)(g.c,{size:"small",type:"number",value:e.Coolie,onChange:e=>ye(l,"Coolie",e.target.value),sx:{width:"80px"},inputProps:{step:"0.01"}})}),(0,$.jsx)(b.c,{align:"right",children:e.Coolie*e.displayQuantity}),(0,$.jsx)(b.c,{align:"right",children:(0,$.jsx)(g.c,{size:"small",type:"number",value:t,onChange:(o=e.Do_Id,s=e.Product_Id,e=>{const l=e.target.value,t=`${o}-${s}`;X((e=>({...e,[t]:l})))}),sx:{width:"120px"},inputProps:{step:"0.01"}})}),(0,$.jsx)(b.c,{align:"right",children:e.Narration}),(0,$.jsx)(b.c,{align:"right",children:r.toFixed(2)})]},l)}))})]}),(0,$.jsx)(f.c,{rowsPerPageOptions:[10,25,50,100],component:"div",count:H.length,rowsPerPage:V.rowsPerPage,page:V.page,onPageChange:(e,l)=>E({...V,page:l}),onRowsPerPageChange:e=>E({page:0,rowsPerPage:parseInt(e.target.value,10)})})]}),(0,$.jsx)(o.c,{sx:{mt:3,display:"flex",justifyContent:"flex-end"},children:(0,$.jsx)(d.c,{variant:"contained",color:"primary",startIcon:(0,$.jsx)(S.c,{}),onClick:async()=>{l();try{ce(!0);const e=H.map((e=>{const l=J[`${e.Do_Id}-${e.Product_Id}`];return{...e,brokerage:parseFloat(l)||0,Vilai_Vasi:parseFloat(l)||0,Vilaivasi_Rate:(parseFloat(l)||0)/100*(parseFloat(e.Bill_Qty)||0),Brok_Rate:null===e||void 0===e?void 0:e.Brokerage,Brok_Amt:(null===e||void 0===e?void 0:e.Brokerage)*(null===e||void 0===e?void 0:e.displayQuantity),Coolie_Rate:null===e||void 0===e?void 0:e.Coolie,Coolie_Amt:(null===e||void 0===e?void 0:e.Coolie)*(null===e||void 0===e?void 0:e.displayQuantity),Amount:null===e||void 0===e?void 0:e.Amount,Created_By:null===de||void 0===de?void 0:de.UserId}})),l=await(0,a.q)({address:"reports/brokerageNagal/create",method:"POST",bodyData:e,headers:{"Content-Type":"application/json"}});l.success?(B.m4.success("Nakal Created successfully!"),U((e=>({...e,refresh:!e.refresh})))):B.m4.error(l.message)}catch(e){B.m4.error("Save failed")}finally{ce(!1),t()}},disabled:ne,size:"large",children:ne?"Saving...":"Save Brokerage"})})]}):(0,$.jsx)($.Fragment,{children:(0,$.jsxs)(u.c,{component:s.c,children:[(0,$.jsxs)(m.c,{size:"small",children:[(0,$.jsx)(j.c,{children:(0,$.jsxs)(p.c,{sx:{backgroundColor:"primary.main"},children:[(0,$.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},children:"Broker"}),(0,$.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Total KGS"}),(0,$.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Total Bill Qty"}),(0,$.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Total_Amount"}),(0,$.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Total_Broker_Exp"}),(0,$.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Total_VilaiVasi"}),(0,$.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Total_Bags"}),(0,$.jsx)(b.c,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Actions"})]})}),(0,$.jsx)(v.c,{children:Ce.length>0?Ce.slice(O.page*O.rowsPerPage,O.page*O.rowsPerPage+O.rowsPerPage).map(((e,l)=>{var t;const a=te.find((l=>l.Broker_Name===e));return(0,$.jsxs)(r.Fragment,{children:[(0,$.jsxs)(p.c,{hover:!0,children:[(0,$.jsxs)(b.c,{children:[(0,$.jsx)(A.c,{size:"small",onClick:()=>(e=>se((l=>({...l,[e]:!l[e]}))))(e),children:oe[e]?(0,$.jsx)(I.c,{}):(0,$.jsx)(_.c,{})}),e]}),(0,$.jsx)(b.c,{align:"right",children:(null===a||void 0===a?void 0:a.Total_Qty)||"0.00"}),(0,$.jsx)(b.c,{align:"right",children:(null===a||void 0===a?void 0:a.Total_KGS)||"0.00"}),(0,$.jsx)(b.c,{align:"right",children:(null===a||void 0===a?void 0:a.Total_Amount)||"0.00"}),(0,$.jsx)(b.c,{align:"right",children:(null===a||void 0===a?void 0:a.Broker_Exp)||"0.00"}),(0,$.jsx)(b.c,{align:"right",children:(null===a||void 0===a?void 0:a.VilaiVasi)||"0.00"}),(0,$.jsx)(b.c,{align:"right",children:(null===a||void 0===a?void 0:a.Total_Bags)||0}),(0,$.jsxs)(b.c,{align:"right",children:[(0,$.jsx)(k.c,{title:"Preview PDF",children:(0,$.jsx)(A.c,{color:"primary",onClick:()=>{je(a),xe(!0)},children:(0,$.jsx)(R.c,{})})}),(0,$.jsx)(k.c,{title:"Preview Excel",children:(0,$.jsx)(A.c,{color:"primary",onClick:()=>{be(a),ue(!0)},children:(0,$.jsx)(L.c,{})})})]}),(0,$.jsx)(M,{open:he,onClose:()=>xe(!1),brokerData:me}),(0,$.jsx)(K,{open:ge,onClose:()=>ue(!1),brokerData:pe})]}),(0,$.jsx)(p.c,{children:(0,$.jsx)(b.c,{style:{padding:0},colSpan:7,children:(0,$.jsx)(F.c,{in:oe[e],timeout:"auto",unmountOnExit:!0,children:(0,$.jsxs)(o.c,{margin:1,children:[(0,$.jsxs)(c.c,{variant:"h6",gutterBottom:!0,component:"div",children:["Details for ",e]}),(0,$.jsxs)(m.c,{size:"small",children:[(0,$.jsx)(j.c,{children:(0,$.jsxs)(p.c,{children:[(0,$.jsx)(b.c,{children:"Date"}),(0,$.jsx)(b.c,{children:"Invoice No"}),(0,$.jsx)(b.c,{children:"Retailer"}),(0,$.jsx)(b.c,{children:"Alias"}),(0,$.jsx)(b.c,{children:"Product"}),(0,$.jsx)(b.c,{children:"Short Name"}),(0,$.jsx)(b.c,{align:"right",children:"QTY"}),(0,$.jsx)(b.c,{align:"right",children:"KGS"}),(0,$.jsx)(b.c,{align:"right",children:"Amount"}),(0,$.jsx)(b.c,{align:"right",children:"Vilai Vasi"}),(0,$.jsx)(b.c,{align:"right",children:"Vilai Amt"})]})}),(0,$.jsx)(v.c,{children:null===a||void 0===a||null===(t=a.Items)||void 0===t?void 0:t.map(((e,l)=>{var t;return(0,$.jsxs)(p.c,{children:[(0,$.jsx)(b.c,{children:e.Date}),(0,$.jsx)(b.c,{children:e.Do_Inv_No}),(0,$.jsx)(b.c,{children:e.Retailer_Name}),(0,$.jsx)(b.c,{children:e.Ledger_Alias}),(0,$.jsx)(b.c,{children:e.Product_Name}),(0,$.jsx)(b.c,{children:e.Short_Name}),(0,$.jsx)(b.c,{align:"right",children:e.QTY}),(0,$.jsx)(b.c,{align:"right",children:e.KGS}),(0,$.jsx)(b.c,{align:"right",children:null===(t=e.Amount)||void 0===t?void 0:t.toFixed(2)}),(0,$.jsx)(b.c,{align:"right",children:e.Vilai_Vasi}),(0,$.jsx)(b.c,{align:"right",children:e.Vilai_Vasi})]},l)}))})]})]})})})})]},l)})):(0,$.jsx)(p.c,{children:(0,$.jsx)(b.c,{colSpan:7,align:"center",children:"No data found"})})})]}),(0,$.jsx)(f.c,{rowsPerPageOptions:[10,25,50,100],component:"div",count:Ce.length,rowsPerPage:O.rowsPerPage,page:O.page,onPageChange:(e,l)=>W({...O,page:l}),onRowsPerPageChange:e=>W({page:0,rowsPerPage:parseInt(e.target.value,10)})})]})})]}),(0,$.jsxs)(w.c,{open:Z.filterDialog&&0===Q,onClose:Ae,maxWidth:"sm",fullWidth:!0,children:[(0,$.jsxs)(y.c,{children:[(0,$.jsxs)(o.c,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,$.jsx)(c.c,{variant:"h6",children:"Data Entry Filters"}),(0,$.jsx)(A.c,{onClick:Ae,children:(0,$.jsx)(D.c,{})})]}),(0,$.jsxs)(n.cp,{container:!0,spacing:2,children:[(0,$.jsx)(n.cp,{item:!0,xs:12,children:(0,$.jsx)(g.c,{fullWidth:!0,type:"date",label:"From Date",value:Z.FromDate,onChange:e=>U((l=>({...l,FromDate:e.target.value}))),InputLabelProps:{shrink:!0}})}),(0,$.jsx)(n.cp,{item:!0,xs:12,children:(0,$.jsx)(g.c,{fullWidth:!0,type:"date",label:"To Date",value:Z.ToDate,onChange:e=>U((l=>({...l,ToDate:e.target.value}))),InputLabelProps:{shrink:!0}})}),(0,$.jsx)(n.cp,{item:!0,xs:2,style:{display:"flex",alignItems:"flex-end"}}),(0,$.jsx)(n.cp,{item:!0,xs:12,children:(0,$.jsx)(P.cp,{fullWidth:!0,label:"Brokers",value:Z.Broker,onChange:e=>U((l=>({...l,Broker:e}))),options:[{value:"",label:"ALL Brokers"},...G.broker],styles:T.cF,menuPortalTarget:document.body,isSearchable:!0,placeholder:"Select Broker"})})]})]}),(0,$.jsxs)(N.c,{children:[(0,$.jsx)(d.c,{onClick:Ae,children:"Cancel"}),(0,$.jsx)(d.c,{variant:"contained",onClick:()=>{fe(""),X((e=>{const l={...e};return H.forEach((e=>{const t=`${e.Do_Id}-${e.Product_Id}`;l[t]=""})),l})),U((e=>({...e,refresh:!e.refresh,filterDialog:!1})))},children:"Apply Filters"})]})]}),(0,$.jsxs)(w.c,{open:ee.filterDialog&&1===Q,onClose:ke,maxWidth:"sm",fullWidth:!0,children:[(0,$.jsxs)(y.c,{children:[(0,$.jsxs)(o.c,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,$.jsx)(c.c,{variant:"h6",children:"Listing Filters"}),(0,$.jsx)(A.c,{onClick:ke,children:(0,$.jsx)(D.c,{})})]}),(0,$.jsxs)(n.cp,{container:!0,spacing:2,children:[(0,$.jsx)(n.cp,{item:!0,xs:5,children:(0,$.jsx)(g.c,{fullWidth:!0,type:"date",label:"From Date",value:ee.FromDate,onChange:e=>le((l=>({...l,FromDate:e.target.value}))),InputLabelProps:{shrink:!0}})}),(0,$.jsx)(n.cp,{item:!0,xs:5,children:(0,$.jsx)(g.c,{fullWidth:!0,type:"date",label:"To Date",value:ee.ToDate,onChange:e=>le((l=>({...l,ToDate:e.target.value}))),InputLabelProps:{shrink:!0}})}),(0,$.jsx)(n.cp,{item:!0,xs:2,style:{display:"flex",alignItems:"flex-end"},children:(0,$.jsx)(d.c,{variant:"contained",color:"primary",onClick:()=>{le((e=>({...e,refresh:!e.refresh})))},style:{height:"30px",width:"100%"},children:"Search"})}),(0,$.jsx)(n.cp,{item:!0,xs:12,children:(0,$.jsx)(P.cp,{fullWidth:!0,value:ee.VilaiVasiZero,onChange:e=>le((l=>({...l,VilaiVasiZero:e}))),options:[{value:"",label:"All"},{value:"zero",label:"VilaiVasi Zero"},{value:"nonzero",label:"VilaiVasi Non-Zero"}],styles:T.cF,menuPortalTarget:document.body,placeholder:"VilaiVasi Zero/Non-Zero"})}),(0,$.jsx)(n.cp,{item:!0,xs:12,children:(0,$.jsx)(P.cp,{fullWidth:!0,label:"Brokers",value:ee.Broker,onChange:e=>le((l=>({...l,Broker:e}))),options:[{value:"",label:"ALL Brokers"},...G.broker],styles:T.cF,menuPortalTarget:document.body,isSearchable:!0,placeholder:"Select Broker"})}),(0,$.jsx)(n.cp,{item:!0,xs:12,children:(0,$.jsx)(P.cp,{fullWidth:!0,label:"Ledger",value:ee.Ledger,onChange:e=>le((l=>({...l,Ledger:e}))),options:[{value:"",label:"ALL Ledger"},...ae.ledgers],styles:T.cF,menuPortalTarget:document.body,isSearchable:!0,placeholder:"Select Ledger"})}),(0,$.jsx)(n.cp,{item:!0,xs:12,children:(0,$.jsx)(P.cp,{fullWidth:!0,label:"Item",value:ee.Item,onChange:e=>le((l=>({...l,Item:e}))),options:[{value:"",label:"ALL Item"},...ae.items],styles:T.cF,menuPortalTarget:document.body,isSearchable:!0,placeholder:"Select Item"})})]})]}),(0,$.jsxs)(N.c,{children:[(0,$.jsx)(d.c,{onClick:ke,children:"Cancel"}),(0,$.jsx)(d.c,{variant:"contained",onClick:()=>{le((e=>({...e,refresh:!e.refresh,filterDialog:!1})))},children:"Apply Filters"})]})]})]})}}}]);
//# sourceMappingURL=4252.69ee28e0.chunk.js.map