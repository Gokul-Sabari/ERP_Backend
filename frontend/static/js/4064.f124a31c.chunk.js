"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[4064],{14064:(e,i,s)=>{s.r(i),s.d(i,{default:()=>M});var t=s(69060),n=s(82656),c=s(4488),l=s(90048),d=s(89e3),a=s(27454),o=s(700),h=s(52924),r=s(5548),g=s(99904),x=s(85624),u=s(33856),j=s(58612),m=s(29504),v=s(56416),R=s(56480),S=(s(21680),s(40656)),f=s(77536),p=s(62344),C=s(1908),b=s(82496);const _=(e,i,s,t,n)=>{t&&t(),(0,C.q)({address:"authorization/userRights",method:"POST",bodyData:{MenuId:i,User:Number(s),ReadRights:!0===e.readRights?1:0,AddRights:!0===e.addRights?1:0,EditRights:!0===e.editRights?1:0,DeleteRights:!0===e.deleteRights?1:0,PrintRights:!0===e.printRights?1:0},headers:{"Content-Type":"application/json"}}).then((e=>{e.success||R.m4.error(e.message)})).catch((e=>console.error(e))).finally((()=>{n&&n()}))},z=e=>{var i,s;let{UserId:R,data:S,loadingOn:f,loadingOff:C}=e;const[z,k]=(0,t.useState)(!1),[M,A]=(0,t.useState)(1===S.Read_Rights),[w,O]=(0,t.useState)(1===S.Add_Rights),[y,E]=(0,t.useState)(1===S.Edit_Rights),[U,D]=(0,t.useState)(1===S.Delete_Rights),[H,N]=(0,t.useState)(1===S.Print_Rights),[P,B]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{A(1===S.Read_Rights),O(1===S.Add_Rights),E(1===S.Edit_Rights),D(1===S.Delete_Rights),N(1===S.Print_Rights),B(!1)}),[S]),(0,t.useEffect)((()=>{!0===P&&_({readRights:M,addRights:w,editRights:y,deleteRights:U,printRights:H},S.id,R,f,C)}),[M,w,y,U,H]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(a.c,{hover:!0,children:[(0,b.jsx)(o.c,{children:S.id}),(0,b.jsx)(o.c,{children:S.name}),(0,b.jsx)(o.c,{children:(0,b.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:M,size:"small",onChange:()=>{B(!0),A(!M)}})}),(0,b.jsx)(o.c,{children:(0,b.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:w,size:"small",onChange:()=>{B(!0),O(!w)}})}),(0,b.jsx)(o.c,{children:(0,b.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:y,size:"small",onChange:()=>{B(!0),E(!y)}})}),(0,b.jsx)(o.c,{children:(0,b.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:U,size:"small",onChange:()=>{B(!0),D(!U)}})}),(0,b.jsx)(o.c,{children:(0,b.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:H,size:"small",onChange:()=>{B(!0),N(!H)}})}),(0,b.jsx)(o.c,{children:(null===S||void 0===S||null===(i=S.SubMenu)||void 0===i?void 0:i.length)>0&&(0,b.jsx)(r.c,{"aria-label":"expand row",size:"small",onClick:()=>k(!z),children:(0,b.jsx)(v.c,{})})})]}),(0,b.jsxs)(n.c,{open:z,onClose:()=>k(!z),maxWidth:"lg",fullWidth:!0,children:[(0,b.jsxs)(c.c,{children:[(0,b.jsx)("h3",{style:{paddingBottom:"0.5em"},children:"Sub Menu"}),(0,b.jsx)(g.c,{component:x.c,sx:{maxHeight:650},children:(0,b.jsxs)(u.c,{stickyHeader:!0,"aria-label":"simple table",children:[(0,b.jsx)(j.c,{children:(0,b.jsx)(a.c,{children:p.o$.map((e=>(0,b.jsx)(o.c,{variant:e.variant,align:e.align,width:e.width,sx:{backgroundColor:"rgb(15, 11, 42)",color:"white"},children:"Action"===e.headname?"Child Menu":e.headname},e.id)))})}),(0,b.jsx)(m.c,{children:null===S||void 0===S||null===(s=S.SubMenu)||void 0===s?void 0:s.map(((e,i)=>(0,b.jsx)(I,{data:e,UserId:R,loadingOn:f,loadingOff:C},i)))})]})})]}),(0,b.jsx)(l.c,{children:(0,b.jsx)(d.c,{onClick:()=>k(!z),color:"primary",children:"Close"})})]})]})},I=e=>{var i,s;let{data:R,UserId:S,loadingOn:f,loadingOff:C}=e;const[z,I]=(0,t.useState)(!1),[M,A]=(0,t.useState)(1===R.Read_Rights),[w,O]=(0,t.useState)(1===R.Add_Rights),[y,E]=(0,t.useState)(1===R.Edit_Rights),[U,D]=(0,t.useState)(1===R.Delete_Rights),[H,N]=(0,t.useState)(1===R.Print_Rights),[P,B]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{A(1===R.Read_Rights),O(1===R.Add_Rights),E(1===R.Edit_Rights),D(1===R.Delete_Rights),N(1===R.Print_Rights),B(!1)}),[R]),(0,t.useEffect)((()=>{!0===P&&_({readRights:M,addRights:w,editRights:y,deleteRights:U,printRights:H},R.id,S,f,C)}),[M,w,y,U,H]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(a.c,{hover:!0,children:[(0,b.jsx)(o.c,{children:R.id}),(0,b.jsx)(o.c,{children:R.name}),(0,b.jsx)(o.c,{children:(0,b.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:M,size:"small",onChange:()=>{B(!0),A(!M)}})}),(0,b.jsx)(o.c,{children:(0,b.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:w,size:"small",onChange:()=>{B(!0),O(!w)}})}),(0,b.jsx)(o.c,{children:(0,b.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:y,size:"small",onChange:()=>{B(!0),E(!y)}})}),(0,b.jsx)(o.c,{children:(0,b.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:U,size:"small",onChange:()=>{B(!0),D(!U)}})}),(0,b.jsx)(o.c,{children:(0,b.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:H,size:"small",onChange:()=>{B(!0),N(!H)}})}),(0,b.jsx)(o.c,{children:(null===R||void 0===R||null===(i=R.ChildMenu)||void 0===i?void 0:i.length)>0&&(0,b.jsx)(r.c,{"aria-label":"expand row",size:"small",onClick:()=>I(!z),children:(0,b.jsx)(v.c,{})})})]}),(0,b.jsxs)(n.c,{open:z,onClose:()=>I(!z),maxWidth:"lg",fullWidth:!0,children:[(0,b.jsxs)(c.c,{children:[(0,b.jsx)("h3",{style:{paddingBottom:"0.5em"},children:"Child Menu"}),(0,b.jsx)(g.c,{component:x.c,sx:{maxHeight:650},children:(0,b.jsxs)(u.c,{stickyHeader:!0,"aria-label":"simple table",children:[(0,b.jsx)(j.c,{children:(0,b.jsx)(a.c,{children:p.o$.map((e=>(0,b.jsx)(o.c,{variant:e.variant,align:e.align,width:e.width,sx:{backgroundColor:"rgb(15, 11, 42)",color:"white"},children:e.headname},e.id)))})}),(0,b.jsx)(m.c,{children:null===R||void 0===R||null===(s=R.ChildMenu)||void 0===s?void 0:s.map(((e,i)=>(0,b.jsx)(k,{data:e,UserId:S},i)))})]})})]}),(0,b.jsx)(l.c,{children:(0,b.jsx)(d.c,{onClick:()=>I(!z),color:"primary",children:"Close"})})]})]})},k=e=>{let{data:i,UserId:s,loadingOn:n,loadingOff:c}=e;const[l,d]=(0,t.useState)(1===i.Read_Rights),[r,g]=(0,t.useState)(1===i.Add_Rights),[x,u]=(0,t.useState)(1===i.Edit_Rights),[j,m]=(0,t.useState)(1===i.Delete_Rights),[v,R]=(0,t.useState)(1===i.Print_Rights),[S,f]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{d(1===i.Read_Rights),g(1===i.Add_Rights),u(1===i.Edit_Rights),m(1===i.Delete_Rights),R(1===i.Print_Rights),f(!1)}),[i]),(0,t.useEffect)((()=>{!0===S&&_({readRights:l,addRights:r,editRights:x,deleteRights:j,printRights:v},i.id,s,n,c)}),[l,r,x,j,v]),(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(a.c,{hover:!0,children:[(0,b.jsx)(o.c,{children:i.id}),(0,b.jsx)(o.c,{children:i.name}),(0,b.jsx)(o.c,{children:(0,b.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:l,size:"small",onChange:()=>{f(!0),d(!l)}})}),(0,b.jsx)(o.c,{children:(0,b.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:r,size:"small",onChange:()=>{f(!0),g(!r)}})}),(0,b.jsx)(o.c,{children:(0,b.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:x,size:"small",onChange:()=>{f(!0),u(!x)}})}),(0,b.jsx)(o.c,{children:(0,b.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:j,size:"small",onChange:()=>{f(!0),m(!j)}})}),(0,b.jsx)(o.c,{children:(0,b.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:v,size:"small",onChange:()=>{f(!0),R(!v)}})}),(0,b.jsx)(o.c,{})]})})},M=e=>{const[i,s]=(0,t.useState)([]),[n,c]=(0,t.useState)([]),[l,d]=(0,t.useState)([]),h=localStorage.getItem("user"),r=JSON.parse(h),[v,R]=(0,t.useState)({value:null===r||void 0===r?void 0:r.Autheticate_Id,label:null===r||void 0===r?void 0:r.Name}),[_,I]=(0,t.useState)(null===r||void 0===r?void 0:r.UserId),{contextObj:M}=(0,t.useContext)(f.a);(0,t.useEffect)((()=>{(0,C.q)({address:"authorization/userRights",headers:{Authorization:v.value}}).then((e=>{e.success&&(s(e.data),c(e.others.subRoutings))}))}),[v]),(0,t.useEffect)((()=>{(0,C.q)({address:"masters/users?Company_id=".concat(null===r||void 0===r?void 0:r.Company_id)}).then((e=>{e.success&&d(e.data)})).catch((e=>console.log(e)))}),[null===r||void 0===r?void 0:r.Company_id]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"row",children:(0,b.jsx)("div",{className:"col-sm-4 pt-1",children:(0,b.jsx)(S.cp,{value:v,onChange:e=>(e=>{if(e){const i=l.find((i=>i.Autheticate_Id===e.value));R({value:null===i||void 0===i?void 0:i.Autheticate_Id,label:i.Name}||{value:null===r||void 0===r?void 0:r.Autheticate_Id,label:null===r||void 0===r?void 0:r.Name}),I((null===i||void 0===i?void 0:i.UserId)||r.UserId)}})(e),options:[...l.map((e=>({value:e.Autheticate_Id,label:e.Name})))],styles:p.cF,isSearchable:!0,placeholder:"Select User"})})}),(0,b.jsx)("br",{}),(0,b.jsx)("h6",{style:{marginBottom:"0.5em",borderBottom:"2px solid blue",width:"fit-content"},children:"Menu Access Control"}),(0,b.jsx)(g.c,{component:x.c,sx:{maxHeight:650},title:"Menu Access Control",children:(0,b.jsxs)(u.c,{stickyHeader:!0,"aria-label":"simple table",children:[(0,b.jsx)(j.c,{children:(0,b.jsx)(a.c,{children:p.o$.map((e=>(0,b.jsx)(o.c,{variant:e.variant,align:e.align,width:e.width,sx:{backgroundColor:"rgb(15, 11, 42)",color:"white"},children:"Action"===e.headname?"Sub Menu":e.headname},e.id)))})}),(0,b.jsx)(m.c,{children:i.map(((i,s)=>(0,b.jsx)(z,{data:i,UserId:_,loadingOn:e.loadingOn,loadingOff:e.loadingOff},s)))})]})}),(0,b.jsx)("br",{}),(0,b.jsx)("h6",{style:{marginBottom:"0.5em",borderBottom:"2px solid blue",width:"fit-content"},children:"Sub-Routings Access Control"}),n.length>0&&(0,b.jsx)(g.c,{component:x.c,sx:{maxHeight:650},title:"Sub-Routings Access Control",children:(0,b.jsxs)(u.c,{stickyHeader:!0,"aria-label":"simple table",size:"small",children:[(0,b.jsx)(j.c,{children:(0,b.jsx)(a.c,{children:p.o$.map((e=>(0,b.jsx)(o.c,{variant:e.variant,align:e.align,width:e.width,sx:{backgroundColor:"rgb(15, 11, 42)",color:"white"},children:"Action"===e.headname?"Sub Menu":e.headname},e.id)))})}),(0,b.jsx)(m.c,{children:n.map(((i,s)=>(0,b.jsx)(k,{data:i,UserId:_,loadingOn:e.loadingOn,loadingOff:e.loadingOff},s)))})]})})]})}}}]);
//# sourceMappingURL=4064.f124a31c.chunk.js.map